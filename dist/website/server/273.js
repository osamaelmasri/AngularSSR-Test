"use strict";var __defProp=Object.defineProperty,__name=(target,value)=>__defProp(target,"name",{value,configurable:!0});exports.id=273,exports.ids=[273],exports.modules={77273:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{PagesModule:()=>PagesModule});var common=__webpack_require__(69808),router=__webpack_require__(74202),core=__webpack_require__(5e3);class PagesRoutingModule{}__name(PagesRoutingModule,"PagesRoutingModule"),PagesRoutingModule.\u0275fac=__name(function(t){return new(t||PagesRoutingModule)},"PagesRoutingModule_Factory"),PagesRoutingModule.\u0275mod=core.oAB({type:PagesRoutingModule}),PagesRoutingModule.\u0275inj=core.cJS({imports:[router.Bz.forChild([]),router.Bz]});var coreui_angular=__webpack_require__(67382),coreui_icons_angular=__webpack_require__(1728),fesm2015_forms=__webpack_require__(93075),cjs=__webpack_require__(76477),operators=__webpack_require__(83292);const camelToDashed=__name(str=>str.replace(/[A-Z]/g,m=>`-${m.toLowerCase()}`),"camelToDashed"),cleanObject=__name(obj=>{const cleanObj={};return Object.keys(obj).forEach(prop=>{obj[prop]&&(cleanObj[prop]=obj[prop])}),cleanObj},"cleanObject"),toStyleString=__name(obj=>{const styles=cleanObject(obj);return Object.entries(styles).map(([k,v])=>`${camelToDashed(k)}:${v}`).join(";")},"toStyleString");class ngx_editor_utils_NgxEditorError extends Error{constructor(message){super(message),this.name=this.constructor.name}}function OrderedMap(content){this.content=content}__name(ngx_editor_utils_NgxEditorError,"ngx_editor_utils_NgxEditorError"),__name(OrderedMap,"OrderedMap"),OrderedMap.prototype={constructor:OrderedMap,find:function(key){for(var i=0;i<this.content.length;i+=2)if(this.content[i]===key)return i;return-1},get:function(key){var found2=this.find(key);return-1==found2?void 0:this.content[found2+1]},update:function(key,value,newKey){var self=newKey&&newKey!=key?this.remove(newKey):this,found2=self.find(key),content=self.content.slice();return-1==found2?content.push(newKey||key,value):(content[found2+1]=value,newKey&&(content[found2]=newKey)),new OrderedMap(content)},remove:function(key){var found2=this.find(key);if(-1==found2)return this;var content=this.content.slice();return content.splice(found2,2),new OrderedMap(content)},addToStart:function(key,value){return new OrderedMap([key,value].concat(this.remove(key).content))},addToEnd:function(key,value){var content=this.remove(key).content.slice();return content.push(key,value),new OrderedMap(content)},addBefore:function(place,key,value){var without=this.remove(key),content=without.content.slice(),found2=without.find(place);return content.splice(-1==found2?content.length:found2,0,key,value),new OrderedMap(content)},forEach:function(f){for(var i=0;i<this.content.length;i+=2)f(this.content[i],this.content[i+1])},prepend:function(map){return(map=OrderedMap.from(map)).size?new OrderedMap(map.content.concat(this.subtract(map).content)):this},append:function(map){return(map=OrderedMap.from(map)).size?new OrderedMap(this.subtract(map).content.concat(map.content)):this},subtract:function(map){var result=this;map=OrderedMap.from(map);for(var i=0;i<map.content.length;i+=2)result=result.remove(map.content[i]);return result},get size(){return this.content.length>>1}},OrderedMap.from=function(value){if(value instanceof OrderedMap)return value;var content=[];if(value)for(var prop in value)content.push(prop,value[prop]);return new OrderedMap(content)};const dist=OrderedMap;function findDiffStart(a,b,pos){for(let i=0;;i++){if(i==a.childCount||i==b.childCount)return a.childCount==b.childCount?null:pos;let childA=a.child(i),childB=b.child(i);if(childA!=childB){if(!childA.sameMarkup(childB))return pos;if(childA.isText&&childA.text!=childB.text){for(let j=0;childA.text[j]==childB.text[j];j++)pos++;return pos}if(childA.content.size||childB.content.size){let inner=findDiffStart(childA.content,childB.content,pos+1);if(null!=inner)return inner}pos+=childA.nodeSize}else pos+=childA.nodeSize}}function findDiffEnd(a,b,posA,posB){for(let iA=a.childCount,iB=b.childCount;;){if(0==iA||0==iB)return iA==iB?null:{a:posA,b:posB};let childA=a.child(--iA),childB=b.child(--iB),size2=childA.nodeSize;if(childA!=childB){if(!childA.sameMarkup(childB))return{a:posA,b:posB};if(childA.isText&&childA.text!=childB.text){let same=0,minSize=Math.min(childA.text.length,childB.text.length);for(;same<minSize&&childA.text[childA.text.length-same-1]==childB.text[childB.text.length-same-1];)same++,posA--,posB--;return{a:posA,b:posB}}if(childA.content.size||childB.content.size){let inner=findDiffEnd(childA.content,childB.content,posA-1,posB-1);if(inner)return inner}posA-=size2,posB-=size2}else posA-=size2,posB-=size2}}__name(findDiffStart,"findDiffStart"),__name(findDiffEnd,"findDiffEnd");class dist_Fragment{constructor(content,size2){if(this.content=content,this.size=size2||0,null==size2)for(let i=0;i<content.length;i++)this.size+=content[i].nodeSize}nodesBetween(from,to,f,nodeStart=0,parent){for(let i=0,pos=0;pos<to;i++){let child=this.content[i],end=pos+child.nodeSize;if(end>from&&!1!==f(child,nodeStart+pos,parent||null,i)&&child.content.size){let start=pos+1;child.nodesBetween(Math.max(0,from-start),Math.min(child.content.size,to-start),f,nodeStart+start)}pos=end}}descendants(f){this.nodesBetween(0,this.size,f)}textBetween(from,to,blockSeparator,leafText){let text="",separated=!0;return this.nodesBetween(from,to,(node,pos)=>{node.isText?(text+=node.text.slice(Math.max(from,pos)-pos,to-pos),separated=!blockSeparator):node.isLeaf?(leafText?text+="function"==typeof leafText?leafText(node):leafText:node.type.spec.leafText&&(text+=node.type.spec.leafText(node)),separated=!blockSeparator):!separated&&node.isBlock&&(text+=blockSeparator,separated=!0)},0),text}append(other){if(!other.size)return this;if(!this.size)return other;let last=this.lastChild,first=other.firstChild,content=this.content.slice(),i=0;for(last.isText&&last.sameMarkup(first)&&(content[content.length-1]=last.withText(last.text+first.text),i=1);i<other.content.length;i++)content.push(other.content[i]);return new dist_Fragment(content,this.size+other.size)}cut(from,to=this.size){if(0==from&&to==this.size)return this;let result=[],size2=0;if(to>from)for(let i=0,pos=0;pos<to;i++){let child=this.content[i],end=pos+child.nodeSize;end>from&&((pos<from||end>to)&&(child=child.isText?child.cut(Math.max(0,from-pos),Math.min(child.text.length,to-pos)):child.cut(Math.max(0,from-pos-1),Math.min(child.content.size,to-pos-1))),result.push(child),size2+=child.nodeSize),pos=end}return new dist_Fragment(result,size2)}cutByIndex(from,to){return from==to?dist_Fragment.empty:0==from&&to==this.content.length?this:new dist_Fragment(this.content.slice(from,to))}replaceChild(index,node){let current=this.content[index];if(current==node)return this;let copy2=this.content.slice(),size2=this.size+node.nodeSize-current.nodeSize;return copy2[index]=node,new dist_Fragment(copy2,size2)}addToStart(node){return new dist_Fragment([node].concat(this.content),this.size+node.nodeSize)}addToEnd(node){return new dist_Fragment(this.content.concat(node),this.size+node.nodeSize)}eq(other){if(this.content.length!=other.content.length)return!1;for(let i=0;i<this.content.length;i++)if(!this.content[i].eq(other.content[i]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(index){let found2=this.content[index];if(!found2)throw new RangeError("Index "+index+" out of range for "+this);return found2}maybeChild(index){return this.content[index]||null}forEach(f){for(let i=0,p=0;i<this.content.length;i++){let child=this.content[i];f(child,p,i),p+=child.nodeSize}}findDiffStart(other,pos=0){return findDiffStart(this,other,pos)}findDiffEnd(other,pos=this.size,otherPos=other.size){return findDiffEnd(this,other,pos,otherPos)}findIndex(pos,round2=-1){if(0==pos)return retIndex(0,pos);if(pos==this.size)return retIndex(this.content.length,pos);if(pos>this.size||pos<0)throw new RangeError(`Position ${pos} outside of fragment (${this})`);for(let i=0,curPos=0;;i++){let end=curPos+this.child(i).nodeSize;if(end>=pos)return end==pos||round2>0?retIndex(i+1,end):retIndex(i,curPos);curPos=end}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(n=>n.toJSON()):null}static fromJSON(schema2,value){if(!value)return dist_Fragment.empty;if(!Array.isArray(value))throw new RangeError("Invalid input for Fragment.fromJSON");return new dist_Fragment(value.map(schema2.nodeFromJSON))}static fromArray(array){if(!array.length)return dist_Fragment.empty;let joined,size2=0;for(let i=0;i<array.length;i++){let node=array[i];size2+=node.nodeSize,i&&node.isText&&array[i-1].sameMarkup(node)?(joined||(joined=array.slice(0,i)),joined[joined.length-1]=node.withText(joined[joined.length-1].text+node.text)):joined&&joined.push(node)}return new dist_Fragment(joined||array,size2)}static from(nodes2){if(!nodes2)return dist_Fragment.empty;if(nodes2 instanceof dist_Fragment)return nodes2;if(Array.isArray(nodes2))return this.fromArray(nodes2);if(nodes2.attrs)return new dist_Fragment([nodes2],nodes2.nodeSize);throw new RangeError("Can not convert "+nodes2+" to a Fragment"+(nodes2.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}__name(dist_Fragment,"dist_Fragment"),dist_Fragment.empty=new dist_Fragment([],0);const found={index:0,offset:0};function retIndex(index,offset2){return found.index=index,found.offset=offset2,found}function compareDeep(a,b){if(a===b)return!0;if(!a||"object"!=typeof a||!b||"object"!=typeof b)return!1;let array=Array.isArray(a);if(Array.isArray(b)!=array)return!1;if(array){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(!compareDeep(a[i],b[i]))return!1}else{for(let p in a)if(!(p in b)||!compareDeep(a[p],b[p]))return!1;for(let p in b)if(!(p in a))return!1}return!0}__name(retIndex,"retIndex"),__name(compareDeep,"compareDeep");class dist_Mark{constructor(type,attrs){this.type=type,this.attrs=attrs}addToSet(set){let copy2,placed=!1;for(let i=0;i<set.length;i++){let other=set[i];if(this.eq(other))return set;if(this.type.excludes(other.type))copy2||(copy2=set.slice(0,i));else{if(other.type.excludes(this.type))return set;!placed&&other.type.rank>this.type.rank&&(copy2||(copy2=set.slice(0,i)),copy2.push(this),placed=!0),copy2&&copy2.push(other)}}return copy2||(copy2=set.slice()),placed||copy2.push(this),copy2}removeFromSet(set){for(let i=0;i<set.length;i++)if(this.eq(set[i]))return set.slice(0,i).concat(set.slice(i+1));return set}isInSet(set){for(let i=0;i<set.length;i++)if(this.eq(set[i]))return!0;return!1}eq(other){return this==other||this.type==other.type&&compareDeep(this.attrs,other.attrs)}toJSON(){let obj={type:this.type.name};for(let _ in this.attrs){obj.attrs=this.attrs;break}return obj}static fromJSON(schema2,json){if(!json)throw new RangeError("Invalid input for Mark.fromJSON");let type=schema2.marks[json.type];if(!type)throw new RangeError(`There is no mark type ${json.type} in this schema`);return type.create(json.attrs)}static sameSet(a,b){if(a==b)return!0;if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(!a[i].eq(b[i]))return!1;return!0}static setFrom(marks2){if(!marks2||Array.isArray(marks2)&&0==marks2.length)return dist_Mark.none;if(marks2 instanceof dist_Mark)return[marks2];let copy2=marks2.slice();return copy2.sort((a,b)=>a.type.rank-b.type.rank),copy2}}__name(dist_Mark,"dist_Mark"),dist_Mark.none=[];class ReplaceError extends Error{}__name(ReplaceError,"ReplaceError");class dist_Slice{constructor(content,openStart,openEnd){this.content=content,this.openStart=openStart,this.openEnd=openEnd}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(pos,fragment){let content=insertInto(this.content,pos+this.openStart,fragment);return content&&new dist_Slice(content,this.openStart,this.openEnd)}removeBetween(from,to){return new dist_Slice(removeRange(this.content,from+this.openStart,to+this.openStart),this.openStart,this.openEnd)}eq(other){return this.content.eq(other.content)&&this.openStart==other.openStart&&this.openEnd==other.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let json={content:this.content.toJSON()};return this.openStart>0&&(json.openStart=this.openStart),this.openEnd>0&&(json.openEnd=this.openEnd),json}static fromJSON(schema2,json){if(!json)return dist_Slice.empty;let openStart=json.openStart||0,openEnd=json.openEnd||0;if("number"!=typeof openStart||"number"!=typeof openEnd)throw new RangeError("Invalid input for Slice.fromJSON");return new dist_Slice(dist_Fragment.fromJSON(schema2,json.content),openStart,openEnd)}static maxOpen(fragment,openIsolating=!0){let openStart=0,openEnd=0;for(let n=fragment.firstChild;n&&!n.isLeaf&&(openIsolating||!n.type.spec.isolating);n=n.firstChild)openStart++;for(let n=fragment.lastChild;n&&!n.isLeaf&&(openIsolating||!n.type.spec.isolating);n=n.lastChild)openEnd++;return new dist_Slice(fragment,openStart,openEnd)}}function removeRange(content,from,to){let{index,offset:offset2}=content.findIndex(from),child=content.maybeChild(index),{index:indexTo,offset:offsetTo}=content.findIndex(to);if(offset2==from||child.isText){if(offsetTo!=to&&!content.child(indexTo).isText)throw new RangeError("Removing non-flat range");return content.cut(0,from).append(content.cut(to))}if(index!=indexTo)throw new RangeError("Removing non-flat range");return content.replaceChild(index,child.copy(removeRange(child.content,from-offset2-1,to-offset2-1)))}function insertInto(content,dist2,insert,parent){let{index,offset:offset2}=content.findIndex(dist2),child=content.maybeChild(index);if(offset2==dist2||child.isText)return parent&&!parent.canReplace(index,index,insert)?null:content.cut(0,dist2).append(insert).append(content.cut(dist2));let inner=insertInto(child.content,dist2-offset2-1,insert);return inner&&content.replaceChild(index,child.copy(inner))}function replace($from,$to,slice){if(slice.openStart>$from.depth)throw new ReplaceError("Inserted content deeper than insertion position");if($from.depth-slice.openStart!=$to.depth-slice.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter($from,$to,slice,0)}function replaceOuter($from,$to,slice,depth){let index=$from.index(depth),node=$from.node(depth);if(index==$to.index(depth)&&depth<$from.depth-slice.openStart){let inner=replaceOuter($from,$to,slice,depth+1);return node.copy(node.content.replaceChild(index,inner))}if(slice.content.size){if(slice.openStart||slice.openEnd||$from.depth!=depth||$to.depth!=depth){let{start,end}=prepareSliceForReplace(slice,$from);return dist_close(node,replaceThreeWay($from,start,end,$to,depth))}{let parent=$from.parent,content=parent.content;return dist_close(parent,content.cut(0,$from.parentOffset).append(slice.content).append(content.cut($to.parentOffset)))}}return dist_close(node,replaceTwoWay($from,$to,depth))}function checkJoin(main,sub){if(!sub.type.compatibleContent(main.type))throw new ReplaceError("Cannot join "+sub.type.name+" onto "+main.type.name)}function joinable($before,$after,depth){let node=$before.node(depth);return checkJoin(node,$after.node(depth)),node}function addNode(child,target){let last=target.length-1;last>=0&&child.isText&&child.sameMarkup(target[last])?target[last]=child.withText(target[last].text+child.text):target.push(child)}function addRange($start,$end,depth,target){let node=($end||$start).node(depth),startIndex=0,endIndex=$end?$end.index(depth):node.childCount;$start&&(startIndex=$start.index(depth),$start.depth>depth?startIndex++:$start.textOffset&&(addNode($start.nodeAfter,target),startIndex++));for(let i=startIndex;i<endIndex;i++)addNode(node.child(i),target);$end&&$end.depth==depth&&$end.textOffset&&addNode($end.nodeBefore,target)}function dist_close(node,content){if(!node.type.validContent(content))throw new ReplaceError("Invalid content for node "+node.type.name);return node.copy(content)}function replaceThreeWay($from,$start,$end,$to,depth){let openStart=$from.depth>depth&&joinable($from,$start,depth+1),openEnd=$to.depth>depth&&joinable($end,$to,depth+1),content=[];return addRange(null,$from,depth,content),openStart&&openEnd&&$start.index(depth)==$end.index(depth)?(checkJoin(openStart,openEnd),addNode(dist_close(openStart,replaceThreeWay($from,$start,$end,$to,depth+1)),content)):(openStart&&addNode(dist_close(openStart,replaceTwoWay($from,$start,depth+1)),content),addRange($start,$end,depth,content),openEnd&&addNode(dist_close(openEnd,replaceTwoWay($end,$to,depth+1)),content)),addRange($to,null,depth,content),new dist_Fragment(content)}function replaceTwoWay($from,$to,depth){let content=[];if(addRange(null,$from,depth,content),$from.depth>depth){addNode(dist_close(joinable($from,$to,depth+1),replaceTwoWay($from,$to,depth+1)),content)}return addRange($to,null,depth,content),new dist_Fragment(content)}function prepareSliceForReplace(slice,$along){let extra=$along.depth-slice.openStart,node=$along.node(extra).copy(slice.content);for(let i=extra-1;i>=0;i--)node=$along.node(i).copy(dist_Fragment.from(node));return{start:node.resolveNoCache(slice.openStart+extra),end:node.resolveNoCache(node.content.size-slice.openEnd-extra)}}__name(dist_Slice,"dist_Slice"),dist_Slice.empty=new dist_Slice(dist_Fragment.empty,0,0),__name(removeRange,"removeRange"),__name(insertInto,"insertInto"),__name(replace,"replace"),__name(replaceOuter,"replaceOuter"),__name(checkJoin,"checkJoin"),__name(joinable,"joinable"),__name(addNode,"addNode"),__name(addRange,"addRange"),__name(dist_close,"dist_close"),__name(replaceThreeWay,"replaceThreeWay"),__name(replaceTwoWay,"replaceTwoWay"),__name(prepareSliceForReplace,"prepareSliceForReplace");class ResolvedPos{constructor(pos,path,parentOffset){this.pos=pos,this.path=path,this.parentOffset=parentOffset,this.depth=path.length/3-1}resolveDepth(val){return null==val?this.depth:val<0?this.depth+val:val}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(depth){return this.path[3*this.resolveDepth(depth)]}index(depth){return this.path[3*this.resolveDepth(depth)+1]}indexAfter(depth){return depth=this.resolveDepth(depth),this.index(depth)+(depth!=this.depth||this.textOffset?1:0)}start(depth){return 0==(depth=this.resolveDepth(depth))?0:this.path[3*depth-1]+1}end(depth){return depth=this.resolveDepth(depth),this.start(depth)+this.node(depth).content.size}before(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position before the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]}after(depth){if(!(depth=this.resolveDepth(depth)))throw new RangeError("There is no position after the top-level node");return depth==this.depth+1?this.pos:this.path[3*depth-1]+this.path[3*depth].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let parent=this.parent,index=this.index(this.depth);if(index==parent.childCount)return null;let dOff=this.pos-this.path[this.path.length-1],child=parent.child(index);return dOff?parent.child(index).cut(dOff):child}get nodeBefore(){let index=this.index(this.depth),dOff=this.pos-this.path[this.path.length-1];return dOff?this.parent.child(index).cut(0,dOff):0==index?null:this.parent.child(index-1)}posAtIndex(index,depth){depth=this.resolveDepth(depth);let node=this.path[3*depth],pos=0==depth?0:this.path[3*depth-1]+1;for(let i=0;i<index;i++)pos+=node.child(i).nodeSize;return pos}marks(){let parent=this.parent,index=this.index();if(0==parent.content.size)return dist_Mark.none;if(this.textOffset)return parent.child(index).marks;let main=parent.maybeChild(index-1),other=parent.maybeChild(index);if(!main){let tmp=main;main=other,other=tmp}let marks2=main.marks;for(var i=0;i<marks2.length;i++)!1===marks2[i].type.spec.inclusive&&(!other||!marks2[i].isInSet(other.marks))&&(marks2=marks2[i--].removeFromSet(marks2));return marks2}marksAcross($end){let after=this.parent.maybeChild(this.index());if(!after||!after.isInline)return null;let marks2=after.marks,next=$end.parent.maybeChild($end.index());for(var i=0;i<marks2.length;i++)!1===marks2[i].type.spec.inclusive&&(!next||!marks2[i].isInSet(next.marks))&&(marks2=marks2[i--].removeFromSet(marks2));return marks2}sharedDepth(pos){for(let depth=this.depth;depth>0;depth--)if(this.start(depth)<=pos&&this.end(depth)>=pos)return depth;return 0}blockRange(other=this,pred){if(other.pos<this.pos)return other.blockRange(this);for(let d=this.depth-(this.parent.inlineContent||this.pos==other.pos?1:0);d>=0;d--)if(other.pos<=this.end(d)&&(!pred||pred(this.node(d))))return new NodeRange(this,other,d);return null}sameParent(other){return this.pos-this.parentOffset==other.pos-other.parentOffset}max(other){return other.pos>this.pos?other:this}min(other){return other.pos<this.pos?other:this}toString(){let str="";for(let i=1;i<=this.depth;i++)str+=(str?"/":"")+this.node(i).type.name+"_"+this.index(i-1);return str+":"+this.parentOffset}static resolve(doc2,pos){if(!(pos>=0&&pos<=doc2.content.size))throw new RangeError("Position "+pos+" out of range");let path=[],start=0,parentOffset=pos;for(let node=doc2;;){let{index,offset:offset2}=node.content.findIndex(parentOffset),rem=parentOffset-offset2;if(path.push(node,index,start+offset2),!rem||(node=node.child(index),node.isText))break;parentOffset=rem-1,start+=offset2+1}return new ResolvedPos(pos,path,parentOffset)}static resolveCached(doc2,pos){for(let i=0;i<resolveCache.length;i++){let cached=resolveCache[i];if(cached.pos==pos&&cached.doc==doc2)return cached}let result=resolveCache[resolveCachePos]=ResolvedPos.resolve(doc2,pos);return resolveCachePos=(resolveCachePos+1)%resolveCacheSize,result}}__name(ResolvedPos,"ResolvedPos");let resolveCache=[],resolveCachePos=0,resolveCacheSize=12;class NodeRange{constructor($from,$to,depth){this.$from=$from,this.$to=$to,this.depth=depth}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}__name(NodeRange,"NodeRange");const emptyAttrs=Object.create(null);class dist_Node{constructor(type,attrs,content,marks2=dist_Mark.none){this.type=type,this.attrs=attrs,this.marks=marks2,this.content=content||dist_Fragment.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(index){return this.content.child(index)}maybeChild(index){return this.content.maybeChild(index)}forEach(f){this.content.forEach(f)}nodesBetween(from,to,f,startPos=0){this.content.nodesBetween(from,to,f,startPos,this)}descendants(f){this.nodesBetween(0,this.content.size,f)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(from,to,blockSeparator,leafText){return this.content.textBetween(from,to,blockSeparator,leafText)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(other){return this==other||this.sameMarkup(other)&&this.content.eq(other.content)}sameMarkup(other){return this.hasMarkup(other.type,other.attrs,other.marks)}hasMarkup(type,attrs,marks2){return this.type==type&&compareDeep(this.attrs,attrs||type.defaultAttrs||emptyAttrs)&&dist_Mark.sameSet(this.marks,marks2||dist_Mark.none)}copy(content=null){return content==this.content?this:new dist_Node(this.type,this.attrs,content,this.marks)}mark(marks2){return marks2==this.marks?this:new dist_Node(this.type,this.attrs,this.content,marks2)}cut(from,to=this.content.size){return 0==from&&to==this.content.size?this:this.copy(this.content.cut(from,to))}slice(from,to=this.content.size,includeParents=!1){if(from==to)return dist_Slice.empty;let $from=this.resolve(from),$to=this.resolve(to),depth=includeParents?0:$from.sharedDepth(to),start=$from.start(depth),content=$from.node(depth).content.cut($from.pos-start,$to.pos-start);return new dist_Slice(content,$from.depth-depth,$to.depth-depth)}replace(from,to,slice){return replace(this.resolve(from),this.resolve(to),slice)}nodeAt(pos){for(let node=this;;){let{index,offset:offset2}=node.content.findIndex(pos);if(node=node.maybeChild(index),!node)return null;if(offset2==pos||node.isText)return node;pos-=offset2+1}}childAfter(pos){let{index,offset:offset2}=this.content.findIndex(pos);return{node:this.content.maybeChild(index),index,offset:offset2}}childBefore(pos){if(0==pos)return{node:null,index:0,offset:0};let{index,offset:offset2}=this.content.findIndex(pos);if(offset2<pos)return{node:this.content.child(index),index,offset:offset2};let node=this.content.child(index-1);return{node,index:index-1,offset:offset2-node.nodeSize}}resolve(pos){return ResolvedPos.resolveCached(this,pos)}resolveNoCache(pos){return ResolvedPos.resolve(this,pos)}rangeHasMark(from,to,type){let found2=!1;return to>from&&this.nodesBetween(from,to,node=>(type.isInSet(node.marks)&&(found2=!0),!found2)),found2}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let name=this.type.name;return this.content.size&&(name+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,name)}contentMatchAt(index){let match=this.type.contentMatch.matchFragment(this.content,0,index);if(!match)throw new Error("Called contentMatchAt on a node with invalid content");return match}canReplace(from,to,replacement=dist_Fragment.empty,start=0,end=replacement.childCount){let one=this.contentMatchAt(from).matchFragment(replacement,start,end),two=one&&one.matchFragment(this.content,to);if(!two||!two.validEnd)return!1;for(let i=start;i<end;i++)if(!this.type.allowsMarks(replacement.child(i).marks))return!1;return!0}canReplaceWith(from,to,type,marks2){if(marks2&&!this.type.allowsMarks(marks2))return!1;let start=this.contentMatchAt(from).matchType(type),end=start&&start.matchFragment(this.content,to);return!!end&&end.validEnd}canAppend(other){return other.content.size?this.canReplace(this.childCount,this.childCount,other.content):this.type.compatibleContent(other.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let copy2=dist_Mark.none;for(let i=0;i<this.marks.length;i++)copy2=this.marks[i].addToSet(copy2);if(!dist_Mark.sameSet(copy2,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(m=>m.type.name)}`);this.content.forEach(node=>node.check())}toJSON(){let obj={type:this.type.name};for(let _ in this.attrs){obj.attrs=this.attrs;break}return this.content.size&&(obj.content=this.content.toJSON()),this.marks.length&&(obj.marks=this.marks.map(n=>n.toJSON())),obj}static fromJSON(schema2,json){if(!json)throw new RangeError("Invalid input for Node.fromJSON");let marks2=null;if(json.marks){if(!Array.isArray(json.marks))throw new RangeError("Invalid mark data for Node.fromJSON");marks2=json.marks.map(schema2.markFromJSON)}if("text"==json.type){if("string"!=typeof json.text)throw new RangeError("Invalid text node in JSON");return schema2.text(json.text,marks2)}let content=dist_Fragment.fromJSON(schema2,json.content);return schema2.nodeType(json.type).create(json.attrs,content,marks2)}}__name(dist_Node,"dist_Node"),dist_Node.prototype.text=void 0;class TextNode extends dist_Node{constructor(type,attrs,content,marks2){if(super(type,attrs,null,marks2),!content)throw new RangeError("Empty text nodes are not allowed");this.text=content}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(from,to){return this.text.slice(from,to)}get nodeSize(){return this.text.length}mark(marks2){return marks2==this.marks?this:new TextNode(this.type,this.attrs,this.text,marks2)}withText(text){return text==this.text?this:new TextNode(this.type,this.attrs,text,this.marks)}cut(from=0,to=this.text.length){return 0==from&&to==this.text.length?this:this.withText(this.text.slice(from,to))}eq(other){return this.sameMarkup(other)&&this.text==other.text}toJSON(){let base=super.toJSON();return base.text=this.text,base}}function wrapMarks(marks2,str){for(let i=marks2.length-1;i>=0;i--)str=marks2[i].type.name+"("+str+")";return str}__name(TextNode,"TextNode"),__name(wrapMarks,"wrapMarks");class ContentMatch{constructor(validEnd){this.validEnd=validEnd,this.next=[],this.wrapCache=[]}static parse(string,nodeTypes){let stream=new TokenStream(string,nodeTypes);if(null==stream.next)return ContentMatch.empty;let expr=parseExpr(stream);stream.next&&stream.err("Unexpected trailing text");let match=dfa(nfa(expr));return checkForDeadEnds(match,stream),match}matchType(type){for(let i=0;i<this.next.length;i++)if(this.next[i].type==type)return this.next[i].next;return null}matchFragment(frag,start=0,end=frag.childCount){let cur=this;for(let i=start;cur&&i<end;i++)cur=cur.matchType(frag.child(i).type);return cur}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let i=0;i<this.next.length;i++){let{type}=this.next[i];if(!type.isText&&!type.hasRequiredAttrs())return type}return null}compatible(other){for(let i=0;i<this.next.length;i++)for(let j=0;j<other.next.length;j++)if(this.next[i].type==other.next[j].type)return!0;return!1}fillBefore(after,toEnd=!1,startIndex=0){let seen=[this];function search(match,types){let finished=match.matchFragment(after,startIndex);if(finished&&(!toEnd||finished.validEnd))return dist_Fragment.from(types.map(tp=>tp.createAndFill()));for(let i=0;i<match.next.length;i++){let{type,next}=match.next[i];if(!type.isText&&!type.hasRequiredAttrs()&&-1==seen.indexOf(next)){seen.push(next);let found2=search(next,types.concat(type));if(found2)return found2}}return null}return __name(search,"search"),search(this,[])}findWrapping(target){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==target)return this.wrapCache[i+1];let computed=this.computeWrapping(target);return this.wrapCache.push(target,computed),computed}computeWrapping(target){let seen=Object.create(null),active=[{match:this,type:null,via:null}];for(;active.length;){let current=active.shift(),match=current.match;if(match.matchType(target)){let result=[];for(let obj=current;obj.type;obj=obj.via)result.push(obj.type);return result.reverse()}for(let i=0;i<match.next.length;i++){let{type,next}=match.next[i];!type.isLeaf&&!type.hasRequiredAttrs()&&!(type.name in seen)&&(!current.type||next.validEnd)&&(active.push({match:type.contentMatch,type,via:current}),seen[type.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(n){if(n>=this.next.length)throw new RangeError(`There's no ${n}th edge in this content match`);return this.next[n]}toString(){let seen=[];function scan(m){seen.push(m);for(let i=0;i<m.next.length;i++)-1==seen.indexOf(m.next[i].next)&&scan(m.next[i].next)}return __name(scan,"scan"),scan(this),seen.map((m,i)=>{let out=i+(m.validEnd?"*":" ")+" ";for(let i2=0;i2<m.next.length;i2++)out+=(i2?", ":"")+m.next[i2].type.name+"->"+seen.indexOf(m.next[i2].next);return out}).join("\n")}}__name(ContentMatch,"ContentMatch"),ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(string,nodeTypes){this.string=string,this.nodeTypes=nodeTypes,this.inline=null,this.pos=0,this.tokens=string.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(tok){return this.next==tok&&(this.pos++||!0)}err(str){throw new SyntaxError(str+" (in content expression '"+this.string+"')")}}function parseExpr(stream){let exprs=[];do{exprs.push(parseExprSeq(stream))}while(stream.eat("|"));return 1==exprs.length?exprs[0]:{type:"choice",exprs}}function parseExprSeq(stream){let exprs=[];do{exprs.push(parseExprSubscript(stream))}while(stream.next&&")"!=stream.next&&"|"!=stream.next);return 1==exprs.length?exprs[0]:{type:"seq",exprs}}function parseExprSubscript(stream){let expr=parseExprAtom(stream);for(;;)if(stream.eat("+"))expr={type:"plus",expr};else if(stream.eat("*"))expr={type:"star",expr};else if(stream.eat("?"))expr={type:"opt",expr};else{if(!stream.eat("{"))break;expr=parseExprRange(stream,expr)}return expr}function parseNum(stream){/\D/.test(stream.next)&&stream.err("Expected number, got '"+stream.next+"'");let result=Number(stream.next);return stream.pos++,result}function parseExprRange(stream,expr){let min2=parseNum(stream),max2=min2;return stream.eat(",")&&(max2="}"!=stream.next?parseNum(stream):-1),stream.eat("}")||stream.err("Unclosed braced range"),{type:"range",min:min2,max:max2,expr}}function resolveName(stream,name){let types=stream.nodeTypes,type=types[name];if(type)return[type];let result=[];for(let typeName in types){let type2=types[typeName];type2.groups.indexOf(name)>-1&&result.push(type2)}return 0==result.length&&stream.err("No node type or group '"+name+"' found"),result}function parseExprAtom(stream){if(stream.eat("(")){let expr=parseExpr(stream);return stream.eat(")")||stream.err("Missing closing paren"),expr}if(!/\W/.test(stream.next)){let exprs=resolveName(stream,stream.next).map(type=>(null==stream.inline?stream.inline=type.isInline:stream.inline!=type.isInline&&stream.err("Mixing inline and block content"),{type:"name",value:type}));return stream.pos++,1==exprs.length?exprs[0]:{type:"choice",exprs}}stream.err("Unexpected token '"+stream.next+"'")}function nfa(expr){let nfa2=[[]];return connect(compile(expr,0),node()),nfa2;function node(){return nfa2.push([])-1}function edge(from,to,term){let edge2={term,to};return nfa2[from].push(edge2),edge2}function connect(edges,to){edges.forEach(edge2=>edge2.to=to)}function compile(expr2,from){if("choice"==expr2.type)return expr2.exprs.reduce((out,expr3)=>out.concat(compile(expr3,from)),[]);if("seq"!=expr2.type){if("star"==expr2.type){let loop=node();return edge(from,loop),connect(compile(expr2.expr,loop),loop),[edge(loop)]}if("plus"==expr2.type){let loop=node();return connect(compile(expr2.expr,from),loop),connect(compile(expr2.expr,loop),loop),[edge(loop)]}if("opt"==expr2.type)return[edge(from)].concat(compile(expr2.expr,from));if("range"==expr2.type){let cur=from;for(let i=0;i<expr2.min;i++){let next=node();connect(compile(expr2.expr,cur),next),cur=next}if(-1==expr2.max)connect(compile(expr2.expr,cur),cur);else for(let i=expr2.min;i<expr2.max;i++){let next=node();edge(cur,next),connect(compile(expr2.expr,cur),next),cur=next}return[edge(cur)]}if("name"==expr2.type)return[edge(from,void 0,expr2.value)];throw new Error("Unknown expr type")}for(let i=0;;i++){let next=compile(expr2.exprs[i],from);if(i==expr2.exprs.length-1)return next;connect(next,from=node())}}}function cmp(a,b){return b-a}function nullFrom(nfa2,node){let result=[];return scan(node),result.sort(cmp);function scan(node2){let edges=nfa2[node2];if(1==edges.length&&!edges[0].term)return scan(edges[0].to);result.push(node2);for(let i=0;i<edges.length;i++){let{term,to}=edges[i];!term&&-1==result.indexOf(to)&&scan(to)}}}function dfa(nfa2){let labeled=Object.create(null);return function explore(states){let out=[];states.forEach(node=>{nfa2[node].forEach(({term,to})=>{if(!term)return;let set;for(let i=0;i<out.length;i++)out[i][0]==term&&(set=out[i][1]);nullFrom(nfa2,to).forEach(node2=>{set||out.push([term,set=[]]),-1==set.indexOf(node2)&&set.push(node2)})})});let state=labeled[states.join(",")]=new ContentMatch(states.indexOf(nfa2.length-1)>-1);for(let i=0;i<out.length;i++){let states2=out[i][1].sort(cmp);state.next.push({type:out[i][0],next:labeled[states2.join(",")]||explore(states2)})}return state}(nullFrom(nfa2,0))}function checkForDeadEnds(match,stream){for(let i=0,work=[match];i<work.length;i++){let state=work[i],dead=!state.validEnd,nodes2=[];for(let j=0;j<state.next.length;j++){let{type,next}=state.next[j];nodes2.push(type.name),dead&&!(type.isText||type.hasRequiredAttrs())&&(dead=!1),-1==work.indexOf(next)&&work.push(next)}dead&&stream.err("Only non-generatable nodes ("+nodes2.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(attrs){let defaults2=Object.create(null);for(let attrName in attrs){let attr=attrs[attrName];if(!attr.hasDefault)return null;defaults2[attrName]=attr.default}return defaults2}function computeAttrs(attrs,value){let built=Object.create(null);for(let name in attrs){let given=value&&value[name];if(void 0===given){let attr=attrs[name];if(!attr.hasDefault)throw new RangeError("No value supplied for attribute "+name);given=attr.default}built[name]=given}return built}function initAttrs(attrs){let result=Object.create(null);if(attrs)for(let name in attrs)result[name]=new Attribute(attrs[name]);return result}__name(TokenStream,"TokenStream"),__name(parseExpr,"parseExpr"),__name(parseExprSeq,"parseExprSeq"),__name(parseExprSubscript,"parseExprSubscript"),__name(parseNum,"parseNum"),__name(parseExprRange,"parseExprRange"),__name(resolveName,"resolveName"),__name(parseExprAtom,"parseExprAtom"),__name(nfa,"nfa"),__name(cmp,"cmp"),__name(nullFrom,"nullFrom"),__name(dfa,"dfa"),__name(checkForDeadEnds,"checkForDeadEnds"),__name(defaultAttrs,"defaultAttrs"),__name(computeAttrs,"computeAttrs"),__name(initAttrs,"initAttrs");class NodeType{constructor(name,schema2,spec){this.name=name,this.schema=schema2,this.spec=spec,this.markSet=null,this.groups=spec.group?spec.group.split(" "):[],this.attrs=initAttrs(spec.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(spec.inline||"text"==name),this.isText="text"==name}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let n in this.attrs)if(this.attrs[n].isRequired)return!0;return!1}compatibleContent(other){return this==other||this.contentMatch.compatible(other.contentMatch)}computeAttrs(attrs){return!attrs&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,attrs)}create(attrs=null,content,marks2){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new dist_Node(this,this.computeAttrs(attrs),dist_Fragment.from(content),dist_Mark.setFrom(marks2))}createChecked(attrs=null,content,marks2){if(content=dist_Fragment.from(content),!this.validContent(content))throw new RangeError("Invalid content for node "+this.name);return new dist_Node(this,this.computeAttrs(attrs),content,dist_Mark.setFrom(marks2))}createAndFill(attrs=null,content,marks2){if(attrs=this.computeAttrs(attrs),(content=dist_Fragment.from(content)).size){let before=this.contentMatch.fillBefore(content);if(!before)return null;content=before.append(content)}let matched=this.contentMatch.matchFragment(content),after=matched&&matched.fillBefore(dist_Fragment.empty,!0);return after?new dist_Node(this,attrs,content.append(after),dist_Mark.setFrom(marks2)):null}validContent(content){let result=this.contentMatch.matchFragment(content);if(!result||!result.validEnd)return!1;for(let i=0;i<content.childCount;i++)if(!this.allowsMarks(content.child(i).marks))return!1;return!0}allowsMarkType(markType){return null==this.markSet||this.markSet.indexOf(markType)>-1}allowsMarks(marks2){if(null==this.markSet)return!0;for(let i=0;i<marks2.length;i++)if(!this.allowsMarkType(marks2[i].type))return!1;return!0}allowedMarks(marks2){if(null==this.markSet)return marks2;let copy2;for(let i=0;i<marks2.length;i++)this.allowsMarkType(marks2[i].type)?copy2&&copy2.push(marks2[i]):copy2||(copy2=marks2.slice(0,i));return copy2?copy2.length?copy2:dist_Mark.none:marks2}static compile(nodes2,schema2){let result=Object.create(null);nodes2.forEach((name,spec)=>result[name]=new NodeType(name,schema2,spec));let topType=schema2.spec.topNode||"doc";if(!result[topType])throw new RangeError("Schema is missing its top node type ('"+topType+"')");if(!result.text)throw new RangeError("Every schema needs a 'text' type");for(let _ in result.text.attrs)throw new RangeError("The text node type should not have attributes");return result}}__name(NodeType,"NodeType");class Attribute{constructor(options){this.hasDefault=Object.prototype.hasOwnProperty.call(options,"default"),this.default=options.default}get isRequired(){return!this.hasDefault}}__name(Attribute,"Attribute");class dist_MarkType{constructor(name,rank,schema2,spec){this.name=name,this.rank=rank,this.schema=schema2,this.spec=spec,this.attrs=initAttrs(spec.attrs),this.excluded=null;let defaults2=defaultAttrs(this.attrs);this.instance=defaults2?new dist_Mark(this,defaults2):null}create(attrs=null){return!attrs&&this.instance?this.instance:new dist_Mark(this,computeAttrs(this.attrs,attrs))}static compile(marks2,schema2){let result=Object.create(null),rank=0;return marks2.forEach((name,spec)=>result[name]=new dist_MarkType(name,rank++,schema2,spec)),result}removeFromSet(set){for(var i=0;i<set.length;i++)set[i].type==this&&(set=set.slice(0,i).concat(set.slice(i+1)),i--);return set}isInSet(set){for(let i=0;i<set.length;i++)if(set[i].type==this)return set[i]}excludes(other){return this.excluded.indexOf(other)>-1}}__name(dist_MarkType,"dist_MarkType");class Schema{constructor(spec){this.cached=Object.create(null),this.spec={nodes:dist.from(spec.nodes),marks:dist.from(spec.marks||{}),topNode:spec.topNode},this.nodes=NodeType.compile(this.spec.nodes,this),this.marks=dist_MarkType.compile(this.spec.marks,this);let contentExprCache=Object.create(null);for(let prop in this.nodes){if(prop in this.marks)throw new RangeError(prop+" can not be both a node and a mark");let type=this.nodes[prop],contentExpr=type.spec.content||"",markExpr=type.spec.marks;type.contentMatch=contentExprCache[contentExpr]||(contentExprCache[contentExpr]=ContentMatch.parse(contentExpr,this.nodes)),type.inlineContent=type.contentMatch.inlineContent,type.markSet="_"==markExpr?null:markExpr?gatherMarks(this,markExpr.split(" ")):""!=markExpr&&type.inlineContent?null:[]}for(let prop in this.marks){let type=this.marks[prop],excl=type.spec.excludes;type.excluded=null==excl?[type]:""==excl?[]:gatherMarks(this,excl.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(type,attrs=null,content,marks2){if("string"==typeof type)type=this.nodeType(type);else{if(!(type instanceof NodeType))throw new RangeError("Invalid node type: "+type);if(type.schema!=this)throw new RangeError("Node type from different schema used ("+type.name+")")}return type.createChecked(attrs,content,marks2)}text(text,marks2){let type=this.nodes.text;return new TextNode(type,type.defaultAttrs,text,dist_Mark.setFrom(marks2))}mark(type,attrs){return"string"==typeof type&&(type=this.marks[type]),type.create(attrs)}nodeFromJSON(json){return dist_Node.fromJSON(this,json)}markFromJSON(json){return dist_Mark.fromJSON(this,json)}nodeType(name){let found2=this.nodes[name];if(!found2)throw new RangeError("Unknown node type: "+name);return found2}}function gatherMarks(schema2,marks2){let found2=[];for(let i=0;i<marks2.length;i++){let name=marks2[i],mark=schema2.marks[name],ok=mark;if(mark)found2.push(mark);else for(let prop in schema2.marks){let mark2=schema2.marks[prop];("_"==name||mark2.spec.group&&mark2.spec.group.split(" ").indexOf(name)>-1)&&found2.push(ok=mark2)}if(!ok)throw new SyntaxError("Unknown mark type: '"+marks2[i]+"'")}return found2}__name(Schema,"Schema"),__name(gatherMarks,"gatherMarks");class dist_DOMParser{constructor(schema2,rules){this.schema=schema2,this.rules=rules,this.tags=[],this.styles=[],rules.forEach(rule=>{rule.tag?this.tags.push(rule):rule.style&&this.styles.push(rule)}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let node=schema2.nodes[r.node];return node.contentMatch.matchType(node)})}parse(dom,options={}){let context=new ParseContext(this,options,!1);return context.addAll(dom,options.from,options.to),context.finish()}parseSlice(dom,options={}){let context=new ParseContext(this,options,!0);return context.addAll(dom,options.from,options.to),dist_Slice.maxOpen(context.finish())}matchTag(dom,context,after){for(let i=after?this.tags.indexOf(after)+1:0;i<this.tags.length;i++){let rule=this.tags[i];if(matches(dom,rule.tag)&&(void 0===rule.namespace||dom.namespaceURI==rule.namespace)&&(!rule.context||context.matchesContext(rule.context))){if(rule.getAttrs){let result=rule.getAttrs(dom);if(!1===result)continue;rule.attrs=result||void 0}return rule}}}matchStyle(prop,value,context,after){for(let i=after?this.styles.indexOf(after)+1:0;i<this.styles.length;i++){let rule=this.styles[i],style=rule.style;if(!(0!=style.indexOf(prop)||rule.context&&!context.matchesContext(rule.context)||style.length>prop.length&&(61!=style.charCodeAt(prop.length)||style.slice(prop.length+1)!=value))){if(rule.getAttrs){let result=rule.getAttrs(value);if(!1===result)continue;rule.attrs=result||void 0}return rule}}}static schemaRules(schema2){let result=[];function insert(rule){let priority=null==rule.priority?50:rule.priority,i=0;for(;i<result.length;i++){let next=result[i];if((null==next.priority?50:next.priority)<priority)break}result.splice(i,0,rule)}__name(insert,"insert");for(let name in schema2.marks){let rules=schema2.marks[name].spec.parseDOM;rules&&rules.forEach(rule=>{insert(rule=copy(rule)),rule.mark=name})}for(let name in schema2.nodes){let rules=schema2.nodes[name].spec.parseDOM;rules&&rules.forEach(rule=>{insert(rule=copy(rule)),rule.node=name})}return result}static fromSchema(schema2){return schema2.cached.domParser||(schema2.cached.domParser=new dist_DOMParser(schema2,dist_DOMParser.schemaRules(schema2)))}}__name(dist_DOMParser,"dist_DOMParser");const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0};function wsOptionsFor(type,preserveWhitespace,base){return null!=preserveWhitespace?(preserveWhitespace?1:0)|("full"===preserveWhitespace?2:0):type&&"pre"==type.whitespace?3:-5&base}__name(wsOptionsFor,"wsOptionsFor");class NodeContext{constructor(type,attrs,marks2,pendingMarks,solid,match,options){this.type=type,this.attrs=attrs,this.marks=marks2,this.pendingMarks=pendingMarks,this.solid=solid,this.options=options,this.content=[],this.activeMarks=dist_Mark.none,this.stashMarks=[],this.match=match||(4&options?null:type.contentMatch)}findWrapping(node){if(!this.match){if(!this.type)return[];let fill=this.type.contentMatch.fillBefore(dist_Fragment.from(node));if(!fill){let wrap2,start=this.type.contentMatch;return(wrap2=start.findWrapping(node.type))?(this.match=start,wrap2):null}this.match=this.type.contentMatch.matchFragment(fill)}return this.match.findWrapping(node.type)}finish(openEnd){if(!(1&this.options)){let m,last=this.content[this.content.length-1];if(last&&last.isText&&(m=/[ \t\r\n\u000c]+$/.exec(last.text))){let text=last;last.text.length==m[0].length?this.content.pop():this.content[this.content.length-1]=text.withText(text.text.slice(0,text.text.length-m[0].length))}}let content=dist_Fragment.from(this.content);return!openEnd&&this.match&&(content=content.append(this.match.fillBefore(dist_Fragment.empty,!0))),this.type?this.type.create(this.attrs,content,this.marks):content}popFromStashMark(mark){for(let i=this.stashMarks.length-1;i>=0;i--)if(mark.eq(this.stashMarks[i]))return this.stashMarks.splice(i,1)[0]}applyPending(nextType){for(let i=0,pending=this.pendingMarks;i<pending.length;i++){let mark=pending[i];(this.type?this.type.allowsMarkType(mark.type):markMayApply(mark.type,nextType))&&!mark.isInSet(this.activeMarks)&&(this.activeMarks=mark.addToSet(this.activeMarks),this.pendingMarks=mark.removeFromSet(this.pendingMarks))}}inlineContext(node){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:node.parentNode&&!blockTags.hasOwnProperty(node.parentNode.nodeName.toLowerCase())}}__name(NodeContext,"NodeContext");class ParseContext{constructor(parser,options,isOpen){this.parser=parser,this.options=options,this.isOpen=isOpen,this.open=0;let topContext,topNode=options.topNode,topOptions=wsOptionsFor(null,options.preserveWhitespace,0)|(isOpen?4:0);topContext=topNode?new NodeContext(topNode.type,topNode.attrs,dist_Mark.none,dist_Mark.none,!0,options.topMatch||topNode.type.contentMatch,topOptions):new NodeContext(isOpen?null:parser.schema.topNodeType,null,dist_Mark.none,dist_Mark.none,!0,null,topOptions),this.nodes=[topContext],this.find=options.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(dom){if(3==dom.nodeType)this.addTextNode(dom);else if(1==dom.nodeType){let style=dom.getAttribute("style"),marks2=style?this.readStyles(parseStyles(style)):null,top=this.top;if(null!=marks2)for(let i=0;i<marks2.length;i++)this.addPendingMark(marks2[i]);if(this.addElement(dom),null!=marks2)for(let i=0;i<marks2.length;i++)this.removePendingMark(marks2[i],top)}}addTextNode(dom){let value=dom.nodeValue,top=this.top;if(2&top.options||top.inlineContext(dom)||/[^ \t\r\n\u000c]/.test(value)){if(1&top.options)value=2&top.options?value.replace(/\r\n?/g,"\n"):value.replace(/\r?\n|\r/g," ");else if(value=value.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(value)&&this.open==this.nodes.length-1){let nodeBefore=top.content[top.content.length-1],domNodeBefore=dom.previousSibling;(!nodeBefore||domNodeBefore&&"BR"==domNodeBefore.nodeName||nodeBefore.isText&&/[ \t\r\n\u000c]$/.test(nodeBefore.text))&&(value=value.slice(1))}value&&this.insertNode(this.parser.schema.text(value)),this.findInText(dom)}else this.findInside(dom)}addElement(dom,matchAfter){let ruleID,name=dom.nodeName.toLowerCase();listTags.hasOwnProperty(name)&&this.parser.normalizeLists&&normalizeList(dom);let rule=this.options.ruleFromNode&&this.options.ruleFromNode(dom)||(ruleID=this.parser.matchTag(dom,this,matchAfter));if(rule?rule.ignore:ignoreTags.hasOwnProperty(name))this.findInside(dom),this.ignoreFallback(dom);else if(!rule||rule.skip||rule.closeParent){rule&&rule.closeParent?this.open=Math.max(0,this.open-1):rule&&rule.skip.nodeType&&(dom=rule.skip);let sync,top=this.top,oldNeedsBlock=this.needsBlock;if(blockTags.hasOwnProperty(name))sync=!0,top.type||(this.needsBlock=!0);else if(!dom.firstChild)return void this.leafFallback(dom);this.addAll(dom),sync&&this.sync(top),this.needsBlock=oldNeedsBlock}else this.addElementByRule(dom,rule,!1===rule.consuming?ruleID:void 0)}leafFallback(dom){"BR"==dom.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(dom.ownerDocument.createTextNode("\n"))}ignoreFallback(dom){"BR"==dom.nodeName&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"))}readStyles(styles){let marks2=dist_Mark.none;style:for(let i=0;i<styles.length;i+=2)for(let after;;){let rule=this.parser.matchStyle(styles[i],styles[i+1],this,after);if(!rule)continue style;if(rule.ignore)return null;if(marks2=this.parser.schema.marks[rule.mark].create(rule.attrs).addToSet(marks2),!1!==rule.consuming)break;after=rule}return marks2}addElementByRule(dom,rule,continueAfter){let sync,nodeType,mark;rule.node?(nodeType=this.parser.schema.nodes[rule.node],nodeType.isLeaf?this.insertNode(nodeType.create(rule.attrs))||this.leafFallback(dom):sync=this.enter(nodeType,rule.attrs||null,rule.preserveWhitespace)):(mark=this.parser.schema.marks[rule.mark].create(rule.attrs),this.addPendingMark(mark));let startIn=this.top;if(nodeType&&nodeType.isLeaf)this.findInside(dom);else if(continueAfter)this.addElement(dom,continueAfter);else if(rule.getContent)this.findInside(dom),rule.getContent(dom,this.parser.schema).forEach(node=>this.insertNode(node));else{let contentDOM=dom;"string"==typeof rule.contentElement?contentDOM=dom.querySelector(rule.contentElement):"function"==typeof rule.contentElement?contentDOM=rule.contentElement(dom):rule.contentElement&&(contentDOM=rule.contentElement),this.findAround(dom,contentDOM,!0),this.addAll(contentDOM)}sync&&this.sync(startIn)&&this.open--,mark&&this.removePendingMark(mark,startIn)}addAll(parent,startIndex,endIndex){let index=startIndex||0;for(let dom=startIndex?parent.childNodes[startIndex]:parent.firstChild,end=null==endIndex?null:parent.childNodes[endIndex];dom!=end;dom=dom.nextSibling,++index)this.findAtPoint(parent,index),this.addDOM(dom);this.findAtPoint(parent,index)}findPlace(node){let route,sync;for(let depth=this.open;depth>=0;depth--){let cx=this.nodes[depth],found2=cx.findWrapping(node);if(found2&&(!route||route.length>found2.length)&&(route=found2,sync=cx,!found2.length)||cx.solid)break}if(!route)return!1;this.sync(sync);for(let i=0;i<route.length;i++)this.enterInner(route[i],null,!1);return!0}insertNode(node){if(node.isInline&&this.needsBlock&&!this.top.type){let block=this.textblockFromContext();block&&this.enterInner(block)}if(this.findPlace(node)){this.closeExtra();let top=this.top;top.applyPending(node.type),top.match&&(top.match=top.match.matchType(node.type));let marks2=top.activeMarks;for(let i=0;i<node.marks.length;i++)(!top.type||top.type.allowsMarkType(node.marks[i].type))&&(marks2=node.marks[i].addToSet(marks2));return top.content.push(node.mark(marks2)),!0}return!1}enter(type,attrs,preserveWS){let ok=this.findPlace(type.create(attrs));return ok&&this.enterInner(type,attrs,!0,preserveWS),ok}enterInner(type,attrs=null,solid=!1,preserveWS){this.closeExtra();let top=this.top;top.applyPending(type),top.match=top.match&&top.match.matchType(type);let options=wsOptionsFor(type,preserveWS,top.options);4&top.options&&0==top.content.length&&(options|=4),this.nodes.push(new NodeContext(type,attrs,top.activeMarks,top.pendingMarks,solid,null,options)),this.open++}closeExtra(openEnd=!1){let i=this.nodes.length-1;if(i>this.open){for(;i>this.open;i--)this.nodes[i-1].content.push(this.nodes[i].finish(openEnd));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(to){for(let i=this.open;i>=0;i--)if(this.nodes[i]==to)return this.open=i,!0;return!1}get currentPos(){this.closeExtra();let pos=0;for(let i=this.open;i>=0;i--){let content=this.nodes[i].content;for(let j=content.length-1;j>=0;j--)pos+=content[j].nodeSize;i&&pos++}return pos}findAtPoint(parent,offset2){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==parent&&this.find[i].offset==offset2&&(this.find[i].pos=this.currentPos)}findInside(parent){if(this.find)for(let i=0;i<this.find.length;i++)null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node)&&(this.find[i].pos=this.currentPos)}findAround(parent,content,before){if(parent!=content&&this.find)for(let i=0;i<this.find.length;i++)null==this.find[i].pos&&1==parent.nodeType&&parent.contains(this.find[i].node)&&content.compareDocumentPosition(this.find[i].node)&(before?2:4)&&(this.find[i].pos=this.currentPos)}findInText(textNode){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==textNode&&(this.find[i].pos=this.currentPos-(textNode.nodeValue.length-this.find[i].offset))}matchesContext(context){if(context.indexOf("|")>-1)return context.split(/\s*\|\s*/).some(this.matchesContext,this);let parts=context.split("/"),option=this.options.context,useRoot=!(this.isOpen||option&&option.parent.type!=this.nodes[0].type),minDepth=-(option?option.depth+1:0)+(useRoot?0:1),match=__name((i,depth)=>{for(;i>=0;i--){let part=parts[i];if(""==part){if(i==parts.length-1||0==i)continue;for(;depth>=minDepth;depth--)if(match(i-1,depth))return!0;return!1}{let next=depth>0||0==depth&&useRoot?this.nodes[depth].type:option&&depth>=minDepth?option.node(depth-minDepth).type:null;if(!next||next.name!=part&&-1==next.groups.indexOf(part))return!1;depth--}}return!0},"match");return match(parts.length-1,this.open)}textblockFromContext(){let $context=this.options.context;if($context)for(let d=$context.depth;d>=0;d--){let deflt=$context.node(d).contentMatchAt($context.indexAfter(d)).defaultType;if(deflt&&deflt.isTextblock&&deflt.defaultAttrs)return deflt}for(let name in this.parser.schema.nodes){let type=this.parser.schema.nodes[name];if(type.isTextblock&&type.defaultAttrs)return type}}addPendingMark(mark){let found2=findSameMarkInSet(mark,this.top.pendingMarks);found2&&this.top.stashMarks.push(found2),this.top.pendingMarks=mark.addToSet(this.top.pendingMarks)}removePendingMark(mark,upto){for(let depth=this.open;depth>=0;depth--){let level=this.nodes[depth];if(level.pendingMarks.lastIndexOf(mark)>-1)level.pendingMarks=mark.removeFromSet(level.pendingMarks);else{level.activeMarks=mark.removeFromSet(level.activeMarks);let stashMark=level.popFromStashMark(mark);stashMark&&level.type&&level.type.allowsMarkType(stashMark.type)&&(level.activeMarks=stashMark.addToSet(level.activeMarks))}if(level==upto)break}}}function normalizeList(dom){for(let child=dom.firstChild,prevItem=null;child;child=child.nextSibling){let name=1==child.nodeType?child.nodeName.toLowerCase():null;name&&listTags.hasOwnProperty(name)&&prevItem?(prevItem.appendChild(child),child=prevItem):"li"==name?prevItem=child:name&&(prevItem=null)}}function matches(dom,selector){return(dom.matches||dom.msMatchesSelector||dom.webkitMatchesSelector||dom.mozMatchesSelector).call(dom,selector)}function parseStyles(style){let m,re=/\s*([\w-]+)\s*:\s*([^;]+)/g,result=[];for(;m=re.exec(style);)result.push(m[1],m[2].trim());return result}function copy(obj){let copy2={};for(let prop in obj)copy2[prop]=obj[prop];return copy2}function markMayApply(markType,nodeType){let nodes2=nodeType.schema.nodes;for(let name in nodes2){let parent=nodes2[name];if(!parent.allowsMarkType(markType))continue;let seen=[],scan=__name(match=>{seen.push(match);for(let i=0;i<match.edgeCount;i++){let{type,next}=match.edge(i);if(type==nodeType||seen.indexOf(next)<0&&scan(next))return!0}},"scan");if(scan(parent.contentMatch))return!0}}function findSameMarkInSet(mark,set){for(let i=0;i<set.length;i++)if(mark.eq(set[i]))return set[i]}__name(ParseContext,"ParseContext"),__name(normalizeList,"normalizeList"),__name(matches,"matches"),__name(parseStyles,"parseStyles"),__name(copy,"copy"),__name(markMayApply,"markMayApply"),__name(findSameMarkInSet,"findSameMarkInSet");class dist_DOMSerializer{constructor(nodes2,marks2){this.nodes=nodes2,this.marks=marks2}serializeFragment(fragment,options={},target){target||(target=doc(options).createDocumentFragment());let top=target,active=[];return fragment.forEach(node=>{if(active.length||node.marks.length){let keep=0,rendered=0;for(;keep<active.length&&rendered<node.marks.length;){let next=node.marks[rendered];if(this.marks[next.type.name]){if(!next.eq(active[keep][0])||!1===next.type.spec.spanning)break;keep++,rendered++}else rendered++}for(;keep<active.length;)top=active.pop()[1];for(;rendered<node.marks.length;){let add2=node.marks[rendered++],markDOM=this.serializeMark(add2,node.isInline,options);markDOM&&(active.push([add2,top]),top.appendChild(markDOM.dom),top=markDOM.contentDOM||markDOM.dom)}}top.appendChild(this.serializeNodeInner(node,options))}),target}serializeNodeInner(node,options){let{dom,contentDOM}=dist_DOMSerializer.renderSpec(doc(options),this.nodes[node.type.name](node));if(contentDOM){if(node.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(node.content,options,contentDOM)}return dom}serializeNode(node,options={}){let dom=this.serializeNodeInner(node,options);for(let i=node.marks.length-1;i>=0;i--){let wrap2=this.serializeMark(node.marks[i],node.isInline,options);wrap2&&((wrap2.contentDOM||wrap2.dom).appendChild(dom),dom=wrap2.dom)}return dom}serializeMark(mark,inline2,options={}){let toDOM=this.marks[mark.type.name];return toDOM&&dist_DOMSerializer.renderSpec(doc(options),toDOM(mark,inline2))}static renderSpec(doc2,structure,xmlNS=null){if("string"==typeof structure)return{dom:doc2.createTextNode(structure)};if(null!=structure.nodeType)return{dom:structure};if(structure.dom&&null!=structure.dom.nodeType)return structure;let tagName=structure[0],space=tagName.indexOf(" ");space>0&&(xmlNS=tagName.slice(0,space),tagName=tagName.slice(space+1));let contentDOM,dom=xmlNS?doc2.createElementNS(xmlNS,tagName):doc2.createElement(tagName),attrs=structure[1],start=1;if(attrs&&"object"==typeof attrs&&null==attrs.nodeType&&!Array.isArray(attrs)){start=2;for(let name in attrs)if(null!=attrs[name]){let space2=name.indexOf(" ");space2>0?dom.setAttributeNS(name.slice(0,space2),name.slice(space2+1),attrs[name]):dom.setAttribute(name,attrs[name])}}for(let i=start;i<structure.length;i++){let child=structure[i];if(0===child){if(i<structure.length-1||i>start)throw new RangeError("Content hole must be the only child of its parent node");return{dom,contentDOM:dom}}{let{dom:inner,contentDOM:innerContent}=dist_DOMSerializer.renderSpec(doc2,child,xmlNS);if(dom.appendChild(inner),innerContent){if(contentDOM)throw new RangeError("Multiple content holes");contentDOM=innerContent}}}return{dom,contentDOM}}static fromSchema(schema2){return schema2.cached.domSerializer||(schema2.cached.domSerializer=new dist_DOMSerializer(this.nodesFromSchema(schema2),this.marksFromSchema(schema2)))}static nodesFromSchema(schema2){let result=gatherToDOM(schema2.nodes);return result.text||(result.text=node=>node.text),result}static marksFromSchema(schema2){return gatherToDOM(schema2.marks)}}function gatherToDOM(obj){let result={};for(let name in obj){let toDOM=obj[name].spec.toDOM;toDOM&&(result[name]=toDOM)}return result}function doc(options){return options.document||window.document}__name(dist_DOMSerializer,"dist_DOMSerializer"),__name(gatherToDOM,"gatherToDOM"),__name(doc,"doc");const factor16=Math.pow(2,16);function makeRecover(index,offset2){return index+offset2*factor16}function recoverIndex(value){return 65535&value}function recoverOffset(value){return(value-(65535&value))/factor16}__name(makeRecover,"makeRecover"),__name(recoverIndex,"recoverIndex"),__name(recoverOffset,"recoverOffset");class MapResult{constructor(pos,delInfo,recover){this.pos=pos,this.delInfo=delInfo,this.recover=recover}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}__name(MapResult,"MapResult");class StepMap{constructor(ranges,inverted=!1){if(this.ranges=ranges,this.inverted=inverted,!ranges.length&&StepMap.empty)return StepMap.empty}recover(value){let diff=0,index=recoverIndex(value);if(!this.inverted)for(let i=0;i<index;i++)diff+=this.ranges[3*i+2]-this.ranges[3*i+1];return this.ranges[3*index]+diff+recoverOffset(value)}mapResult(pos,assoc=1){return this._map(pos,assoc,!1)}map(pos,assoc=1){return this._map(pos,assoc,!0)}_map(pos,assoc,simple){let diff=0,oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2;for(let i=0;i<this.ranges.length;i+=3){let start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;let oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex],end=start+oldSize;if(pos<=end){let result=start+diff+((oldSize?pos==start?-1:pos==end?1:assoc:assoc)<0?0:newSize);if(simple)return result;let recover=pos==(assoc<0?start:end)?null:makeRecover(i/3,pos-start),del2=pos==start?2:pos==end?1:4;return(assoc<0?pos!=start:pos!=end)&&(del2|=8),new MapResult(result,del2,recover)}diff+=newSize-oldSize}return simple?pos+diff:new MapResult(pos+diff,0,null)}touches(pos,recover){let diff=0,index=recoverIndex(recover),oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2;for(let i=0;i<this.ranges.length;i+=3){let start=this.ranges[i]-(this.inverted?diff:0);if(start>pos)break;let oldSize=this.ranges[i+oldIndex];if(pos<=start+oldSize&&i==3*index)return!0;diff+=this.ranges[i+newIndex]-oldSize}return!1}forEach(f){let oldIndex=this.inverted?2:1,newIndex=this.inverted?1:2;for(let i=0,diff=0;i<this.ranges.length;i+=3){let start=this.ranges[i],oldStart=start-(this.inverted?diff:0),newStart=start+(this.inverted?0:diff),oldSize=this.ranges[i+oldIndex],newSize=this.ranges[i+newIndex];f(oldStart,oldStart+oldSize,newStart,newStart+newSize),diff+=newSize-oldSize}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(n){return 0==n?StepMap.empty:new StepMap(n<0?[0,-n,0]:[0,0,n])}}__name(StepMap,"StepMap"),StepMap.empty=new StepMap([]);class Mapping{constructor(maps=[],mirror,from=0,to=maps.length){this.maps=maps,this.mirror=mirror,this.from=from,this.to=to}slice(from=0,to=this.maps.length){return new Mapping(this.maps,this.mirror,from,to)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(map,mirrors){this.to=this.maps.push(map),null!=mirrors&&this.setMirror(this.maps.length-1,mirrors)}appendMapping(mapping){for(let i=0,startSize=this.maps.length;i<mapping.maps.length;i++){let mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i],null!=mirr&&mirr<i?startSize+mirr:void 0)}}getMirror(n){if(this.mirror)for(let i=0;i<this.mirror.length;i++)if(this.mirror[i]==n)return this.mirror[i+(i%2?-1:1)]}setMirror(n,m){this.mirror||(this.mirror=[]),this.mirror.push(n,m)}appendMappingInverted(mapping){for(let i=mapping.maps.length-1,totalSize=this.maps.length+mapping.maps.length;i>=0;i--){let mirr=mapping.getMirror(i);this.appendMap(mapping.maps[i].invert(),null!=mirr&&mirr>i?totalSize-mirr-1:void 0)}}invert(){let inverse=new Mapping;return inverse.appendMappingInverted(this),inverse}map(pos,assoc=1){if(this.mirror)return this._map(pos,assoc,!0);for(let i=this.from;i<this.to;i++)pos=this.maps[i].map(pos,assoc);return pos}mapResult(pos,assoc=1){return this._map(pos,assoc,!1)}_map(pos,assoc,simple){let delInfo=0;for(let i=this.from;i<this.to;i++){let result=this.maps[i].mapResult(pos,assoc);if(null!=result.recover){let corr=this.getMirror(i);if(null!=corr&&corr>i&&corr<this.to){i=corr,pos=this.maps[corr].recover(result.recover);continue}}delInfo|=result.delInfo,pos=result.pos}return simple?pos:new MapResult(pos,delInfo,null)}}__name(Mapping,"Mapping");const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(other){return null}static fromJSON(schema2,json){if(!json||!json.stepType)throw new RangeError("Invalid input for Step.fromJSON");let type=stepsByID[json.stepType];if(!type)throw new RangeError(`No step type ${json.stepType} defined`);return type.fromJSON(schema2,json)}static jsonID(id,stepClass){if(id in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+id);return stepsByID[id]=stepClass,stepClass.prototype.jsonID=id,stepClass}}__name(Step,"Step");class StepResult{constructor(doc2,failed){this.doc=doc2,this.failed=failed}static ok(doc2){return new StepResult(doc2,null)}static fail(message){return new StepResult(null,message)}static fromReplace(doc2,from,to,slice){try{return StepResult.ok(doc2.replace(from,to,slice))}catch(e){if(e instanceof ReplaceError)return StepResult.fail(e.message);throw e}}}function mapFragment(fragment,f,parent){let mapped=[];for(let i=0;i<fragment.childCount;i++){let child=fragment.child(i);child.content.size&&(child=child.copy(mapFragment(child.content,f,child))),child.isInline&&(child=f(child,parent,i)),mapped.push(child)}return dist_Fragment.fromArray(mapped)}__name(StepResult,"StepResult"),__name(mapFragment,"mapFragment");class AddMarkStep extends Step{constructor(from,to,mark){super(),this.from=from,this.to=to,this.mark=mark}apply(doc2){let oldSlice=doc2.slice(this.from,this.to),$from=doc2.resolve(this.from),parent=$from.node($from.sharedDepth(this.to)),slice=new dist_Slice(mapFragment(oldSlice.content,(node,parent2)=>node.isAtom&&parent2.type.allowsMarkType(this.mark.type)?node.mark(this.mark.addToSet(node.marks)):node,parent),oldSlice.openStart,oldSlice.openEnd);return StepResult.fromReplace(doc2,this.from,this.to,slice)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(mapping){let from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new AddMarkStep(from.pos,to.pos,this.mark)}merge(other){return other instanceof AddMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from?new AddMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(schema2,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(json.from,json.to,schema2.markFromJSON(json.mark))}}__name(AddMarkStep,"AddMarkStep"),Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(from,to,mark){super(),this.from=from,this.to=to,this.mark=mark}apply(doc2){let oldSlice=doc2.slice(this.from,this.to),slice=new dist_Slice(mapFragment(oldSlice.content,node=>node.mark(this.mark.removeFromSet(node.marks)),doc2),oldSlice.openStart,oldSlice.openEnd);return StepResult.fromReplace(doc2,this.from,this.to,slice)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(mapping){let from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deleted&&to.deleted||from.pos>=to.pos?null:new RemoveMarkStep(from.pos,to.pos,this.mark)}merge(other){return other instanceof RemoveMarkStep&&other.mark.eq(this.mark)&&this.from<=other.to&&this.to>=other.from?new RemoveMarkStep(Math.min(this.from,other.from),Math.max(this.to,other.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(schema2,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(json.from,json.to,schema2.markFromJSON(json.mark))}}__name(RemoveMarkStep,"RemoveMarkStep"),Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(pos,mark){super(),this.pos=pos,this.mark=mark}apply(doc2){let node=doc2.nodeAt(this.pos);if(!node)return StepResult.fail("No node at mark step's position");let updated=node.type.create(node.attrs,null,this.mark.addToSet(node.marks));return StepResult.fromReplace(doc2,this.pos,this.pos+1,new dist_Slice(dist_Fragment.from(updated),0,node.isLeaf?0:1))}invert(doc2){let node=doc2.nodeAt(this.pos);if(node){let newSet=this.mark.addToSet(node.marks);if(newSet.length==node.marks.length){for(let i=0;i<node.marks.length;i++)if(!node.marks[i].isInSet(newSet))return new AddNodeMarkStep(this.pos,node.marks[i]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(mapping){let pos=mapping.mapResult(this.pos,1);return pos.deletedAfter?null:new AddNodeMarkStep(pos.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(schema2,json){if("number"!=typeof json.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(json.pos,schema2.markFromJSON(json.mark))}}__name(AddNodeMarkStep,"AddNodeMarkStep"),Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(pos,mark){super(),this.pos=pos,this.mark=mark}apply(doc2){let node=doc2.nodeAt(this.pos);if(!node)return StepResult.fail("No node at mark step's position");let updated=node.type.create(node.attrs,null,this.mark.removeFromSet(node.marks));return StepResult.fromReplace(doc2,this.pos,this.pos+1,new dist_Slice(dist_Fragment.from(updated),0,node.isLeaf?0:1))}invert(doc2){let node=doc2.nodeAt(this.pos);return node&&this.mark.isInSet(node.marks)?new AddNodeMarkStep(this.pos,this.mark):this}map(mapping){let pos=mapping.mapResult(this.pos,1);return pos.deletedAfter?null:new RemoveNodeMarkStep(pos.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(schema2,json){if("number"!=typeof json.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(json.pos,schema2.markFromJSON(json.mark))}}__name(RemoveNodeMarkStep,"RemoveNodeMarkStep"),Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(from,to,slice,structure=!1){super(),this.from=from,this.to=to,this.slice=slice,this.structure=structure}apply(doc2){return this.structure&&contentBetween(doc2,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(doc2,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(doc2){return new ReplaceStep(this.from,this.from+this.slice.size,doc2.slice(this.from,this.to))}map(mapping){let from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1);return from.deletedAcross&&to.deletedAcross?null:new ReplaceStep(from.pos,Math.max(from.pos,to.pos),this.slice)}merge(other){if(!(other instanceof ReplaceStep)||other.structure||this.structure)return null;if(this.from+this.slice.size!=other.from||this.slice.openEnd||other.slice.openStart){if(other.to!=this.from||this.slice.openStart||other.slice.openEnd)return null;{let slice=this.slice.size+other.slice.size==0?dist_Slice.empty:new dist_Slice(other.slice.content.append(this.slice.content),other.slice.openStart,this.slice.openEnd);return new ReplaceStep(other.from,this.to,slice,this.structure)}}{let slice=this.slice.size+other.slice.size==0?dist_Slice.empty:new dist_Slice(this.slice.content.append(other.slice.content),this.slice.openStart,other.slice.openEnd);return new ReplaceStep(this.from,this.to+(other.to-other.from),slice,this.structure)}}toJSON(){let json={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json}static fromJSON(schema2,json){if("number"!=typeof json.from||"number"!=typeof json.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(json.from,json.to,dist_Slice.fromJSON(schema2,json.slice),!!json.structure)}}__name(ReplaceStep,"ReplaceStep"),Step.jsonID("replace",ReplaceStep);class dist_ReplaceAroundStep extends Step{constructor(from,to,gapFrom,gapTo,slice,insert,structure=!1){super(),this.from=from,this.to=to,this.gapFrom=gapFrom,this.gapTo=gapTo,this.slice=slice,this.insert=insert,this.structure=structure}apply(doc2){if(this.structure&&(contentBetween(doc2,this.from,this.gapFrom)||contentBetween(doc2,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let gap=doc2.slice(this.gapFrom,this.gapTo);if(gap.openStart||gap.openEnd)return StepResult.fail("Gap is not a flat range");let inserted=this.slice.insertAt(this.insert,gap.content);return inserted?StepResult.fromReplace(doc2,this.from,this.to,inserted):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(doc2){let gap=this.gapTo-this.gapFrom;return new dist_ReplaceAroundStep(this.from,this.from+this.slice.size+gap,this.from+this.insert,this.from+this.insert+gap,doc2.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(mapping){let from=mapping.mapResult(this.from,1),to=mapping.mapResult(this.to,-1),gapFrom=mapping.map(this.gapFrom,-1),gapTo=mapping.map(this.gapTo,1);return from.deletedAcross&&to.deletedAcross||gapFrom<from.pos||gapTo>to.pos?null:new dist_ReplaceAroundStep(from.pos,to.pos,gapFrom,gapTo,this.slice,this.insert,this.structure)}toJSON(){let json={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(json.slice=this.slice.toJSON()),this.structure&&(json.structure=!0),json}static fromJSON(schema2,json){if("number"!=typeof json.from||"number"!=typeof json.to||"number"!=typeof json.gapFrom||"number"!=typeof json.gapTo||"number"!=typeof json.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new dist_ReplaceAroundStep(json.from,json.to,json.gapFrom,json.gapTo,dist_Slice.fromJSON(schema2,json.slice),json.insert,!!json.structure)}}function contentBetween(doc2,from,to){let $from=doc2.resolve(from),dist2=to-from,depth=$from.depth;for(;dist2>0&&depth>0&&$from.indexAfter(depth)==$from.node(depth).childCount;)depth--,dist2--;if(dist2>0){let next=$from.node(depth).maybeChild($from.indexAfter(depth));for(;dist2>0;){if(!next||next.isLeaf)return!0;next=next.firstChild,dist2--}}return!1}function addMark(tr,from,to,mark){let removing,adding,removed=[],added=[];tr.doc.nodesBetween(from,to,(node,pos,parent)=>{if(!node.isInline)return;let marks2=node.marks;if(!mark.isInSet(marks2)&&parent.type.allowsMarkType(mark.type)){let start=Math.max(pos,from),end=Math.min(pos+node.nodeSize,to),newSet=mark.addToSet(marks2);for(let i=0;i<marks2.length;i++)marks2[i].isInSet(newSet)||(removing&&removing.to==start&&removing.mark.eq(marks2[i])?removing.to=end:removed.push(removing=new RemoveMarkStep(start,end,marks2[i])));adding&&adding.to==start?adding.to=end:added.push(adding=new AddMarkStep(start,end,mark))}}),removed.forEach(s2=>tr.step(s2)),added.forEach(s2=>tr.step(s2))}function removeMark(tr,from,to,mark){let matched=[],step=0;tr.doc.nodesBetween(from,to,(node,pos)=>{if(!node.isInline)return;step++;let toRemove=null;if(mark instanceof MarkType){let found2,set=node.marks;for(;found2=mark.isInSet(set);)(toRemove||(toRemove=[])).push(found2),set=found2.removeFromSet(set)}else mark?mark.isInSet(node.marks)&&(toRemove=[mark]):toRemove=node.marks;if(toRemove&&toRemove.length){let end=Math.min(pos+node.nodeSize,to);for(let i=0;i<toRemove.length;i++){let found2,style=toRemove[i];for(let j=0;j<matched.length;j++){let m=matched[j];m.step==step-1&&style.eq(matched[j].style)&&(found2=m)}found2?(found2.to=end,found2.step=step):matched.push({style,from:Math.max(pos,from),to:end,step})}}}),matched.forEach(m=>tr.step(new RemoveMarkStep(m.from,m.to,m.style)))}function clearIncompatible(tr,pos,parentType,match=parentType.contentMatch){let node=tr.doc.nodeAt(pos),delSteps=[],cur=pos+1;for(let i=0;i<node.childCount;i++){let child=node.child(i),end=cur+child.nodeSize,allowed=match.matchType(child.type);if(allowed){match=allowed;for(let j=0;j<child.marks.length;j++)parentType.allowsMarkType(child.marks[j].type)||tr.step(new RemoveMarkStep(cur,end,child.marks[j]))}else delSteps.push(new ReplaceStep(cur,end,Slice.empty));cur=end}if(!match.validEnd){let fill=match.fillBefore(Fragment.empty,!0);tr.replace(cur,cur,new Slice(fill,0,0))}for(let i=delSteps.length-1;i>=0;i--)tr.step(delSteps[i])}function canCut(node,start,end){return(0==start||node.canReplace(start,node.childCount))&&(end==node.childCount||node.canReplace(0,end))}function liftTarget(range2){let content=range2.parent.content.cutByIndex(range2.startIndex,range2.endIndex);for(let depth=range2.depth;;--depth){let node=range2.$from.node(depth),index=range2.$from.index(depth),endIndex=range2.$to.indexAfter(depth);if(depth<range2.depth&&node.canReplace(index,endIndex,content))return depth;if(0==depth||node.type.spec.isolating||!canCut(node,index,endIndex))break}return null}function lift(tr,range2,target){let{$from,$to,depth}=range2,gapStart=$from.before(depth+1),gapEnd=$to.after(depth+1),start=gapStart,end=gapEnd,before=Fragment.empty,openStart=0;for(let d=depth,splitting=!1;d>target;d--)splitting||$from.index(d)>0?(splitting=!0,before=Fragment.from($from.node(d).copy(before)),openStart++):start--;let after=Fragment.empty,openEnd=0;for(let d=depth,splitting=!1;d>target;d--)splitting||$to.after(d+1)<$to.end(d)?(splitting=!0,after=Fragment.from($to.node(d).copy(after)),openEnd++):end++;tr.step(new dist_ReplaceAroundStep(start,end,gapStart,gapEnd,new Slice(before.append(after),openStart,openEnd),before.size-openStart,!0))}function findWrapping(range2,nodeType,attrs=null,innerRange=range2){let around=findWrappingOutside(range2,nodeType),inner=around&&findWrappingInside(innerRange,nodeType);return inner?around.map(withAttrs).concat({type:nodeType,attrs}).concat(inner.map(withAttrs)):null}function withAttrs(type){return{type,attrs:null}}function findWrappingOutside(range2,type){let{parent,startIndex,endIndex}=range2,around=parent.contentMatchAt(startIndex).findWrapping(type);if(!around)return null;let outer=around.length?around[0]:type;return parent.canReplaceWith(startIndex,endIndex,outer)?around:null}function findWrappingInside(range2,type){let{parent,startIndex,endIndex}=range2,inner=parent.child(startIndex),inside=type.contentMatch.findWrapping(inner.type);if(!inside)return null;let innerMatch=(inside.length?inside[inside.length-1]:type).contentMatch;for(let i=startIndex;innerMatch&&i<endIndex;i++)innerMatch=innerMatch.matchType(parent.child(i).type);return innerMatch&&innerMatch.validEnd?inside:null}function wrap(tr,range2,wrappers){let content=Fragment.empty;for(let i=wrappers.length-1;i>=0;i--){if(content.size){let match=wrappers[i].type.contentMatch.matchFragment(content);if(!match||!match.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}content=Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content))}let start=range2.start,end=range2.end;tr.step(new dist_ReplaceAroundStep(start,end,start,end,new Slice(content,0,0),wrappers.length,!0))}function setBlockType(tr,from,to,type,attrs){if(!type.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let mapFrom=tr.steps.length;tr.doc.nodesBetween(from,to,(node,pos)=>{if(node.isTextblock&&!node.hasMarkup(type,attrs)&&canChangeType(tr.doc,tr.mapping.slice(mapFrom).map(pos),type)){tr.clearIncompatible(tr.mapping.slice(mapFrom).map(pos,1),type);let mapping=tr.mapping.slice(mapFrom),startM=mapping.map(pos,1),endM=mapping.map(pos+node.nodeSize,1);return tr.step(new dist_ReplaceAroundStep(startM,endM,startM+1,endM-1,new Slice(Fragment.from(type.create(attrs,null,node.marks)),0,0),1,!0)),!1}})}function canChangeType(doc2,pos,type){let $pos=doc2.resolve(pos),index=$pos.index();return $pos.parent.canReplaceWith(index,index+1,type)}function setNodeMarkup(tr,pos,type,attrs,marks2){let node=tr.doc.nodeAt(pos);if(!node)throw new RangeError("No node at given position");type||(type=node.type);let newNode=type.create(attrs,null,marks2||node.marks);if(node.isLeaf)return tr.replaceWith(pos,pos+node.nodeSize,newNode);if(!type.validContent(node.content))throw new RangeError("Invalid content for node type "+type.name);tr.step(new dist_ReplaceAroundStep(pos,pos+node.nodeSize,pos+1,pos+node.nodeSize-1,new Slice(Fragment.from(newNode),0,0),1,!0))}function dist_canSplit(doc2,pos,depth=1,typesAfter){let $pos=doc2.resolve(pos),base=$pos.depth-depth,innerType=typesAfter&&typesAfter[typesAfter.length-1]||$pos.parent;if(base<0||$pos.parent.type.spec.isolating||!$pos.parent.canReplace($pos.index(),$pos.parent.childCount)||!innerType.type.validContent($pos.parent.content.cutByIndex($pos.index(),$pos.parent.childCount)))return!1;for(let d=$pos.depth-1,i=depth-2;d>base;d--,i--){let node=$pos.node(d),index2=$pos.index(d);if(node.type.spec.isolating)return!1;let rest=node.content.cutByIndex(index2,node.childCount),after=typesAfter&&typesAfter[i]||node;if(after!=node&&(rest=rest.replaceChild(0,after.type.create(after.attrs))),!node.canReplace(index2+1,node.childCount)||!after.type.validContent(rest))return!1}let index=$pos.indexAfter(base),baseType=typesAfter&&typesAfter[0];return $pos.node(base).canReplaceWith(index,index,baseType?baseType.type:$pos.node(base+1).type)}function split(tr,pos,depth=1,typesAfter){let $pos=tr.doc.resolve(pos),before=Fragment.empty,after=Fragment.empty;for(let d=$pos.depth,e=$pos.depth-depth,i=depth-1;d>e;d--,i--){before=Fragment.from($pos.node(d).copy(before));let typeAfter=typesAfter&&typesAfter[i];after=Fragment.from(typeAfter?typeAfter.type.create(typeAfter.attrs,after):$pos.node(d).copy(after))}tr.step(new ReplaceStep(pos,pos,new Slice(before.append(after),depth,depth),!0))}function dist_canJoin(doc2,pos){let $pos=doc2.resolve(pos),index=$pos.index();return dist_joinable($pos.nodeBefore,$pos.nodeAfter)&&$pos.parent.canReplace(index,index+1)}function dist_joinable(a,b){return!(!a||!b||a.isLeaf||!a.canAppend(b))}function join(tr,pos,depth){let step=new ReplaceStep(pos-depth,pos+depth,Slice.empty,!0);tr.step(step)}function insertPoint(doc2,pos,nodeType){let $pos=doc2.resolve(pos);if($pos.parent.canReplaceWith($pos.index(),$pos.index(),nodeType))return pos;if(0==$pos.parentOffset)for(let d=$pos.depth-1;d>=0;d--){let index=$pos.index(d);if($pos.node(d).canReplaceWith(index,index,nodeType))return $pos.before(d+1);if(index>0)return null}if($pos.parentOffset==$pos.parent.content.size)for(let d=$pos.depth-1;d>=0;d--){let index=$pos.indexAfter(d);if($pos.node(d).canReplaceWith(index,index,nodeType))return $pos.after(d+1);if(index<$pos.node(d).childCount)return null}return null}function dropPoint(doc2,pos,slice){let $pos=doc2.resolve(pos);if(!slice.content.size)return pos;let content=slice.content;for(let i=0;i<slice.openStart;i++)content=content.firstChild.content;for(let pass=1;pass<=(0==slice.openStart&&slice.size?2:1);pass++)for(let d=$pos.depth;d>=0;d--){let bias=d==$pos.depth?0:$pos.pos<=($pos.start(d+1)+$pos.end(d+1))/2?-1:1,insertPos=$pos.index(d)+(bias>0?1:0),parent=$pos.node(d),fits=!1;if(1==pass)fits=parent.canReplace(insertPos,insertPos,content);else{let wrapping=parent.contentMatchAt(insertPos).findWrapping(content.firstChild.type);fits=wrapping&&parent.canReplaceWith(insertPos,insertPos,wrapping[0])}if(fits)return 0==bias?$pos.pos:bias<0?$pos.before(d+1):$pos.after(d+1)}return null}function replaceStep(doc2,from,to=from,slice=dist_Slice.empty){if(from==to&&!slice.size)return null;let $from=doc2.resolve(from),$to=doc2.resolve(to);return fitsTrivially($from,$to,slice)?new ReplaceStep(from,to,slice):new Fitter($from,$to,slice).fit()}function fitsTrivially($from,$to,slice){return!slice.openStart&&!slice.openEnd&&$from.start()==$to.start()&&$from.parent.canReplace($from.index(),$to.index(),slice.content)}__name(dist_ReplaceAroundStep,"dist_ReplaceAroundStep"),Step.jsonID("replaceAround",dist_ReplaceAroundStep),__name(contentBetween,"contentBetween"),__name(addMark,"addMark"),__name(removeMark,"removeMark"),__name(clearIncompatible,"clearIncompatible"),__name(canCut,"canCut"),__name(liftTarget,"liftTarget"),__name(lift,"lift"),__name(findWrapping,"findWrapping"),__name(withAttrs,"withAttrs"),__name(findWrappingOutside,"findWrappingOutside"),__name(findWrappingInside,"findWrappingInside"),__name(wrap,"wrap"),__name(setBlockType,"setBlockType"),__name(canChangeType,"canChangeType"),__name(setNodeMarkup,"setNodeMarkup"),__name(dist_canSplit,"dist_canSplit"),__name(split,"split"),__name(dist_canJoin,"dist_canJoin"),__name(dist_joinable,"dist_joinable"),__name(function dist_joinPoint(doc2,pos,dir=-1){let $pos=doc2.resolve(pos);for(let d=$pos.depth;;d--){let before,after,index=$pos.index(d);if(d==$pos.depth?(before=$pos.nodeBefore,after=$pos.nodeAfter):dir>0?(before=$pos.node(d+1),index++,after=$pos.node(d).maybeChild(index)):(before=$pos.node(d).maybeChild(index-1),after=$pos.node(d+1)),before&&!before.isTextblock&&dist_joinable(before,after)&&$pos.node(d).canReplace(index,index+1))return pos;if(0==d)break;pos=dir<0?$pos.before(d):$pos.after(d)}},"dist_joinPoint"),__name(join,"join"),__name(insertPoint,"insertPoint"),__name(dropPoint,"dropPoint"),__name(replaceStep,"replaceStep"),__name(fitsTrivially,"fitsTrivially");class Fitter{constructor($from,$to,unplaced){this.$from=$from,this.$to=$to,this.unplaced=unplaced,this.frontier=[],this.placed=dist_Fragment.empty;for(let i=0;i<=$from.depth;i++){let node=$from.node(i);this.frontier.push({type:node.type,match:node.contentMatchAt($from.indexAfter(i))})}for(let i=$from.depth;i>0;i--)this.placed=dist_Fragment.from($from.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let fit=this.findFittable();fit?this.placeNodes(fit):this.openMore()||this.dropNode()}let moveInline=this.mustMoveInline(),placedSize=this.placed.size-this.depth-this.$from.depth,$from=this.$from,$to=this.close(moveInline<0?this.$to:$from.doc.resolve(moveInline));if(!$to)return null;let content=this.placed,openStart=$from.depth,openEnd=$to.depth;for(;openStart&&openEnd&&1==content.childCount;)content=content.firstChild.content,openStart--,openEnd--;let slice=new dist_Slice(content,openStart,openEnd);return moveInline>-1?new dist_ReplaceAroundStep($from.pos,moveInline,this.$to.pos,this.$to.end(),slice,placedSize):slice.size||$from.pos!=this.$to.pos?new ReplaceStep($from.pos,$to.pos,slice):null}findFittable(){for(let pass=1;pass<=2;pass++)for(let sliceDepth=this.unplaced.openStart;sliceDepth>=0;sliceDepth--){let fragment,parent=null;sliceDepth?(parent=contentAt(this.unplaced.content,sliceDepth-1).firstChild,fragment=parent.content):fragment=this.unplaced.content;let first=fragment.firstChild;for(let frontierDepth=this.depth;frontierDepth>=0;frontierDepth--){let wrap2,{type,match}=this.frontier[frontierDepth],inject=null;if(1==pass&&(first?match.matchType(first.type)||(inject=match.fillBefore(dist_Fragment.from(first),!1)):parent&&type.compatibleContent(parent.type)))return{sliceDepth,frontierDepth,parent,inject};if(2==pass&&first&&(wrap2=match.findWrapping(first.type)))return{sliceDepth,frontierDepth,parent,wrap:wrap2};if(parent&&match.matchType(parent.type))break}}}openMore(){let{content,openStart,openEnd}=this.unplaced,inner=contentAt(content,openStart);return!(!inner.childCount||inner.firstChild.isLeaf)&&(this.unplaced=new dist_Slice(content,openStart+1,Math.max(openEnd,inner.size+openStart>=content.size-openEnd?openStart+1:0)),!0)}dropNode(){let{content,openStart,openEnd}=this.unplaced,inner=contentAt(content,openStart);if(inner.childCount<=1&&openStart>0){let openAtEnd=content.size-openStart<=openStart+inner.size;this.unplaced=new dist_Slice(dropFromFragment(content,openStart-1,1),openStart-1,openAtEnd?openStart-1:openEnd)}else this.unplaced=new dist_Slice(dropFromFragment(content,openStart,1),openStart,openEnd)}placeNodes({sliceDepth,frontierDepth,parent,inject,wrap:wrap2}){for(;this.depth>frontierDepth;)this.closeFrontierNode();if(wrap2)for(let i=0;i<wrap2.length;i++)this.openFrontierNode(wrap2[i]);let slice=this.unplaced,fragment=parent?parent.content:slice.content,openStart=slice.openStart-sliceDepth,taken=0,add2=[],{match,type}=this.frontier[frontierDepth];if(inject){for(let i=0;i<inject.childCount;i++)add2.push(inject.child(i));match=match.matchFragment(inject)}let openEndCount=fragment.size+sliceDepth-(slice.content.size-slice.openEnd);for(;taken<fragment.childCount;){let next=fragment.child(taken),matches2=match.matchType(next.type);if(!matches2)break;taken++,(taken>1||0==openStart||next.content.size)&&(match=matches2,add2.push(closeNodeStart(next.mark(type.allowedMarks(next.marks)),1==taken?openStart:0,taken==fragment.childCount?openEndCount:-1)))}let toEnd=taken==fragment.childCount;toEnd||(openEndCount=-1),this.placed=addToFragment(this.placed,frontierDepth,dist_Fragment.from(add2)),this.frontier[frontierDepth].match=match,toEnd&&openEndCount<0&&parent&&parent.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let i=0,cur=fragment;i<openEndCount;i++){let node=cur.lastChild;this.frontier.push({type:node.type,match:node.contentMatchAt(node.childCount)}),cur=node.content}this.unplaced=toEnd?0==sliceDepth?dist_Slice.empty:new dist_Slice(dropFromFragment(slice.content,sliceDepth-1,1),sliceDepth-1,openEndCount<0?slice.openEnd:sliceDepth-1):new dist_Slice(dropFromFragment(slice.content,sliceDepth,taken),slice.openStart,slice.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let level,top=this.frontier[this.depth];if(!top.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,top.type,top.match,!1)||this.$to.depth==this.depth&&(level=this.findCloseLevel(this.$to))&&level.depth==this.depth)return-1;let{depth}=this.$to,after=this.$to.after(depth);for(;depth>1&&after==this.$to.end(--depth);)++after;return after}findCloseLevel($to){scan:for(let i=Math.min(this.depth,$to.depth);i>=0;i--){let{match,type}=this.frontier[i],dropInner=i<$to.depth&&$to.end(i+1)==$to.pos+($to.depth-(i+1)),fit=contentAfterFits($to,i,type,match,dropInner);if(fit){for(let d=i-1;d>=0;d--){let{match:match2,type:type2}=this.frontier[d],matches2=contentAfterFits($to,d,type2,match2,!0);if(!matches2||matches2.childCount)continue scan}return{depth:i,fit,move:dropInner?$to.doc.resolve($to.after(i+1)):$to}}}}close($to){let close=this.findCloseLevel($to);if(!close)return null;for(;this.depth>close.depth;)this.closeFrontierNode();close.fit.childCount&&(this.placed=addToFragment(this.placed,close.depth,close.fit)),$to=close.move;for(let d=close.depth+1;d<=$to.depth;d++){let node=$to.node(d),add2=node.type.contentMatch.fillBefore(node.content,!0,$to.index(d));this.openFrontierNode(node.type,node.attrs,add2)}return $to}openFrontierNode(type,attrs=null,content){let top=this.frontier[this.depth];top.match=top.match.matchType(type),this.placed=addToFragment(this.placed,this.depth,dist_Fragment.from(type.create(attrs,content))),this.frontier.push({type,match:type.contentMatch})}closeFrontierNode(){let add2=this.frontier.pop().match.fillBefore(dist_Fragment.empty,!0);add2.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,add2))}}function dropFromFragment(fragment,depth,count){return 0==depth?fragment.cutByIndex(count,fragment.childCount):fragment.replaceChild(0,fragment.firstChild.copy(dropFromFragment(fragment.firstChild.content,depth-1,count)))}function addToFragment(fragment,depth,content){return 0==depth?fragment.append(content):fragment.replaceChild(fragment.childCount-1,fragment.lastChild.copy(addToFragment(fragment.lastChild.content,depth-1,content)))}function contentAt(fragment,depth){for(let i=0;i<depth;i++)fragment=fragment.firstChild.content;return fragment}function closeNodeStart(node,openStart,openEnd){if(openStart<=0)return node;let frag=node.content;return openStart>1&&(frag=frag.replaceChild(0,closeNodeStart(frag.firstChild,openStart-1,1==frag.childCount?openEnd-1:0))),openStart>0&&(frag=node.type.contentMatch.fillBefore(frag).append(frag),openEnd<=0&&(frag=frag.append(node.type.contentMatch.matchFragment(frag).fillBefore(dist_Fragment.empty,!0)))),node.copy(frag)}function contentAfterFits($to,depth,type,match,open){let node=$to.node(depth),index=open?$to.indexAfter(depth):$to.index(depth);if(index==node.childCount&&!type.compatibleContent(node.type))return null;let fit=match.fillBefore(node.content,!0,index);return fit&&!invalidMarks(type,node.content,index)?fit:null}function invalidMarks(type,fragment,start){for(let i=start;i<fragment.childCount;i++)if(!type.allowsMarks(fragment.child(i).marks))return!0;return!1}function definesContent(type){return type.spec.defining||type.spec.definingForContent}function replaceRange(tr,from,to,slice){if(!slice.size)return tr.deleteRange(from,to);let $from=tr.doc.resolve(from),$to=tr.doc.resolve(to);if(fitsTrivially($from,$to,slice))return tr.step(new ReplaceStep(from,to,slice));let targetDepths=coveredDepths($from,tr.doc.resolve(to));0==targetDepths[targetDepths.length-1]&&targetDepths.pop();let preferredTarget=-($from.depth+1);targetDepths.unshift(preferredTarget);for(let d=$from.depth,pos=$from.pos-1;d>0;d--,pos--){let spec=$from.node(d).type.spec;if(spec.defining||spec.definingAsContext||spec.isolating)break;targetDepths.indexOf(d)>-1?preferredTarget=d:$from.before(d)==pos&&targetDepths.splice(1,0,-d)}let preferredTargetIndex=targetDepths.indexOf(preferredTarget),leftNodes=[],preferredDepth=slice.openStart;for(let content=slice.content,i=0;;i++){let node=content.firstChild;if(leftNodes.push(node),i==slice.openStart)break;content=node.content}for(let d=preferredDepth-1;d>=0;d--){let type=leftNodes[d].type,def=definesContent(type);if(def&&$from.node(preferredTargetIndex).type!=type)preferredDepth=d;else if(def||!type.isTextblock)break}for(let j=slice.openStart;j>=0;j--){let openDepth=(j+preferredDepth+1)%(slice.openStart+1),insert=leftNodes[openDepth];if(insert)for(let i=0;i<targetDepths.length;i++){let targetDepth=targetDepths[(i+preferredTargetIndex)%targetDepths.length],expand=!0;targetDepth<0&&(expand=!1,targetDepth=-targetDepth);let parent=$from.node(targetDepth-1),index=$from.index(targetDepth-1);if(parent.canReplaceWith(index,index,insert.type,insert.marks))return tr.replace($from.before(targetDepth),expand?$to.after(targetDepth):to,new Slice(closeFragment(slice.content,0,slice.openStart,openDepth),openDepth,slice.openEnd))}}let startSteps=tr.steps.length;for(let i=targetDepths.length-1;i>=0&&(tr.replace(from,to,slice),!(tr.steps.length>startSteps));i--){let depth=targetDepths[i];depth<0||(from=$from.before(depth),to=$to.after(depth))}}function closeFragment(fragment,depth,oldOpen,newOpen,parent){if(depth<oldOpen){let first=fragment.firstChild;fragment=fragment.replaceChild(0,first.copy(closeFragment(first.content,depth+1,oldOpen,newOpen,first)))}if(depth>newOpen){let match=parent.contentMatchAt(0),start=match.fillBefore(fragment).append(fragment);fragment=start.append(match.matchFragment(start).fillBefore(Fragment.empty,!0))}return fragment}function replaceRangeWith(tr,from,to,node){if(!node.isInline&&from==to&&tr.doc.resolve(from).parent.content.size){let point=insertPoint(tr.doc,from,node.type);null!=point&&(from=to=point)}tr.replaceRange(from,to,new Slice(Fragment.from(node),0,0))}function deleteRange(tr,from,to){let $from=tr.doc.resolve(from),$to=tr.doc.resolve(to),covered=coveredDepths($from,$to);for(let i=0;i<covered.length;i++){let depth=covered[i],last=i==covered.length-1;if(last&&0==depth||$from.node(depth).type.contentMatch.validEnd)return tr.delete($from.start(depth),$to.end(depth));if(depth>0&&(last||$from.node(depth-1).canReplace($from.index(depth-1),$to.indexAfter(depth-1))))return tr.delete($from.before(depth),$to.after(depth))}for(let d=1;d<=$from.depth&&d<=$to.depth;d++)if(from-$from.start(d)==$from.depth-d&&to>$from.end(d)&&$to.end(d)-to!=$to.depth-d)return tr.delete($from.before(d),to);tr.delete(from,to)}function coveredDepths($from,$to){let result=[];for(let d=Math.min($from.depth,$to.depth);d>=0;d--){let start=$from.start(d);if(start<$from.pos-($from.depth-d)||$to.end(d)>$to.pos+($to.depth-d)||$from.node(d).type.spec.isolating||$to.node(d).type.spec.isolating)break;(start==$to.start(d)||d==$from.depth&&d==$to.depth&&$from.parent.inlineContent&&$to.parent.inlineContent&&d&&$to.start(d-1)==start-1)&&result.push(d)}return result}__name(Fitter,"Fitter"),__name(dropFromFragment,"dropFromFragment"),__name(addToFragment,"addToFragment"),__name(contentAt,"contentAt"),__name(closeNodeStart,"closeNodeStart"),__name(contentAfterFits,"contentAfterFits"),__name(invalidMarks,"invalidMarks"),__name(definesContent,"definesContent"),__name(replaceRange,"replaceRange"),__name(closeFragment,"closeFragment"),__name(replaceRangeWith,"replaceRangeWith"),__name(deleteRange,"deleteRange"),__name(coveredDepths,"coveredDepths");class AttrStep extends Step{constructor(pos,attr,value){super(),this.pos=pos,this.attr=attr,this.value=value}apply(doc2){let node=doc2.nodeAt(this.pos);if(!node)return StepResult.fail("No node at attribute step's position");let attrs=Object.create(null);for(let name in node.attrs)attrs[name]=node.attrs[name];attrs[this.attr]=this.value;let updated=node.type.create(attrs,null,node.marks);return StepResult.fromReplace(doc2,this.pos,this.pos+1,new dist_Slice(dist_Fragment.from(updated),0,node.isLeaf?0:1))}getMap(){return StepMap.empty}invert(doc2){return new AttrStep(this.pos,this.attr,doc2.nodeAt(this.pos).attrs[this.attr])}map(mapping){let pos=mapping.mapResult(this.pos,1);return pos.deletedAfter?null:new AttrStep(pos.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(schema2,json){if("number"!=typeof json.pos||"string"!=typeof json.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(json.pos,json.attr,json.value)}}__name(AttrStep,"AttrStep"),Step.jsonID("attr",AttrStep);let TransformError=__name(class extends Error{},"TransformError");TransformError=__name(function TransformError2(message){let err=Error.call(this,message);return err.__proto__=TransformError2.prototype,err},"TransformError"),TransformError.prototype=Object.create(Error.prototype),TransformError.prototype.constructor=TransformError,TransformError.prototype.name="TransformError";__name(class dist_Transform{constructor(doc2){this.doc=doc2,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(step){let result=this.maybeStep(step);if(result.failed)throw new TransformError(result.failed);return this}maybeStep(step){let result=step.apply(this.doc);return result.failed||this.addStep(step,result.doc),result}get docChanged(){return this.steps.length>0}addStep(step,doc2){this.docs.push(this.doc),this.steps.push(step),this.mapping.appendMap(step.getMap()),this.doc=doc2}replace(from,to=from,slice=Slice.empty){let step=replaceStep(this.doc,from,to,slice);return step&&this.step(step),this}replaceWith(from,to,content){return this.replace(from,to,new Slice(Fragment.from(content),0,0))}delete(from,to){return this.replace(from,to,Slice.empty)}insert(pos,content){return this.replaceWith(pos,pos,content)}replaceRange(from,to,slice){return replaceRange(this,from,to,slice),this}replaceRangeWith(from,to,node){return replaceRangeWith(this,from,to,node),this}deleteRange(from,to){return deleteRange(this,from,to),this}lift(range2,target){return lift(this,range2,target),this}join(pos,depth=1){return join(this,pos,depth),this}wrap(range2,wrappers){return wrap(this,range2,wrappers),this}setBlockType(from,to=from,type,attrs=null){return setBlockType(this,from,to,type,attrs),this}setNodeMarkup(pos,type,attrs=null,marks2=[]){return setNodeMarkup(this,pos,type,attrs,marks2),this}setNodeAttribute(pos,attr,value){return this.step(new AttrStep(pos,attr,value)),this}addNodeMark(pos,mark){return this.step(new AddNodeMarkStep(pos,mark)),this}removeNodeMark(pos,mark){if(!(mark instanceof Mark)){let node=this.doc.nodeAt(pos);if(!node)throw new RangeError("No node at position "+pos);if(!(mark=mark.isInSet(node.marks)))return this}return this.step(new RemoveNodeMarkStep(pos,mark)),this}split(pos,depth=1,typesAfter){return split(this,pos,depth,typesAfter),this}addMark(from,to,mark){return addMark(this,from,to,mark),this}removeMark(from,to,mark){return removeMark(this,from,to,mark),this}clearIncompatible(pos,parentType,match){return clearIncompatible(this,pos,parentType,match),this}},"dist_Transform");const classesById=Object.create(null);class dist_Selection{constructor($anchor,$head,ranges){this.$anchor=$anchor,this.$head=$head,this.ranges=ranges||[new SelectionRange($anchor.min($head),$anchor.max($head))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let ranges=this.ranges;for(let i=0;i<ranges.length;i++)if(ranges[i].$from.pos!=ranges[i].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(tr,content=dist_Slice.empty){let lastNode=content.content.lastChild,lastParent=null;for(let i=0;i<content.openEnd;i++)lastParent=lastNode,lastNode=lastNode.lastChild;let mapFrom=tr.steps.length,ranges=this.ranges;for(let i=0;i<ranges.length;i++){let{$from,$to}=ranges[i],mapping=tr.mapping.slice(mapFrom);tr.replaceRange(mapping.map($from.pos),mapping.map($to.pos),i?dist_Slice.empty:content),0==i&&selectionToInsertionEnd(tr,mapFrom,(lastNode?lastNode.isInline:lastParent&&lastParent.isTextblock)?-1:1)}}replaceWith(tr,node){let mapFrom=tr.steps.length,ranges=this.ranges;for(let i=0;i<ranges.length;i++){let{$from,$to}=ranges[i],mapping=tr.mapping.slice(mapFrom),from=mapping.map($from.pos),to=mapping.map($to.pos);i?tr.deleteRange(from,to):(tr.replaceRangeWith(from,to,node),selectionToInsertionEnd(tr,mapFrom,node.isInline?-1:1))}}static findFrom($pos,dir,textOnly=!1){let inner=$pos.parent.inlineContent?new dist_TextSelection($pos):findSelectionIn($pos.node(0),$pos.parent,$pos.pos,$pos.index(),dir,textOnly);if(inner)return inner;for(let depth=$pos.depth-1;depth>=0;depth--){let found2=dir<0?findSelectionIn($pos.node(0),$pos.node(depth),$pos.before(depth+1),$pos.index(depth),dir,textOnly):findSelectionIn($pos.node(0),$pos.node(depth),$pos.after(depth+1),$pos.index(depth)+1,dir,textOnly);if(found2)return found2}return null}static near($pos,bias=1){return this.findFrom($pos,bias)||this.findFrom($pos,-bias)||new AllSelection($pos.node(0))}static atStart(doc2){return findSelectionIn(doc2,doc2,0,0,1)||new AllSelection(doc2)}static atEnd(doc2){return findSelectionIn(doc2,doc2,doc2.content.size,doc2.childCount,-1)||new AllSelection(doc2)}static fromJSON(doc2,json){if(!json||!json.type)throw new RangeError("Invalid input for Selection.fromJSON");let cls=classesById[json.type];if(!cls)throw new RangeError(`No selection type ${json.type} defined`);return cls.fromJSON(doc2,json)}static jsonID(id,selectionClass){if(id in classesById)throw new RangeError("Duplicate use of selection JSON ID "+id);return classesById[id]=selectionClass,selectionClass.prototype.jsonID=id,selectionClass}getBookmark(){return dist_TextSelection.between(this.$anchor,this.$head).getBookmark()}}__name(dist_Selection,"dist_Selection"),dist_Selection.prototype.visible=!0;class SelectionRange{constructor($from,$to){this.$from=$from,this.$to=$to}}__name(SelectionRange,"SelectionRange");let warnedAboutTextSelection=!1;function checkTextSelection($pos){!warnedAboutTextSelection&&!$pos.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+$pos.parent.type.name+")"))}__name(checkTextSelection,"checkTextSelection");class dist_TextSelection extends dist_Selection{constructor($anchor,$head=$anchor){checkTextSelection($anchor),checkTextSelection($head),super($anchor,$head)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(doc2,mapping){let $head=doc2.resolve(mapping.map(this.head));if(!$head.parent.inlineContent)return dist_Selection.near($head);let $anchor=doc2.resolve(mapping.map(this.anchor));return new dist_TextSelection($anchor.parent.inlineContent?$anchor:$head,$head)}replace(tr,content=dist_Slice.empty){if(super.replace(tr,content),content==dist_Slice.empty){let marks2=this.$from.marksAcross(this.$to);marks2&&tr.ensureMarks(marks2)}}eq(other){return other instanceof dist_TextSelection&&other.anchor==this.anchor&&other.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(doc2,json){if("number"!=typeof json.anchor||"number"!=typeof json.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new dist_TextSelection(doc2.resolve(json.anchor),doc2.resolve(json.head))}static create(doc2,anchor,head=anchor){let $anchor=doc2.resolve(anchor);return new this($anchor,head==anchor?$anchor:doc2.resolve(head))}static between($anchor,$head,bias){let dPos=$anchor.pos-$head.pos;if((!bias||dPos)&&(bias=dPos>=0?1:-1),!$head.parent.inlineContent){let found2=dist_Selection.findFrom($head,bias,!0)||dist_Selection.findFrom($head,-bias,!0);if(!found2)return dist_Selection.near($head,bias);$head=found2.$head}return $anchor.parent.inlineContent||(0==dPos?$anchor=$head:($anchor=(dist_Selection.findFrom($anchor,-bias,!0)||dist_Selection.findFrom($anchor,bias,!0)).$anchor).pos<$head.pos!=dPos<0&&($anchor=$head)),new dist_TextSelection($anchor,$head)}}__name(dist_TextSelection,"dist_TextSelection"),dist_Selection.jsonID("text",dist_TextSelection);class TextBookmark{constructor(anchor,head){this.anchor=anchor,this.head=head}map(mapping){return new TextBookmark(mapping.map(this.anchor),mapping.map(this.head))}resolve(doc2){return dist_TextSelection.between(doc2.resolve(this.anchor),doc2.resolve(this.head))}}__name(TextBookmark,"TextBookmark");class dist_NodeSelection extends dist_Selection{constructor($pos){let node=$pos.nodeAfter,$end=$pos.node(0).resolve($pos.pos+node.nodeSize);super($pos,$end),this.node=node}map(doc2,mapping){let{deleted,pos}=mapping.mapResult(this.anchor),$pos=doc2.resolve(pos);return deleted?dist_Selection.near($pos):new dist_NodeSelection($pos)}content(){return new dist_Slice(dist_Fragment.from(this.node),0,0)}eq(other){return other instanceof dist_NodeSelection&&other.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(doc2,json){if("number"!=typeof json.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new dist_NodeSelection(doc2.resolve(json.anchor))}static create(doc2,from){return new dist_NodeSelection(doc2.resolve(from))}static isSelectable(node){return!node.isText&&!1!==node.type.spec.selectable}}__name(dist_NodeSelection,"dist_NodeSelection"),dist_NodeSelection.prototype.visible=!1,dist_Selection.jsonID("node",dist_NodeSelection);class NodeBookmark{constructor(anchor){this.anchor=anchor}map(mapping){let{deleted,pos}=mapping.mapResult(this.anchor);return deleted?new TextBookmark(pos,pos):new NodeBookmark(pos)}resolve(doc2){let $pos=doc2.resolve(this.anchor),node=$pos.nodeAfter;return node&&dist_NodeSelection.isSelectable(node)?new dist_NodeSelection($pos):dist_Selection.near($pos)}}__name(NodeBookmark,"NodeBookmark");class AllSelection extends dist_Selection{constructor(doc2){super(doc2.resolve(0),doc2.resolve(doc2.content.size))}replace(tr,content=dist_Slice.empty){if(content==dist_Slice.empty){tr.delete(0,tr.doc.content.size);let sel=dist_Selection.atStart(tr.doc);sel.eq(tr.selection)||tr.setSelection(sel)}else super.replace(tr,content)}toJSON(){return{type:"all"}}static fromJSON(doc2){return new AllSelection(doc2)}map(doc2){return new AllSelection(doc2)}eq(other){return other instanceof AllSelection}getBookmark(){return AllBookmark}}__name(AllSelection,"AllSelection"),dist_Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve:doc2=>new AllSelection(doc2)};function findSelectionIn(doc2,node,pos,index,dir,text=!1){if(node.inlineContent)return dist_TextSelection.create(doc2,pos);for(let i=index-(dir>0?0:1);dir>0?i<node.childCount:i>=0;i+=dir){let child=node.child(i);if(child.isAtom){if(!text&&dist_NodeSelection.isSelectable(child))return dist_NodeSelection.create(doc2,pos-(dir<0?child.nodeSize:0))}else{let inner=findSelectionIn(doc2,child,pos+dir,dir<0?child.childCount:0,dir,text);if(inner)return inner}pos+=child.nodeSize*dir}return null}function selectionToInsertionEnd(tr,startLen,bias){let last=tr.steps.length-1;if(last<startLen)return;let end,step=tr.steps[last];(step instanceof ReplaceStep||step instanceof dist_ReplaceAroundStep)&&(tr.mapping.maps[last].forEach((_from,_to,_newFrom,newTo)=>{null==end&&(end=newTo)}),tr.setSelection(dist_Selection.near(tr.doc.resolve(end),bias)))}__name(findSelectionIn,"findSelectionIn"),__name(selectionToInsertionEnd,"selectionToInsertionEnd");class Transaction extends(null){constructor(state){super(state.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=state.selection,this.storedMarks=state.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(selection){if(selection.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=selection,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(marks2){return this.storedMarks=marks2,this.updated|=2,this}ensureMarks(marks2){return Mark.sameSet(this.storedMarks||this.selection.$from.marks(),marks2)||this.setStoredMarks(marks2),this}addStoredMark(mark){return this.ensureMarks(mark.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(mark){return this.ensureMarks(mark.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(step,doc2){super.addStep(step,doc2),this.updated=-3&this.updated,this.storedMarks=null}setTime(time){return this.time=time,this}replaceSelection(slice){return this.selection.replace(this,slice),this}replaceSelectionWith(node,inheritMarks=!0){let selection=this.selection;return inheritMarks&&(node=node.mark(this.storedMarks||(selection.empty?selection.$from.marks():selection.$from.marksAcross(selection.$to)||Mark.none))),selection.replaceWith(this,node),this}deleteSelection(){return this.selection.replace(this),this}insertText(text,from,to){let schema2=this.doc.type.schema;if(null==from)return text?this.replaceSelectionWith(schema2.text(text),!0):this.deleteSelection();{if(null==to&&(to=from),to=null==to?from:to,!text)return this.deleteRange(from,to);let marks2=this.storedMarks;if(!marks2){let $from=this.doc.resolve(from);marks2=to==from?$from.marks():$from.marksAcross(this.doc.resolve(to))}return this.replaceRangeWith(from,to,schema2.text(text,marks2)),this.selection.empty||this.setSelection(dist_Selection.near(this.selection.$to)),this}}setMeta(key,value){return this.meta["string"==typeof key?key:key.key]=value,this}getMeta(key){return this.meta["string"==typeof key?key:key.key]}get isGeneric(){for(let _ in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function bind(f,self){return self&&f?f.bind(self):f}__name(Transaction,"Transaction"),__name(bind,"bind");class FieldDesc{constructor(name,desc,self){this.name=name,this.init=bind(desc.init,self),this.apply=bind(desc.apply,self)}}__name(FieldDesc,"FieldDesc");const baseFields=[new FieldDesc("doc",{init:config=>config.doc||config.schema.topNodeType.createAndFill(),apply:tr=>tr.doc}),new FieldDesc("selection",{init:(config,instance)=>config.selection||dist_Selection.atStart(instance.doc),apply:tr=>tr.selection}),new FieldDesc("storedMarks",{init:config=>config.storedMarks||null,apply:(tr,_marks,_old,state)=>state.selection.$cursor?tr.storedMarks:null}),new FieldDesc("scrollToSelection",{init:()=>0,apply:(tr,prev)=>tr.scrolledIntoView?prev+1:prev})];class Configuration{constructor(schema2,plugins){this.schema=schema2,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),plugins&&plugins.forEach(plugin=>{if(this.pluginsByKey[plugin.key])throw new RangeError("Adding different instances of a keyed plugin ("+plugin.key+")");this.plugins.push(plugin),this.pluginsByKey[plugin.key]=plugin,plugin.spec.state&&this.fields.push(new FieldDesc(plugin.key,plugin.spec.state,plugin))})}}__name(Configuration,"Configuration");class dist_EditorState{constructor(config){this.config=config}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(tr){return this.applyTransaction(tr).state}filterTransaction(tr,ignore=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=ignore){let plugin=this.config.plugins[i];if(plugin.spec.filterTransaction&&!plugin.spec.filterTransaction.call(plugin,tr,this))return!1}return!0}applyTransaction(rootTr){if(!this.filterTransaction(rootTr))return{state:this,transactions:[]};let trs=[rootTr],newState=this.applyInner(rootTr),seen=null;for(;;){let haveNew=!1;for(let i=0;i<this.config.plugins.length;i++){let plugin=this.config.plugins[i];if(plugin.spec.appendTransaction){let n=seen?seen[i].n:0,oldState=seen?seen[i].state:this,tr=n<trs.length&&plugin.spec.appendTransaction.call(plugin,n?trs.slice(n):trs,oldState,newState);if(tr&&newState.filterTransaction(tr,i)){if(tr.setMeta("appendedTransaction",rootTr),!seen){seen=[];for(let j=0;j<this.config.plugins.length;j++)seen.push(j<i?{state:newState,n:trs.length}:{state:this,n:0})}trs.push(tr),newState=newState.applyInner(tr),haveNew=!0}seen&&(seen[i]={state:newState,n:trs.length})}}if(!haveNew)return{state:newState,transactions:trs}}}applyInner(tr){if(!tr.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let newInstance=new dist_EditorState(this.config),fields=this.config.fields;for(let i=0;i<fields.length;i++){let field=fields[i];newInstance[field.name]=field.apply(tr,this[field.name],this,newInstance)}return newInstance}get tr(){return new Transaction(this)}static create(config){let $config=new Configuration(config.doc?config.doc.type.schema:config.schema,config.plugins),instance=new dist_EditorState($config);for(let i=0;i<$config.fields.length;i++)instance[$config.fields[i].name]=$config.fields[i].init(config,instance);return instance}reconfigure(config){let $config=new Configuration(this.schema,config.plugins),fields=$config.fields,instance=new dist_EditorState($config);for(let i=0;i<fields.length;i++){let name=fields[i].name;instance[name]=this.hasOwnProperty(name)?this[name]:fields[i].init(config,instance)}return instance}toJSON(pluginFields){let result={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(result.storedMarks=this.storedMarks.map(m=>m.toJSON())),pluginFields&&"object"==typeof pluginFields)for(let prop in pluginFields){if("doc"==prop||"selection"==prop)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let plugin=pluginFields[prop],state=plugin.spec.state;state&&state.toJSON&&(result[prop]=state.toJSON.call(plugin,this[plugin.key]))}return result}static fromJSON(config,json,pluginFields){if(!json)throw new RangeError("Invalid input for EditorState.fromJSON");if(!config.schema)throw new RangeError("Required config field 'schema' missing");let $config=new Configuration(config.schema,config.plugins),instance=new dist_EditorState($config);return $config.fields.forEach(field=>{if("doc"==field.name)instance.doc=Node.fromJSON(config.schema,json.doc);else if("selection"==field.name)instance.selection=dist_Selection.fromJSON(instance.doc,json.selection);else if("storedMarks"==field.name)json.storedMarks&&(instance.storedMarks=json.storedMarks.map(config.schema.markFromJSON));else{if(pluginFields)for(let prop in pluginFields){let plugin=pluginFields[prop],state=plugin.spec.state;if(plugin.key==field.name&&state&&state.fromJSON&&Object.prototype.hasOwnProperty.call(json,prop))return void(instance[field.name]=state.fromJSON.call(plugin,config,json[prop],instance))}instance[field.name]=field.init(config,instance)}}),instance}}function bindProps(obj,self,target){for(let prop in obj){let val=obj[prop];val instanceof Function?val=val.bind(self):"handleDOMEvents"==prop&&(val=bindProps(val,self,{})),target[prop]=val}return target}__name(dist_EditorState,"dist_EditorState"),__name(bindProps,"bindProps");class Plugin{constructor(spec){this.spec=spec,this.props={},spec.props&&bindProps(spec.props,this,this.props),this.key=spec.key?spec.key.key:createKey("plugin")}getState(state){return state[this.key]}}__name(Plugin,"Plugin");const keys=Object.create(null);function createKey(name){return name in keys?name+"$"+ ++keys[name]:(keys[name]=0,name+"$")}__name(createKey,"createKey");class PluginKey{constructor(name="key"){this.key=createKey(name)}get(state){return state.config.pluginsByKey[this.key]}getState(state){return state[this.key]}}__name(PluginKey,"PluginKey");const nav="undefined"!=typeof navigator?navigator:null,dist_doc="undefined"!=typeof document?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie&&/gecko\/(\d+)/i.test(agent);gecko&&(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac=ios||!!nav&&/Mac/.test(nav.platform),android=/Android \d/.test(agent),webkit=!!dist_doc&&"webkitFontSmoothing"in dist_doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,domIndex=__name(function(node){for(var index=0;;index++)if(!(node=node.previousSibling))return index},"domIndex"),parentNode=__name(function(node){let parent=node.assignedSlot||node.parentNode;return parent&&11==parent.nodeType?parent.host:parent},"parentNode");let reusedRange=null;const textRange=__name(function(node,from,to){let range2=reusedRange||(reusedRange=document.createRange());return range2.setEnd(node,null==to?node.nodeValue.length:to),range2.setStart(node,from||0),range2},"textRange"),isEquivalentPosition=__name(function(node,off,targetNode,targetOff){return targetNode&&(scanFor(node,off,targetNode,targetOff,-1)||scanFor(node,off,targetNode,targetOff,1))},"isEquivalentPosition"),atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(node,off,targetNode,targetOff,dir){for(;;){if(node==targetNode&&off==targetOff)return!0;if(off==(dir<0?0:nodeSize(node))){let parent=node.parentNode;if(!parent||1!=parent.nodeType||hasBlockDesc(node)||atomElements.test(node.nodeName)||"false"==node.contentEditable)return!1;off=domIndex(node)+(dir<0?0:1),node=parent}else{if(1!=node.nodeType)return!1;if("false"==(node=node.childNodes[off+(dir<0?-1:0)]).contentEditable)return!1;off=dir<0?nodeSize(node):0}}}function nodeSize(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function isOnEdge(node,offset2,parent){for(let atStart=0==offset2,atEnd=offset2==nodeSize(node);atStart||atEnd;){if(node==parent)return!0;let index=domIndex(node);if(!(node=node.parentNode))return!1;atStart=atStart&&0==index,atEnd=atEnd&&index==nodeSize(node)}}function hasBlockDesc(dom){let desc;for(let cur=dom;cur&&!(desc=cur.pmViewDesc);cur=cur.parentNode);return desc&&desc.node&&desc.node.isBlock&&(desc.dom==dom||desc.contentDOM==dom)}__name(scanFor,"scanFor"),__name(nodeSize,"nodeSize"),__name(isOnEdge,"isOnEdge"),__name(hasBlockDesc,"hasBlockDesc");const selectionCollapsed=__name(function(domSel){let collapsed=domSel.isCollapsed;return collapsed&&chrome&&domSel.rangeCount&&!domSel.getRangeAt(0).collapsed&&(collapsed=!1),collapsed},"selectionCollapsed");function keyEvent(keyCode,key){let event=document.createEvent("Event");return event.initEvent("keydown",!0,!0),event.keyCode=keyCode,event.key=event.code=key,event}function windowRect(doc2){return{left:0,right:doc2.documentElement.clientWidth,top:0,bottom:doc2.documentElement.clientHeight}}function getSide(value,side){return"number"==typeof value?value:value[side]}function clientRect(node){let rect=node.getBoundingClientRect(),scaleX=rect.width/node.offsetWidth||1,scaleY=rect.height/node.offsetHeight||1;return{left:rect.left,right:rect.left+node.clientWidth*scaleX,top:rect.top,bottom:rect.top+node.clientHeight*scaleY}}function scrollRectIntoView(view,rect,startDOM){let scrollThreshold=view.someProp("scrollThreshold")||0,scrollMargin=view.someProp("scrollMargin")||5,doc2=view.dom.ownerDocument;for(let parent=startDOM||view.dom;parent;parent=parentNode(parent)){if(1!=parent.nodeType)continue;let elt=parent,atTop=elt==doc2.body,bounding=atTop?windowRect(doc2):clientRect(elt),moveX=0,moveY=0;if(rect.top<bounding.top+getSide(scrollThreshold,"top")?moveY=-(bounding.top-rect.top+getSide(scrollMargin,"top")):rect.bottom>bounding.bottom-getSide(scrollThreshold,"bottom")&&(moveY=rect.bottom-bounding.bottom+getSide(scrollMargin,"bottom")),rect.left<bounding.left+getSide(scrollThreshold,"left")?moveX=-(bounding.left-rect.left+getSide(scrollMargin,"left")):rect.right>bounding.right-getSide(scrollThreshold,"right")&&(moveX=rect.right-bounding.right+getSide(scrollMargin,"right")),moveX||moveY)if(atTop)doc2.defaultView.scrollBy(moveX,moveY);else{let startX=elt.scrollLeft,startY=elt.scrollTop;moveY&&(elt.scrollTop+=moveY),moveX&&(elt.scrollLeft+=moveX);let dX=elt.scrollLeft-startX,dY=elt.scrollTop-startY;rect={left:rect.left-dX,top:rect.top-dY,right:rect.right-dX,bottom:rect.bottom-dY}}if(atTop)break}}function storeScrollPos(view){let refDOM,refTop,rect=view.dom.getBoundingClientRect(),startY=Math.max(0,rect.top);for(let x=(rect.left+rect.right)/2,y=startY+1;y<Math.min(innerHeight,rect.bottom);y+=5){let dom=view.root.elementFromPoint(x,y);if(!dom||dom==view.dom||!view.dom.contains(dom))continue;let localRect=dom.getBoundingClientRect();if(localRect.top>=startY-20){refDOM=dom,refTop=localRect.top;break}}return{refDOM,refTop,stack:scrollStack(view.dom)}}function scrollStack(dom){let stack=[],doc2=dom.ownerDocument;for(let cur=dom;cur&&(stack.push({dom:cur,top:cur.scrollTop,left:cur.scrollLeft}),dom!=doc2);cur=parentNode(cur));return stack}function resetScrollPos({refDOM,refTop,stack}){let newRefTop=refDOM?refDOM.getBoundingClientRect().top:0;restoreScrollStack(stack,0==newRefTop?0:newRefTop-refTop)}function restoreScrollStack(stack,dTop){for(let i=0;i<stack.length;i++){let{dom,top,left}=stack[i];dom.scrollTop!=top+dTop&&(dom.scrollTop=top+dTop),dom.scrollLeft!=left&&(dom.scrollLeft=left)}}__name(keyEvent,"keyEvent"),__name(windowRect,"windowRect"),__name(getSide,"getSide"),__name(clientRect,"clientRect"),__name(scrollRectIntoView,"scrollRectIntoView"),__name(storeScrollPos,"storeScrollPos"),__name(scrollStack,"scrollStack"),__name(resetScrollPos,"resetScrollPos"),__name(restoreScrollStack,"restoreScrollStack");let preventScrollSupported=null;function focusPreventScroll(dom){if(dom.setActive)return dom.setActive();if(preventScrollSupported)return dom.focus(preventScrollSupported);let stored=scrollStack(dom);dom.focus(null==preventScrollSupported?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(stored,0))}function findOffsetInNode(node,coords){let closest,coordsClosest,dxClosest=2e8,offset2=0,rowBot=coords.top,rowTop=coords.top;for(let child=node.firstChild,childIndex=0;child;child=child.nextSibling,childIndex++){let rects;if(1==child.nodeType)rects=child.getClientRects();else{if(3!=child.nodeType)continue;rects=textRange(child).getClientRects()}for(let i=0;i<rects.length;i++){let rect=rects[i];if(rect.top<=rowBot&&rect.bottom>=rowTop){rowBot=Math.max(rect.bottom,rowBot),rowTop=Math.min(rect.top,rowTop);let dx=rect.left>coords.left?rect.left-coords.left:rect.right<coords.left?coords.left-rect.right:0;if(dx<dxClosest){closest=child,dxClosest=dx,coordsClosest=dx&&3==closest.nodeType?{left:rect.right<coords.left?rect.right:rect.left,top:coords.top}:coords,1==child.nodeType&&dx&&(offset2=childIndex+(coords.left>=(rect.left+rect.right)/2?1:0));continue}}!closest&&(coords.left>=rect.right&&coords.top>=rect.top||coords.left>=rect.left&&coords.top>=rect.bottom)&&(offset2=childIndex+1)}}return closest&&3==closest.nodeType?findOffsetInText(closest,coordsClosest):!closest||dxClosest&&1==closest.nodeType?{node,offset:offset2}:findOffsetInNode(closest,coordsClosest)}function findOffsetInText(node,coords){let len=node.nodeValue.length,range2=document.createRange();for(let i=0;i<len;i++){range2.setEnd(node,i+1),range2.setStart(node,i);let rect=singleRect(range2,1);if(rect.top!=rect.bottom&&inRect(coords,rect))return{node,offset:i+(coords.left>=(rect.left+rect.right)/2?1:0)}}return{node,offset:0}}function inRect(coords,rect){return coords.left>=rect.left-1&&coords.left<=rect.right+1&&coords.top>=rect.top-1&&coords.top<=rect.bottom+1}function targetKludge(dom,coords){let parent=dom.parentNode;return parent&&/^li$/i.test(parent.nodeName)&&coords.left<dom.getBoundingClientRect().left?parent:dom}function posFromElement(view,elt,coords){let{node,offset:offset2}=findOffsetInNode(elt,coords),bias=-1;if(1==node.nodeType&&!node.firstChild){let rect=node.getBoundingClientRect();bias=rect.left!=rect.right&&coords.left>(rect.left+rect.right)/2?1:-1}return view.docView.posFromDOM(node,offset2,bias)}function posFromCaret(view,node,offset2,coords){let outside=-1;for(let cur=node;cur!=view.dom;){let desc=view.docView.nearestDesc(cur,!0);if(!desc)return null;if(desc.node.isBlock&&desc.parent){let rect=desc.dom.getBoundingClientRect();if(rect.left>coords.left||rect.top>coords.top)outside=desc.posBefore;else{if(!(rect.right<coords.left||rect.bottom<coords.top))break;outside=desc.posAfter}}cur=desc.dom.parentNode}return outside>-1?outside:view.docView.posFromDOM(node,offset2,1)}function elementFromPoint(element,coords,box){let len=element.childNodes.length;if(len&&box.top<box.bottom)for(let startI=Math.max(0,Math.min(len-1,Math.floor(len*(coords.top-box.top)/(box.bottom-box.top))-2)),i=startI;;){let child=element.childNodes[i];if(1==child.nodeType){let rects=child.getClientRects();for(let j=0;j<rects.length;j++){let rect=rects[j];if(inRect(coords,rect))return elementFromPoint(child,coords,rect)}}if((i=(i+1)%len)==startI)break}return element}function posAtCoords(view,coords){let node,doc2=view.dom.ownerDocument,offset2=0;if(doc2.caretPositionFromPoint)try{let pos2=doc2.caretPositionFromPoint(coords.left,coords.top);pos2&&({offsetNode:node,offset:offset2}=pos2)}catch{}if(!node&&doc2.caretRangeFromPoint){let range2=doc2.caretRangeFromPoint(coords.left,coords.top);range2&&({startContainer:node,startOffset:offset2}=range2)}let pos,elt=(view.root.elementFromPoint?view.root:doc2).elementFromPoint(coords.left,coords.top);if(!elt||!view.dom.contains(1!=elt.nodeType?elt.parentNode:elt)){let box=view.dom.getBoundingClientRect();if(!inRect(coords,box)||(elt=elementFromPoint(view.dom,coords,box),!elt))return null}if(safari)for(let p=elt;node&&p;p=parentNode(p))p.draggable&&(node=void 0);if(elt=targetKludge(elt,coords),node){if(gecko&&1==node.nodeType&&(offset2=Math.min(offset2,node.childNodes.length),offset2<node.childNodes.length)){let box,next=node.childNodes[offset2];"IMG"==next.nodeName&&(box=next.getBoundingClientRect()).right<=coords.left&&box.bottom>coords.top&&offset2++}node==view.dom&&offset2==node.childNodes.length-1&&1==node.lastChild.nodeType&&coords.top>node.lastChild.getBoundingClientRect().bottom?pos=view.state.doc.content.size:(0==offset2||1!=node.nodeType||"BR"!=node.childNodes[offset2-1].nodeName)&&(pos=posFromCaret(view,node,offset2,coords))}null==pos&&(pos=posFromElement(view,elt,coords));let desc=view.docView.nearestDesc(elt,!0);return{pos,inside:desc?desc.posAtStart-desc.border:-1}}function singleRect(target,bias){let rects=target.getClientRects();return rects.length?rects[bias<0?0:rects.length-1]:target.getBoundingClientRect()}__name(focusPreventScroll,"focusPreventScroll"),__name(findOffsetInNode,"findOffsetInNode"),__name(findOffsetInText,"findOffsetInText"),__name(inRect,"inRect"),__name(targetKludge,"targetKludge"),__name(posFromElement,"posFromElement"),__name(posFromCaret,"posFromCaret"),__name(elementFromPoint,"elementFromPoint"),__name(posAtCoords,"posAtCoords"),__name(singleRect,"singleRect");const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(view,pos,side){let{node,offset:offset2,atom}=view.docView.domFromPos(pos,side<0?-1:1),supportEmptyRange=webkit||gecko;if(3==node.nodeType){if(!supportEmptyRange||!BIDI.test(node.nodeValue)&&(side<0?offset2:offset2!=node.nodeValue.length)){let from=offset2,to=offset2,takeSide=side<0?1:-1;return side<0&&!offset2?(to++,takeSide=-1):side>=0&&offset2==node.nodeValue.length?(from--,takeSide=1):side<0?from--:to++,flattenV(singleRect(textRange(node,from,to),takeSide),takeSide<0)}{let rect=singleRect(textRange(node,offset2,offset2),side);if(gecko&&offset2&&/\s/.test(node.nodeValue[offset2-1])&&offset2<node.nodeValue.length){let rectBefore=singleRect(textRange(node,offset2-1,offset2-1),-1);if(rectBefore.top==rect.top){let rectAfter=singleRect(textRange(node,offset2,offset2+1),-1);if(rectAfter.top!=rect.top)return flattenV(rectAfter,rectAfter.left<rectBefore.left)}}return rect}}if(!view.state.doc.resolve(pos-(atom||0)).parent.inlineContent){if(null==atom&&offset2&&(side<0||offset2==nodeSize(node))){let before=node.childNodes[offset2-1];if(1==before.nodeType)return flattenH(before.getBoundingClientRect(),!1)}if(null==atom&&offset2<nodeSize(node)){let after=node.childNodes[offset2];if(1==after.nodeType)return flattenH(after.getBoundingClientRect(),!0)}return flattenH(node.getBoundingClientRect(),side>=0)}if(null==atom&&offset2&&(side<0||offset2==nodeSize(node))){let before=node.childNodes[offset2-1],target=3==before.nodeType?textRange(before,nodeSize(before)-(supportEmptyRange?0:1)):1!=before.nodeType||"BR"==before.nodeName&&before.nextSibling?null:before;if(target)return flattenV(singleRect(target,1),!1)}if(null==atom&&offset2<nodeSize(node)){let after=node.childNodes[offset2];for(;after.pmViewDesc&&after.pmViewDesc.ignoreForCoords;)after=after.nextSibling;let target=after?3==after.nodeType?textRange(after,0,supportEmptyRange?0:1):1==after.nodeType?after:null:null;if(target)return flattenV(singleRect(target,-1),!0)}return flattenV(singleRect(3==node.nodeType?textRange(node):node,-side),side>=0)}function flattenV(rect,left){if(0==rect.width)return rect;let x=left?rect.left:rect.right;return{top:rect.top,bottom:rect.bottom,left:x,right:x}}function flattenH(rect,top){if(0==rect.height)return rect;let y=top?rect.top:rect.bottom;return{top:y,bottom:y,left:rect.left,right:rect.right}}function withFlushedState(view,state,f){let viewState=view.state,active=view.root.activeElement;viewState!=state&&view.updateState(state),active!=view.dom&&view.focus();try{return f()}finally{viewState!=state&&view.updateState(viewState),active!=view.dom&&active&&active.focus()}}function endOfTextblockVertical(view,state,dir){let sel=state.selection,$pos="up"==dir?sel.$from:sel.$to;return withFlushedState(view,state,()=>{let{node:dom}=view.docView.domFromPos($pos.pos,"up"==dir?-1:1);for(;;){let nearest=view.docView.nearestDesc(dom,!0);if(!nearest)break;if(nearest.node.isBlock){dom=nearest.dom;break}dom=nearest.dom.parentNode}let coords=coordsAtPos(view,$pos.pos,1);for(let child=dom.firstChild;child;child=child.nextSibling){let boxes;if(1==child.nodeType)boxes=child.getClientRects();else{if(3!=child.nodeType)continue;boxes=textRange(child,0,child.nodeValue.length).getClientRects()}for(let i=0;i<boxes.length;i++){let box=boxes[i];if(box.bottom>box.top+1&&("up"==dir?coords.top-box.top>2*(box.bottom-coords.top):box.bottom-coords.bottom>2*(coords.bottom-box.top)))return!1}}return!0})}__name(coordsAtPos,"coordsAtPos"),__name(flattenV,"flattenV"),__name(flattenH,"flattenH"),__name(withFlushedState,"withFlushedState"),__name(endOfTextblockVertical,"endOfTextblockVertical");const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(view,state,dir){let{$head}=state.selection;if(!$head.parent.isTextblock)return!1;let offset2=$head.parentOffset,atStart=!offset2,atEnd=offset2==$head.parent.content.size,sel=view.domSelection();return maybeRTL.test($head.parent.textContent)&&sel.modify?withFlushedState(view,state,()=>{let oldRange=sel.getRangeAt(0),oldNode=sel.focusNode,oldOff=sel.focusOffset,oldBidiLevel=sel.caretBidiLevel;sel.modify("move",dir,"character");let result=!($head.depth?view.docView.domAfterPos($head.before()):view.dom).contains(1==sel.focusNode.nodeType?sel.focusNode:sel.focusNode.parentNode)||oldNode==sel.focusNode&&oldOff==sel.focusOffset;return sel.removeAllRanges(),sel.addRange(oldRange),null!=oldBidiLevel&&(sel.caretBidiLevel=oldBidiLevel),result}):"left"==dir||"backward"==dir?atStart:atEnd}__name(endOfTextblockHorizontal,"endOfTextblockHorizontal");let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(view,state,dir){return cachedState==state&&cachedDir==dir?cachedResult:(cachedState=state,cachedDir=dir,cachedResult="up"==dir||"down"==dir?endOfTextblockVertical(view,state,dir):endOfTextblockHorizontal(view,state,dir))}__name(endOfTextblock,"endOfTextblock");__name(class ViewDesc{constructor(parent,children,dom,contentDOM){this.parent=parent,this.children=children,this.dom=dom,this.contentDOM=contentDOM,this.dirty=0,dom.pmViewDesc=this}matchesWidget(widget){return!1}matchesMark(mark){return!1}matchesNode(node,outerDeco,innerDeco){return!1}matchesHack(nodeName){return!1}parseRule(){return null}stopEvent(event){return!1}get size(){let size2=0;for(let i=0;i<this.children.length;i++)size2+=this.children[i].size;return size2}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let i=0;i<this.children.length;i++)this.children[i].destroy()}posBeforeChild(child){for(let i=0,pos=this.posAtStart;;i++){let cur=this.children[i];if(cur==child)return pos;pos+=cur.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(dom,offset2,bias){if(this.contentDOM&&this.contentDOM.contains(1==dom.nodeType?dom:dom.parentNode)){if(bias<0){let domBefore,desc;if(dom==this.contentDOM)domBefore=dom.childNodes[offset2-1];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domBefore=dom.previousSibling}for(;domBefore&&(!(desc=domBefore.pmViewDesc)||desc.parent!=this);)domBefore=domBefore.previousSibling;return domBefore?this.posBeforeChild(desc)+desc.size:this.posAtStart}{let domAfter,desc;if(dom==this.contentDOM)domAfter=dom.childNodes[offset2];else{for(;dom.parentNode!=this.contentDOM;)dom=dom.parentNode;domAfter=dom.nextSibling}for(;domAfter&&(!(desc=domAfter.pmViewDesc)||desc.parent!=this);)domAfter=domAfter.nextSibling;return domAfter?this.posBeforeChild(desc):this.posAtEnd}}let atEnd;if(dom==this.dom&&this.contentDOM)atEnd=offset2>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))atEnd=2&dom.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==offset2)for(let search=dom;;search=search.parentNode){if(search==this.dom){atEnd=!1;break}if(search.previousSibling)break}if(null==atEnd&&offset2==dom.childNodes.length)for(let search=dom;;search=search.parentNode){if(search==this.dom){atEnd=!0;break}if(search.nextSibling)break}}return(null==atEnd?bias>0:atEnd)?this.posAtEnd:this.posAtStart}nearestDesc(dom,onlyNodes=!1){for(let first=!0,cur=dom;cur;cur=cur.parentNode){let nodeDOM,desc=this.getDesc(cur);if(desc&&(!onlyNodes||desc.node)){if(!first||!(nodeDOM=desc.nodeDOM)||(1==nodeDOM.nodeType?nodeDOM.contains(1==dom.nodeType?dom:dom.parentNode):nodeDOM==dom))return desc;first=!1}}}getDesc(dom){let desc=dom.pmViewDesc;for(let cur=desc;cur;cur=cur.parent)if(cur==this)return desc}posFromDOM(dom,offset2,bias){for(let scan=dom;scan;scan=scan.parentNode){let desc=this.getDesc(scan);if(desc)return desc.localPosFromDOM(dom,offset2,bias)}return-1}descAt(pos){for(let i=0,offset2=0;i<this.children.length;i++){let child=this.children[i],end=offset2+child.size;if(offset2==pos&&end!=offset2){for(;!child.border&&child.children.length;)child=child.children[0];return child}if(pos<end)return child.descAt(pos-offset2-child.border);offset2=end}}domFromPos(pos,side){if(!this.contentDOM)return{node:this.dom,offset:0,atom:pos+1};let prev,i=0,offset2=0;for(let curPos=0;i<this.children.length;i++){let child=this.children[i],end=curPos+child.size;if(end>pos||child instanceof TrailingHackViewDesc){offset2=pos-curPos;break}curPos=end}if(offset2)return this.children[i].domFromPos(offset2-this.children[i].border,side);for(;i&&!(prev=this.children[i-1]).size&&prev instanceof WidgetViewDesc&&prev.side>=0;i--);if(side<=0){let prev,enter=!0;for(;prev=i?this.children[i-1]:null,prev&&prev.dom.parentNode!=this.contentDOM;i--,enter=!1);return prev&&side&&enter&&!prev.border&&!prev.domAtom?prev.domFromPos(prev.size,side):{node:this.contentDOM,offset:prev?domIndex(prev.dom)+1:0}}{let next,enter=!0;for(;next=i<this.children.length?this.children[i]:null,next&&next.dom.parentNode!=this.contentDOM;i++,enter=!1);return next&&enter&&!next.border&&!next.domAtom?next.domFromPos(0,side):{node:this.contentDOM,offset:next?domIndex(next.dom):this.contentDOM.childNodes.length}}}parseRange(from,to,base=0){if(0==this.children.length)return{node:this.contentDOM,from,to,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let fromOffset=-1,toOffset=-1;for(let offset2=base,i=0;;i++){let child=this.children[i],end=offset2+child.size;if(-1==fromOffset&&from<=end){let childBase=offset2+child.border;if(from>=childBase&&to<=end-child.border&&child.node&&child.contentDOM&&this.contentDOM.contains(child.contentDOM))return child.parseRange(from,to,childBase);from=offset2;for(let j=i;j>0;j--){let prev=this.children[j-1];if(prev.size&&prev.dom.parentNode==this.contentDOM&&!prev.emptyChildAt(1)){fromOffset=domIndex(prev.dom)+1;break}from-=prev.size}-1==fromOffset&&(fromOffset=0)}if(fromOffset>-1&&(end>to||i==this.children.length-1)){to=end;for(let j=i+1;j<this.children.length;j++){let next=this.children[j];if(next.size&&next.dom.parentNode==this.contentDOM&&!next.emptyChildAt(-1)){toOffset=domIndex(next.dom);break}to+=next.size}-1==toOffset&&(toOffset=this.contentDOM.childNodes.length);break}offset2=end}return{node:this.contentDOM,from,to,fromOffset,toOffset}}emptyChildAt(side){if(this.border||!this.contentDOM||!this.children.length)return!1;let child=this.children[side<0?0:this.children.length-1];return 0==child.size||child.emptyChildAt(side)}domAfterPos(pos){let{node,offset:offset2}=this.domFromPos(pos,0);if(1!=node.nodeType||offset2==node.childNodes.length)throw new RangeError("No node after pos "+pos);return node.childNodes[offset2]}setSelection(anchor,head,root,force=!1){let from=Math.min(anchor,head),to=Math.max(anchor,head);for(let i=0,offset2=0;i<this.children.length;i++){let child=this.children[i],end=offset2+child.size;if(from>offset2&&to<end)return child.setSelection(anchor-offset2-child.border,head-offset2-child.border,root,force);offset2=end}let anchorDOM=this.domFromPos(anchor,anchor?-1:1),headDOM=head==anchor?anchorDOM:this.domFromPos(head,head?-1:1),domSel=root.getSelection(),brKludge=!1;if((gecko||safari)&&anchor==head){let{node,offset:offset2}=anchorDOM;if(3==node.nodeType){if(brKludge=!(!offset2||"\n"!=node.nodeValue[offset2-1]),brKludge&&offset2==node.nodeValue.length)for(let after,scan=node;scan;scan=scan.parentNode){if(after=scan.nextSibling){"BR"==after.nodeName&&(anchorDOM=headDOM={node:after.parentNode,offset:domIndex(after)+1});break}let desc=scan.pmViewDesc;if(desc&&desc.node&&desc.node.isBlock)break}}else{let prev=node.childNodes[offset2-1];brKludge=prev&&("BR"==prev.nodeName||"false"==prev.contentEditable)}}if(gecko&&domSel.focusNode&&domSel.focusNode!=headDOM.node&&1==domSel.focusNode.nodeType){let after=domSel.focusNode.childNodes[domSel.focusOffset];after&&"false"==after.contentEditable&&(force=!0)}if(!(force||brKludge&&safari)&&isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)&&isEquivalentPosition(headDOM.node,headDOM.offset,domSel.focusNode,domSel.focusOffset))return;let domSelExtended=!1;if((domSel.extend||anchor==head)&&!brKludge){domSel.collapse(anchorDOM.node,anchorDOM.offset);try{anchor!=head&&domSel.extend(headDOM.node,headDOM.offset),domSelExtended=!0}catch(err){if(!(err instanceof DOMException))throw err}}if(!domSelExtended){if(anchor>head){let tmp=anchorDOM;anchorDOM=headDOM,headDOM=tmp}let range2=document.createRange();range2.setEnd(headDOM.node,headDOM.offset),range2.setStart(anchorDOM.node,anchorDOM.offset),domSel.removeAllRanges(),domSel.addRange(range2)}}ignoreMutation(mutation){return!this.contentDOM&&"selection"!=mutation.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(from,to){for(let offset2=0,i=0;i<this.children.length;i++){let child=this.children[i],end=offset2+child.size;if(offset2==end?from<=end&&to>=offset2:from<end&&to>offset2){let startInside=offset2+child.border,endInside=end-child.border;if(from>=startInside&&to<=endInside)return this.dirty=from==offset2||to==end?2:1,void(from!=startInside||to!=endInside||!child.contentLost&&child.dom.parentNode==this.contentDOM?child.markDirty(from-startInside,to-startInside):child.dirty=3);child.dirty=child.dom!=child.contentDOM||child.dom.parentNode!=this.contentDOM||child.children.length?3:2}offset2=end}this.dirty=2}markParentsDirty(){let level=1;for(let node=this.parent;node;node=node.parent,level++){let dirty=1==level?2:1;node.dirty<dirty&&(node.dirty=dirty)}}get domAtom(){return!1}get ignoreForCoords(){return!1}},"ViewDesc");class WidgetViewDesc extends(null){constructor(parent,widget,view,pos){let self,dom=widget.type.toDOM;if("function"==typeof dom&&(dom=dom(view,()=>self?self.parent?self.parent.posBeforeChild(self):void 0:pos)),!widget.type.spec.raw){if(1!=dom.nodeType){let wrap2=document.createElement("span");wrap2.appendChild(dom),dom=wrap2}dom.contentEditable="false",dom.classList.add("ProseMirror-widget")}super(parent,[],dom,null),this.widget=widget,this.widget=widget,self=this}matchesWidget(widget){return 0==this.dirty&&widget.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(event){let stop=this.widget.spec.stopEvent;return!!stop&&stop(event)}ignoreMutation(mutation){return"selection"!=mutation.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}__name(WidgetViewDesc,"WidgetViewDesc");class CompositionViewDesc extends(null){constructor(parent,dom,textDOM,text){super(parent,[],dom,null),this.textDOM=textDOM,this.text=text}get size(){return this.text.length}localPosFromDOM(dom,offset2){return dom!=this.textDOM?this.posAtStart+(offset2?this.size:0):this.posAtStart+offset2}domFromPos(pos){return{node:this.textDOM,offset:pos}}ignoreMutation(mut){return"characterData"===mut.type&&mut.target.nodeValue==mut.oldValue}}__name(CompositionViewDesc,"CompositionViewDesc");class MarkViewDesc extends(null){constructor(parent,mark,dom,contentDOM){super(parent,[],dom,contentDOM),this.mark=mark}static create(parent,mark,inline2,view){let custom=view.nodeViews[mark.type.name],spec=custom&&custom(mark,view,inline2);return(!spec||!spec.dom)&&(spec=DOMSerializer.renderSpec(document,mark.type.spec.toDOM(mark,inline2))),new MarkViewDesc(parent,mark,spec.dom,spec.contentDOM||spec.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM||void 0}}matchesMark(mark){return 3!=this.dirty&&this.mark.eq(mark)}markDirty(from,to){if(super.markDirty(from,to),0!=this.dirty){let parent=this.parent;for(;!parent.node;)parent=parent.parent;parent.dirty<this.dirty&&(parent.dirty=this.dirty),this.dirty=0}}slice(from,to,view){let copy2=MarkViewDesc.create(this.parent,this.mark,!0,view),nodes2=this.children,size2=this.size;to<size2&&(nodes2=replaceNodes(nodes2,to,size2,view)),from>0&&(nodes2=replaceNodes(nodes2,0,from,view));for(let i=0;i<nodes2.length;i++)nodes2[i].parent=copy2;return copy2.children=nodes2,copy2}}__name(MarkViewDesc,"MarkViewDesc");class NodeViewDesc extends(null){constructor(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos){super(parent,[],dom,contentDOM),this.node=node,this.outerDeco=outerDeco,this.innerDeco=innerDeco,this.nodeDOM=nodeDOM,contentDOM&&this.updateChildren(view,pos)}static create(parent,node,outerDeco,innerDeco,view,pos){let descObj,custom=view.nodeViews[node.type.name],spec=custom&&custom(node,view,()=>descObj?descObj.parent?descObj.parent.posBeforeChild(descObj):void 0:pos,outerDeco,innerDeco),dom=spec&&spec.dom,contentDOM=spec&&spec.contentDOM;if(node.isText)if(dom){if(3!=dom.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else dom=document.createTextNode(node.text);else dom||({dom,contentDOM}=DOMSerializer.renderSpec(document,node.type.spec.toDOM(node)));!contentDOM&&!node.isText&&"BR"!=dom.nodeName&&(dom.hasAttribute("contenteditable")||(dom.contentEditable="false"),node.type.spec.draggable&&(dom.draggable=!0));let nodeDOM=dom;return dom=applyOuterDeco(dom,outerDeco,node),spec?descObj=new CustomNodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM||null,nodeDOM,spec,view,pos+1):node.isText?new TextViewDesc(parent,node,outerDeco,innerDeco,dom,nodeDOM,view):new NodeViewDesc(parent,node,outerDeco,innerDeco,dom,contentDOM||null,nodeDOM,view,pos+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let rule={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(rule.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let i=this.children.length-1;i>=0;i--){let child=this.children[i];if(this.dom.contains(child.dom.parentNode)){rule.contentElement=child.dom.parentNode;break}}rule.contentElement||(rule.getContent=()=>Fragment.empty)}else rule.contentElement=this.contentDOM;else rule.getContent=()=>this.node.content;return rule}matchesNode(node,outerDeco,innerDeco){return 0==this.dirty&&node.eq(this.node)&&sameOuterDeco(outerDeco,this.outerDeco)&&innerDeco.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(view,pos){let inline2=this.node.inlineContent,off=pos,composition=view.composing?this.localCompositionInfo(view,pos):null,localComposition=composition&&composition.pos>-1?composition:null,compositionInChild=composition&&composition.pos<0,updater=new ViewTreeUpdater(this,localComposition&&localComposition.node);iterDeco(this.node,this.innerDeco,(widget,i,insideNode)=>{widget.spec.marks?updater.syncToMarks(widget.spec.marks,inline2,view):widget.type.side>=0&&!insideNode&&updater.syncToMarks(i==this.node.childCount?Mark.none:this.node.child(i).marks,inline2,view),updater.placeWidget(widget,view,off)},(child,outerDeco,innerDeco,i)=>{let compIndex;updater.syncToMarks(child.marks,inline2,view),updater.findNodeMatch(child,outerDeco,innerDeco,i)||compositionInChild&&view.state.selection.from>off&&view.state.selection.to<off+child.nodeSize&&(compIndex=updater.findIndexWithChild(composition.node))>-1&&updater.updateNodeAt(child,outerDeco,innerDeco,compIndex,view)||updater.updateNextNode(child,outerDeco,innerDeco,view,i)||updater.addNode(child,outerDeco,innerDeco,view,off),off+=child.nodeSize}),updater.syncToMarks([],inline2,view),this.node.isTextblock&&updater.addTextblockHacks(),updater.destroyRest(),(updater.changed||2==this.dirty)&&(localComposition&&this.protectLocalComposition(view,localComposition),renderDescs(this.contentDOM,this.children,view),ios&&iosHacks(this.dom))}localCompositionInfo(view,pos){let{from,to}=view.state.selection;if(!(view.state.selection instanceof TextSelection)||from<pos||to>pos+this.node.content.size)return null;let sel=view.domSelection(),textNode=nearbyTextNode(sel.focusNode,sel.focusOffset);if(!textNode||!this.dom.contains(textNode.parentNode))return null;if(this.node.inlineContent){let text=textNode.nodeValue,textPos=findTextInFragment(this.node.content,text,from-pos,to-pos);return textPos<0?null:{node:textNode,pos:textPos,text}}return{node:textNode,pos:-1,text:""}}protectLocalComposition(view,{node,pos,text}){if(this.getDesc(node))return;let topNode=node;for(;topNode.parentNode!=this.contentDOM;topNode=topNode.parentNode){for(;topNode.previousSibling;)topNode.parentNode.removeChild(topNode.previousSibling);for(;topNode.nextSibling;)topNode.parentNode.removeChild(topNode.nextSibling);topNode.pmViewDesc&&(topNode.pmViewDesc=void 0)}let desc=new CompositionViewDesc(this,topNode,node,text);view.input.compositionNodes.push(desc),this.children=replaceNodes(this.children,pos,pos+text.length,view,desc)}update(node,outerDeco,innerDeco,view){return!(3==this.dirty||!node.sameMarkup(this.node))&&(this.updateInner(node,outerDeco,innerDeco,view),!0)}updateInner(node,outerDeco,innerDeco,view){this.updateOuterDeco(outerDeco),this.node=node,this.innerDeco=innerDeco,this.contentDOM&&this.updateChildren(view,this.posAtStart),this.dirty=0}updateOuterDeco(outerDeco){if(sameOuterDeco(outerDeco,this.outerDeco))return;let needsWrap=1!=this.nodeDOM.nodeType,oldDOM=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,needsWrap),computeOuterDeco(outerDeco,this.node,needsWrap)),this.dom!=oldDOM&&(oldDOM.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=outerDeco}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable")}get domAtom(){return this.node.isAtom}}function docViewDesc(doc2,outerDeco,innerDeco,dom,view){return applyOuterDeco(dom,outerDeco,doc2),new NodeViewDesc(void 0,doc2,outerDeco,innerDeco,dom,dom,dom,view,0)}__name(NodeViewDesc,"NodeViewDesc"),__name(docViewDesc,"docViewDesc");class TextViewDesc extends(null){constructor(parent,node,outerDeco,innerDeco,dom,nodeDOM,view){super(parent,node,outerDeco,innerDeco,dom,null,nodeDOM,view,0)}parseRule(){let skip=this.nodeDOM.parentNode;for(;skip&&skip!=this.dom&&!skip.pmIsDeco;)skip=skip.parentNode;return{skip:skip||!0}}update(node,outerDeco,innerDeco,view){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!node.sameMarkup(this.node))&&(this.updateOuterDeco(outerDeco),(0!=this.dirty||node.text!=this.node.text)&&node.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=node.text,view.trackWrites==this.nodeDOM&&(view.trackWrites=null)),this.node=node,this.dirty=0,!0)}inParent(){let parentDOM=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==parentDOM)return!0;return!1}domFromPos(pos){return{node:this.nodeDOM,offset:pos}}localPosFromDOM(dom,offset2,bias){return dom==this.nodeDOM?this.posAtStart+Math.min(offset2,this.node.text.length):super.localPosFromDOM(dom,offset2,bias)}ignoreMutation(mutation){return"characterData"!=mutation.type&&"selection"!=mutation.type}slice(from,to,view){let node=this.node.cut(from,to),dom=document.createTextNode(node.text);return new TextViewDesc(this.parent,node,this.outerDeco,this.innerDeco,dom,dom,view)}markDirty(from,to){super.markDirty(from,to),this.dom!=this.nodeDOM&&(0==from||to==this.nodeDOM.nodeValue.length)&&(this.dirty=3)}get domAtom(){return!1}}__name(TextViewDesc,"TextViewDesc");class TrailingHackViewDesc extends(null){parseRule(){return{ignore:!0}}matchesHack(nodeName){return 0==this.dirty&&this.dom.nodeName==nodeName}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}__name(TrailingHackViewDesc,"TrailingHackViewDesc");class CustomNodeViewDesc extends(null){constructor(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,spec,view,pos){super(parent,node,outerDeco,innerDeco,dom,contentDOM,nodeDOM,view,pos),this.spec=spec}update(node,outerDeco,innerDeco,view){if(3==this.dirty)return!1;if(this.spec.update){let result=this.spec.update(node,outerDeco,innerDeco);return result&&this.updateInner(node,outerDeco,innerDeco,view),result}return!(!this.contentDOM&&!node.isLeaf)&&super.update(node,outerDeco,innerDeco,view)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(anchor,head,root,force){this.spec.setSelection?this.spec.setSelection(anchor,head,root):super.setSelection(anchor,head,root,force)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(event){return!!this.spec.stopEvent&&this.spec.stopEvent(event)}ignoreMutation(mutation){return this.spec.ignoreMutation?this.spec.ignoreMutation(mutation):super.ignoreMutation(mutation)}}function renderDescs(parentDOM,descs,view){let dom=parentDOM.firstChild,written=!1;for(let i=0;i<descs.length;i++){let desc=descs[i],childDOM=desc.dom;if(childDOM.parentNode==parentDOM){for(;childDOM!=dom;)dom=rm(dom),written=!0;dom=dom.nextSibling}else written=!0,parentDOM.insertBefore(childDOM,dom);if(desc instanceof MarkViewDesc){let pos=dom?dom.previousSibling:parentDOM.lastChild;renderDescs(desc.contentDOM,desc.children,view),dom=pos?pos.nextSibling:parentDOM.firstChild}}for(;dom;)dom=rm(dom),written=!0;written&&view.trackWrites==parentDOM&&(view.trackWrites=null)}__name(CustomNodeViewDesc,"CustomNodeViewDesc"),__name(renderDescs,"renderDescs");const OuterDecoLevel=__name(function(nodeName){nodeName&&(this.nodeName=nodeName)},"OuterDecoLevel");OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(outerDeco,node,needsWrap){if(0==outerDeco.length)return noDeco;let top=needsWrap?noDeco[0]:new OuterDecoLevel,result=[top];for(let i=0;i<outerDeco.length;i++){let attrs=outerDeco[i].type.attrs;if(attrs){attrs.nodeName&&result.push(top=new OuterDecoLevel(attrs.nodeName));for(let name in attrs){let val=attrs[name];null!=val&&(needsWrap&&1==result.length&&result.push(top=new OuterDecoLevel(node.isInline?"span":"div")),"class"==name?top.class=(top.class?top.class+" ":"")+val:"style"==name?top.style=(top.style?top.style+";":"")+val:"nodeName"!=name&&(top[name]=val))}}}return result}function patchOuterDeco(outerDOM,nodeDOM,prevComputed,curComputed){if(prevComputed==noDeco&&curComputed==noDeco)return nodeDOM;let curDOM=nodeDOM;for(let i=0;i<curComputed.length;i++){let deco=curComputed[i],prev=prevComputed[i];if(i){let parent;prev&&prev.nodeName==deco.nodeName&&curDOM!=outerDOM&&(parent=curDOM.parentNode)&&parent.nodeName.toLowerCase()==deco.nodeName||(parent=document.createElement(deco.nodeName),parent.pmIsDeco=!0,parent.appendChild(curDOM),prev=noDeco[0]),curDOM=parent}patchAttributes(curDOM,prev||noDeco[0],deco)}return curDOM}function patchAttributes(dom,prev,cur){for(let name in prev)"class"!=name&&"style"!=name&&"nodeName"!=name&&!(name in cur)&&dom.removeAttribute(name);for(let name in cur)"class"!=name&&"style"!=name&&"nodeName"!=name&&cur[name]!=prev[name]&&dom.setAttribute(name,cur[name]);if(prev.class!=cur.class){let prevList=prev.class?prev.class.split(" ").filter(Boolean):[],curList=cur.class?cur.class.split(" ").filter(Boolean):[];for(let i=0;i<prevList.length;i++)-1==curList.indexOf(prevList[i])&&dom.classList.remove(prevList[i]);for(let i=0;i<curList.length;i++)-1==prevList.indexOf(curList[i])&&dom.classList.add(curList[i]);0==dom.classList.length&&dom.removeAttribute("class")}if(prev.style!=cur.style){if(prev.style){let m,prop=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;m=prop.exec(prev.style);)dom.style.removeProperty(m[1])}cur.style&&(dom.style.cssText+=cur.style)}}function applyOuterDeco(dom,deco,node){return patchOuterDeco(dom,dom,noDeco,computeOuterDeco(deco,node,1!=dom.nodeType))}function sameOuterDeco(a,b){if(a.length!=b.length)return!1;for(let i=0;i<a.length;i++)if(!a[i].type.eq(b[i].type))return!1;return!0}function rm(dom){let next=dom.nextSibling;return dom.parentNode.removeChild(dom),next}__name(computeOuterDeco,"computeOuterDeco"),__name(patchOuterDeco,"patchOuterDeco"),__name(patchAttributes,"patchAttributes"),__name(applyOuterDeco,"applyOuterDeco"),__name(sameOuterDeco,"sameOuterDeco"),__name(rm,"rm");class ViewTreeUpdater{constructor(top,lock){this.lock=lock,this.index=0,this.stack=[],this.changed=!1,this.top=top,this.preMatch=preMatch(top.node.content,top)}destroyBetween(start,end){if(start!=end){for(let i=start;i<end;i++)this.top.children[i].destroy();this.top.children.splice(start,end-start),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(marks2,inline2,view){let keep=0,depth=this.stack.length>>1,maxKeep=Math.min(depth,marks2.length);for(;keep<maxKeep&&(keep==depth-1?this.top:this.stack[keep+1<<1]).matchesMark(marks2[keep])&&!1!==marks2[keep].type.spec.spanning;)keep++;for(;keep<depth;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),depth--;for(;depth<marks2.length;){this.stack.push(this.top,this.index+1);let found2=-1;for(let i=this.index;i<Math.min(this.index+3,this.top.children.length);i++)if(this.top.children[i].matchesMark(marks2[depth])){found2=i;break}if(found2>-1)found2>this.index&&(this.changed=!0,this.destroyBetween(this.index,found2)),this.top=this.top.children[this.index];else{let markDesc=MarkViewDesc.create(this.top,marks2[depth],inline2,view);this.top.children.splice(this.index,0,markDesc),this.top=markDesc,this.changed=!0}this.index=0,depth++}}findNodeMatch(node,outerDeco,innerDeco,index){let targetDesc,found2=-1;if(index>=this.preMatch.index&&(targetDesc=this.preMatch.matches[index-this.preMatch.index]).parent==this.top&&targetDesc.matchesNode(node,outerDeco,innerDeco))found2=this.top.children.indexOf(targetDesc,this.index);else for(let i=this.index,e=Math.min(this.top.children.length,i+5);i<e;i++){let child=this.top.children[i];if(child.matchesNode(node,outerDeco,innerDeco)&&!this.preMatch.matched.has(child)){found2=i;break}}return!(found2<0)&&(this.destroyBetween(this.index,found2),this.index++,!0)}updateNodeAt(node,outerDeco,innerDeco,index,view){let child=this.top.children[index];return 3==child.dirty&&child.dom==child.contentDOM&&(child.dirty=2),!!child.update(node,outerDeco,innerDeco,view)&&(this.destroyBetween(this.index,index),this.index++,!0)}findIndexWithChild(domNode){for(;;){let parent=domNode.parentNode;if(!parent)return-1;if(parent==this.top.contentDOM){let desc=domNode.pmViewDesc;if(desc)for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==desc)return i;return-1}domNode=parent}}updateNextNode(node,outerDeco,innerDeco,view,index){for(let i=this.index;i<this.top.children.length;i++){let next=this.top.children[i];if(next instanceof NodeViewDesc){let preMatch2=this.preMatch.matched.get(next);if(null!=preMatch2&&preMatch2!=index)return!1;let nextDOM=next.dom;if((!this.lock||!(nextDOM==this.lock||1==nextDOM.nodeType&&nextDOM.contains(this.lock.parentNode))||node.isText&&next.node&&next.node.isText&&next.nodeDOM.nodeValue==node.text&&3!=next.dirty&&sameOuterDeco(outerDeco,next.outerDeco))&&next.update(node,outerDeco,innerDeco,view))return this.destroyBetween(this.index,i),next.dom!=nextDOM&&(this.changed=!0),this.index++,!0;break}}return!1}addNode(node,outerDeco,innerDeco,view,pos){this.top.children.splice(this.index++,0,NodeViewDesc.create(this.top,node,outerDeco,innerDeco,view,pos)),this.changed=!0}placeWidget(widget,view,pos){let next=this.index<this.top.children.length?this.top.children[this.index]:null;if(!next||!next.matchesWidget(widget)||widget!=next.widget&&next.widget.type.toDOM.parentNode){let desc=new WidgetViewDesc(this.top,widget,view,pos);this.top.children.splice(this.index++,0,desc),this.changed=!0}else this.index++}addTextblockHacks(){let lastChild=this.top.children[this.index-1],parent=this.top;for(;lastChild instanceof MarkViewDesc;)parent=lastChild,lastChild=parent.children[parent.children.length-1];(!lastChild||!(lastChild instanceof TextViewDesc)||/\n$/.test(lastChild.node.text))&&((safari||chrome)&&lastChild&&"false"==lastChild.dom.contentEditable&&this.addHackNode("IMG",parent),this.addHackNode("BR",this.top))}addHackNode(nodeName,parent){if(parent==this.top&&this.index<parent.children.length&&parent.children[this.index].matchesHack(nodeName))this.index++;else{let dom=document.createElement(nodeName);"IMG"==nodeName&&(dom.className="ProseMirror-separator",dom.alt=""),"BR"==nodeName&&(dom.className="ProseMirror-trailingBreak");let hack=new TrailingHackViewDesc(this.top,[],dom,null);parent!=this.top?parent.children.push(hack):parent.children.splice(this.index++,0,hack),this.changed=!0}}}function preMatch(frag,parentDesc){let curDesc=parentDesc,descI=curDesc.children.length,fI=frag.childCount,matched=new Map,matches2=[];outer:for(;fI>0;){let desc;for(;;)if(descI){let next=curDesc.children[descI-1];if(!(next instanceof MarkViewDesc)){desc=next,descI--;break}curDesc=next,descI=next.children.length}else{if(curDesc==parentDesc)break outer;descI=curDesc.parent.children.indexOf(curDesc),curDesc=curDesc.parent}let node=desc.node;if(node){if(node!=frag.child(fI-1))break;--fI,matched.set(desc,fI),matches2.push(desc)}}return{index:fI,matched,matches:matches2.reverse()}}function compareSide(a,b){return a.type.side-b.type.side}function iterDeco(parent,deco,onWidget,onNode){let locals=deco.locals(parent),offset2=0;if(0==locals.length){for(let i=0;i<parent.childCount;i++){let child=parent.child(i);onNode(child,locals,deco.forChild(offset2,child),i),offset2+=child.nodeSize}return}let decoIndex=0,active=[],restNode=null;for(let parentIndex=0;;){if(decoIndex<locals.length&&locals[decoIndex].to==offset2){let widgets,widget=locals[decoIndex++];for(;decoIndex<locals.length&&locals[decoIndex].to==offset2;)(widgets||(widgets=[widget])).push(locals[decoIndex++]);if(widgets){widgets.sort(compareSide);for(let i=0;i<widgets.length;i++)onWidget(widgets[i],parentIndex,!!restNode)}else onWidget(widget,parentIndex,!!restNode)}let child,index;if(restNode)index=-1,child=restNode,restNode=null;else{if(!(parentIndex<parent.childCount))break;index=parentIndex,child=parent.child(parentIndex++)}for(let i=0;i<active.length;i++)active[i].to<=offset2&&active.splice(i--,1);for(;decoIndex<locals.length&&locals[decoIndex].from<=offset2&&locals[decoIndex].to>offset2;)active.push(locals[decoIndex++]);let end=offset2+child.nodeSize;if(child.isText){let cutAt=end;decoIndex<locals.length&&locals[decoIndex].from<cutAt&&(cutAt=locals[decoIndex].from);for(let i=0;i<active.length;i++)active[i].to<cutAt&&(cutAt=active[i].to);cutAt<end&&(restNode=child.cut(cutAt-offset2),child=child.cut(0,cutAt-offset2),end=cutAt,index=-1)}onNode(child,child.isInline&&!child.isLeaf?active.filter(d=>!d.inline):active.slice(),deco.forChild(offset2,child),index),offset2=end}}function iosHacks(dom){if("UL"==dom.nodeName||"OL"==dom.nodeName){let oldCSS=dom.style.cssText;dom.style.cssText=oldCSS+"; list-style: square !important",window.getComputedStyle(dom).listStyle,dom.style.cssText=oldCSS}}function nearbyTextNode(node,offset2){for(;;){if(3==node.nodeType)return node;if(1==node.nodeType&&offset2>0){if(node.childNodes.length>offset2&&3==node.childNodes[offset2].nodeType)return node.childNodes[offset2];offset2=nodeSize(node=node.childNodes[offset2-1])}else{if(!(1==node.nodeType&&offset2<node.childNodes.length))return null;node=node.childNodes[offset2],offset2=0}}}function findTextInFragment(frag,text,from,to){for(let i=0,pos=0;i<frag.childCount&&pos<=to;){let child=frag.child(i++),childStart=pos;if(pos+=child.nodeSize,!child.isText)continue;let str=child.text;for(;i<frag.childCount;){let next=frag.child(i++);if(pos+=next.nodeSize,!next.isText)break;str+=next.text}if(pos>=from){let found2=childStart<to?str.lastIndexOf(text,to-childStart-1):-1;if(found2>=0&&found2+text.length+childStart>=from)return childStart+found2;if(from==to&&str.length>=to+text.length-childStart&&str.slice(to-childStart,to-childStart+text.length)==text)return to}}return-1}function replaceNodes(nodes2,from,to,view,replacement){let result=[];for(let i=0,off=0;i<nodes2.length;i++){let child=nodes2[i],start=off,end=off+=child.size;start>=to||end<=from?result.push(child):(start<from&&result.push(child.slice(0,from-start,view)),replacement&&(result.push(replacement),replacement=void 0),end>to&&result.push(child.slice(to-start,child.size,view)))}return result}function selectionFromDOM(view,origin=null){let domSel=view.domSelection(),doc2=view.state.doc;if(!domSel.focusNode)return null;let nearestDesc=view.docView.nearestDesc(domSel.focusNode),inWidget=nearestDesc&&0==nearestDesc.size,head=view.docView.posFromDOM(domSel.focusNode,domSel.focusOffset,1);if(head<0)return null;let $anchor,selection,$head=doc2.resolve(head);if(selectionCollapsed(domSel)){for($anchor=$head;nearestDesc&&!nearestDesc.node;)nearestDesc=nearestDesc.parent;let nearestDescNode=nearestDesc.node;if(nearestDesc&&nearestDescNode.isAtom&&dist_NodeSelection.isSelectable(nearestDescNode)&&nearestDesc.parent&&(!nearestDescNode.isInline||!isOnEdge(domSel.focusNode,domSel.focusOffset,nearestDesc.dom))){let pos=nearestDesc.posBefore;selection=new dist_NodeSelection(head==pos?$head:doc2.resolve(pos))}}else{let anchor=view.docView.posFromDOM(domSel.anchorNode,domSel.anchorOffset,1);if(anchor<0)return null;$anchor=doc2.resolve(anchor)}if(!selection){selection=selectionBetween(view,$anchor,$head,"pointer"==origin||view.state.selection.head<$head.pos&&!inWidget?1:-1)}return selection}function editorOwnsSelection(view){return view.editable?view.hasFocus():hasSelection(view)&&document.activeElement&&document.activeElement.contains(view.dom)}function selectionToDOM(view,force=!1){let sel=view.state.selection;if(syncNodeSelection(view,sel),editorOwnsSelection(view)){if(!force&&view.input.mouseDown&&view.input.mouseDown.allowDefault&&chrome){let domSel=view.domSelection(),curSel=view.domObserver.currentSelection;if(domSel.anchorNode&&curSel.anchorNode&&isEquivalentPosition(domSel.anchorNode,domSel.anchorOffset,curSel.anchorNode,curSel.anchorOffset))return view.input.mouseDown.delayedSelectionSync=!0,void view.domObserver.setCurSelection()}if(view.domObserver.disconnectSelection(),view.cursorWrapper)selectCursorWrapper(view);else{let resetEditableFrom,resetEditableTo,{anchor,head}=sel;brokenSelectBetweenUneditable&&!(sel instanceof dist_TextSelection)&&(sel.$from.parent.inlineContent||(resetEditableFrom=temporarilyEditableNear(view,sel.from)),!sel.empty&&!sel.$from.parent.inlineContent&&(resetEditableTo=temporarilyEditableNear(view,sel.to))),view.docView.setSelection(anchor,head,view.root,force),brokenSelectBetweenUneditable&&(resetEditableFrom&&resetEditable(resetEditableFrom),resetEditableTo&&resetEditable(resetEditableTo)),sel.visible?view.dom.classList.remove("ProseMirror-hideselection"):(view.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(view))}view.domObserver.setCurSelection(),view.domObserver.connectSelection()}}__name(ViewTreeUpdater,"ViewTreeUpdater"),__name(preMatch,"preMatch"),__name(compareSide,"compareSide"),__name(iterDeco,"iterDeco"),__name(iosHacks,"iosHacks"),__name(nearbyTextNode,"nearbyTextNode"),__name(findTextInFragment,"findTextInFragment"),__name(replaceNodes,"replaceNodes"),__name(selectionFromDOM,"selectionFromDOM"),__name(editorOwnsSelection,"editorOwnsSelection"),__name(selectionToDOM,"selectionToDOM");const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(view,pos){let{node,offset:offset2}=view.docView.domFromPos(pos,0),after=offset2<node.childNodes.length?node.childNodes[offset2]:null,before=offset2?node.childNodes[offset2-1]:null;if(safari&&after&&"false"==after.contentEditable)return setEditable(after);if(!(after&&"false"!=after.contentEditable||before&&"false"!=before.contentEditable)){if(after)return setEditable(after);if(before)return setEditable(before)}}function setEditable(element){return element.contentEditable="true",safari&&element.draggable&&(element.draggable=!1,element.wasDraggable=!0),element}function resetEditable(element){element.contentEditable="false",element.wasDraggable&&(element.draggable=!0,element.wasDraggable=null)}function removeClassOnSelectionChange(view){let doc2=view.dom.ownerDocument;doc2.removeEventListener("selectionchange",view.input.hideSelectionGuard);let domSel=view.domSelection(),node=domSel.anchorNode,offset2=domSel.anchorOffset;doc2.addEventListener("selectionchange",view.input.hideSelectionGuard=()=>{(domSel.anchorNode!=node||domSel.anchorOffset!=offset2)&&(doc2.removeEventListener("selectionchange",view.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(view)||view.state.selection.visible)&&view.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(view){let domSel=view.domSelection(),range2=document.createRange(),node=view.cursorWrapper.dom,img="IMG"==node.nodeName;img?range2.setEnd(node.parentNode,domIndex(node)+1):range2.setEnd(node,0),range2.collapse(!1),domSel.removeAllRanges(),domSel.addRange(range2),!img&&!view.state.selection.visible&&ie&&ie_version<=11&&(node.disabled=!0,node.disabled=!1)}function syncNodeSelection(view,sel){if(sel instanceof dist_NodeSelection){let desc=view.docView.descAt(sel.from);desc!=view.lastSelectedViewDesc&&(clearNodeSelection(view),desc&&desc.selectNode(),view.lastSelectedViewDesc=desc)}else clearNodeSelection(view)}function clearNodeSelection(view){view.lastSelectedViewDesc&&(view.lastSelectedViewDesc.parent&&view.lastSelectedViewDesc.deselectNode(),view.lastSelectedViewDesc=void 0)}function selectionBetween(view,$anchor,$head,bias){return view.someProp("createSelectionBetween",f=>f(view,$anchor,$head))||dist_TextSelection.between($anchor,$head,bias)}function hasFocusAndSelection(view){return(!view.editable||view.root.activeElement==view.dom)&&hasSelection(view)}function hasSelection(view){let sel=view.domSelection();if(!sel.anchorNode)return!1;try{return view.dom.contains(3==sel.anchorNode.nodeType?sel.anchorNode.parentNode:sel.anchorNode)&&(view.editable||view.dom.contains(3==sel.focusNode.nodeType?sel.focusNode.parentNode:sel.focusNode))}catch{return!1}}function anchorInRightPlace(view){let anchorDOM=view.docView.domFromPos(view.state.selection.anchor,0),domSel=view.domSelection();return isEquivalentPosition(anchorDOM.node,anchorDOM.offset,domSel.anchorNode,domSel.anchorOffset)}function moveSelectionBlock(state,dir){let{$anchor,$head}=state.selection,$side=dir>0?$anchor.max($head):$anchor.min($head),$start=$side.parent.inlineContent?$side.depth?state.doc.resolve(dir>0?$side.after():$side.before()):null:$side;return $start&&dist_Selection.findFrom($start,dir)}function apply(view,sel){return view.dispatch(view.state.tr.setSelection(sel).scrollIntoView()),!0}function selectHorizontally(view,dir,mods){let sel=view.state.selection;if(!(sel instanceof dist_TextSelection)){if(sel instanceof dist_NodeSelection&&sel.node.isInline)return apply(view,new dist_TextSelection(dir>0?sel.$to:sel.$from));{let next=moveSelectionBlock(view.state,dir);return!!next&&apply(view,next)}}if(!sel.empty||mods.indexOf("s")>-1)return!1;if(view.endOfTextblock(dir>0?"right":"left")){let next=moveSelectionBlock(view.state,dir);return!!(next&&next instanceof dist_NodeSelection)&&apply(view,next)}if(!(mac&&mods.indexOf("m")>-1)){let desc,$head=sel.$head,node=$head.textOffset?null:dir<0?$head.nodeBefore:$head.nodeAfter;if(!node||node.isText)return!1;let nodePos=dir<0?$head.pos-node.nodeSize:$head.pos;return!!(node.isAtom||(desc=view.docView.descAt(nodePos))&&!desc.contentDOM)&&(dist_NodeSelection.isSelectable(node)?apply(view,new dist_NodeSelection(dir<0?view.state.doc.resolve($head.pos-node.nodeSize):$head)):!!webkit&&apply(view,new dist_TextSelection(view.state.doc.resolve(dir<0?nodePos:nodePos+node.nodeSize))))}}function nodeLen(node){return 3==node.nodeType?node.nodeValue.length:node.childNodes.length}function isIgnorable(dom){let desc=dom.pmViewDesc;return desc&&0==desc.size&&(dom.nextSibling||"BR"!=dom.nodeName)}function skipIgnoredNodesLeft(view){let sel=view.domSelection(),node=sel.focusNode,offset2=sel.focusOffset;if(!node)return;let moveNode,moveOffset,force=!1;for(gecko&&1==node.nodeType&&offset2<nodeLen(node)&&isIgnorable(node.childNodes[offset2])&&(force=!0);;)if(offset2>0){if(1!=node.nodeType)break;{let before=node.childNodes[offset2-1];if(isIgnorable(before))moveNode=node,moveOffset=--offset2;else{if(3!=before.nodeType)break;node=before,offset2=node.nodeValue.length}}}else{if(isBlockNode(node))break;{let prev=node.previousSibling;for(;prev&&isIgnorable(prev);)moveNode=node.parentNode,moveOffset=domIndex(prev),prev=prev.previousSibling;if(prev)node=prev,offset2=nodeLen(node);else{if(node=node.parentNode,node==view.dom)break;offset2=0}}}force?setSelFocus(view,sel,node,offset2):moveNode&&setSelFocus(view,sel,moveNode,moveOffset)}function skipIgnoredNodesRight(view){let sel=view.domSelection(),node=sel.focusNode,offset2=sel.focusOffset;if(!node)return;let moveNode,moveOffset,len=nodeLen(node);for(;;)if(offset2<len){if(1!=node.nodeType)break;if(!isIgnorable(node.childNodes[offset2]))break;moveNode=node,moveOffset=++offset2}else{if(isBlockNode(node))break;{let next=node.nextSibling;for(;next&&isIgnorable(next);)moveNode=next.parentNode,moveOffset=domIndex(next)+1,next=next.nextSibling;if(next)node=next,offset2=0,len=nodeLen(node);else{if(node=node.parentNode,node==view.dom)break;offset2=len=0}}}moveNode&&setSelFocus(view,sel,moveNode,moveOffset)}function isBlockNode(dom){let desc=dom.pmViewDesc;return desc&&desc.node&&desc.node.isBlock}function setSelFocus(view,sel,node,offset2){if(selectionCollapsed(sel)){let range2=document.createRange();range2.setEnd(node,offset2),range2.setStart(node,offset2),sel.removeAllRanges(),sel.addRange(range2)}else sel.extend&&sel.extend(node,offset2);view.domObserver.setCurSelection();let{state}=view;setTimeout(()=>{view.state==state&&selectionToDOM(view)},50)}function selectVertically(view,dir,mods){let sel=view.state.selection;if(sel instanceof dist_TextSelection&&!sel.empty||mods.indexOf("s")>-1||mac&&mods.indexOf("m")>-1)return!1;let{$from,$to}=sel;if(!$from.parent.inlineContent||view.endOfTextblock(dir<0?"up":"down")){let next=moveSelectionBlock(view.state,dir);if(next&&next instanceof dist_NodeSelection)return apply(view,next)}if(!$from.parent.inlineContent){let side=dir<0?$from:$to,beyond=sel instanceof AllSelection?dist_Selection.near(side,dir):dist_Selection.findFrom(side,dir);return!!beyond&&apply(view,beyond)}return!1}function stopNativeHorizontalDelete(view,dir){if(!(view.state.selection instanceof dist_TextSelection))return!0;let{$head,$anchor,empty:empty2}=view.state.selection;if(!$head.sameParent($anchor))return!0;if(!empty2)return!1;if(view.endOfTextblock(dir>0?"forward":"backward"))return!0;let nextNode=!$head.textOffset&&(dir<0?$head.nodeBefore:$head.nodeAfter);if(nextNode&&!nextNode.isText){let tr=view.state.tr;return dir<0?tr.delete($head.pos-nextNode.nodeSize,$head.pos):tr.delete($head.pos,$head.pos+nextNode.nodeSize),view.dispatch(tr),!0}return!1}function switchEditable(view,node,state){view.domObserver.stop(),node.contentEditable=state,view.domObserver.start()}function safariDownArrowBug(view){if(!safari||view.state.selection.$head.parentOffset>0)return!1;let{focusNode,focusOffset}=view.domSelection();if(focusNode&&1==focusNode.nodeType&&0==focusOffset&&focusNode.firstChild&&"false"==focusNode.firstChild.contentEditable){let child=focusNode.firstChild;switchEditable(view,child,"true"),setTimeout(()=>switchEditable(view,child,"false"),20)}return!1}function getMods(event){let result="";return event.ctrlKey&&(result+="c"),event.metaKey&&(result+="m"),event.altKey&&(result+="a"),event.shiftKey&&(result+="s"),result}function captureKeyDown(view,event){let code2=event.keyCode,mods=getMods(event);return 8==code2||mac&&72==code2&&"c"==mods?stopNativeHorizontalDelete(view,-1)||skipIgnoredNodesLeft(view):46==code2||mac&&68==code2&&"c"==mods?stopNativeHorizontalDelete(view,1)||skipIgnoredNodesRight(view):13==code2||27==code2||(37==code2||mac&&66==code2&&"c"==mods?selectHorizontally(view,-1,mods)||skipIgnoredNodesLeft(view):39==code2||mac&&70==code2&&"c"==mods?selectHorizontally(view,1,mods)||skipIgnoredNodesRight(view):38==code2||mac&&80==code2&&"c"==mods?selectVertically(view,-1,mods)||skipIgnoredNodesLeft(view):40==code2||mac&&78==code2&&"c"==mods?safariDownArrowBug(view)||selectVertically(view,1,mods)||skipIgnoredNodesRight(view):mods==(mac?"m":"c")&&(66==code2||73==code2||89==code2||90==code2))}function serializeForClipboard(view,slice){let context=[],{content,openStart,openEnd}=slice;for(;openStart>1&&openEnd>1&&1==content.childCount&&1==content.firstChild.childCount;){openStart--,openEnd--;let node=content.firstChild;context.push(node.type.name,node.attrs!=node.type.defaultAttrs?node.attrs:null),content=node.content}let serializer=view.someProp("clipboardSerializer")||dist_DOMSerializer.fromSchema(view.state.schema),doc2=detachedDoc(),wrap2=doc2.createElement("div");wrap2.appendChild(serializer.serializeFragment(content,{document:doc2}));let needsWrap,firstChild=wrap2.firstChild,wrappers=0;for(;firstChild&&1==firstChild.nodeType&&(needsWrap=wrapMap[firstChild.nodeName.toLowerCase()]);){for(let i=needsWrap.length-1;i>=0;i--){let wrapper=doc2.createElement(needsWrap[i]);for(;wrap2.firstChild;)wrapper.appendChild(wrap2.firstChild);wrap2.appendChild(wrapper),wrappers++}firstChild=wrap2.firstChild}return firstChild&&1==firstChild.nodeType&&firstChild.setAttribute("data-pm-slice",`${openStart} ${openEnd}${wrappers?` -${wrappers}`:""} ${JSON.stringify(context)}`),{dom:wrap2,text:view.someProp("clipboardTextSerializer",f=>f(slice))||slice.content.textBetween(0,slice.content.size,"\n\n")}}function parseFromClipboard(view,text,html,plainText,$context){let dom,slice,inCode=$context.parent.type.spec.code;if(!html&&!text)return null;let asText=text&&(plainText||inCode||!html);if(asText){if(view.someProp("transformPastedText",f=>{text=f(text,inCode||plainText)}),inCode)return text?new dist_Slice(dist_Fragment.from(view.state.schema.text(text.replace(/\r\n?/g,"\n"))),0,0):dist_Slice.empty;let parsed=view.someProp("clipboardTextParser",f=>f(text,$context,plainText));if(parsed)slice=parsed;else{let marks2=$context.marks(),{schema:schema2}=view.state,serializer=dist_DOMSerializer.fromSchema(schema2);dom=document.createElement("div"),text.split(/(?:\r\n?|\n)+/).forEach(block=>{let p=dom.appendChild(document.createElement("p"));block&&p.appendChild(serializer.serializeNode(schema2.text(block,marks2)))})}}else view.someProp("transformPastedHTML",f=>{html=f(html)}),dom=readHTML(html),webkit&&restoreReplacedSpaces(dom);let contextNode=dom&&dom.querySelector("[data-pm-slice]"),sliceData=contextNode&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(contextNode.getAttribute("data-pm-slice")||"");if(sliceData&&sliceData[3])for(let i=+sliceData[3];i>0&&dom.firstChild;i--)dom=dom.firstChild;if(slice||(slice=(view.someProp("clipboardParser")||view.someProp("domParser")||dist_DOMParser.fromSchema(view.state.schema)).parseSlice(dom,{preserveWhitespace:!(!asText&&!sliceData),context:$context,ruleFromNode:dom2=>"BR"!=dom2.nodeName||dom2.nextSibling||!dom2.parentNode||inlineParents.test(dom2.parentNode.nodeName)?null:{ignore:!0}})),sliceData)slice=addContext(closeSlice(slice,+sliceData[1],+sliceData[2]),sliceData[4]);else if(slice=dist_Slice.maxOpen(normalizeSiblings(slice.content,$context),!0),slice.openStart||slice.openEnd){let openStart=0,openEnd=0;for(let node=slice.content.firstChild;openStart<slice.openStart&&!node.type.spec.isolating;openStart++,node=node.firstChild);for(let node=slice.content.lastChild;openEnd<slice.openEnd&&!node.type.spec.isolating;openEnd++,node=node.lastChild);slice=closeSlice(slice,openStart,openEnd)}return view.someProp("transformPasted",f=>{slice=f(slice)}),slice}__name(temporarilyEditableNear,"temporarilyEditableNear"),__name(setEditable,"setEditable"),__name(resetEditable,"resetEditable"),__name(removeClassOnSelectionChange,"removeClassOnSelectionChange"),__name(selectCursorWrapper,"selectCursorWrapper"),__name(syncNodeSelection,"syncNodeSelection"),__name(clearNodeSelection,"clearNodeSelection"),__name(selectionBetween,"selectionBetween"),__name(hasFocusAndSelection,"hasFocusAndSelection"),__name(hasSelection,"hasSelection"),__name(anchorInRightPlace,"anchorInRightPlace"),__name(moveSelectionBlock,"moveSelectionBlock"),__name(apply,"apply"),__name(selectHorizontally,"selectHorizontally"),__name(nodeLen,"nodeLen"),__name(isIgnorable,"isIgnorable"),__name(skipIgnoredNodesLeft,"skipIgnoredNodesLeft"),__name(skipIgnoredNodesRight,"skipIgnoredNodesRight"),__name(isBlockNode,"isBlockNode"),__name(setSelFocus,"setSelFocus"),__name(selectVertically,"selectVertically"),__name(stopNativeHorizontalDelete,"stopNativeHorizontalDelete"),__name(switchEditable,"switchEditable"),__name(safariDownArrowBug,"safariDownArrowBug"),__name(getMods,"getMods"),__name(captureKeyDown,"captureKeyDown"),__name(serializeForClipboard,"serializeForClipboard"),__name(parseFromClipboard,"parseFromClipboard");const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(fragment,$context){if(fragment.childCount<2)return fragment;for(let d=$context.depth;d>=0;d--){let lastWrap,match=$context.node(d).contentMatchAt($context.index(d)),result=[];if(fragment.forEach(node=>{if(!result)return;let inLast,wrap2=match.findWrapping(node.type);if(!wrap2)return result=null;if(inLast=result.length&&lastWrap.length&&addToSibling(wrap2,lastWrap,node,result[result.length-1],0))result[result.length-1]=inLast;else{result.length&&(result[result.length-1]=closeRight(result[result.length-1],lastWrap.length));let wrapped=withWrappers(node,wrap2);result.push(wrapped),match=match.matchType(wrapped.type),lastWrap=wrap2}}),result)return dist_Fragment.from(result)}return fragment}function withWrappers(node,wrap2,from=0){for(let i=wrap2.length-1;i>=from;i--)node=wrap2[i].create(null,dist_Fragment.from(node));return node}function addToSibling(wrap2,lastWrap,node,sibling,depth){if(depth<wrap2.length&&depth<lastWrap.length&&wrap2[depth]==lastWrap[depth]){let inner=addToSibling(wrap2,lastWrap,node,sibling.lastChild,depth+1);if(inner)return sibling.copy(sibling.content.replaceChild(sibling.childCount-1,inner));if(sibling.contentMatchAt(sibling.childCount).matchType(depth==wrap2.length-1?node.type:wrap2[depth+1]))return sibling.copy(sibling.content.append(dist_Fragment.from(withWrappers(node,wrap2,depth+1))))}}function closeRight(node,depth){if(0==depth)return node;let fragment=node.content.replaceChild(node.childCount-1,closeRight(node.lastChild,depth-1)),fill=node.contentMatchAt(node.childCount).fillBefore(dist_Fragment.empty,!0);return node.copy(fragment.append(fill))}function closeRange(fragment,side,from,to,depth,openEnd){let node=side<0?fragment.firstChild:fragment.lastChild,inner=node.content;return depth<to-1&&(inner=closeRange(inner,side,from,to,depth+1,openEnd)),depth>=from&&(inner=side<0?node.contentMatchAt(0).fillBefore(inner,fragment.childCount>1||openEnd<=depth).append(inner):inner.append(node.contentMatchAt(node.childCount).fillBefore(dist_Fragment.empty,!0))),fragment.replaceChild(side<0?0:fragment.childCount-1,node.copy(inner))}function closeSlice(slice,openStart,openEnd){return openStart<slice.openStart&&(slice=new dist_Slice(closeRange(slice.content,-1,openStart,slice.openStart,0,slice.openEnd),openStart,slice.openEnd)),openEnd<slice.openEnd&&(slice=new dist_Slice(closeRange(slice.content,1,openEnd,slice.openEnd,0,0),slice.openStart,openEnd)),slice}__name(normalizeSiblings,"normalizeSiblings"),__name(withWrappers,"withWrappers"),__name(addToSibling,"addToSibling"),__name(closeRight,"closeRight"),__name(closeRange,"closeRange"),__name(closeSlice,"closeSlice");const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}function readHTML(html){let metas=/^(\s*<meta [^>]*>)*/.exec(html);metas&&(html=html.slice(metas[0].length));let wrap2,elt=detachedDoc().createElement("div"),firstTag=/<([a-z][^>\s]+)/i.exec(html);if((wrap2=firstTag&&wrapMap[firstTag[1].toLowerCase()])&&(html=wrap2.map(n=>"<"+n+">").join("")+html+wrap2.map(n=>"</"+n+">").reverse().join("")),elt.innerHTML=html,wrap2)for(let i=0;i<wrap2.length;i++)elt=elt.querySelector(wrap2[i])||elt;return elt}function restoreReplacedSpaces(dom){let nodes2=dom.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let i=0;i<nodes2.length;i++){let node=nodes2[i];1==node.childNodes.length&&"\xa0"==node.textContent&&node.parentNode&&node.parentNode.replaceChild(dom.ownerDocument.createTextNode(" "),node)}}function addContext(slice,context){if(!slice.size)return slice;let array,schema2=slice.content.firstChild.type.schema;try{array=JSON.parse(context)}catch{return slice}let{content,openStart,openEnd}=slice;for(let i=array.length-2;i>=0;i-=2){let type=schema2.nodes[array[i]];if(!type||type.hasRequiredAttrs())break;content=dist_Fragment.from(type.create(array[i+1],content)),openStart++,openEnd++}return new dist_Slice(content,openStart,openEnd)}__name(detachedDoc,"detachedDoc"),__name(readHTML,"readHTML"),__name(restoreReplacedSpaces,"restoreReplacedSpaces"),__name(addContext,"addContext");const handlers={};let editHandlers={};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastAndroidDelete=0,this.composing=!1,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(view){for(let event in handlers){let handler=handlers[event];view.dom.addEventListener(event,view.input.eventHandlers[event]=event2=>{eventBelongsToView(view,event2)&&!runCustomHandler(view,event2)&&(view.editable||!(event2.type in editHandlers))&&handler(view,event2)})}safari&&view.dom.addEventListener("input",()=>null),ensureListeners(view)}function setSelectionOrigin(view,origin){view.input.lastSelectionOrigin=origin,view.input.lastSelectionTime=Date.now()}function destroyInput(view){view.domObserver.stop();for(let type in view.input.eventHandlers)view.dom.removeEventListener(type,view.input.eventHandlers[type]);clearTimeout(view.input.composingTimeout),clearTimeout(view.input.lastIOSEnterFallbackTimeout)}function ensureListeners(view){view.someProp("handleDOMEvents",currentHandlers=>{for(let type in currentHandlers)view.input.eventHandlers[type]||view.dom.addEventListener(type,view.input.eventHandlers[type]=event=>runCustomHandler(view,event))})}function runCustomHandler(view,event){return view.someProp("handleDOMEvents",handlers2=>{let handler=handlers2[event.type];return!!handler&&(handler(view,event)||event.defaultPrevented)})}function eventBelongsToView(view,event){if(!event.bubbles)return!0;if(event.defaultPrevented)return!1;for(let node=event.target;node!=view.dom;node=node.parentNode)if(!node||11==node.nodeType||node.pmViewDesc&&node.pmViewDesc.stopEvent(event))return!1;return!0}function dispatchEvent(view,event){!runCustomHandler(view,event)&&handlers[event.type]&&(view.editable||!(event.type in editHandlers))&&handlers[event.type](view,event)}function eventCoords(event){return{left:event.clientX,top:event.clientY}}function isNear(event,click){let dx=click.x-event.clientX,dy=click.y-event.clientY;return dx*dx+dy*dy<100}function runHandlerOnContext(view,propName,pos,inside,event){if(-1==inside)return!1;let $pos=view.state.doc.resolve(inside);for(let i=$pos.depth+1;i>0;i--)if(view.someProp(propName,f=>i>$pos.depth?f(view,pos,$pos.nodeAfter,$pos.before(i),event,!0):f(view,pos,$pos.node(i),$pos.before(i),event,!1)))return!0;return!1}function updateSelection(view,selection,origin){view.focused||view.focus();let tr=view.state.tr.setSelection(selection);"pointer"==origin&&tr.setMeta("pointer",!0),view.dispatch(tr)}function selectClickedLeaf(view,inside){if(-1==inside)return!1;let $pos=view.state.doc.resolve(inside),node=$pos.nodeAfter;return!!(node&&node.isAtom&&dist_NodeSelection.isSelectable(node))&&(updateSelection(view,new dist_NodeSelection($pos),"pointer"),!0)}function selectClickedNode(view,inside){if(-1==inside)return!1;let selectedNode,selectAt,sel=view.state.selection;sel instanceof dist_NodeSelection&&(selectedNode=sel.node);let $pos=view.state.doc.resolve(inside);for(let i=$pos.depth+1;i>0;i--){let node=i>$pos.depth?$pos.nodeAfter:$pos.node(i);if(dist_NodeSelection.isSelectable(node)){selectAt=selectedNode&&sel.$from.depth>0&&i>=sel.$from.depth&&$pos.before(sel.$from.depth+1)==sel.$from.pos?$pos.before(sel.$from.depth):$pos.before(i);break}}return null!=selectAt&&(updateSelection(view,dist_NodeSelection.create(view.state.doc,selectAt),"pointer"),!0)}function handleSingleClick(view,pos,inside,event,selectNode){return runHandlerOnContext(view,"handleClickOn",pos,inside,event)||view.someProp("handleClick",f=>f(view,pos,event))||(selectNode?selectClickedNode(view,inside):selectClickedLeaf(view,inside))}function handleDoubleClick(view,pos,inside,event){return runHandlerOnContext(view,"handleDoubleClickOn",pos,inside,event)||view.someProp("handleDoubleClick",f=>f(view,pos,event))}function handleTripleClick(view,pos,inside,event){return runHandlerOnContext(view,"handleTripleClickOn",pos,inside,event)||view.someProp("handleTripleClick",f=>f(view,pos,event))||defaultTripleClick(view,inside,event)}function defaultTripleClick(view,inside,event){if(0!=event.button)return!1;let doc2=view.state.doc;if(-1==inside)return!!doc2.inlineContent&&(updateSelection(view,dist_TextSelection.create(doc2,0,doc2.content.size),"pointer"),!0);let $pos=doc2.resolve(inside);for(let i=$pos.depth+1;i>0;i--){let node=i>$pos.depth?$pos.nodeAfter:$pos.node(i),nodePos=$pos.before(i);if(node.inlineContent)updateSelection(view,dist_TextSelection.create(doc2,nodePos+1,nodePos+1+node.content.size),"pointer");else{if(!dist_NodeSelection.isSelectable(node))continue;updateSelection(view,dist_NodeSelection.create(doc2,nodePos),"pointer")}return!0}}function forceDOMFlush(view){return endComposition(view)}__name(InputState,"InputState"),__name(initInput,"initInput"),__name(setSelectionOrigin,"setSelectionOrigin"),__name(destroyInput,"destroyInput"),__name(ensureListeners,"ensureListeners"),__name(runCustomHandler,"runCustomHandler"),__name(eventBelongsToView,"eventBelongsToView"),__name(dispatchEvent,"dispatchEvent"),editHandlers.keydown=(view,_event)=>{let event=_event;if(view.input.shiftKey=16==event.keyCode||event.shiftKey,!inOrNearComposition(view,event)&&(view.input.lastKeyCode=event.keyCode,view.input.lastKeyCodeTime=Date.now(),!android||!chrome||13!=event.keyCode))if(229!=event.keyCode&&view.domObserver.forceFlush(),!ios||13!=event.keyCode||event.ctrlKey||event.altKey||event.metaKey)view.someProp("handleKeyDown",f=>f(view,event))||captureKeyDown(view,event)?event.preventDefault():setSelectionOrigin(view,"key");else{let now=Date.now();view.input.lastIOSEnter=now,view.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{view.input.lastIOSEnter==now&&(view.someProp("handleKeyDown",f=>f(view,keyEvent(13,"Enter"))),view.input.lastIOSEnter=0)},200)}},editHandlers.keyup=(view,event)=>{16==event.keyCode&&(view.input.shiftKey=!1)},editHandlers.keypress=(view,_event)=>{let event=_event;if(inOrNearComposition(view,event)||!event.charCode||event.ctrlKey&&!event.altKey||mac&&event.metaKey)return;if(view.someProp("handleKeyPress",f=>f(view,event)))return void event.preventDefault();let sel=view.state.selection;if(!(sel instanceof dist_TextSelection&&sel.$from.sameParent(sel.$to))){let text=String.fromCharCode(event.charCode);view.someProp("handleTextInput",f=>f(view,sel.$from.pos,sel.$to.pos,text))||view.dispatch(view.state.tr.insertText(text).scrollIntoView()),event.preventDefault()}},__name(eventCoords,"eventCoords"),__name(isNear,"isNear"),__name(runHandlerOnContext,"runHandlerOnContext"),__name(updateSelection,"updateSelection"),__name(selectClickedLeaf,"selectClickedLeaf"),__name(selectClickedNode,"selectClickedNode"),__name(handleSingleClick,"handleSingleClick"),__name(handleDoubleClick,"handleDoubleClick"),__name(handleTripleClick,"handleTripleClick"),__name(defaultTripleClick,"defaultTripleClick"),__name(forceDOMFlush,"forceDOMFlush");const selectNodeModifier=mac?"metaKey":"ctrlKey";handlers.mousedown=(view,_event)=>{let event=_event;view.input.shiftKey=event.shiftKey;let flushed=forceDOMFlush(view),now=Date.now(),type="singleClick";now-view.input.lastClick.time<500&&isNear(event,view.input.lastClick)&&!event[selectNodeModifier]&&("singleClick"==view.input.lastClick.type?type="doubleClick":"doubleClick"==view.input.lastClick.type&&(type="tripleClick")),view.input.lastClick={time:now,x:event.clientX,y:event.clientY,type};let pos=view.posAtCoords(eventCoords(event));!pos||("singleClick"==type?(view.input.mouseDown&&view.input.mouseDown.done(),view.input.mouseDown=new MouseDown(view,pos,event,!!flushed)):("doubleClick"==type?handleDoubleClick:handleTripleClick)(view,pos.pos,pos.inside,event)?event.preventDefault():setSelectionOrigin(view,"pointer"))};class MouseDown{constructor(view,pos,event,flushed){let targetNode,targetPos;if(this.view=view,this.pos=pos,this.event=event,this.flushed=flushed,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=view.state.doc,this.selectNode=!!event[selectNodeModifier],this.allowDefault=event.shiftKey,pos.inside>-1)targetNode=view.state.doc.nodeAt(pos.inside),targetPos=pos.inside;else{let $pos=view.state.doc.resolve(pos.pos);targetNode=$pos.parent,targetPos=$pos.depth?$pos.before():0}const target=flushed?null:event.target,targetDesc=target?view.docView.nearestDesc(target,!0):null;this.target=targetDesc?targetDesc.dom:null;let{selection}=view.state;(0==event.button&&targetNode.type.spec.draggable&&!1!==targetNode.type.spec.selectable||selection instanceof dist_NodeSelection&&selection.from<=targetPos&&selection.to>targetPos)&&(this.mightDrag={node:targetNode,pos:targetPos,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!gecko||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),view.root.addEventListener("mouseup",this.up=this.up.bind(this)),view.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(view,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(event){if(this.done(),!this.view.dom.contains(event.target))return;let pos=this.pos;this.view.state.doc!=this.startDoc&&(pos=this.view.posAtCoords(eventCoords(event))),this.allowDefault||!pos?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,pos.pos,pos.inside,event,this.selectNode)?event.preventDefault():0==event.button&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!(this.view.state.selection instanceof dist_TextSelection)&&Math.min(Math.abs(pos.pos-this.view.state.selection.from),Math.abs(pos.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,dist_Selection.near(this.view.state.doc.resolve(pos.pos)),"pointer"),event.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(event){!this.allowDefault&&(Math.abs(this.event.x-event.clientX)>4||Math.abs(this.event.y-event.clientY)>4)&&(this.allowDefault=!0),setSelectionOrigin(this.view,"pointer"),0==event.buttons&&this.done()}}function inOrNearComposition(view,event){return!!view.composing||!!(safari&&Math.abs(event.timeStamp-view.input.compositionEndedAt)<500)&&(view.input.compositionEndedAt=-2e8,!0)}__name(MouseDown,"MouseDown"),handlers.touchdown=view=>{forceDOMFlush(view),setSelectionOrigin(view,"pointer")},handlers.contextmenu=view=>forceDOMFlush(view),__name(inOrNearComposition,"inOrNearComposition");const timeoutComposition=android?5e3:-1;function scheduleComposeEnd(view,delay){clearTimeout(view.input.composingTimeout),delay>-1&&(view.input.composingTimeout=setTimeout(()=>endComposition(view),delay))}function clearComposition(view){for(view.composing&&(view.input.composing=!1,view.input.compositionEndedAt=timestampFromCustomEvent());view.input.compositionNodes.length>0;)view.input.compositionNodes.pop().markParentsDirty()}function timestampFromCustomEvent(){let event=document.createEvent("Event");return event.initEvent("event",!0,!0),event.timeStamp}function endComposition(view,forceUpdate=!1){if(!(android&&view.domObserver.flushingSoon>=0)){if(view.domObserver.forceFlush(),clearComposition(view),forceUpdate||view.docView&&view.docView.dirty){let sel=selectionFromDOM(view);return sel&&!sel.eq(view.state.selection)?view.dispatch(view.state.tr.setSelection(sel)):view.updateState(view.state),!0}return!1}}function captureCopy(view,dom){if(!view.dom.parentNode)return;let wrap2=view.dom.parentNode.appendChild(document.createElement("div"));wrap2.appendChild(dom),wrap2.style.cssText="position: fixed; left: -10000px; top: 10px";let sel=getSelection(),range2=document.createRange();range2.selectNodeContents(dom),view.dom.blur(),sel.removeAllRanges(),sel.addRange(range2),setTimeout(()=>{wrap2.parentNode&&wrap2.parentNode.removeChild(wrap2),view.focus()},50)}editHandlers.compositionstart=editHandlers.compositionupdate=view=>{if(!view.composing){view.domObserver.flush();let{state}=view,$pos=state.selection.$from;if(state.selection.empty&&(state.storedMarks||!$pos.textOffset&&$pos.parentOffset&&$pos.nodeBefore.marks.some(m=>!1===m.type.spec.inclusive)))view.markCursor=view.state.storedMarks||$pos.marks(),endComposition(view,!0),view.markCursor=null;else if(endComposition(view),gecko&&state.selection.empty&&$pos.parentOffset&&!$pos.textOffset&&$pos.nodeBefore.marks.length){let sel=view.domSelection();for(let node=sel.focusNode,offset2=sel.focusOffset;node&&1==node.nodeType&&0!=offset2;){let before=offset2<0?node.lastChild:node.childNodes[offset2-1];if(!before)break;if(3==before.nodeType){sel.collapse(before,before.nodeValue.length);break}node=before,offset2=-1}}view.input.composing=!0}scheduleComposeEnd(view,timeoutComposition)},editHandlers.compositionend=(view,event)=>{view.composing&&(view.input.composing=!1,view.input.compositionEndedAt=event.timeStamp,scheduleComposeEnd(view,20))},__name(scheduleComposeEnd,"scheduleComposeEnd"),__name(clearComposition,"clearComposition"),__name(timestampFromCustomEvent,"timestampFromCustomEvent"),__name(endComposition,"endComposition"),__name(captureCopy,"captureCopy");const brokenClipboardAPI=ie&&ie_version<15||ios&&webkit_version<604;function sliceSingleNode(slice){return 0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount?slice.content.firstChild:null}function capturePaste(view,event){if(!view.dom.parentNode)return;let plainText=view.input.shiftKey||view.state.selection.$from.parent.type.spec.code,target=view.dom.parentNode.appendChild(document.createElement(plainText?"textarea":"div"));plainText||(target.contentEditable="true"),target.style.cssText="position: fixed; left: -10000px; top: 10px",target.focus(),setTimeout(()=>{view.focus(),target.parentNode&&target.parentNode.removeChild(target),plainText?doPaste(view,target.value,null,event):doPaste(view,target.textContent,target.innerHTML,event)},50)}function doPaste(view,text,html,event){let slice=parseFromClipboard(view,text,html,view.input.shiftKey,view.state.selection.$from);if(view.someProp("handlePaste",f=>f(view,event,slice||dist_Slice.empty)))return!0;if(!slice)return!1;let singleNode=sliceSingleNode(slice),tr=singleNode?view.state.tr.replaceSelectionWith(singleNode,view.input.shiftKey):view.state.tr.replaceSelection(slice);return view.dispatch(tr.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}handlers.copy=editHandlers.cut=(view,_event)=>{let event=_event,sel=view.state.selection,cut="cut"==event.type;if(sel.empty)return;let data=brokenClipboardAPI?null:event.clipboardData,slice=sel.content(),{dom,text}=serializeForClipboard(view,slice);data?(event.preventDefault(),data.clearData(),data.setData("text/html",dom.innerHTML),data.setData("text/plain",text)):captureCopy(view,dom),cut&&view.dispatch(view.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},__name(sliceSingleNode,"sliceSingleNode"),__name(capturePaste,"capturePaste"),__name(doPaste,"doPaste"),editHandlers.paste=(view,_event)=>{let event=_event;if(view.composing&&!android)return;let data=brokenClipboardAPI?null:event.clipboardData;data&&doPaste(view,data.getData("text/plain"),data.getData("text/html"),event)?event.preventDefault():capturePaste(view,event)};class Dragging{constructor(slice,move){this.slice=slice,this.move=move}}__name(Dragging,"Dragging");const dragCopyModifier=mac?"altKey":"ctrlKey";handlers.dragstart=(view,_event)=>{let event=_event,mouseDown=view.input.mouseDown;if(mouseDown&&mouseDown.done(),!event.dataTransfer)return;let sel=view.state.selection,pos=sel.empty?null:view.posAtCoords(eventCoords(event));if(!(pos&&pos.pos>=sel.from&&pos.pos<=(sel instanceof dist_NodeSelection?sel.to-1:sel.to)))if(mouseDown&&mouseDown.mightDrag)view.dispatch(view.state.tr.setSelection(dist_NodeSelection.create(view.state.doc,mouseDown.mightDrag.pos)));else if(event.target&&1==event.target.nodeType){let desc=view.docView.nearestDesc(event.target,!0);desc&&desc.node.type.spec.draggable&&desc!=view.docView&&view.dispatch(view.state.tr.setSelection(dist_NodeSelection.create(view.state.doc,desc.posBefore)))}let slice=view.state.selection.content(),{dom,text}=serializeForClipboard(view,slice);event.dataTransfer.clearData(),event.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",dom.innerHTML),event.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||event.dataTransfer.setData("text/plain",text),view.dragging=new Dragging(slice,!event[dragCopyModifier])},handlers.dragend=view=>{let dragging=view.dragging;window.setTimeout(()=>{view.dragging==dragging&&(view.dragging=null)},50)},editHandlers.dragover=editHandlers.dragenter=(_,e)=>e.preventDefault(),editHandlers.drop=(view,_event)=>{let event=_event,dragging=view.dragging;if(view.dragging=null,!event.dataTransfer)return;let eventPos=view.posAtCoords(eventCoords(event));if(!eventPos)return;let $mouse=view.state.doc.resolve(eventPos.pos);if(!$mouse)return;let slice=dragging&&dragging.slice;slice?view.someProp("transformPasted",f=>{slice=f(slice)}):slice=parseFromClipboard(view,event.dataTransfer.getData(brokenClipboardAPI?"Text":"text/plain"),brokenClipboardAPI?null:event.dataTransfer.getData("text/html"),!1,$mouse);let move=!(!dragging||event[dragCopyModifier]);if(view.someProp("handleDrop",f=>f(view,event,slice||dist_Slice.empty,move)))return void event.preventDefault();if(!slice)return;event.preventDefault();let insertPos=slice?dropPoint(view.state.doc,$mouse.pos,slice):$mouse.pos;null==insertPos&&(insertPos=$mouse.pos);let tr=view.state.tr;move&&tr.deleteSelection();let pos=tr.mapping.map(insertPos),isNode2=0==slice.openStart&&0==slice.openEnd&&1==slice.content.childCount,beforeInsert=tr.doc;if(isNode2?tr.replaceRangeWith(pos,pos,slice.content.firstChild):tr.replaceRange(pos,pos,slice),tr.doc.eq(beforeInsert))return;let $pos=tr.doc.resolve(pos);if(isNode2&&dist_NodeSelection.isSelectable(slice.content.firstChild)&&$pos.nodeAfter&&$pos.nodeAfter.sameMarkup(slice.content.firstChild))tr.setSelection(new dist_NodeSelection($pos));else{let end=tr.mapping.map(insertPos);tr.mapping.maps[tr.mapping.maps.length-1].forEach((_from,_to,_newFrom,newTo)=>end=newTo),tr.setSelection(selectionBetween(view,$pos,tr.doc.resolve(end)))}view.focus(),view.dispatch(tr.setMeta("uiEvent","drop"))},handlers.focus=view=>{view.focused||(view.domObserver.stop(),view.dom.classList.add("ProseMirror-focused"),view.domObserver.start(),view.focused=!0,setTimeout(()=>{view.docView&&view.hasFocus()&&!view.domObserver.currentSelection.eq(view.domSelection())&&selectionToDOM(view)},20))},handlers.blur=(view,_event)=>{let event=_event;view.focused&&(view.domObserver.stop(),view.dom.classList.remove("ProseMirror-focused"),view.domObserver.start(),event.relatedTarget&&view.dom.contains(event.relatedTarget)&&view.domObserver.currentSelection.clear(),view.focused=!1)},handlers.beforeinput=(view,_event)=>{if(chrome&&android&&"deleteContentBackward"==_event.inputType){view.domObserver.flushSoon();let{domChangeCount}=view.input;setTimeout(()=>{if(view.input.domChangeCount!=domChangeCount||(view.dom.blur(),view.focus(),view.someProp("handleKeyDown",f=>f(view,keyEvent(8,"Backspace")))))return;let{$cursor}=view.state.selection;$cursor&&$cursor.pos>0&&view.dispatch(view.state.tr.delete($cursor.pos-1,$cursor.pos).scrollIntoView())},50)}};for(let prop in editHandlers)handlers[prop]=editHandlers[prop];function compareObjs(a,b){if(a==b)return!0;for(let p in a)if(a[p]!==b[p])return!1;for(let p in b)if(!(p in a))return!1;return!0}__name(compareObjs,"compareObjs");class WidgetType{constructor(toDOM,spec){this.toDOM=toDOM,this.spec=spec||noSpec,this.side=this.spec.side||0}map(mapping,span,offset2,oldOffset){let{pos,deleted}=mapping.mapResult(span.from+oldOffset,this.side<0?-1:1);return deleted?null:new Decoration(pos-offset2,pos-offset2,this)}valid(){return!0}eq(other){return this==other||other instanceof WidgetType&&(this.spec.key&&this.spec.key==other.spec.key||this.toDOM==other.toDOM&&compareObjs(this.spec,other.spec))}destroy(node){this.spec.destroy&&this.spec.destroy(node)}}__name(WidgetType,"WidgetType");class InlineType{constructor(attrs,spec){this.attrs=attrs,this.spec=spec||noSpec}map(mapping,span,offset2,oldOffset){let from=mapping.map(span.from+oldOffset,this.spec.inclusiveStart?-1:1)-offset2,to=mapping.map(span.to+oldOffset,this.spec.inclusiveEnd?1:-1)-offset2;return from>=to?null:new Decoration(from,to,this)}valid(_,span){return span.from<span.to}eq(other){return this==other||other instanceof InlineType&&compareObjs(this.attrs,other.attrs)&&compareObjs(this.spec,other.spec)}static is(span){return span.type instanceof InlineType}destroy(){}}__name(InlineType,"InlineType");class dist_NodeType{constructor(attrs,spec){this.attrs=attrs,this.spec=spec||noSpec}map(mapping,span,offset2,oldOffset){let from=mapping.mapResult(span.from+oldOffset,1);if(from.deleted)return null;let to=mapping.mapResult(span.to+oldOffset,-1);return to.deleted||to.pos<=from.pos?null:new Decoration(from.pos-offset2,to.pos-offset2,this)}valid(node,span){let child,{index,offset:offset2}=node.content.findIndex(span.from);return offset2==span.from&&!(child=node.child(index)).isText&&offset2+child.nodeSize==span.to}eq(other){return this==other||other instanceof dist_NodeType&&compareObjs(this.attrs,other.attrs)&&compareObjs(this.spec,other.spec)}destroy(){}}__name(dist_NodeType,"dist_NodeType");class Decoration{constructor(from,to,type){this.from=from,this.to=to,this.type=type}copy(from,to){return new Decoration(from,to,this.type)}eq(other,offset2=0){return this.type.eq(other.type)&&this.from+offset2==other.from&&this.to+offset2==other.to}map(mapping,offset2,oldOffset){return this.type.map(mapping,this,offset2,oldOffset)}static widget(pos,toDOM,spec){return new Decoration(pos,pos,new WidgetType(toDOM,spec))}static inline(from,to,attrs,spec){return new Decoration(from,to,new InlineType(attrs,spec))}static node(from,to,attrs,spec){return new Decoration(from,to,new dist_NodeType(attrs,spec))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}}__name(Decoration,"Decoration");const none=[],noSpec={};class DecorationSet{constructor(local,children){this.local=local.length?local:none,this.children=children.length?children:none}static create(doc2,decorations){return decorations.length?buildTree(decorations,doc2,0,noSpec):empty}find(start,end,predicate){let result=[];return this.findInner(null==start?0:start,null==end?1e9:end,result,0,predicate),result}findInner(start,end,result,offset2,predicate){for(let i=0;i<this.local.length;i++){let span=this.local[i];span.from<=end&&span.to>=start&&(!predicate||predicate(span.spec))&&result.push(span.copy(span.from+offset2,span.to+offset2))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<end&&this.children[i+1]>start){let childOff=this.children[i]+1;this.children[i+2].findInner(start-childOff,end-childOff,result,offset2+childOff,predicate)}}map(mapping,doc2,options){return this==empty||0==mapping.maps.length?this:this.mapInner(mapping,doc2,0,0,options||noSpec)}mapInner(mapping,node,offset2,oldOffset,options){let newLocal;for(let i=0;i<this.local.length;i++){let mapped=this.local[i].map(mapping,offset2,oldOffset);mapped&&mapped.type.valid(node,mapped)?(newLocal||(newLocal=[])).push(mapped):options.onRemove&&options.onRemove(this.local[i].spec)}return this.children.length?mapChildren(this.children,newLocal||[],mapping,node,offset2,oldOffset,options):newLocal?new DecorationSet(newLocal.sort(byPos),none):empty}add(doc2,decorations){return decorations.length?this==empty?DecorationSet.create(doc2,decorations):this.addInner(doc2,decorations,0):this}addInner(doc2,decorations,offset2){let children,childIndex=0;doc2.forEach((childNode,childOffset)=>{let found2,baseOffset=childOffset+offset2;if(found2=takeSpansForNode(decorations,childNode,baseOffset)){for(children||(children=this.children.slice());childIndex<children.length&&children[childIndex]<childOffset;)childIndex+=3;children[childIndex]==childOffset?children[childIndex+2]=children[childIndex+2].addInner(childNode,found2,baseOffset+1):children.splice(childIndex,0,childOffset,childOffset+childNode.nodeSize,buildTree(found2,childNode,baseOffset+1,noSpec)),childIndex+=3}});let local=moveSpans(childIndex?withoutNulls(decorations):decorations,-offset2);for(let i=0;i<local.length;i++)local[i].type.valid(doc2,local[i])||local.splice(i--,1);return new DecorationSet(local.length?this.local.concat(local).sort(byPos):this.local,children||this.children)}remove(decorations){return 0==decorations.length||this==empty?this:this.removeInner(decorations,0)}removeInner(decorations,offset2){let children=this.children,local=this.local;for(let i=0;i<children.length;i+=3){let found2,from=children[i]+offset2,to=children[i+1]+offset2;for(let span,j=0;j<decorations.length;j++)(span=decorations[j])&&span.from>from&&span.to<to&&(decorations[j]=null,(found2||(found2=[])).push(span));if(!found2)continue;children==this.children&&(children=this.children.slice());let removed=children[i+2].removeInner(found2,from+1);removed!=empty?children[i+2]=removed:(children.splice(i,3),i-=3)}if(local.length)for(let span,i=0;i<decorations.length;i++)if(span=decorations[i])for(let j=0;j<local.length;j++)local[j].eq(span,offset2)&&(local==this.local&&(local=this.local.slice()),local.splice(j--,1));return children==this.children&&local==this.local?this:local.length||children.length?new DecorationSet(local,children):empty}forChild(offset2,node){if(this==empty)return this;if(node.isLeaf)return DecorationSet.empty;let child,local;for(let i=0;i<this.children.length;i+=3)if(this.children[i]>=offset2){this.children[i]==offset2&&(child=this.children[i+2]);break}let start=offset2+1,end=start+node.content.size;for(let i=0;i<this.local.length;i++){let dec=this.local[i];if(dec.from<end&&dec.to>start&&dec.type instanceof InlineType){let from=Math.max(start,dec.from)-start,to=Math.min(end,dec.to)-start;from<to&&(local||(local=[])).push(dec.copy(from,to))}}if(local){let localSet=new DecorationSet(local.sort(byPos),none);return child?new DecorationGroup([localSet,child]):localSet}return child||empty}eq(other){if(this==other)return!0;if(!(other instanceof DecorationSet)||this.local.length!=other.local.length||this.children.length!=other.children.length)return!1;for(let i=0;i<this.local.length;i++)if(!this.local[i].eq(other.local[i]))return!1;for(let i=0;i<this.children.length;i+=3)if(this.children[i]!=other.children[i]||this.children[i+1]!=other.children[i+1]||!this.children[i+2].eq(other.children[i+2]))return!1;return!0}locals(node){return removeOverlap(this.localsInner(node))}localsInner(node){if(this==empty)return none;if(node.inlineContent||!this.local.some(InlineType.is))return this.local;let result=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof InlineType||result.push(this.local[i]);return result}}__name(DecorationSet,"DecorationSet"),DecorationSet.empty=new DecorationSet([],[]),DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(members){this.members=members}map(mapping,doc2){const mappedDecos=this.members.map(member=>member.map(mapping,doc2,noSpec));return DecorationGroup.from(mappedDecos)}forChild(offset2,child){if(child.isLeaf)return DecorationSet.empty;let found2=[];for(let i=0;i<this.members.length;i++){let result=this.members[i].forChild(offset2,child);result!=empty&&(result instanceof DecorationGroup?found2=found2.concat(result.members):found2.push(result))}return DecorationGroup.from(found2)}eq(other){if(!(other instanceof DecorationGroup)||other.members.length!=this.members.length)return!1;for(let i=0;i<this.members.length;i++)if(!this.members[i].eq(other.members[i]))return!1;return!0}locals(node){let result,sorted=!0;for(let i=0;i<this.members.length;i++){let locals=this.members[i].localsInner(node);if(locals.length)if(result){sorted&&(result=result.slice(),sorted=!1);for(let j=0;j<locals.length;j++)result.push(locals[j])}else result=locals}return result?removeOverlap(sorted?result:result.sort(byPos)):none}static from(members){switch(members.length){case 0:return empty;case 1:return members[0];default:return new DecorationGroup(members)}}}function mapChildren(oldChildren,newLocal,mapping,node,offset2,oldOffset,options){let children=oldChildren.slice(),shift2=__name((oldStart,oldEnd,newStart,newEnd)=>{for(let i=0;i<children.length;i+=3){let dSize,end=children[i+1];if(end<0||oldStart>end+oldOffset)continue;let start=children[i]+oldOffset;oldEnd>=start?children[i+1]=oldStart<=start?-2:-1:newStart>=offset2&&(dSize=newEnd-newStart-(oldEnd-oldStart))&&(children[i]+=dSize,children[i+1]+=dSize)}},"shift");for(let i=0;i<mapping.maps.length;i++)mapping.maps[i].forEach(shift2);let mustRebuild=!1;for(let i=0;i<children.length;i+=3)if(children[i+1]<0){if(-2==children[i+1]){mustRebuild=!0,children[i+1]=-1;continue}let from=mapping.map(oldChildren[i]+oldOffset),fromLocal=from-offset2;if(fromLocal<0||fromLocal>=node.content.size){mustRebuild=!0;continue}let toLocal=mapping.map(oldChildren[i+1]+oldOffset,-1)-offset2,{index,offset:childOffset}=node.content.findIndex(fromLocal),childNode=node.maybeChild(index);if(childNode&&childOffset==fromLocal&&childOffset+childNode.nodeSize==toLocal){let mapped=children[i+2].mapInner(mapping,childNode,from+1,oldChildren[i]+oldOffset+1,options);mapped!=empty?(children[i]=fromLocal,children[i+1]=toLocal,children[i+2]=mapped):(children[i+1]=-2,mustRebuild=!0)}else mustRebuild=!0}if(mustRebuild){let built=buildTree(mapAndGatherRemainingDecorations(children,oldChildren,newLocal,mapping,offset2,oldOffset,options),node,0,options);newLocal=built.local;for(let i=0;i<children.length;i+=3)children[i+1]<0&&(children.splice(i,3),i-=3);for(let i=0,j=0;i<built.children.length;i+=3){let from=built.children[i];for(;j<children.length&&children[j]<from;)j+=3;children.splice(j,0,built.children[i],built.children[i+1],built.children[i+2])}}return new DecorationSet(newLocal.sort(byPos),children)}function moveSpans(spans,offset2){if(!offset2||!spans.length)return spans;let result=[];for(let i=0;i<spans.length;i++){let span=spans[i];result.push(new Decoration(span.from+offset2,span.to+offset2,span.type))}return result}function mapAndGatherRemainingDecorations(children,oldChildren,decorations,mapping,offset2,oldOffset,options){function gather(set,oldOffset2){for(let i=0;i<set.local.length;i++){let mapped=set.local[i].map(mapping,offset2,oldOffset2);mapped?decorations.push(mapped):options.onRemove&&options.onRemove(set.local[i].spec)}for(let i=0;i<set.children.length;i+=3)gather(set.children[i+2],set.children[i]+oldOffset2+1)}__name(gather,"gather");for(let i=0;i<children.length;i+=3)-1==children[i+1]&&gather(children[i+2],oldChildren[i]+oldOffset+1);return decorations}function takeSpansForNode(spans,node,offset2){if(node.isLeaf)return null;let end=offset2+node.nodeSize,found2=null;for(let span,i=0;i<spans.length;i++)(span=spans[i])&&span.from>offset2&&span.to<end&&((found2||(found2=[])).push(span),spans[i]=null);return found2}function withoutNulls(array){let result=[];for(let i=0;i<array.length;i++)null!=array[i]&&result.push(array[i]);return result}function buildTree(spans,node,offset2,options){let children=[],hasNulls=!1;node.forEach((childNode,localStart)=>{let found2=takeSpansForNode(spans,childNode,localStart+offset2);if(found2){hasNulls=!0;let subtree=buildTree(found2,childNode,offset2+localStart+1,options);subtree!=empty&&children.push(localStart,localStart+childNode.nodeSize,subtree)}});let locals=moveSpans(hasNulls?withoutNulls(spans):spans,-offset2).sort(byPos);for(let i=0;i<locals.length;i++)locals[i].type.valid(node,locals[i])||(options.onRemove&&options.onRemove(locals[i].spec),locals.splice(i--,1));return locals.length||children.length?new DecorationSet(locals,children):empty}function byPos(a,b){return a.from-b.from||a.to-b.to}function removeOverlap(spans){let working=spans;for(let i=0;i<working.length-1;i++){let span=working[i];if(span.from!=span.to)for(let j=i+1;j<working.length;j++){let next=working[j];if(next.from!=span.from){next.from<span.to&&(working==spans&&(working=spans.slice()),working[i]=span.copy(span.from,next.from),insertAhead(working,j,span.copy(next.from,span.to)));break}next.to!=span.to&&(working==spans&&(working=spans.slice()),working[j]=next.copy(next.from,span.to),insertAhead(working,j+1,next.copy(span.to,next.to)))}}return working}function insertAhead(array,i,deco){for(;i<array.length&&byPos(deco,array[i])>0;)i++;array.splice(i,0,deco)}function viewDecorations(view){let found2=[];return view.someProp("decorations",f=>{let result=f(view.state);result&&result!=empty&&found2.push(result)}),view.cursorWrapper&&found2.push(DecorationSet.create(view.state.doc,[view.cursorWrapper.deco])),DecorationGroup.from(found2)}__name(DecorationGroup,"DecorationGroup"),__name(mapChildren,"mapChildren"),__name(moveSpans,"moveSpans"),__name(mapAndGatherRemainingDecorations,"mapAndGatherRemainingDecorations"),__name(takeSpansForNode,"takeSpansForNode"),__name(withoutNulls,"withoutNulls"),__name(buildTree,"buildTree"),__name(byPos,"byPos"),__name(removeOverlap,"removeOverlap"),__name(insertAhead,"insertAhead"),__name(viewDecorations,"viewDecorations");const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(sel){this.anchorNode=sel.anchorNode,this.anchorOffset=sel.anchorOffset,this.focusNode=sel.focusNode,this.focusOffset=sel.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(sel){return sel.anchorNode==this.anchorNode&&sel.anchorOffset==this.anchorOffset&&sel.focusNode==this.focusNode&&sel.focusOffset==this.focusOffset}}__name(SelectionState,"SelectionState");class DOMObserver{constructor(view,handleDOMChange){this.view=view,this.handleDOMChange=handleDOMChange,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.observer=window.MutationObserver&&new window.MutationObserver(mutations=>{for(let i=0;i<mutations.length;i++)this.queue.push(mutations[i]);ie&&ie_version<=11&&mutations.some(m=>"childList"==m.type&&m.removedNodes.length||"characterData"==m.type&&m.oldValue.length>m.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let take=this.observer.takeRecords();if(take.length){for(let i=0;i<take.length;i++)this.queue.push(take[i]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie&&ie_version<=11&&!this.view.state.selection.empty){let sel=this.view.domSelection();if(sel.focusNode&&isEquivalentPosition(sel.focusNode,sel.focusOffset,sel.anchorNode,sel.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelection())}ignoreSelectionChange(sel){if(0==sel.rangeCount)return!0;let container=sel.getRangeAt(0).commonAncestorContainer,desc=this.view.docView.nearestDesc(container);return desc&&desc.ignoreMutation({type:"selection",target:3==container.nodeType?container.parentNode:container})?(this.setCurSelection(),!0):void 0}flush(){if(!this.view.docView||this.flushingSoon>-1)return;let mutations=this.observer?this.observer.takeRecords():[];this.queue.length&&(mutations=this.queue.concat(mutations),this.queue.length=0);let sel=this.view.domSelection(),newSel=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(sel)&&hasFocusAndSelection(this.view)&&!this.ignoreSelectionChange(sel),from=-1,to=-1,typeOver=!1,added=[];if(this.view.editable)for(let i=0;i<mutations.length;i++){let result=this.registerMutation(mutations[i],added);result&&(from=from<0?result.from:Math.min(result.from,from),to=to<0?result.to:Math.max(result.to,to),result.typeOver&&(typeOver=!0))}if(gecko&&added.length>1){let brs=added.filter(n=>"BR"==n.nodeName);if(2==brs.length){let a=brs[0],b=brs[1];a.parentNode&&a.parentNode.parentNode==b.parentNode?b.remove():a.remove()}}(from>-1||newSel)&&(from>-1&&(this.view.docView.markDirty(from,to),checkCSS(this.view)),this.handleDOMChange(from,to,typeOver,added),this.view.docView&&this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(sel)||selectionToDOM(this.view),this.currentSelection.set(sel))}registerMutation(mut,added){if(added.indexOf(mut.target)>-1)return null;let desc=this.view.docView.nearestDesc(mut.target);if("attributes"==mut.type&&(desc==this.view.docView||"contenteditable"==mut.attributeName||"style"==mut.attributeName&&!mut.oldValue&&!mut.target.getAttribute("style"))||!desc||desc.ignoreMutation(mut))return null;if("childList"==mut.type){for(let i=0;i<mut.addedNodes.length;i++)added.push(mut.addedNodes[i]);if(desc.contentDOM&&desc.contentDOM!=desc.dom&&!desc.contentDOM.contains(mut.target))return{from:desc.posBefore,to:desc.posAfter};let prev=mut.previousSibling,next=mut.nextSibling;if(ie&&ie_version<=11&&mut.addedNodes.length)for(let i=0;i<mut.addedNodes.length;i++){let{previousSibling,nextSibling}=mut.addedNodes[i];(!previousSibling||Array.prototype.indexOf.call(mut.addedNodes,previousSibling)<0)&&(prev=previousSibling),(!nextSibling||Array.prototype.indexOf.call(mut.addedNodes,nextSibling)<0)&&(next=nextSibling)}let fromOffset=prev&&prev.parentNode==mut.target?domIndex(prev)+1:0,from=desc.localPosFromDOM(mut.target,fromOffset,-1),toOffset=next&&next.parentNode==mut.target?domIndex(next):mut.target.childNodes.length;return{from,to:desc.localPosFromDOM(mut.target,toOffset,1)}}return"attributes"==mut.type?{from:desc.posAtStart-desc.border,to:desc.posAtEnd+desc.border}:{from:desc.posAtStart,to:desc.posAtEnd,typeOver:mut.target.nodeValue==mut.oldValue}}}__name(DOMObserver,"DOMObserver");let cssChecked=!1;function checkCSS(view){cssChecked||(cssChecked=!0,"normal"==getComputedStyle(view.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}function parseBetween(view,from_,to_){let find,{node:parent,fromOffset,toOffset,from,to}=view.docView.parseRange(from_,to_),domSel=view.domSelection(),anchor=domSel.anchorNode;if(anchor&&view.dom.contains(1==anchor.nodeType?anchor:anchor.parentNode)&&(find=[{node:anchor,offset:domSel.anchorOffset}],selectionCollapsed(domSel)||find.push({node:domSel.focusNode,offset:domSel.focusOffset})),chrome&&8===view.input.lastKeyCode)for(let off=toOffset;off>fromOffset;off--){let node=parent.childNodes[off-1],desc=node.pmViewDesc;if("BR"==node.nodeName&&!desc){toOffset=off;break}if(!desc||desc.size)break}let startDoc=view.state.doc,parser=view.someProp("domParser")||DOMParser.fromSchema(view.state.schema),$from=startDoc.resolve(from),sel=null,doc2=parser.parse(parent,{topNode:$from.parent,topMatch:$from.parent.contentMatchAt($from.index()),topOpen:!0,from:fromOffset,to:toOffset,preserveWhitespace:"pre"!=$from.parent.type.whitespace||"full",findPositions:find,ruleFromNode,context:$from});if(find&&null!=find[0].pos){let anchor2=find[0].pos,head=find[1]&&find[1].pos;null==head&&(head=anchor2),sel={anchor:anchor2+from,head:head+from}}return{doc:doc2,sel,from,to}}function ruleFromNode(dom){let desc=dom.pmViewDesc;if(desc)return desc.parseRule();if("BR"==dom.nodeName&&dom.parentNode){if(safari&&/^(ul|ol)$/i.test(dom.parentNode.nodeName)){let skip=document.createElement("div");return skip.appendChild(document.createElement("li")),{skip}}if(dom.parentNode.lastChild==dom||safari&&/^(tr|table)$/i.test(dom.parentNode.nodeName))return{ignore:!0}}else if("IMG"==dom.nodeName&&dom.getAttribute("mark-placeholder"))return{ignore:!0};return null}function readDOMChange(view,from,to,typeOver,addedNodes){if(from<0){let origin=view.input.lastSelectionTime>Date.now()-50?view.input.lastSelectionOrigin:null,newSel=selectionFromDOM(view,origin);if(newSel&&!view.state.selection.eq(newSel)){let tr2=view.state.tr.setSelection(newSel);"pointer"==origin?tr2.setMeta("pointer",!0):"key"==origin&&tr2.scrollIntoView(),view.dispatch(tr2)}return}let $before=view.state.doc.resolve(from),shared=$before.sharedDepth(to);from=$before.before(shared+1),to=view.state.doc.resolve(to).after(shared+1);let sel=view.state.selection,parse=parseBetween(view,from,to);if(chrome&&view.cursorWrapper&&parse.sel&&parse.sel.anchor==view.cursorWrapper.deco.from&&parse.sel.head==parse.sel.anchor){let text=view.cursorWrapper.deco.type.toDOM.nextSibling,size2=text&&text.nodeValue?text.nodeValue.length:1;parse.sel={anchor:parse.sel.anchor+size2,head:parse.sel.anchor+size2}}let preferredPos,preferredSide,doc2=view.state.doc,compare=doc2.slice(parse.from,parse.to);8===view.input.lastKeyCode&&Date.now()-100<view.input.lastKeyCodeTime?(preferredPos=view.state.selection.to,preferredSide="end"):(preferredPos=view.state.selection.from,preferredSide="start"),view.input.lastKeyCode=null;let change=findDiff(compare.content,parse.doc.content,parse.from,preferredPos,preferredSide);if((ios&&view.input.lastIOSEnter>Date.now()-225||android)&&addedNodes.some(n=>"DIV"==n.nodeName||"P"==n.nodeName)&&(!change||change.endA>=change.endB)&&view.someProp("handleKeyDown",f=>f(view,keyEvent(13,"Enter"))))return void(view.input.lastIOSEnter=0);if(!change){if(!(typeOver&&sel instanceof TextSelection&&!sel.empty&&sel.$head.sameParent(sel.$anchor))||view.composing||parse.sel&&parse.sel.anchor!=parse.sel.head){if(parse.sel){let sel2=resolveSelection(view,view.state.doc,parse.sel);sel2&&!sel2.eq(view.state.selection)&&view.dispatch(view.state.tr.setSelection(sel2))}return}change={start:sel.from,endA:sel.to,endB:sel.to}}view.input.domChangeCount++,view.state.selection.from<view.state.selection.to&&change.start==change.endB&&view.state.selection instanceof TextSelection&&(change.start>view.state.selection.from&&change.start<=view.state.selection.from+2&&view.state.selection.from>=parse.from?change.start=view.state.selection.from:change.endA<view.state.selection.to&&change.endA>=view.state.selection.to-2&&view.state.selection.to<=parse.to&&(change.endB+=view.state.selection.to-change.endA,change.endA=view.state.selection.to)),ie&&ie_version<=11&&change.endB==change.start+1&&change.endA==change.start&&change.start>parse.from&&" \xa0"==parse.doc.textBetween(change.start-parse.from-1,change.start-parse.from+1)&&(change.start--,change.endA--,change.endB--);let nextSel,$from=parse.doc.resolveNoCache(change.start-parse.from),$to=parse.doc.resolveNoCache(change.endB-parse.from),$fromA=doc2.resolve(change.start),inlineChange=$from.sameParent($to)&&$from.parent.inlineContent&&$fromA.end()>=change.endA;if((ios&&view.input.lastIOSEnter>Date.now()-225&&(!inlineChange||addedNodes.some(n=>"DIV"==n.nodeName||"P"==n.nodeName))||!inlineChange&&$from.pos<parse.doc.content.size&&(nextSel=Selection.findFrom(parse.doc.resolve($from.pos+1),1,!0))&&nextSel.head==$to.pos)&&view.someProp("handleKeyDown",f=>f(view,keyEvent(13,"Enter"))))return void(view.input.lastIOSEnter=0);if(view.state.selection.anchor>change.start&&looksLikeJoin(doc2,change.start,change.endA,$from,$to)&&view.someProp("handleKeyDown",f=>f(view,keyEvent(8,"Backspace"))))return void(android&&chrome&&view.domObserver.suppressSelectionUpdates());chrome&&android&&change.endB==change.start&&(view.input.lastAndroidDelete=Date.now()),android&&!inlineChange&&$from.start()!=$to.start()&&0==$to.parentOffset&&$from.depth==$to.depth&&parse.sel&&parse.sel.anchor==parse.sel.head&&parse.sel.head==change.endA&&(change.endB-=2,$to=parse.doc.resolveNoCache(change.endB-parse.from),setTimeout(()=>{view.someProp("handleKeyDown",function(f){return f(view,keyEvent(13,"Enter"))})},20));let tr,storedMarks,markChange,chFrom=change.start,chTo=change.endA;if(inlineChange)if($from.pos==$to.pos)ie&&ie_version<=11&&0==$from.parentOffset&&(view.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(view),20)),tr=view.state.tr.delete(chFrom,chTo),storedMarks=doc2.resolve(change.start).marksAcross(doc2.resolve(change.endA));else if(change.endA==change.endB&&(markChange=isMarkChange($from.parent.content.cut($from.parentOffset,$to.parentOffset),$fromA.parent.content.cut($fromA.parentOffset,change.endA-$fromA.start()))))tr=view.state.tr,"add"==markChange.type?tr.addMark(chFrom,chTo,markChange.mark):tr.removeMark(chFrom,chTo,markChange.mark);else if($from.parent.child($from.index()).isText&&$from.index()==$to.index()-($to.textOffset?0:1)){let text=$from.parent.textBetween($from.parentOffset,$to.parentOffset);if(view.someProp("handleTextInput",f=>f(view,chFrom,chTo,text)))return;tr=view.state.tr.insertText(text,chFrom,chTo)}if(tr||(tr=view.state.tr.replace(chFrom,chTo,parse.doc.slice(change.start-parse.from,change.endB-parse.from))),parse.sel){let sel2=resolveSelection(view,tr.doc,parse.sel);sel2&&!(chrome&&android&&view.composing&&sel2.empty&&(change.start!=change.endB||view.input.lastAndroidDelete<Date.now()-100)&&(sel2.head==chFrom||sel2.head==tr.mapping.map(chTo)-1)||ie&&sel2.empty&&sel2.head==chFrom)&&tr.setSelection(sel2)}storedMarks&&tr.ensureMarks(storedMarks),view.dispatch(tr.scrollIntoView())}function resolveSelection(view,doc2,parsedSel){return Math.max(parsedSel.anchor,parsedSel.head)>doc2.content.size?null:selectionBetween(view,doc2.resolve(parsedSel.anchor),doc2.resolve(parsedSel.head))}function isMarkChange(cur,prev){let type,mark,update,curMarks=cur.firstChild.marks,prevMarks=prev.firstChild.marks,added=curMarks,removed=prevMarks;for(let i=0;i<prevMarks.length;i++)added=prevMarks[i].removeFromSet(added);for(let i=0;i<curMarks.length;i++)removed=curMarks[i].removeFromSet(removed);if(1==added.length&&0==removed.length)mark=added[0],type="add",update=__name(node=>node.mark(mark.addToSet(node.marks)),"update");else{if(0!=added.length||1!=removed.length)return null;mark=removed[0],type="remove",update=__name(node=>node.mark(mark.removeFromSet(node.marks)),"update")}let updated=[];for(let i=0;i<prev.childCount;i++)updated.push(update(prev.child(i)));if(Fragment.from(updated).eq(cur))return{mark,type}}function looksLikeJoin(old,start,end,$newStart,$newEnd){if(!$newStart.parent.isTextblock||end-start<=$newEnd.pos-$newStart.pos||skipClosingAndOpening($newStart,!0,!1)<$newEnd.pos)return!1;let $start=old.resolve(start);if($start.parentOffset<$start.parent.content.size||!$start.parent.isTextblock)return!1;let $next=old.resolve(skipClosingAndOpening($start,!0,!0));return!(!$next.parent.isTextblock||$next.pos>end||skipClosingAndOpening($next,!0,!1)<end)&&$newStart.parent.content.cut($newStart.parentOffset).eq($next.parent.content)}function skipClosingAndOpening($pos,fromEnd,mayOpen){let depth=$pos.depth,end=fromEnd?$pos.end():$pos.pos;for(;depth>0&&(fromEnd||$pos.indexAfter(depth)==$pos.node(depth).childCount);)depth--,end++,fromEnd=!1;if(mayOpen){let next=$pos.node(depth).maybeChild($pos.indexAfter(depth));for(;next&&!next.isLeaf;)next=next.firstChild,end++}return end}function findDiff(a,b,pos,preferredPos,preferredSide){let start=a.findDiffStart(b,pos);if(null==start)return null;let{a:endA,b:endB}=a.findDiffEnd(b,pos+a.size,pos+b.size);if("end"==preferredSide){preferredPos-=endA+Math.max(0,start-Math.min(endA,endB))-start}return endA<start&&a.size<b.size?(start-=preferredPos<=start&&preferredPos>=endA?start-preferredPos:0,endB=start+(endB-endA),endA=start):endB<start&&(start-=preferredPos<=start&&preferredPos>=endB?start-preferredPos:0,endA=start+(endA-endB),endB=start),{start,endA,endB}}__name(checkCSS,"checkCSS"),__name(parseBetween,"parseBetween"),__name(ruleFromNode,"ruleFromNode"),__name(readDOMChange,"readDOMChange"),__name(resolveSelection,"resolveSelection"),__name(isMarkChange,"isMarkChange"),__name(looksLikeJoin,"looksLikeJoin"),__name(skipClosingAndOpening,"skipClosingAndOpening"),__name(findDiff,"findDiff");function computeDocDeco(view){let attrs=Object.create(null);return attrs.class="ProseMirror",attrs.contenteditable=String(view.editable),attrs.translate="no",view.someProp("attributes",value=>{if("function"==typeof value&&(value=value(view.state)),value)for(let attr in value)"class"==attr&&(attrs.class+=" "+value[attr]),"style"==attr?attrs.style=(attrs.style?attrs.style+";":"")+value[attr]:!attrs[attr]&&"contenteditable"!=attr&&"nodeName"!=attr&&(attrs[attr]=String(value[attr]))}),[Decoration.node(0,view.state.doc.content.size,attrs)]}function updateCursorWrapper(view){if(view.markCursor){let dom=document.createElement("img");dom.className="ProseMirror-separator",dom.setAttribute("mark-placeholder","true"),dom.setAttribute("alt",""),view.cursorWrapper={dom,deco:Decoration.widget(view.state.selection.head,dom,{raw:!0,marks:view.markCursor})}}else view.cursorWrapper=null}function getEditable(view){return!view.someProp("editable",value=>!1===value(view.state))}function selectionContextChanged(sel1,sel2){let depth=Math.min(sel1.$anchor.sharedDepth(sel1.head),sel2.$anchor.sharedDepth(sel2.head));return sel1.$anchor.start(depth)!=sel2.$anchor.start(depth)}function buildNodeViews(view){let result=Object.create(null);function add2(obj){for(let prop in obj)Object.prototype.hasOwnProperty.call(result,prop)||(result[prop]=obj[prop])}return __name(add2,"add"),view.someProp("nodeViews",add2),view.someProp("markViews",add2),result}function changedNodeViews(a,b){let nA=0,nB=0;for(let prop in a){if(a[prop]!=b[prop])return!0;nA++}for(let _ in b)nB++;return nA!=nB}function checkStateComponent(plugin){if(plugin.spec.state||plugin.spec.filterTransaction||plugin.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}__name(class dist_EditorView{constructor(place,props){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.dragging=null,this._props=props,this.state=props.state,this.directPlugins=props.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=place&&place.mount||document.createElement("div"),place&&(place.appendChild?place.appendChild(this.dom):"function"==typeof place?place(this.dom):place.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(from,to,typeOver,added)=>readDOMChange(this,from,to,typeOver,added)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let prev=this._props;this._props={};for(let name in prev)this._props[name]=prev[name];this._props.state=this.state}return this._props}update(props){props.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this),this._props=props,props.plugins&&(props.plugins.forEach(checkStateComponent),this.directPlugins=props.plugins),this.updateStateInner(props.state,!0)}setProps(props){let updated={};for(let name in this._props)updated[name]=this._props[name];updated.state=this.state;for(let name in props)updated[name]=props[name];this.update(updated)}updateState(state){this.updateStateInner(state,this.state.plugins!=state.plugins)}updateStateInner(state,reconfigured){let prev=this.state,redraw=!1,updateSel=!1;if(state.storedMarks&&this.composing&&(clearComposition(this),updateSel=!0),this.state=state,reconfigured){let nodeViews=buildNodeViews(this);changedNodeViews(nodeViews,this.nodeViews)&&(this.nodeViews=nodeViews,redraw=!0),ensureListeners(this)}this.editable=getEditable(this),updateCursorWrapper(this);let innerDeco=viewDecorations(this),outerDeco=computeDocDeco(this),scroll=reconfigured?"reset":state.scrollToSelection>prev.scrollToSelection?"to selection":"preserve",updateDoc=redraw||!this.docView.matchesNode(state.doc,outerDeco,innerDeco);(updateDoc||!state.selection.eq(prev.selection))&&(updateSel=!0);let oldScrollPos="preserve"==scroll&&updateSel&&null==this.dom.style.overflowAnchor&&storeScrollPos(this);if(updateSel){this.domObserver.stop();let forceSelUpdate=updateDoc&&(ie||chrome)&&!this.composing&&!prev.selection.empty&&!state.selection.empty&&selectionContextChanged(prev.selection,state.selection);if(updateDoc){let chromeKludge=chrome?this.trackWrites=this.domSelection().focusNode:null;(redraw||!this.docView.update(state.doc,outerDeco,innerDeco,this))&&(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=docViewDesc(state.doc,outerDeco,innerDeco,this.dom,this)),chromeKludge&&!this.trackWrites&&(forceSelUpdate=!0)}forceSelUpdate||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelection())&&anchorInRightPlace(this))?selectionToDOM(this,forceSelUpdate):(syncNodeSelection(this,state.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(prev),"reset"==scroll)this.dom.scrollTop=0;else if("to selection"==scroll){let startDOM=this.domSelection().focusNode;if(!this.someProp("handleScrollToSelection",f=>f(this)))if(state.selection instanceof NodeSelection){let target=this.docView.domAfterPos(state.selection.from);1==target.nodeType&&scrollRectIntoView(this,target.getBoundingClientRect(),startDOM)}else scrollRectIntoView(this,this.coordsAtPos(state.selection.head,1),startDOM)}else oldScrollPos&&resetScrollPos(oldScrollPos)}destroyPluginViews(){let view;for(;view=this.pluginViews.pop();)view.destroy&&view.destroy()}updatePluginViews(prevState){if(prevState&&prevState.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let i=0;i<this.pluginViews.length;i++){let pluginView=this.pluginViews[i];pluginView.update&&pluginView.update(this,prevState)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let i=0;i<this.directPlugins.length;i++){let plugin=this.directPlugins[i];plugin.spec.view&&this.pluginViews.push(plugin.spec.view(this))}for(let i=0;i<this.state.plugins.length;i++){let plugin=this.state.plugins[i];plugin.spec.view&&this.pluginViews.push(plugin.spec.view(this))}}}someProp(propName,f){let value,prop=this._props&&this._props[propName];if(null!=prop&&(value=f?f(prop):prop))return value;for(let i=0;i<this.directPlugins.length;i++){let prop2=this.directPlugins[i].props[propName];if(null!=prop2&&(value=f?f(prop2):prop2))return value}let plugins=this.state.plugins;if(plugins)for(let i=0;i<plugins.length;i++){let prop2=plugins[i].props[propName];if(null!=prop2&&(value=f?f(prop2):prop2))return value}}hasFocus(){return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let cached=this._root;if(null==cached)for(let search=this.dom.parentNode;search;search=search.parentNode)if(9==search.nodeType||11==search.nodeType&&search.host)return search.getSelection||(Object.getPrototypeOf(search).getSelection=()=>search.ownerDocument.getSelection()),this._root=search;return cached||document}posAtCoords(coords){return posAtCoords(this,coords)}coordsAtPos(pos,side=1){return coordsAtPos(this,pos,side)}domAtPos(pos,side=0){return this.docView.domFromPos(pos,side)}nodeDOM(pos){let desc=this.docView.descAt(pos);return desc?desc.nodeDOM:null}posAtDOM(node,offset2,bias=-1){let pos=this.docView.posFromDOM(node,offset2,bias);if(null==pos)throw new RangeError("DOM position not inside the editor");return pos}endOfTextblock(dir,state){return endOfTextblock(this,state||this.state,dir)}destroy(){!this.docView||(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)}get isDestroyed(){return null==this.docView}dispatchEvent(event){return dispatchEvent(this,event)}dispatch(tr){let dispatchTransaction=this._props.dispatchTransaction;dispatchTransaction?dispatchTransaction.call(this,tr):this.updateState(this.state.apply(tr))}domSelection(){return this.root.getSelection()}},"dist_EditorView"),__name(computeDocDeco,"computeDocDeco"),__name(updateCursorWrapper,"updateCursorWrapper"),__name(getEditable,"getEditable"),__name(selectionContextChanged,"selectionContextChanged"),__name(buildNodeViews,"buildNodeViews"),__name(changedNodeViews,"changedNodeViews"),__name(checkStateComponent,"checkStateComponent");const olDOM=["ol",0],ulDOM=["ul",0],liDOM=["li",0],orderedList={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:dom=>({order:dom.hasAttribute("start")?+dom.getAttribute("start"):1})}],toDOM:node=>1==node.attrs.order?olDOM:["ol",{start:node.attrs.order},0]},bulletList={parseDOM:[{tag:"ul"}],toDOM:()=>ulDOM},listItem={parseDOM:[{tag:"li"}],toDOM:()=>liDOM,defining:!0};function add(obj,props){let copy2={};for(let prop in obj)copy2[prop]=obj[prop];for(let prop in props)copy2[prop]=props[prop];return copy2}function wrapInList(listType,attrs=null){return function(state,dispatch){let{$from,$to}=state.selection,range2=$from.blockRange($to),doJoin=!1,outerRange=range2;if(!range2)return!1;if(range2.depth>=2&&$from.node(range2.depth-1).type.compatibleContent(listType)&&0==range2.startIndex){if(0==$from.index(range2.depth-1))return!1;let $insert=state.doc.resolve(range2.start-2);outerRange=new NodeRange($insert,$insert,range2.depth),range2.endIndex<range2.parent.childCount&&(range2=new NodeRange($from,state.doc.resolve($to.end(range2.depth)),range2.depth)),doJoin=!0}let wrap2=findWrapping(outerRange,listType,attrs,range2);return!!wrap2&&(dispatch&&dispatch(doWrapInList(state.tr,range2,wrap2,doJoin,listType).scrollIntoView()),!0)}}function doWrapInList(tr,range2,wrappers,joinBefore,listType){let content=dist_Fragment.empty;for(let i=wrappers.length-1;i>=0;i--)content=dist_Fragment.from(wrappers[i].type.create(wrappers[i].attrs,content));tr.step(new dist_ReplaceAroundStep(range2.start-(joinBefore?2:0),range2.end,range2.start,range2.end,new dist_Slice(content,0,0),wrappers.length,!0));let found2=0;for(let i=0;i<wrappers.length;i++)wrappers[i].type==listType&&(found2=i+1);let splitDepth=wrappers.length-found2,splitPos=range2.start+wrappers.length-(joinBefore?2:0),parent=range2.parent;for(let i=range2.startIndex,e=range2.endIndex,first=!0;i<e;i++,first=!1)!first&&dist_canSplit(tr.doc,splitPos,splitDepth)&&(tr.split(splitPos,splitDepth),splitPos+=2*splitDepth),splitPos+=parent.child(i).nodeSize;return tr}function dist_liftListItem(itemType){return function(state,dispatch){let{$from,$to}=state.selection,range2=$from.blockRange($to,node=>node.childCount>0&&node.firstChild.type==itemType);return!!range2&&(!dispatch||($from.node(range2.depth-1).type==itemType?liftToOuterList(state,dispatch,itemType,range2):liftOutOfList(state,dispatch,range2)))}}function liftToOuterList(state,dispatch,itemType,range2){let tr=state.tr,end=range2.end,endOfList=range2.$to.end(range2.depth);end<endOfList&&(tr.step(new dist_ReplaceAroundStep(end-1,endOfList,end,endOfList,new dist_Slice(dist_Fragment.from(itemType.create(null,range2.parent.copy())),1,0),1,!0)),range2=new NodeRange(tr.doc.resolve(range2.$from.pos),tr.doc.resolve(endOfList),range2.depth));const target=liftTarget(range2);return null!=target&&(dispatch(tr.lift(range2,target).scrollIntoView()),!0)}function liftOutOfList(state,dispatch,range2){let tr=state.tr,list=range2.parent;for(let pos=range2.end,i=range2.endIndex-1,e=range2.startIndex;i>e;i--)pos-=list.child(i).nodeSize,tr.delete(pos-1,pos+1);let $start=tr.doc.resolve(range2.start),item=$start.nodeAfter;if(tr.mapping.map(range2.end)!=range2.start+$start.nodeAfter.nodeSize)return!1;let atStart=0==range2.startIndex,atEnd=range2.endIndex==list.childCount,parent=$start.node(-1),indexBefore=$start.index(-1);if(!parent.canReplace(indexBefore+(atStart?0:1),indexBefore+1,item.content.append(atEnd?dist_Fragment.empty:dist_Fragment.from(list))))return!1;let start=$start.pos,end=start+item.nodeSize;return tr.step(new dist_ReplaceAroundStep(start-(atStart?1:0),end+(atEnd?1:0),start+1,end-1,new dist_Slice((atStart?dist_Fragment.empty:dist_Fragment.from(list.copy(dist_Fragment.empty))).append(atEnd?dist_Fragment.empty:dist_Fragment.from(list.copy(dist_Fragment.empty))),atStart?0:1,atEnd?0:1),atStart?0:1)),dispatch(tr.scrollIntoView()),!0}__name(add,"add"),__name(function addListNodes(nodes2,itemContent,listGroup){return nodes2.append({ordered_list:add(orderedList,{content:"list_item+",group:listGroup}),bullet_list:add(bulletList,{content:"list_item+",group:listGroup}),list_item:add(listItem,{content:itemContent})})},"addListNodes"),__name(wrapInList,"wrapInList"),__name(doWrapInList,"doWrapInList"),__name(function dist_splitListItem(itemType){return function(state,dispatch){let{$from,$to,node}=state.selection;if(node&&node.isBlock||$from.depth<2||!$from.sameParent($to))return!1;let grandParent=$from.node(-1);if(grandParent.type!=itemType)return!1;if(0==$from.parent.content.size&&$from.node(-1).childCount==$from.indexAfter(-1)){if(3==$from.depth||$from.node(-3).type!=itemType||$from.index(-2)!=$from.node(-2).childCount-1)return!1;if(dispatch){let wrap2=Fragment.empty,depthBefore=$from.index(-1)?1:$from.index(-2)?2:3;for(let d=$from.depth-depthBefore;d>=$from.depth-3;d--)wrap2=Fragment.from($from.node(d).copy(wrap2));let depthAfter=$from.indexAfter(-1)<$from.node(-2).childCount?1:$from.indexAfter(-2)<$from.node(-3).childCount?2:3;wrap2=wrap2.append(Fragment.from(itemType.createAndFill()));let start=$from.before($from.depth-(depthBefore-1)),tr2=state.tr.replace(start,$from.after(-depthAfter),new Slice(wrap2,4-depthBefore,0)),sel=-1;tr2.doc.nodesBetween(start,tr2.doc.content.size,(node2,pos)=>{if(sel>-1)return!1;node2.isTextblock&&0==node2.content.size&&(sel=pos+1)}),sel>-1&&tr2.setSelection(Selection.near(tr2.doc.resolve(sel))),dispatch(tr2.scrollIntoView())}return!0}let nextType=$to.pos==$from.end()?grandParent.contentMatchAt(0).defaultType:null,tr=state.tr.delete($from.pos,$to.pos),types=nextType?[null,{type:nextType}]:void 0;return!!canSplit(tr.doc,$from.pos,2,types)&&(dispatch&&dispatch(tr.split($from.pos,2,types).scrollIntoView()),!0)}},"dist_splitListItem"),__name(dist_liftListItem,"dist_liftListItem"),__name(liftToOuterList,"liftToOuterList"),__name(liftOutOfList,"liftOutOfList"),__name(function dist_sinkListItem(itemType){return function(state,dispatch){let{$from,$to}=state.selection,range2=$from.blockRange($to,node=>node.childCount>0&&node.firstChild.type==itemType);if(!range2)return!1;let startIndex=range2.startIndex;if(0==startIndex)return!1;let parent=range2.parent,nodeBefore=parent.child(startIndex-1);if(nodeBefore.type!=itemType)return!1;if(dispatch){let nestedBefore=nodeBefore.lastChild&&nodeBefore.lastChild.type==parent.type,inner=Fragment.from(nestedBefore?itemType.create():null),slice=new Slice(Fragment.from(itemType.create(null,Fragment.from(parent.type.create(null,inner)))),nestedBefore?3:1,0),before=range2.start,after=range2.end;dispatch(state.tr.step(new ReplaceAroundStep(before-(nestedBefore?3:1),after,before,after,slice,1,!0)).scrollIntoView())}return!0}},"dist_sinkListItem");const ngx_editor_schema_schema=new Schema({marks:{link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:dom=>({href:dom.getAttribute("href"),title:dom.getAttribute("title"),target:dom.getAttribute("target")})}],toDOM(node){const{href,title,target}=node.attrs;return["a",{href,title,target},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:dom=>"normal"!==dom.style.fontWeight&&null},{style:"font-weight",getAttrs:value=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(value)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:value=>({color:value})}],toDOM(mark){const{color}=mark.attrs;return["span",{style:`color:${color};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:value=>({backgroundColor:value})}],toDOM(mark){const{backgroundColor}=mark.attrs;return["span",{style:`background-color:${backgroundColor};`},0]}}},nodes:{doc:{content:"block+"},text:{group:"inline"},paragraph:{content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(dom){const{textAlign}=dom.style;return{align:dom.getAttribute("align")||textAlign||null}}}],toDOM(node){const{align}=node.attrs;return["p",{style:toStyleString({textAlign:"left"!==align?align:null})||null},0]}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:{attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(dom){const{textAlign}=dom.style;return{level:1,align:dom.getAttribute("align")||textAlign||null}}},{tag:"h2",getAttrs(dom){const{textAlign}=dom.style;return{level:2,align:dom.getAttribute("align")||textAlign||null}}},{tag:"h3",getAttrs(dom){const{textAlign}=dom.style;return{level:3,align:dom.getAttribute("align")||textAlign||null}}},{tag:"h4",getAttrs(dom){const{textAlign}=dom.style;return{level:4,align:dom.getAttribute("align")||textAlign||null}}},{tag:"h5",getAttrs(dom){const{textAlign}=dom.style;return{level:5,align:dom.getAttribute("align")||textAlign||null}}},{tag:"h6",getAttrs(dom){const{textAlign}=dom.style;return{level:6,align:dom.getAttribute("align")||textAlign||null}}}],toDOM(node){const{level,align}=node.attrs;return[`h${level}`,{style:toStyleString({textAlign:"left"!==align?align:null})||null},0]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:dom=>({src:dom.getAttribute("src"),title:dom.getAttribute("title"),alt:dom.getAttribute("alt"),width:dom.getAttribute("width")})}],toDOM(node){const{src,alt,title,width}=node.attrs;return["img",{src,alt,title,width}]}},list_item:Object.assign(Object.assign({},listItem),{content:"paragraph block*"}),ordered_list:Object.assign(Object.assign({},orderedList),{content:"list_item+",group:"block"}),bullet_list:Object.assign(Object.assign({},bulletList),{content:"list_item+",group:"block"})}}),deleteSelection=__name((state,dispatch)=>!state.selection.empty&&(dispatch&&dispatch(state.tr.deleteSelection().scrollIntoView()),!0),"deleteSelection"),joinBackward=__name((state,dispatch,view)=>{let{$cursor}=state.selection;if(!$cursor||(view?!view.endOfTextblock("backward",state):$cursor.parentOffset>0))return!1;let $cut=findCutBefore($cursor);if(!$cut){let range2=$cursor.blockRange(),target=range2&&liftTarget(range2);return null!=target&&(dispatch&&dispatch(state.tr.lift(range2,target).scrollIntoView()),!0)}let before=$cut.nodeBefore;if(!before.type.spec.isolating&&deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(textblockAt(before,"end")||dist_NodeSelection.isSelectable(before))){let delStep=replaceStep(state.doc,$cursor.before(),$cursor.after(),dist_Slice.empty);if(delStep&&delStep.slice.size<delStep.to-delStep.from){if(dispatch){let tr=state.tr.step(delStep);tr.setSelection(textblockAt(before,"end")?dist_Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos,-1)),-1):dist_NodeSelection.create(tr.doc,$cut.pos-before.nodeSize)),dispatch(tr.scrollIntoView())}return!0}}return!(!before.isAtom||$cut.depth!=$cursor.depth-1)&&(dispatch&&dispatch(state.tr.delete($cut.pos-before.nodeSize,$cut.pos).scrollIntoView()),!0)},"joinBackward");function textblockAt(node,side,only=!1){for(let scan=node;scan;scan="start"==side?scan.firstChild:scan.lastChild){if(scan.isTextblock)return!0;if(only&&1!=scan.childCount)return!1}return!1}__name(textblockAt,"textblockAt");const selectNodeBackward=__name((state,dispatch,view)=>{let{$head,empty:empty2}=state.selection,$cut=$head;if(!empty2)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("backward",state):$head.parentOffset>0)return!1;$cut=findCutBefore($head)}let node=$cut&&$cut.nodeBefore;return!(!node||!dist_NodeSelection.isSelectable(node))&&(dispatch&&dispatch(state.tr.setSelection(dist_NodeSelection.create(state.doc,$cut.pos-node.nodeSize)).scrollIntoView()),!0)},"selectNodeBackward");function findCutBefore($pos){if(!$pos.parent.type.spec.isolating)for(let i=$pos.depth-1;i>=0;i--){if($pos.index(i)>0)return $pos.doc.resolve($pos.before(i+1));if($pos.node(i).type.spec.isolating)break}return null}__name(findCutBefore,"findCutBefore");const joinForward=__name((state,dispatch,view)=>{let{$cursor}=state.selection;if(!$cursor||(view?!view.endOfTextblock("forward",state):$cursor.parentOffset<$cursor.parent.content.size))return!1;let $cut=findCutAfter($cursor);if(!$cut)return!1;let after=$cut.nodeAfter;if(deleteBarrier(state,$cut,dispatch))return!0;if(0==$cursor.parent.content.size&&(textblockAt(after,"start")||dist_NodeSelection.isSelectable(after))){let delStep=replaceStep(state.doc,$cursor.before(),$cursor.after(),dist_Slice.empty);if(delStep&&delStep.slice.size<delStep.to-delStep.from){if(dispatch){let tr=state.tr.step(delStep);tr.setSelection(textblockAt(after,"start")?dist_Selection.findFrom(tr.doc.resolve(tr.mapping.map($cut.pos)),1):dist_NodeSelection.create(tr.doc,tr.mapping.map($cut.pos))),dispatch(tr.scrollIntoView())}return!0}}return!(!after.isAtom||$cut.depth!=$cursor.depth-1)&&(dispatch&&dispatch(state.tr.delete($cut.pos,$cut.pos+after.nodeSize).scrollIntoView()),!0)},"joinForward"),selectNodeForward=__name((state,dispatch,view)=>{let{$head,empty:empty2}=state.selection,$cut=$head;if(!empty2)return!1;if($head.parent.isTextblock){if(view?!view.endOfTextblock("forward",state):$head.parentOffset<$head.parent.content.size)return!1;$cut=findCutAfter($head)}let node=$cut&&$cut.nodeAfter;return!(!node||!dist_NodeSelection.isSelectable(node))&&(dispatch&&dispatch(state.tr.setSelection(dist_NodeSelection.create(state.doc,$cut.pos)).scrollIntoView()),!0)},"selectNodeForward");function findCutAfter($pos){if(!$pos.parent.type.spec.isolating)for(let i=$pos.depth-1;i>=0;i--){let parent=$pos.node(i);if($pos.index(i)+1<parent.childCount)return $pos.doc.resolve($pos.after(i+1));if(parent.type.spec.isolating)break}return null}__name(findCutAfter,"findCutAfter");const dist_lift=__name((state,dispatch)=>{let{$from,$to}=state.selection,range2=$from.blockRange($to),target=range2&&liftTarget(range2);return null!=target&&(dispatch&&dispatch(state.tr.lift(range2,target).scrollIntoView()),!0)},"dist_lift"),dist_newlineInCode=__name((state,dispatch)=>{let{$head,$anchor}=state.selection;return!(!$head.parent.type.spec.code||!$head.sameParent($anchor))&&(dispatch&&dispatch(state.tr.insertText("\n").scrollIntoView()),!0)},"dist_newlineInCode");function defaultBlockAt(match){for(let i=0;i<match.edgeCount;i++){let{type}=match.edge(i);if(type.isTextblock&&!type.hasRequiredAttrs())return type}return null}__name(defaultBlockAt,"defaultBlockAt");const dist_exitCode=__name((state,dispatch)=>{let{$head,$anchor}=state.selection;if(!$head.parent.type.spec.code||!$head.sameParent($anchor))return!1;let above=$head.node(-1),after=$head.indexAfter(-1),type=defaultBlockAt(above.contentMatchAt(after));if(!type||!above.canReplaceWith(after,after,type))return!1;if(dispatch){let pos=$head.after(),tr=state.tr.replaceWith(pos,pos,type.createAndFill());tr.setSelection(dist_Selection.near(tr.doc.resolve(pos),1)),dispatch(tr.scrollIntoView())}return!0},"dist_exitCode"),dist_createParagraphNear=__name((state,dispatch)=>{let sel=state.selection,{$from,$to}=sel;if(sel instanceof AllSelection||$from.parent.inlineContent||$to.parent.inlineContent)return!1;let type=defaultBlockAt($to.parent.contentMatchAt($to.indexAfter()));if(!type||!type.isTextblock)return!1;if(dispatch){let side=(!$from.parentOffset&&$to.index()<$to.parent.childCount?$from:$to).pos,tr=state.tr.insert(side,type.createAndFill());tr.setSelection(dist_TextSelection.create(tr.doc,side+1)),dispatch(tr.scrollIntoView())}return!0},"dist_createParagraphNear"),dist_liftEmptyBlock=__name((state,dispatch)=>{let{$cursor}=state.selection;if(!$cursor||$cursor.parent.content.size)return!1;if($cursor.depth>1&&$cursor.after()!=$cursor.end(-1)){let before=$cursor.before();if(dist_canSplit(state.doc,before))return dispatch&&dispatch(state.tr.split(before).scrollIntoView()),!0}let range2=$cursor.blockRange(),target=range2&&liftTarget(range2);return null!=target&&(dispatch&&dispatch(state.tr.lift(range2,target).scrollIntoView()),!0)},"dist_liftEmptyBlock"),dist_splitBlock=__name((state,dispatch)=>{let{$from,$to}=state.selection;if(state.selection instanceof dist_NodeSelection&&state.selection.node.isBlock)return!(!$from.parentOffset||!dist_canSplit(state.doc,$from.pos))&&(dispatch&&dispatch(state.tr.split($from.pos).scrollIntoView()),!0);if(!$from.parent.isBlock)return!1;if(dispatch){let atEnd=$to.parentOffset==$to.parent.content.size,tr=state.tr;(state.selection instanceof dist_TextSelection||state.selection instanceof AllSelection)&&tr.deleteSelection();let deflt=0==$from.depth?null:defaultBlockAt($from.node(-1).contentMatchAt($from.indexAfter(-1))),types=atEnd&&deflt?[{type:deflt}]:void 0,can=dist_canSplit(tr.doc,tr.mapping.map($from.pos),1,types);if(!types&&!can&&dist_canSplit(tr.doc,tr.mapping.map($from.pos),1,deflt?[{type:deflt}]:void 0)&&(deflt&&(types=[{type:deflt}]),can=!0),can&&(tr.split(tr.mapping.map($from.pos),1,types),!atEnd&&!$from.parentOffset&&$from.parent.type!=deflt)){let first=tr.mapping.map($from.before()),$first=tr.doc.resolve(first);deflt&&$from.node(-1).canReplaceWith($first.index(),$first.index()+1,deflt)&&tr.setNodeMarkup(tr.mapping.map($from.before()),deflt)}dispatch(tr.scrollIntoView())}return!0},"dist_splitBlock"),selectAll=__name((state,dispatch)=>(dispatch&&dispatch(state.tr.setSelection(new AllSelection(state.doc))),!0),"selectAll");function joinMaybeClear(state,$pos,dispatch){let before=$pos.nodeBefore,after=$pos.nodeAfter,index=$pos.index();return!!(before&&after&&before.type.compatibleContent(after.type))&&(!before.content.size&&$pos.parent.canReplace(index-1,index)?(dispatch&&dispatch(state.tr.delete($pos.pos-before.nodeSize,$pos.pos).scrollIntoView()),!0):!(!$pos.parent.canReplace(index,index+1)||!after.isTextblock&&!dist_canJoin(state.doc,$pos.pos))&&(dispatch&&dispatch(state.tr.clearIncompatible($pos.pos,before.type,before.contentMatchAt(before.childCount)).join($pos.pos).scrollIntoView()),!0))}function deleteBarrier(state,$cut,dispatch){let conn,match,before=$cut.nodeBefore,after=$cut.nodeAfter;if(before.type.spec.isolating||after.type.spec.isolating)return!1;if(joinMaybeClear(state,$cut,dispatch))return!0;let canDelAfter=$cut.parent.canReplace($cut.index(),$cut.index()+1);if(canDelAfter&&(conn=(match=before.contentMatchAt(before.childCount)).findWrapping(after.type))&&match.matchType(conn[0]||after.type).validEnd){if(dispatch){let end=$cut.pos+after.nodeSize,wrap2=dist_Fragment.empty;for(let i=conn.length-1;i>=0;i--)wrap2=dist_Fragment.from(conn[i].create(null,wrap2));wrap2=dist_Fragment.from(before.copy(wrap2));let tr=state.tr.step(new dist_ReplaceAroundStep($cut.pos-1,end,$cut.pos,end,new dist_Slice(wrap2,1,0),conn.length,!0)),joinAt=end+2*conn.length;dist_canJoin(tr.doc,joinAt)&&tr.join(joinAt),dispatch(tr.scrollIntoView())}return!0}let selAfter=dist_Selection.findFrom($cut,1),range2=selAfter&&selAfter.$from.blockRange(selAfter.$to),target=range2&&liftTarget(range2);if(null!=target&&target>=$cut.depth)return dispatch&&dispatch(state.tr.lift(range2,target).scrollIntoView()),!0;if(canDelAfter&&textblockAt(after,"start",!0)&&textblockAt(before,"end")){let at=before,wrap2=[];for(;wrap2.push(at),!at.isTextblock;)at=at.lastChild;let afterText=after,afterDepth=1;for(;!afterText.isTextblock;afterText=afterText.firstChild)afterDepth++;if(at.canReplace(at.childCount,at.childCount,afterText.content)){if(dispatch){let end=dist_Fragment.empty;for(let i=wrap2.length-1;i>=0;i--)end=dist_Fragment.from(wrap2[i].copy(end));dispatch(state.tr.step(new dist_ReplaceAroundStep($cut.pos-wrap2.length,$cut.pos+after.nodeSize,$cut.pos+afterDepth,$cut.pos+after.nodeSize-afterDepth,new dist_Slice(end,wrap2.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function selectTextblockSide(side){return function(state,dispatch){let sel=state.selection,$pos=side<0?sel.$from:sel.$to,depth=$pos.depth;for(;$pos.node(depth).isInline;){if(!depth)return!1;depth--}return!!$pos.node(depth).isTextblock&&(dispatch&&dispatch(state.tr.setSelection(dist_TextSelection.create(state.doc,side<0?$pos.start(depth):$pos.end(depth)))),!0)}}__name(joinMaybeClear,"joinMaybeClear"),__name(deleteBarrier,"deleteBarrier"),__name(selectTextblockSide,"selectTextblockSide");const selectTextblockStart=selectTextblockSide(-1),selectTextblockEnd=selectTextblockSide(1);function wrapIn(nodeType,attrs=null){return function(state,dispatch){let{$from,$to}=state.selection,range2=$from.blockRange($to),wrapping=range2&&findWrapping(range2,nodeType,attrs);return!!wrapping&&(dispatch&&dispatch(state.tr.wrap(range2,wrapping).scrollIntoView()),!0)}}function dist_setBlockType(nodeType,attrs=null){return function(state,dispatch){let{from,to}=state.selection,applicable=!1;return state.doc.nodesBetween(from,to,(node,pos)=>{if(applicable)return!1;if(node.isTextblock&&!node.hasMarkup(nodeType,attrs))if(node.type==nodeType)applicable=!0;else{let $pos=state.doc.resolve(pos),index=$pos.index();applicable=$pos.parent.canReplaceWith(index,index+1,nodeType)}}),!!applicable&&(dispatch&&dispatch(state.tr.setBlockType(from,to,nodeType,attrs).scrollIntoView()),!0)}}function markApplies(doc2,ranges,type){for(let i=0;i<ranges.length;i++){let{$from,$to}=ranges[i],can=0==$from.depth&&doc2.type.allowsMarkType(type);if(doc2.nodesBetween($from.pos,$to.pos,node=>{if(can)return!1;can=node.inlineContent&&node.type.allowsMarkType(type)}),can)return!0}return!1}function dist_toggleMark(markType,attrs=null){return function(state,dispatch){let{empty:empty2,$cursor,ranges}=state.selection;if(empty2&&!$cursor||!markApplies(state.doc,ranges,markType))return!1;if(dispatch)if($cursor)markType.isInSet(state.storedMarks||$cursor.marks())?dispatch(state.tr.removeStoredMark(markType)):dispatch(state.tr.addStoredMark(markType.create(attrs)));else{let has=!1,tr=state.tr;for(let i=0;!has&&i<ranges.length;i++){let{$from,$to}=ranges[i];has=state.doc.rangeHasMark($from.pos,$to.pos,markType)}for(let i=0;i<ranges.length;i++){let{$from,$to}=ranges[i];if(has)tr.removeMark($from.pos,$to.pos,markType);else{let from=$from.pos,to=$to.pos,start=$from.nodeAfter,end=$to.nodeBefore,spaceStart=start&&start.isText?/^\s*/.exec(start.text)[0].length:0,spaceEnd=end&&end.isText?/\s*$/.exec(end.text)[0].length:0;from+spaceStart<to&&(from+=spaceStart,to-=spaceEnd),tr.addMark(from,to,markType.create(attrs))}}dispatch(tr.scrollIntoView())}return!0}}function wrapDispatchForJoin(dispatch,isJoinable){return tr=>{if(!tr.isGeneric)return dispatch(tr);let ranges=[];for(let i=0;i<tr.mapping.maps.length;i++){let map=tr.mapping.maps[i];for(let j=0;j<ranges.length;j++)ranges[j]=map.map(ranges[j]);map.forEach((_s,_e,from,to)=>ranges.push(from,to))}let joinable2=[];for(let i=0;i<ranges.length;i+=2){let from=ranges[i],to=ranges[i+1],$from=tr.doc.resolve(from),depth=$from.sharedDepth(to),parent=$from.node(depth);for(let index=$from.indexAfter(depth),pos=$from.after(depth+1);pos<=to;++index){let after=parent.maybeChild(index);if(!after)break;if(index&&-1==joinable2.indexOf(pos)){let before=parent.child(index-1);before.type==after.type&&isJoinable(before,after)&&joinable2.push(pos)}pos+=after.nodeSize}}joinable2.sort((a,b)=>a-b);for(let i=joinable2.length-1;i>=0;i--)canJoin(tr.doc,joinable2[i])&&tr.join(joinable2[i]);dispatch(tr)}}function dist_chainCommands(...commands){return function(state,dispatch,view){for(let i=0;i<commands.length;i++)if(commands[i](state,dispatch,view))return!0;return!1}}__name(wrapIn,"wrapIn"),__name(dist_setBlockType,"dist_setBlockType"),__name(markApplies,"markApplies"),__name(dist_toggleMark,"dist_toggleMark"),__name(wrapDispatchForJoin,"wrapDispatchForJoin"),__name(function autoJoin(command,isJoinable){let canJoin2=Array.isArray(isJoinable)?node=>isJoinable.indexOf(node.type.name)>-1:isJoinable;return(state,dispatch,view)=>command(state,dispatch&&wrapDispatchForJoin(dispatch,canJoin2),view)},"autoJoin"),__name(dist_chainCommands,"dist_chainCommands");let backspace=dist_chainCommands(deleteSelection,joinBackward,selectNodeBackward),del=dist_chainCommands(deleteSelection,joinForward,selectNodeForward);const pcBaseKeymap={Enter:dist_chainCommands(dist_newlineInCode,dist_createParagraphNear,dist_liftEmptyBlock,dist_splitBlock),"Mod-Enter":dist_exitCode,Backspace:backspace,"Mod-Backspace":backspace,"Shift-Backspace":backspace,Delete:del,"Mod-Delete":del,"Mod-a":selectAll},macBaseKeymap={"Ctrl-h":pcBaseKeymap.Backspace,"Alt-Backspace":pcBaseKeymap["Mod-Backspace"],"Ctrl-d":pcBaseKeymap.Delete,"Ctrl-Alt-Backspace":pcBaseKeymap["Mod-Delete"],"Alt-Delete":pcBaseKeymap["Mod-Delete"],"Alt-d":pcBaseKeymap["Mod-Delete"],"Ctrl-a":selectTextblockStart,"Ctrl-e":selectTextblockEnd};for(let key in pcBaseKeymap)macBaseKeymap[key]=pcBaseKeymap[key];"undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&os.platform();const isMarkActive=__name((state,type)=>{const{from,$from,to,empty:empty2}=state.selection;return empty2?Boolean(type.isInSet(state.storedMarks||$from.marks())):state.doc.rangeHasMark(from,to,type)},"isMarkActive"),findNodeType=__name((type,$from)=>{for(let i=$from.depth;i>0;i-=1)if($from.node(i).type===type)return $from.node(i).type;return null},"findNodeType"),isNodeActive=__name((state,type,attrs={})=>{const{selection}=state,{$from,to}=selection,node=findNodeType(type,$from);return Object.entries(attrs).length&&node?to<=$from.end()&&$from.parent.hasMarkup(type,attrs):Boolean(node)},"isNodeActive"),getSelectionMarks=__name(state=>{let marks2=[];const{selection,storedMarks}=state,{from,to,empty:empty2,$from}=selection;return empty2?marks2=storedMarks||$from.marks():state.doc.nodesBetween(from,to,node=>{marks2=[...marks2,...node.marks]}),marks2},"getSelectionMarks"),getSelectionNodes=__name(state=>{const nodes2=[],{selection:{from,to}}=state;return state.doc.nodesBetween(from,to,node=>{nodes2.push(node)}),nodes2},"getSelectionNodes"),ngx_editor_helpers_markApplies=__name((doc2,ranges,type)=>{for(const range2 of ranges){const{$from,$to}=range2;let canApply=0===$from.depth&&doc2.type.allowsMarkType(type);if(doc2.nodesBetween($from.pos,$to.pos,node=>!canApply&&(canApply=node.inlineContent&&node.type.allowsMarkType(type),!0)),canApply)return!0}return!1},"ngx_editor_helpers_markApplies"),canInsert=__name((state,nodeType)=>{const{$from}=state.selection;for(let d=$from.depth;d>=0;d-=1){const index=$from.index(d);if($from.node(d).canReplaceWith(index,index,nodeType))return!0}return!1},"canInsert"),removeLink=__name(()=>(state,dispatch)=>{const{doc:doc2,selection,tr}=state,{$head:{pos},from,to}=selection;if(from===to){const $pos=doc2.resolve(pos),linkStart=pos-$pos.textOffset,linkEnd=linkStart+$pos.parent.child($pos.index()).nodeSize;tr.removeMark(linkStart,linkEnd)}else tr.removeMark(from,to);return!!tr.docChanged&&(null==dispatch||dispatch(tr),!0)},"removeLink"),applyMark=__name((type,attrs={})=>(state,dispatch)=>{const{tr,selection}=state,{empty:empty2,ranges,$from,$to}=selection;if(empty2&&selection instanceof dist_TextSelection){const{$cursor}=selection;if(!$cursor||!ngx_editor_helpers_markApplies(state.doc,ranges,type)||(tr.addStoredMark(type.create(attrs)),!tr.storedMarksSet))return!1;null==dispatch||dispatch(tr)}else{if(tr.addMark($from.pos,$to.pos,type.create(attrs)),!tr.docChanged)return!1;null==dispatch||dispatch(tr.scrollIntoView())}return!0},"applyMark"),ngx_editor_commands_removeMark=__name(type=>(state,dispatch)=>{const{tr,selection,storedMarks,doc:doc2}=state,{empty:empty2,ranges}=selection;if(empty2&&selection instanceof dist_TextSelection){const{$cursor}=selection;if(!$cursor||!ngx_editor_helpers_markApplies(state.doc,ranges,type))return!1;if(type.isInSet(storedMarks||$cursor.marks()))return tr.removeStoredMark(type),null==dispatch||dispatch(tr),!0}else{for(const range2 of ranges){const{$from,$to}=range2;doc2.rangeHasMark($from.pos,$to.pos,type)&&tr.removeMark($from.pos,$to.pos,type)}if(!tr.docChanged)return!1;null==dispatch||dispatch(tr.scrollIntoView())}return!1},"ngx_editor_commands_removeMark");var platform_browser=__webpack_require__(22313),tslib_es6=__webpack_require__(70655),asyncToGenerator=__webpack_require__(15861);function floating_ui_core_getSide(placement){return placement.split("-")[0]}function getAlignment(placement){return placement.split("-")[1]}function getMainAxisFromPlacement(placement){return["top","bottom"].includes(floating_ui_core_getSide(placement))?"x":"y"}function getLengthFromAxis(axis){return"y"===axis?"height":"width"}function computeCoordsFromPlacement(_ref,placement,rtl){let{reference,floating}=_ref;const commonX=reference.x+reference.width/2-floating.width/2,commonY=reference.y+reference.height/2-floating.height/2,mainAxis=getMainAxisFromPlacement(placement),length=getLengthFromAxis(mainAxis),commonAlign=reference[length]/2-floating[length]/2,isVertical="x"===mainAxis;let coords;switch(floating_ui_core_getSide(placement)){case"top":coords={x:commonX,y:reference.y-floating.height};break;case"bottom":coords={x:commonX,y:reference.y+reference.height};break;case"right":coords={x:reference.x+reference.width,y:commonY};break;case"left":coords={x:reference.x-floating.width,y:commonY};break;default:coords={x:reference.x,y:reference.y}}switch(getAlignment(placement)){case"start":coords[mainAxis]-=commonAlign*(rtl&&isVertical?-1:1);break;case"end":coords[mainAxis]+=commonAlign*(rtl&&isVertical?-1:1)}return coords}__name(floating_ui_core_getSide,"floating_ui_core_getSide"),__name(getAlignment,"getAlignment"),__name(getMainAxisFromPlacement,"getMainAxisFromPlacement"),__name(getLengthFromAxis,"getLengthFromAxis"),__name(computeCoordsFromPlacement,"computeCoordsFromPlacement");const computePosition=function(){var _ref2=(0,asyncToGenerator.Z)(function*(reference,floating,config){const{placement="bottom",strategy="absolute",middleware=[],platform:platform2}=config,rtl=yield null==platform2.isRTL?void 0:platform2.isRTL(floating);let rects=yield platform2.getElementRects({reference,floating,strategy}),{x,y}=computeCoordsFromPlacement(rects,placement,rtl),statefulPlacement=placement,middlewareData={},resetCount=0;for(let i=0;i<middleware.length;i++){const{name,fn}=middleware[i],{x:nextX,y:nextY,data,reset}=yield fn({x,y,initialPlacement:placement,placement:statefulPlacement,strategy,middlewareData,rects,platform:platform2,elements:{reference,floating}});(x=null!=nextX?nextX:x,y=null!=nextY?nextY:y,middlewareData={...middlewareData,[name]:{...middlewareData[name],...data}},reset&&resetCount<=50)&&(resetCount++,"object"==typeof reset&&(reset.placement&&(statefulPlacement=reset.placement),reset.rects&&(rects=!0===reset.rects?yield platform2.getElementRects({reference,floating,strategy}):reset.rects),({x,y}=computeCoordsFromPlacement(rects,statefulPlacement,rtl))),i=-1)}return{x,y,placement:statefulPlacement,strategy,middlewareData}});return __name(function(_x,_x2,_x3){return _ref2.apply(this,arguments)},"computePosition")}();function expandPaddingObject(padding){return{top:0,right:0,bottom:0,left:0,...padding}}function getSideObjectFromPadding(padding){return"number"!=typeof padding?expandPaddingObject(padding):{top:padding,right:padding,bottom:padding,left:padding}}function rectToClientRect(rect){return{...rect,top:rect.y,left:rect.x,right:rect.x+rect.width,bottom:rect.y+rect.height}}function detectOverflow(_x4,_x5){return _detectOverflow.apply(this,arguments)}function _detectOverflow(){return(_detectOverflow=(0,asyncToGenerator.Z)(function*(middlewareArguments,options){var _await$platform$isEle;void 0===options&&(options={});const{x,y,platform:platform2,rects,elements,strategy}=middlewareArguments,{boundary="clippingAncestors",rootBoundary="viewport",elementContext="floating",altBoundary=!1,padding=0}=options,paddingObject=getSideObjectFromPadding(padding),element=elements[altBoundary?"floating"===elementContext?"reference":"floating":elementContext],clippingClientRect=rectToClientRect(yield platform2.getClippingRect({element:null==(_await$platform$isEle=yield null==platform2.isElement?void 0:platform2.isElement(element))||_await$platform$isEle?element:element.contextElement||(yield null==platform2.getDocumentElement?void 0:platform2.getDocumentElement(elements.floating)),boundary,rootBoundary,strategy})),elementClientRect=rectToClientRect(platform2.convertOffsetParentRelativeRectToViewportRelativeRect?yield platform2.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===elementContext?{...rects.floating,x,y}:rects.reference,offsetParent:yield null==platform2.getOffsetParent?void 0:platform2.getOffsetParent(elements.floating),strategy}):rects[elementContext]);return{top:clippingClientRect.top-elementClientRect.top+paddingObject.top,bottom:elementClientRect.bottom-clippingClientRect.bottom+paddingObject.bottom,left:clippingClientRect.left-elementClientRect.left+paddingObject.left,right:elementClientRect.right-clippingClientRect.right+paddingObject.right}})).apply(this,arguments)}__name(expandPaddingObject,"expandPaddingObject"),__name(getSideObjectFromPadding,"getSideObjectFromPadding"),__name(rectToClientRect,"rectToClientRect"),__name(detectOverflow,"detectOverflow"),__name(_detectOverflow,"_detectOverflow");const min=Math.min,max=Math.max;function within(min$1,value,max$1){return max(min$1,min(value,max$1))}__name(within,"within");const hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(placement){return placement.replace(/left|right|bottom|top/g,matched=>hash$1[matched])}function getAlignmentSides(placement,rects,rtl){void 0===rtl&&(rtl=!1);const alignment=getAlignment(placement),mainAxis=getMainAxisFromPlacement(placement),length=getLengthFromAxis(mainAxis);let mainAlignmentSide="x"===mainAxis?alignment===(rtl?"end":"start")?"right":"left":"start"===alignment?"bottom":"top";return rects.reference[length]>rects.floating[length]&&(mainAlignmentSide=getOppositePlacement(mainAlignmentSide)),{main:mainAlignmentSide,cross:getOppositePlacement(mainAlignmentSide)}}__name(getOppositePlacement,"getOppositePlacement"),__name(getAlignmentSides,"getAlignmentSides");const hash={start:"end",end:"start"};function getOppositeAlignmentPlacement(placement){return placement.replace(/start|end/g,matched=>hash[matched])}__name(getOppositeAlignmentPlacement,"getOppositeAlignmentPlacement");const sides=["top","right","bottom","left"],allPlacements=sides.reduce((acc,side)=>acc.concat(side,side+"-start",side+"-end"),[]);function getPlacementList(alignment,autoAlignment,allowedPlacements){return(alignment?[...allowedPlacements.filter(placement=>getAlignment(placement)===alignment),...allowedPlacements.filter(placement=>getAlignment(placement)!==alignment)]:allowedPlacements.filter(placement=>floating_ui_core_getSide(placement)===placement)).filter(placement=>!alignment||(getAlignment(placement)===alignment||!!autoAlignment&&getOppositeAlignmentPlacement(placement)!==placement))}__name(getPlacementList,"getPlacementList");const autoPlacement=__name(function(options){return void 0===options&&(options={}),{name:"autoPlacement",options,fn:middlewareArguments=>(0,asyncToGenerator.Z)(function*(){var _middlewareData$autoP,_middlewareData$autoP2,_middlewareData$autoP3,_middlewareData$autoP4,_placementsSortedByLe;const{x,y,rects,middlewareData,placement,platform:platform2,elements}=middlewareArguments,{alignment=null,allowedPlacements=allPlacements,autoAlignment=!0,...detectOverflowOptions}=options,placements=getPlacementList(alignment,autoAlignment,allowedPlacements),overflow=yield detectOverflow(middlewareArguments,detectOverflowOptions),currentIndex=null!=(_middlewareData$autoP=null==(_middlewareData$autoP2=middlewareData.autoPlacement)?void 0:_middlewareData$autoP2.index)?_middlewareData$autoP:0,currentPlacement=placements[currentIndex];if(null==currentPlacement)return{};const{main,cross}=getAlignmentSides(currentPlacement,rects,yield null==platform2.isRTL?void 0:platform2.isRTL(elements.floating));if(placement!==currentPlacement)return{x,y,reset:{placement:placements[0]}};const currentOverflows=[overflow[floating_ui_core_getSide(currentPlacement)],overflow[main],overflow[cross]],allOverflows=[...null!=(_middlewareData$autoP3=null==(_middlewareData$autoP4=middlewareData.autoPlacement)?void 0:_middlewareData$autoP4.overflows)?_middlewareData$autoP3:[],{placement:currentPlacement,overflows:currentOverflows}],nextPlacement=placements[currentIndex+1];if(nextPlacement)return{data:{index:currentIndex+1,overflows:allOverflows},reset:{placement:nextPlacement}};const placementsSortedByLeastOverflow=allOverflows.slice().sort((a,b)=>a.overflows[0]-b.overflows[0]),placementThatFitsOnAllSides=null==(_placementsSortedByLe=placementsSortedByLeastOverflow.find(_ref=>{let{overflows}=_ref;return overflows.every(overflow2=>overflow2<=0)}))?void 0:_placementsSortedByLe.placement,resetPlacement=null!=placementThatFitsOnAllSides?placementThatFitsOnAllSides:placementsSortedByLeastOverflow[0].placement;return resetPlacement!==placement?{data:{index:currentIndex+1,overflows:allOverflows},reset:{placement:resetPlacement}}:{}})()}},"autoPlacement");function getExpandedPlacements(placement){const oppositePlacement=getOppositePlacement(placement);return[getOppositeAlignmentPlacement(placement),oppositePlacement,getOppositeAlignmentPlacement(oppositePlacement)]}__name(getExpandedPlacements,"getExpandedPlacements");function getSideOffsets(overflow,rect){return{top:overflow.top-rect.height,right:overflow.right-rect.width,bottom:overflow.bottom-rect.height,left:overflow.left-rect.width}}function isAnySideFullyClipped(overflow){return sides.some(side=>overflow[side]>=0)}__name(getSideOffsets,"getSideOffsets"),__name(isAnySideFullyClipped,"isAnySideFullyClipped");function convertValueToCoords(_x6,_x7){return _convertValueToCoords.apply(this,arguments)}function _convertValueToCoords(){return(_convertValueToCoords=(0,asyncToGenerator.Z)(function*(middlewareArguments,value){const{placement,platform:platform2,elements}=middlewareArguments,rtl=yield null==platform2.isRTL?void 0:platform2.isRTL(elements.floating),side=floating_ui_core_getSide(placement),alignment=getAlignment(placement),isVertical="x"===getMainAxisFromPlacement(placement),mainAxisMulti=["left","top"].includes(side)?-1:1,crossAxisMulti=rtl&&isVertical?-1:1,rawValue="function"==typeof value?value(middlewareArguments):value;let{mainAxis,crossAxis,alignmentAxis}="number"==typeof rawValue?{mainAxis:rawValue,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...rawValue};return alignment&&"number"==typeof alignmentAxis&&(crossAxis="end"===alignment?-1*alignmentAxis:alignmentAxis),isVertical?{x:crossAxis*crossAxisMulti,y:mainAxis*mainAxisMulti}:{x:mainAxis*mainAxisMulti,y:crossAxis*crossAxisMulti}})).apply(this,arguments)}__name(convertValueToCoords,"convertValueToCoords"),__name(_convertValueToCoords,"_convertValueToCoords");const offset=__name(function(value){return void 0===value&&(value=0),{name:"offset",options:value,fn:middlewareArguments=>(0,asyncToGenerator.Z)(function*(){const{x,y}=middlewareArguments,diffCoords=yield convertValueToCoords(middlewareArguments,value);return{x:x+diffCoords.x,y:y+diffCoords.y,data:diffCoords}})()}},"offset");function getCrossAxis(axis){return"x"===axis?"y":"x"}__name(getCrossAxis,"getCrossAxis");function isWindow(value){return value&&value.document&&value.location&&value.alert&&value.setInterval}function getWindow(node){if(null==node)return window;if(!isWindow(node)){const ownerDocument=node.ownerDocument;return ownerDocument&&ownerDocument.defaultView||window}return node}function getComputedStyle$1(element){return getWindow(element).getComputedStyle(element)}function getNodeName(node){return isWindow(node)?"":node?(node.nodeName||"").toLowerCase():""}function getUAString(){const uaData=navigator.userAgentData;return null!=uaData&&uaData.brands?uaData.brands.map(item=>item.brand+"/"+item.version).join(" "):navigator.userAgent}function isHTMLElement(value){return value instanceof getWindow(value).HTMLElement}function isElement(value){return value instanceof getWindow(value).Element}function isNode(value){return value instanceof getWindow(value).Node}function isShadowRoot(node){if("undefined"==typeof ShadowRoot)return!1;return node instanceof getWindow(node).ShadowRoot||node instanceof ShadowRoot}function isOverflowElement(element){const{overflow,overflowX,overflowY}=getComputedStyle$1(element);return/auto|scroll|overlay|hidden/.test(overflow+overflowY+overflowX)}function isTableElement(element){return["table","td","th"].includes(getNodeName(element))}function isContainingBlock(element){const isFirefox=/firefox/i.test(getUAString()),css=getComputedStyle$1(element);return"none"!==css.transform||"none"!==css.perspective||"paint"===css.contain||["transform","perspective"].includes(css.willChange)||isFirefox&&"filter"===css.willChange||isFirefox&&!!css.filter&&"none"!==css.filter}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}__name(isWindow,"isWindow"),__name(getWindow,"getWindow"),__name(getComputedStyle$1,"getComputedStyle$1"),__name(getNodeName,"getNodeName"),__name(getUAString,"getUAString"),__name(isHTMLElement,"isHTMLElement"),__name(isElement,"isElement"),__name(isNode,"isNode"),__name(isShadowRoot,"isShadowRoot"),__name(isOverflowElement,"isOverflowElement"),__name(isTableElement,"isTableElement"),__name(isContainingBlock,"isContainingBlock"),__name(isLayoutViewport,"isLayoutViewport");const floating_ui_dom_min=Math.min,floating_ui_dom_max=Math.max,round=Math.round;function getBoundingClientRect(element,includeScale,isFixedStrategy){var _win$visualViewport$o,_win$visualViewport,_win$visualViewport$o2,_win$visualViewport2;void 0===includeScale&&(includeScale=!1),void 0===isFixedStrategy&&(isFixedStrategy=!1);const clientRect2=element.getBoundingClientRect();let scaleX=1,scaleY=1;includeScale&&isHTMLElement(element)&&(scaleX=element.offsetWidth>0&&round(clientRect2.width)/element.offsetWidth||1,scaleY=element.offsetHeight>0&&round(clientRect2.height)/element.offsetHeight||1);const win=isElement(element)?getWindow(element):window,addVisualOffsets=!isLayoutViewport()&&isFixedStrategy,x=(clientRect2.left+(addVisualOffsets&&null!=(_win$visualViewport$o=null==(_win$visualViewport=win.visualViewport)?void 0:_win$visualViewport.offsetLeft)?_win$visualViewport$o:0))/scaleX,y=(clientRect2.top+(addVisualOffsets&&null!=(_win$visualViewport$o2=null==(_win$visualViewport2=win.visualViewport)?void 0:_win$visualViewport2.offsetTop)?_win$visualViewport$o2:0))/scaleY,width=clientRect2.width/scaleX,height=clientRect2.height/scaleY;return{width,height,top:y,right:x+width,bottom:y+height,left:x,x,y}}function getDocumentElement(node){return((isNode(node)?node.ownerDocument:node.document)||window.document).documentElement}function getNodeScroll(element){return isElement(element)?{scrollLeft:element.scrollLeft,scrollTop:element.scrollTop}:{scrollLeft:element.pageXOffset,scrollTop:element.pageYOffset}}function getWindowScrollBarX(element){return getBoundingClientRect(getDocumentElement(element)).left+getNodeScroll(element).scrollLeft}function isScaled(element){const rect=getBoundingClientRect(element);return round(rect.width)!==element.offsetWidth||round(rect.height)!==element.offsetHeight}function getRectRelativeToOffsetParent(element,offsetParent,strategy){const isOffsetParentAnElement=isHTMLElement(offsetParent),documentElement=getDocumentElement(offsetParent),rect=getBoundingClientRect(element,isOffsetParentAnElement&&isScaled(offsetParent),"fixed"===strategy);let scroll={scrollLeft:0,scrollTop:0};const offsets={x:0,y:0};if(isOffsetParentAnElement||!isOffsetParentAnElement&&"fixed"!==strategy)if(("body"!==getNodeName(offsetParent)||isOverflowElement(documentElement))&&(scroll=getNodeScroll(offsetParent)),isHTMLElement(offsetParent)){const offsetRect=getBoundingClientRect(offsetParent,!0);offsets.x=offsetRect.x+offsetParent.clientLeft,offsets.y=offsetRect.y+offsetParent.clientTop}else documentElement&&(offsets.x=getWindowScrollBarX(documentElement));return{x:rect.left+scroll.scrollLeft-offsets.x,y:rect.top+scroll.scrollTop-offsets.y,width:rect.width,height:rect.height}}function getParentNode(node){return"html"===getNodeName(node)?node:node.assignedSlot||node.parentNode||(isShadowRoot(node)?node.host:null)||getDocumentElement(node)}function getTrueOffsetParent(element){return isHTMLElement(element)&&"fixed"!==getComputedStyle(element).position?element.offsetParent:null}function getContainingBlock(element){let currentNode=getParentNode(element);for(isShadowRoot(currentNode)&&(currentNode=currentNode.host);isHTMLElement(currentNode)&&!["html","body"].includes(getNodeName(currentNode));){if(isContainingBlock(currentNode))return currentNode;currentNode=currentNode.parentNode}return null}function getOffsetParent(element){const window2=getWindow(element);let offsetParent=getTrueOffsetParent(element);for(;offsetParent&&isTableElement(offsetParent)&&"static"===getComputedStyle(offsetParent).position;)offsetParent=getTrueOffsetParent(offsetParent);return offsetParent&&("html"===getNodeName(offsetParent)||"body"===getNodeName(offsetParent)&&"static"===getComputedStyle(offsetParent).position&&!isContainingBlock(offsetParent))?window2:offsetParent||getContainingBlock(element)||window2}function getDimensions(element){if(isHTMLElement(element))return{width:element.offsetWidth,height:element.offsetHeight};const rect=getBoundingClientRect(element);return{width:rect.width,height:rect.height}}function convertOffsetParentRelativeRectToViewportRelativeRect(_ref){let{rect,offsetParent,strategy}=_ref;const isOffsetParentAnElement=isHTMLElement(offsetParent),documentElement=getDocumentElement(offsetParent);if(offsetParent===documentElement)return rect;let scroll={scrollLeft:0,scrollTop:0};const offsets={x:0,y:0};if((isOffsetParentAnElement||!isOffsetParentAnElement&&"fixed"!==strategy)&&(("body"!==getNodeName(offsetParent)||isOverflowElement(documentElement))&&(scroll=getNodeScroll(offsetParent)),isHTMLElement(offsetParent))){const offsetRect=getBoundingClientRect(offsetParent,!0);offsets.x=offsetRect.x+offsetParent.clientLeft,offsets.y=offsetRect.y+offsetParent.clientTop}return{...rect,x:rect.x-scroll.scrollLeft+offsets.x,y:rect.y-scroll.scrollTop+offsets.y}}function getViewportRect(element,strategy){const win=getWindow(element),html=getDocumentElement(element),visualViewport=win.visualViewport;let width=html.clientWidth,height=html.clientHeight,x=0,y=0;if(visualViewport){width=visualViewport.width,height=visualViewport.height;const layoutViewport=isLayoutViewport();(layoutViewport||!layoutViewport&&"fixed"===strategy)&&(x=visualViewport.offsetLeft,y=visualViewport.offsetTop)}return{width,height,x,y}}function getDocumentRect(element){var _element$ownerDocumen;const html=getDocumentElement(element),scroll=getNodeScroll(element),body=null==(_element$ownerDocumen=element.ownerDocument)?void 0:_element$ownerDocumen.body,width=floating_ui_dom_max(html.scrollWidth,html.clientWidth,body?body.scrollWidth:0,body?body.clientWidth:0),height=floating_ui_dom_max(html.scrollHeight,html.clientHeight,body?body.scrollHeight:0,body?body.clientHeight:0);let x=-scroll.scrollLeft+getWindowScrollBarX(element);const y=-scroll.scrollTop;return"rtl"===getComputedStyle$1(body||html).direction&&(x+=floating_ui_dom_max(html.clientWidth,body?body.clientWidth:0)-width),{width,height,x,y}}function getNearestOverflowAncestor(node){const parentNode2=getParentNode(node);return["html","body","#document"].includes(getNodeName(parentNode2))?node.ownerDocument.body:isHTMLElement(parentNode2)&&isOverflowElement(parentNode2)?parentNode2:getNearestOverflowAncestor(parentNode2)}function getOverflowAncestors(node,list){var _node$ownerDocument;void 0===list&&(list=[]);const scrollableAncestor=getNearestOverflowAncestor(node),isBody=scrollableAncestor===(null==(_node$ownerDocument=node.ownerDocument)?void 0:_node$ownerDocument.body),win=getWindow(scrollableAncestor),target=isBody?[win].concat(win.visualViewport||[],isOverflowElement(scrollableAncestor)?scrollableAncestor:[]):scrollableAncestor,updatedList=list.concat(target);return isBody?updatedList:updatedList.concat(getOverflowAncestors(target))}function contains(parent,child){const rootNode=null==child.getRootNode?void 0:child.getRootNode();if(parent.contains(child))return!0;if(rootNode&&isShadowRoot(rootNode)){let next=child;do{if(next&&parent===next)return!0;next=next.parentNode||next.host}while(next)}return!1}function getInnerBoundingClientRect(element,strategy){const clientRect2=getBoundingClientRect(element,!1,"fixed"===strategy),top=clientRect2.top+element.clientTop,left=clientRect2.left+element.clientLeft;return{top,left,x:left,y:top,right:left+element.clientWidth,bottom:top+element.clientHeight,width:element.clientWidth,height:element.clientHeight}}function getClientRectFromClippingAncestor(element,clippingParent,strategy){return"viewport"===clippingParent?rectToClientRect(getViewportRect(element,strategy)):isElement(clippingParent)?getInnerBoundingClientRect(clippingParent,strategy):rectToClientRect(getDocumentRect(getDocumentElement(element)))}function getClippingAncestors(element){const clippingAncestors=getOverflowAncestors(element),clipperElement=["absolute","fixed"].includes(getComputedStyle$1(element).position)&&isHTMLElement(element)?getOffsetParent(element):element;return isElement(clipperElement)?clippingAncestors.filter(clippingAncestors2=>isElement(clippingAncestors2)&&contains(clippingAncestors2,clipperElement)&&"body"!==getNodeName(clippingAncestors2)):[]}function getClippingRect(_ref){let{element,boundary,rootBoundary,strategy}=_ref;const clippingAncestors=[..."clippingAncestors"===boundary?getClippingAncestors(element):[].concat(boundary),rootBoundary],firstClippingAncestor=clippingAncestors[0],clippingRect=clippingAncestors.reduce((accRect,clippingAncestor)=>{const rect=getClientRectFromClippingAncestor(element,clippingAncestor,strategy);return accRect.top=floating_ui_dom_max(rect.top,accRect.top),accRect.right=floating_ui_dom_min(rect.right,accRect.right),accRect.bottom=floating_ui_dom_min(rect.bottom,accRect.bottom),accRect.left=floating_ui_dom_max(rect.left,accRect.left),accRect},getClientRectFromClippingAncestor(element,firstClippingAncestor,strategy));return{width:clippingRect.right-clippingRect.left,height:clippingRect.bottom-clippingRect.top,x:clippingRect.left,y:clippingRect.top}}__name(getBoundingClientRect,"getBoundingClientRect"),__name(getDocumentElement,"getDocumentElement"),__name(getNodeScroll,"getNodeScroll"),__name(getWindowScrollBarX,"getWindowScrollBarX"),__name(isScaled,"isScaled"),__name(getRectRelativeToOffsetParent,"getRectRelativeToOffsetParent"),__name(getParentNode,"getParentNode"),__name(getTrueOffsetParent,"getTrueOffsetParent"),__name(getContainingBlock,"getContainingBlock"),__name(getOffsetParent,"getOffsetParent"),__name(getDimensions,"getDimensions"),__name(convertOffsetParentRelativeRectToViewportRelativeRect,"convertOffsetParentRelativeRectToViewportRelativeRect"),__name(getViewportRect,"getViewportRect"),__name(getDocumentRect,"getDocumentRect"),__name(getNearestOverflowAncestor,"getNearestOverflowAncestor"),__name(getOverflowAncestors,"getOverflowAncestors"),__name(contains,"contains"),__name(getInnerBoundingClientRect,"getInnerBoundingClientRect"),__name(getClientRectFromClippingAncestor,"getClientRectFromClippingAncestor"),__name(getClippingAncestors,"getClippingAncestors"),__name(getClippingRect,"getClippingRect");const platform={getClippingRect,convertOffsetParentRelativeRectToViewportRelativeRect,isElement,getDimensions,getOffsetParent,getDocumentElement,getElementRects:_ref=>{let{reference,floating,strategy}=_ref;return{reference:getRectRelativeToOffsetParent(reference,getOffsetParent(floating),strategy),floating:{...getDimensions(floating),x:0,y:0}}},getClientRects:element=>Array.from(element.getClientRects()),isRTL:element=>"rtl"===getComputedStyle$1(element).direction};__name(function autoUpdate(reference,floating,update,options){void 0===options&&(options={});const{ancestorScroll:_ancestorScroll=!0,ancestorResize:_ancestorResize=!0,elementResize=!0,animationFrame=!1}=options,ancestorScroll=_ancestorScroll&&!animationFrame,ancestorResize=_ancestorResize&&!animationFrame,ancestors=ancestorScroll||ancestorResize?[...isElement(reference)?getOverflowAncestors(reference):[],...getOverflowAncestors(floating)]:[];ancestors.forEach(ancestor=>{ancestorScroll&&ancestor.addEventListener("scroll",update,{passive:!0}),ancestorResize&&ancestor.addEventListener("resize",update)});let observer=null;if(elementResize){let initialUpdate=!0;observer=new ResizeObserver(()=>{initialUpdate||update(),initialUpdate=!1}),isElement(reference)&&!animationFrame&&observer.observe(reference),observer.observe(floating)}let frameId,prevRefRect=animationFrame?getBoundingClientRect(reference):null;function frameLoop(){const nextRefRect=getBoundingClientRect(reference);prevRefRect&&(nextRefRect.x!==prevRefRect.x||nextRefRect.y!==prevRefRect.y||nextRefRect.width!==prevRefRect.width||nextRefRect.height!==prevRefRect.height)&&update(),prevRefRect=nextRefRect,frameId=requestAnimationFrame(frameLoop)}return animationFrame&&frameLoop(),__name(frameLoop,"frameLoop"),update(),()=>{var _observer;ancestors.forEach(ancestor=>{ancestorScroll&&ancestor.removeEventListener("scroll",update),ancestorResize&&ancestor.removeEventListener("resize",update)}),null==(_observer=observer)||_observer.disconnect(),observer=null,animationFrame&&cancelAnimationFrame(frameId)}},"autoUpdate");const floating_ui_dom_computePosition=__name((reference,floating,options)=>computePosition(reference,floating,{platform,...options}),"floating_ui_dom_computePosition"),_c0=["imgEl"];function ImageViewComponent_span_1_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"span",4)(1,"span",5),core.NdJ("mousedown",__name(function($event){core.CHM(_r3);const ctx_r2=core.oxw();return core.KtG(ctx_r2.startResizing($event,"left"))},"ImageViewComponent_span_1_Template_span_mousedown_1_listener")),core.qZA(),core.TgZ(2,"span",6),core.NdJ("mousedown",__name(function($event){core.CHM(_r3);const ctx_r4=core.oxw();return core.KtG(ctx_r4.startResizing($event,"right"))},"ImageViewComponent_span_1_Template_span_mousedown_2_listener")),core.qZA(),core.TgZ(3,"span",7),core.NdJ("mousedown",__name(function($event){core.CHM(_r3);const ctx_r5=core.oxw();return core.KtG(ctx_r5.startResizing($event,"left"))},"ImageViewComponent_span_1_Template_span_mousedown_3_listener")),core.qZA(),core.TgZ(4,"span",8),core.NdJ("mousedown",__name(function($event){core.CHM(_r3);const ctx_r6=core.oxw();return core.KtG(ctx_r6.startResizing($event,"right"))},"ImageViewComponent_span_1_Template_span_mousedown_4_listener")),core.qZA()()}}__name(ImageViewComponent_span_1_Template,"ImageViewComponent_span_1_Template");const _c1=__name(function(a0){return{"NgxEditor__Resizer--Active":a0}},"_c1"),_c2=["ngxEditor"],_c3=["*"];function LinkComponent_div_2_div_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",12),core._uU(1),core.qZA()),2&rf){const ctx_r1=core.oxw(2);core.xp6(1),core.hij(" ",(null==ctx_r1.href.errors?null:ctx_r1.href.errors.pattern)&&"Please enter valid url."," ")}}function LinkComponent_div_2_div_13_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",12),core._uU(1),core.qZA()),2&rf){const ctx_r2=core.oxw(2);core.xp6(1),core.hij(" ",(null==ctx_r2.text.errors?null:ctx_r2.text.errors.required)&&"This is required"," ")}}function LinkComponent_div_2_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"div",2)(1,"form",3),core.NdJ("ngSubmit",__name(function($event){core.CHM(_r4);const ctx_r3=core.oxw();return core.KtG(ctx_r3.insertLink($event))},"LinkComponent_div_2_Template_form_ngSubmit_1_listener")),core.TgZ(2,"div",4)(3,"div",5)(4,"label",6),core._uU(5),core.qZA(),core._UZ(6,"input",7),core.YNc(7,LinkComponent_div_2_div_7_Template,2,1,"div",8),core.qZA()(),core.TgZ(8,"div",4)(9,"div",5)(10,"label",6),core._uU(11),core.qZA(),core._UZ(12,"input",9),core.YNc(13,LinkComponent_div_2_div_13_Template,2,1,"div",8),core.qZA()(),core.TgZ(14,"div",4)(15,"div",5)(16,"label"),core._UZ(17,"input",10),core._uU(18),core.qZA()()(),core.TgZ(19,"button",11),core._uU(20),core.qZA()()()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("formGroup",ctx_r0.form),core.xp6(4),core.Oqu(ctx_r0.getLabel("url")),core.xp6(2),core.Q6J("ngIf",ctx_r0.href.touched&&ctx_r0.href.invalid),core.xp6(4),core.Oqu(ctx_r0.getLabel("text")),core.xp6(2),core.Q6J("ngIf",ctx_r0.text.touched&&ctx_r0.text.invalid),core.xp6(5),core.hij(" ",ctx_r0.getLabel("openInNewTab")," "),core.xp6(1),core.Q6J("disabled",!ctx_r0.form.valid),core.xp6(1),core.Oqu(ctx_r0.getLabel("insert"))}}__name(LinkComponent_div_2_div_7_Template,"LinkComponent_div_2_div_7_Template"),__name(LinkComponent_div_2_div_13_Template,"LinkComponent_div_2_div_13_Template"),__name(LinkComponent_div_2_Template,"LinkComponent_div_2_Template");const _c4=__name(function(a0,a1){return{"NgxEditor__Dropdown--Active":a0,"NgxEditor--Disabled":a1}},"_c4");function DropdownComponent_div_2_div_1_Template(rf,ctx){if(1&rf){const _r4=core.EpF();core.TgZ(0,"div",4),core.NdJ("mousedown",__name(function($event){const item_r2=core.CHM(_r4).$implicit,ctx_r3=core.oxw(2);return core.KtG(ctx_r3.onClick($event,item_r2))},"DropdownComponent_div_2_div_1_Template_div_mousedown_0_listener")),core._uU(1),core.qZA()}if(2&rf){const item_r2=ctx.$implicit,ctx_r1=core.oxw(2);core.Q6J("ngClass",core.WLB(2,_c4,item_r2===ctx_r1.activeItem,ctx_r1.disabledItems.includes(item_r2))),core.xp6(1),core.hij(" ",ctx_r1.getName(item_r2)," ")}}function DropdownComponent_div_2_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",2),core.YNc(1,DropdownComponent_div_2_div_1_Template,2,5,"div",3),core.qZA()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngForOf",ctx_r0.items)("ngForTrackBy",ctx_r0.trackByIndex)}}function ImageComponent_div_2_div_7_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",12),core._uU(1),core.qZA()),2&rf){const ctx_r1=core.oxw(2);core.xp6(1),core.hij(" ",(null==ctx_r1.src.errors?null:ctx_r1.src.errors.pattern)&&"Please enter valid url."," ")}}function ImageComponent_div_2_Template(rf,ctx){if(1&rf){const _r3=core.EpF();core.TgZ(0,"div",2)(1,"form",3),core.NdJ("ngSubmit",__name(function($event){core.CHM(_r3);const ctx_r2=core.oxw();return core.KtG(ctx_r2.insertLink($event))},"ImageComponent_div_2_Template_form_ngSubmit_1_listener")),core.TgZ(2,"div",4)(3,"div",5)(4,"label",6),core._uU(5),core.qZA(),core._UZ(6,"input",7),core.YNc(7,ImageComponent_div_2_div_7_Template,2,1,"div",8),core.qZA()(),core.TgZ(8,"div",4)(9,"div",5)(10,"label",6),core._uU(11),core.qZA(),core._UZ(12,"input",9),core.qZA()(),core.TgZ(13,"div",4)(14,"div",5)(15,"label",6),core._uU(16),core.qZA(),core._UZ(17,"input",10),core.qZA()(),core.TgZ(18,"button",11),core._uU(19),core.qZA()()()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("formGroup",ctx_r0.form),core.xp6(4),core.Oqu(ctx_r0.getLabel("url")),core.xp6(2),core.Q6J("ngIf",ctx_r0.src.touched&&ctx_r0.src.invalid),core.xp6(4),core.Oqu(ctx_r0.getLabel("altText")),core.xp6(5),core.Oqu(ctx_r0.getLabel("title")),core.xp6(2),core.Q6J("disabled",!ctx_r0.form.valid||!ctx_r0.form.dirty),core.xp6(1),core.Oqu(ctx_r0.getLabel("insert"))}}__name(DropdownComponent_div_2_div_1_Template,"DropdownComponent_div_2_div_1_Template"),__name(DropdownComponent_div_2_Template,"DropdownComponent_div_2_Template"),__name(ImageComponent_div_2_div_7_Template,"ImageComponent_div_2_div_7_Template"),__name(ImageComponent_div_2_Template,"ImageComponent_div_2_Template");const _c5=__name(function(a0,a1){return{backgroundColor:a0,color:a1}},"_c5"),_c6=__name(function(a0){return{"NgxEditor__Color--Active":a0}},"_c6");function ColorPickerComponent_div_2_div_1_button_1_Template(rf,ctx){if(1&rf){const _r6=core.EpF();core.TgZ(0,"button",7),core.NdJ("mousedown",__name(function($event){const color_r4=core.CHM(_r6).$implicit,ctx_r5=core.oxw(3);return core.KtG(ctx_r5.onColorSelect($event,color_r4))},"ColorPickerComponent_div_2_div_1_button_1_Template_button_mousedown_0_listener")),core.qZA()}if(2&rf){const color_r4=ctx.$implicit,ctx_r3=core.oxw(3);core.Q6J("ngStyle",core.WLB(3,_c5,color_r4,ctx_r3.getContrastYIQ(color_r4)))("title",color_r4)("ngClass",core.VKq(6,_c6,ctx_r3.activeColors.includes(color_r4)))}}function ColorPickerComponent_div_2_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",5),core.YNc(1,ColorPickerComponent_div_2_div_1_button_1_Template,1,8,"button",6),core.qZA()),2&rf){const colorGroup_r2=ctx.$implicit,ctx_r1=core.oxw(2);core.xp6(1),core.Q6J("ngForOf",colorGroup_r2)("ngForTrackBy",ctx_r1.trackByIndex)}}function ColorPickerComponent_div_2_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"div",2),core.YNc(1,ColorPickerComponent_div_2_div_1_Template,2,2,"div",3),core.TgZ(2,"button",4),core.NdJ("mousedown",__name(function($event){core.CHM(_r8);const ctx_r7=core.oxw();return core.KtG(ctx_r7.remove($event))},"ColorPickerComponent_div_2_Template_button_mousedown_2_listener")),core._uU(3),core.qZA()()}if(2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngForOf",ctx_r0.presets)("ngForTrackBy",ctx_r0.trackByIndex),core.xp6(1),core.Q6J("disabled",!ctx_r0.isActive),core.xp6(1),core.hij(" ",ctx_r0.getLabel("remove")," ")}}function MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template(rf,ctx){if(1&rf&&core._UZ(0,"ngx-toggle-command",7),2&rf){const item_r5=core.oxw().$implicit,ctx_r7=core.oxw(2);core.Tol(ctx_r7.iconContainerClass),core.Q6J("toolbarItem",item_r5)}}function MenuComponent_ng_container_1_ng_container_1_ngx_insert_command_2_Template(rf,ctx){if(1&rf&&core._UZ(0,"ngx-insert-command",7),2&rf){const item_r5=core.oxw().$implicit,ctx_r8=core.oxw(2);core.Tol(ctx_r8.iconContainerClass),core.Q6J("toolbarItem",item_r5)}}function MenuComponent_ng_container_1_ng_container_1_ngx_link_3_Template(rf,ctx){if(1&rf&&core._UZ(0,"ngx-link"),2&rf){const ctx_r9=core.oxw(3);core.Tol(ctx_r9.iconContainerClass)}}function MenuComponent_ng_container_1_ng_container_1_ngx_image_4_Template(rf,ctx){if(1&rf&&core._UZ(0,"ngx-image"),2&rf){const ctx_r10=core.oxw(3);core.Tol(ctx_r10.iconContainerClass)}}function MenuComponent_ng_container_1_ng_container_1_ng_container_5_ngx_dropdown_1_Template(rf,ctx){if(1&rf&&core._UZ(0,"ngx-dropdown",9),2&rf){const dropdownItem_r18=ctx.$implicit,ctx_r17=core.oxw(4);core.Tol(ctx_r17.dropdownContainerClass),core.Q6J("group",dropdownItem_r18.key)("items",dropdownItem_r18.value)}}function MenuComponent_ng_container_1_ng_container_1_ng_container_5_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,MenuComponent_ng_container_1_ng_container_1_ng_container_5_ngx_dropdown_1_Template,1,4,"ngx-dropdown",8),core.ALo(2,"keyvalue"),core.BQk()),2&rf){const item_r5=core.oxw().$implicit,ctx_r11=core.oxw(2);core.xp6(1),core.Q6J("ngForOf",core.lcZ(2,2,ctx_r11.getDropdownItems(item_r5)))("ngForTrackBy",ctx_r11.trackByIndex)}}function MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template(rf,ctx){if(1&rf&&core._UZ(0,"ngx-color-picker",10),2&rf){const ctx_r12=core.oxw(3);core.Tol(ctx_r12.iconContainerClass),core.Q6J("presets",ctx_r12.presets)}}function MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_7_Template(rf,ctx){if(1&rf&&core._UZ(0,"ngx-color-picker",11),2&rf){const ctx_r13=core.oxw(3);core.Tol(ctx_r13.iconContainerClass),core.Q6J("presets",ctx_r13.presets)}}function MenuComponent_ng_container_1_ng_container_1_div_8_Template(rf,ctx){if(1&rf&&core._UZ(0,"div"),2&rf){const ctx_r14=core.oxw(3);core.Tol(ctx_r14.seperatorClass)}}function MenuComponent_ng_container_1_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template,1,3,"ngx-toggle-command",3),core.YNc(2,MenuComponent_ng_container_1_ng_container_1_ngx_insert_command_2_Template,1,3,"ngx-insert-command",3),core.YNc(3,MenuComponent_ng_container_1_ng_container_1_ngx_link_3_Template,1,2,"ngx-link",4),core.YNc(4,MenuComponent_ng_container_1_ng_container_1_ngx_image_4_Template,1,2,"ngx-image",4),core.YNc(5,MenuComponent_ng_container_1_ng_container_1_ng_container_5_Template,3,4,"ng-container",2),core.YNc(6,MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template,1,3,"ngx-color-picker",5),core.YNc(7,MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_7_Template,1,3,"ngx-color-picker",6),core.YNc(8,MenuComponent_ng_container_1_ng_container_1_div_8_Template,1,2,"div",4),core.BQk()),2&rf){const item_r5=ctx.$implicit,lastItem_r6=ctx.last,lastToolbarItem_r3=core.oxw().last,ctx_r4=core.oxw();core.xp6(1),core.Q6J("ngIf",ctx_r4.toggleCommands.includes(item_r5)),core.xp6(1),core.Q6J("ngIf",ctx_r4.insertCommands.includes(item_r5)),core.xp6(1),core.Q6J("ngIf","link"===item_r5),core.xp6(1),core.Q6J("ngIf","image"===item_r5),core.xp6(1),core.Q6J("ngIf",ctx_r4.isDropDown(item_r5)),core.xp6(1),core.Q6J("ngIf","text_color"===item_r5),core.xp6(1),core.Q6J("ngIf","background_color"===item_r5),core.xp6(1),core.Q6J("ngIf",lastItem_r6&&!lastToolbarItem_r3)}}function MenuComponent_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,MenuComponent_ng_container_1_ng_container_1_Template,9,8,"ng-container",1),core.BQk()),2&rf){const toolbarItem_r2=ctx.$implicit,ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngForOf",toolbarItem_r2)("ngForTrackBy",ctx_r0.trackByIndex)}}function MenuComponent_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.GkF(1,12),core.BQk()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.Q6J("ngTemplateOutlet",ctx_r1.customMenuRef)}}__name(ColorPickerComponent_div_2_div_1_button_1_Template,"ColorPickerComponent_div_2_div_1_button_1_Template"),__name(ColorPickerComponent_div_2_div_1_Template,"ColorPickerComponent_div_2_div_1_Template"),__name(ColorPickerComponent_div_2_Template,"ColorPickerComponent_div_2_Template"),__name(MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template,"MenuComponent_ng_container_1_ng_container_1_ngx_toggle_command_1_Template"),__name(MenuComponent_ng_container_1_ng_container_1_ngx_insert_command_2_Template,"MenuComponent_ng_container_1_ng_container_1_ngx_insert_command_2_Template"),__name(MenuComponent_ng_container_1_ng_container_1_ngx_link_3_Template,"MenuComponent_ng_container_1_ng_container_1_ngx_link_3_Template"),__name(MenuComponent_ng_container_1_ng_container_1_ngx_image_4_Template,"MenuComponent_ng_container_1_ng_container_1_ngx_image_4_Template"),__name(MenuComponent_ng_container_1_ng_container_1_ng_container_5_ngx_dropdown_1_Template,"MenuComponent_ng_container_1_ng_container_1_ng_container_5_ngx_dropdown_1_Template"),__name(MenuComponent_ng_container_1_ng_container_1_ng_container_5_Template,"MenuComponent_ng_container_1_ng_container_1_ng_container_5_Template"),__name(MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template,"MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_6_Template"),__name(MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_7_Template,"MenuComponent_ng_container_1_ng_container_1_ngx_color_picker_7_Template"),__name(MenuComponent_ng_container_1_ng_container_1_div_8_Template,"MenuComponent_ng_container_1_ng_container_1_div_8_Template"),__name(MenuComponent_ng_container_1_ng_container_1_Template,"MenuComponent_ng_container_1_ng_container_1_Template"),__name(MenuComponent_ng_container_1_Template,"MenuComponent_ng_container_1_Template"),__name(MenuComponent_ng_container_2_Template,"MenuComponent_ng_container_2_Template");const _c7=__name(function(a0,a1){return{"NgxEditor--Disabled":a0,"NgxEditor__MenuBar--Reverse":a1}},"_c7"),_c8=__name(function(a0,a1){return{"NgxBubbleMenu__Icon--Active":a0,"NgxEditor--Disabled":a1}},"_c8");function BubbleComponent_ng_container_0_ng_container_1_div_1_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.TgZ(0,"div",3),core.NdJ("mousedown",__name(function($event){core.CHM(_r10);const item_r4=core.oxw().$implicit,ctx_r8=core.oxw(2);return core.KtG(ctx_r8.onClick($event,item_r4))},"BubbleComponent_ng_container_0_ng_container_1_div_1_Template_div_mousedown_0_listener")),core.qZA()}if(2&rf){const item_r4=core.oxw().$implicit,ctx_r6=core.oxw(2);core.Q6J("ngClass",core.WLB(3,_c8,ctx_r6.activeItems.includes(item_r4),!ctx_r6.execulableItems.includes(item_r4)))("title",ctx_r6.getTitle(item_r4))("innerHTML",ctx_r6.getIcon(item_r4),core.oJD)}}function BubbleComponent_ng_container_0_ng_container_1_div_2_Template(rf,ctx){1&rf&&core._UZ(0,"div",4)}function BubbleComponent_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,BubbleComponent_ng_container_0_ng_container_1_div_1_Template,1,6,"div",1),core.YNc(2,BubbleComponent_ng_container_0_ng_container_1_div_2_Template,1,0,"div",2),core.BQk()),2&rf){const item_r4=ctx.$implicit,lastItem_r5=ctx.last,lastToolbarItem_r2=core.oxw().last,ctx_r3=core.oxw();core.xp6(1),core.Q6J("ngIf",ctx_r3.toggleCommands.includes(item_r4)),core.xp6(1),core.Q6J("ngIf",lastItem_r5&&!lastToolbarItem_r2)}}function BubbleComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.YNc(1,BubbleComponent_ng_container_0_ng_container_1_Template,3,2,"ng-container",0),core.BQk()),2&rf){const toolbarItem_r1=ctx.$implicit,ctx_r0=core.oxw();core.xp6(1),core.Q6J("ngForOf",toolbarItem_r1)("ngForTrackBy",ctx_r0.trackByIndex)}}function FloatingMenuComponent_ng_container_3_Template(rf,ctx){if(1&rf&&(core.ynx(0),core._UZ(1,"ngx-bubble",2),core.BQk()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.Q6J("editor",ctx_r1.editor)}}__name(BubbleComponent_ng_container_0_ng_container_1_div_1_Template,"BubbleComponent_ng_container_0_ng_container_1_div_1_Template"),__name(BubbleComponent_ng_container_0_ng_container_1_div_2_Template,"BubbleComponent_ng_container_0_ng_container_1_div_2_Template"),__name(BubbleComponent_ng_container_0_ng_container_1_Template,"BubbleComponent_ng_container_0_ng_container_1_Template"),__name(BubbleComponent_ng_container_0_Template,"BubbleComponent_ng_container_0_Template"),__name(FloatingMenuComponent_ng_container_3_Template,"FloatingMenuComponent_ng_container_3_Template");const editablePlugin=__name((editable=!0)=>new Plugin({key:new PluginKey("editable"),state:{init:()=>editable,apply(tr,previousVal){var _a;return null!==(_a=tr.getMeta("UPDATE_EDITABLE"))&&void 0!==_a?_a:previousVal}},props:{editable(state){return this.getState(state)},attributes(state){return this.getState(state)?null:{class:"NgxEditor__Content--Disabled"}}}}),"editablePlugin"),placeholderPlugin=__name(text=>new Plugin({key:new PluginKey("placeholder"),state:{init:()=>null!=text?text:"",apply(tr,previousVal){var _a;return null!==(_a=tr.getMeta("UPDATE_PLACEHOLDER"))&&void 0!==_a?_a:previousVal}},props:{decorations(state){const{doc:doc2}=state,{textContent,childCount}=doc2,placeholder=this.getState(state);if(!placeholder||childCount>1)return DecorationSet.empty;const decorations=[],decorate=__name((node,pos)=>{var _a;if(node.type.isBlock&&0===node.childCount&&0===textContent.length){const from=pos,to=pos+node.nodeSize,placeholderNode=Decoration.node(from,to,{class:"NgxEditor__Placeholder","data-placeholder":placeholder,"data-align":null!==(_a=node.attrs.align)&&void 0!==_a?_a:null});decorations.push(placeholderNode)}return!1},"decorate");return doc2.descendants(decorate),DecorationSet.create(doc2,decorations)}}}),"placeholderPlugin"),attributesPlugin=__name((attributes={})=>new Plugin({key:new PluginKey("attributes"),props:{attributes}}),"attributesPlugin"),focusPlugin=__name(cb=>new Plugin({key:new PluginKey("focus"),props:{handleDOMEvents:{focus:()=>(cb(),!1)}}}),"focusPlugin"),blurPlugin=__name(cb=>new Plugin({key:new PluginKey("blur"),props:{handleDOMEvents:{blur:()=>(cb(),!1)}}}),"blurPlugin");class ImageViewComponent{constructor(){this.alt="",this.title="",this.outerWidth="",this.selected=!1,this.imageResize=new core.vpe}startResizing(e,direction){e.preventDefault(),this.resizeImage(e,direction)}resizeImage(evt,direction){const startX=evt.pageX,startWidth=this.imgEl.nativeElement.clientWidth,isLeftResize="left"===direction,{width}=window.getComputedStyle(this.view.dom),editorWidth=parseInt(width,10),onMouseMove=__name(e=>{const diffInPx=e.pageX-startX,computedWidth=isLeftResize?startWidth-diffInPx:startWidth+diffInPx;computedWidth>editorWidth||computedWidth<20||(this.outerWidth=`${computedWidth}px`)},"onMouseMove"),onMouseUp=__name(e=>{e.preventDefault(),document.removeEventListener("mousemove",onMouseMove),document.removeEventListener("mouseup",onMouseUp),this.imageResize.emit()},"onMouseUp");document.addEventListener("mousemove",onMouseMove),document.addEventListener("mouseup",onMouseUp)}}__name(ImageViewComponent,"ImageViewComponent"),ImageViewComponent.\u0275fac=__name(function(t){return new(t||ImageViewComponent)},"ImageViewComponent_Factory"),ImageViewComponent.\u0275cmp=core.Xpm({type:ImageViewComponent,selectors:[["ngx-image-view"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c0,7),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.imgEl=_t.first)}},"ImageViewComponent_Query"),inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],["imgEl",""],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"span",0),core.YNc(1,ImageViewComponent_span_1_Template,5,0,"span",1),core._UZ(2,"img",2,3),core.qZA()),2&rf&&(core.Udp("width",ctx.outerWidth),core.Q6J("ngClass",core.VKq(7,_c1,ctx.selected)),core.xp6(1),core.Q6J("ngIf",ctx.selected),core.xp6(1),core.Q6J("src",ctx.src,core.LSH)("alt",ctx.alt)("title",ctx.title))},"ImageViewComponent_Template"),dependencies:[common.mk,common.O5],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]});class ImageRezieView{constructor(node,view,getPos,injector){this.updating=!1,this.handleResize=()=>{if(this.updating)return;const{state,dispatch}=this.view,{tr}=state,transaction=tr.setNodeMarkup(this.getPos(),void 0,Object.assign(Object.assign({},this.node.attrs),{width:this.imageComponentRef.instance.outerWidth})),resolvedPos=transaction.doc.resolve(this.getPos()),newSelection=new dist_NodeSelection(resolvedPos);transaction.setSelection(newSelection),dispatch(transaction)},this.applicationRef=injector.get(core.z2F),this.imageComponentRef=(0,core.LMc)(ImageViewComponent,{environmentInjector:this.applicationRef.injector}),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(node.attrs),this.imageComponentRef.instance.view=view,this.dom=this.imageComponentRef.location.nativeElement,this.view=view,this.node=node,this.getPos=getPos,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe(()=>{this.handleResize()})}computeChanges(prevAttrs,newAttrs){return JSON.stringify(prevAttrs)===JSON.stringify(newAttrs)}setNodeAttributes(attrs){this.imageComponentRef.instance.src=attrs.src,this.imageComponentRef.instance.alt=attrs.alt,this.imageComponentRef.instance.title=attrs.title,this.imageComponentRef.instance.outerWidth=attrs.width}update(node){return node.type===this.node.type&&(this.node=node,this.computeChanges(this.node.attrs,node.attrs)&&(this.updating=!0,this.setNodeAttributes(node.attrs),this.updating=!1),!0)}ignoreMutation(){return!0}selectNode(){this.imageComponentRef.instance.selected=!0}deselectNode(){this.imageComponentRef.instance.selected=!1}destroy(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}}__name(ImageRezieView,"ImageRezieView");const imageResizePlugin=__name(injector=>new Plugin({key:new PluginKey("image-resize"),props:{nodeViews:{image:(node,view,getPos)=>new ImageRezieView(node,view,getPos,injector)}}}),"imageResizePlugin"),HTTP_LINK_REGEX=/(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+\.?(?:\d+)?(?:\/\S*)?$/,linkify=__name(fragment=>{const linkified=[];return fragment.forEach(child=>{if(child.isText){const text=child.text;let pos=0;const match=HTTP_LINK_REGEX.exec(text);if(match){const start=match.index,end=start+match[0].length,{link}=child.type.schema.marks;start>0&&linkified.push(child.cut(pos,start));const urlText=text.slice(start,end);linkified.push(child.cut(start,end).mark(link.create({href:urlText}).addToSet(child.marks))),pos=end}pos<text.length&&linkified.push(child.cut(pos))}else linkified.push(child.copy(linkify(child.content)))}),dist_Fragment.fromArray(linkified)},"linkify"),linkifyPlugin=__name(()=>new Plugin({key:new PluginKey("linkify"),props:{transformPasted:slice=>new dist_Slice(linkify(slice.content),slice.openStart,slice.openEnd)}}),"linkifyPlugin"),emptyDoc={type:"doc",content:[{type:"paragraph"}]},toHTML=__name((json,inputSchema)=>{const schema$1=null!=inputSchema?inputSchema:ngx_editor_schema_schema,contentNode=schema$1.nodeFromJSON(json),html=dist_DOMSerializer.fromSchema(schema$1).serializeFragment(contentNode.content),div=document.createElement("div");return div.appendChild(html),div.innerHTML},"toHTML"),toDoc=__name((html,inputSchema)=>{const schema$1=null!=inputSchema?inputSchema:schema,el=document.createElement("div");return el.innerHTML=html,DOMParser.fromSchema(schema$1).parse(el).toJSON()},"toDoc"),parseContent=__name((value,schema2)=>{if(!value)return schema2.nodeFromJSON(emptyDoc);if("string"!=typeof value)return schema2.nodeFromJSON(value);const docJson=toDoc(value,schema2);return schema2.nodeFromJSON(docJson)},"parseContent");class NgxEditorComponent{constructor(renderer,injector,elementRef){this.renderer=renderer,this.injector=injector,this.elementRef=elementRef,this.placeholder="Type Here...",this.focusOut=new core.vpe,this.focusIn=new core.vpe,this.unsubscribe=new cjs.Subject,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(value){!this.outputFormat&&"string"==typeof value&&(this.outputFormat="html"),this.editor.setContent(null!=value?value:"")}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this.setMeta("UPDATE_EDITABLE",!isDisabled),this.renderer.setProperty(this.elementRef.nativeElement,"disabled",isDisabled)}handleChange(jsonDoc){if("html"!==this.outputFormat)this.onChange(jsonDoc);else{const html=toHTML(jsonDoc,this.editor.schema);this.onChange(html)}}setMeta(key,value){const{dispatch,state:{tr}}=this.editor.view;dispatch(tr.setMeta(key,value))}setPlaceholder(placeholder){this.setMeta("UPDATE_PLACEHOLDER",placeholder)}registerPlugins(){this.editor.registerPlugin(editablePlugin()),this.editor.registerPlugin(placeholderPlugin(this.placeholder)),this.editor.registerPlugin(attributesPlugin({class:"NgxEditor__Content"})),this.editor.registerPlugin(focusPlugin(()=>{this.focusIn.emit()})),this.editor.registerPlugin(blurPlugin(()=>{this.focusOut.emit(),this.onTouched()})),this.editor.features.resizeImage&&this.editor.registerPlugin(imageResizePlugin(this.injector)),this.editor.features.linkOnPaste&&this.editor.registerPlugin(linkifyPlugin())}ngOnInit(){if(!this.editor)throw new ngx_editor_utils_NgxEditorError("Required editor instance for initializing editor component");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom),this.editor.valueChanges.pipe((0,operators.Rs)(this.unsubscribe)).subscribe(jsonDoc=>{this.handleChange(jsonDoc)})}ngOnChanges(changes){changes.placeholder&&!changes.placeholder.isFirstChange()&&this.setPlaceholder(changes.placeholder.currentValue)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}}__name(NgxEditorComponent,"NgxEditorComponent"),NgxEditorComponent.\u0275fac=__name(function(t){return new(t||NgxEditorComponent)(core.Y36(core.Qsj),core.Y36(core.zs3),core.Y36(core.SBq))},"NgxEditorComponent_Factory"),NgxEditorComponent.\u0275cmp=core.Xpm({type:NgxEditorComponent,selectors:[["ngx-editor"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(_c2,7),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.ngxEditor=_t.first)}},"NgxEditorComponent_Query"),inputs:{editor:"editor",outputFormat:"outputFormat",placeholder:"placeholder"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},features:[core._Bn([{provide:fesm2015_forms.JU,useExisting:(0,core.Gpc)(()=>NgxEditorComponent),multi:!0}]),core.TTD],ngContentSelectors:_c3,decls:3,vars:0,consts:[[1,"NgxEditor"],["ngxEditor",""]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.TgZ(0,"div",0,1),core.Hsn(2),core.qZA())},"NgxEditorComponent_Template"),styles:['.NgxEditor{background:white;color:#000;background-clip:padding-box;border-radius:4px;border:1px solid rgba(0,0,0,.2);position:relative}.NgxEditor--Disabled{opacity:.5;pointer-events:none}.NgxEditor__Placeholder:before{color:#6c757d;opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0,none}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:3px solid #ddd;margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid rgba(0,0,0,.4);border-radius:4px}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid rgba(0,0,0,.2)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:3px;cursor:default;background-color:#fff}.NgxEditor__MenuItem{border-radius:2px;display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem:hover{background-color:#f1f1f1}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon{height:30px;width:30px;transition:.3s ease-in-out}.NgxEditor__MenuItem.NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--IconContainer{display:flex;height:100%;width:100%;align-items:center;justify-content:center}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:#e8f0fe;color:#1a73e8}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;width:100%;top:32px}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:#ececec}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:#1a73e8;background-color:#e8f0fe}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:#f1f1f1}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:#e7e7e7}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:32px}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:32px}.NgxEditor__Popup{position:absolute;top:32px;box-shadow:#3c404326 0 2px 6px 2px;border-radius:4px;background-color:#fff;z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid #ccc;margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:red}\n'],encapsulation:2});class MenuService{constructor(){this.customMenuRefChange=new cjs.Subject}setCustomMenuRef(c){this.customMenuRefChange.next(c)}}__name(MenuService,"MenuService"),MenuService.\u0275fac=__name(function(t){return new(t||MenuService)},"MenuService_Factory"),MenuService.\u0275prov=core.Yz7({token:MenuService,factory:MenuService.\u0275fac,providedIn:"root"});const icons={bold:'\n  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />\n',italic:'\n  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />\n',code:'\n<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>\n',underline:'\n<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>\n',strike:'\n<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>\n',ordered_list:'\n<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>\n',bullet_list:'\n<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>\n',blockquote:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>\n',link:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>\n',unlink:'\n<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>\n',image:'\n<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>\n',align_left:'\n<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>\n',align_center:'\n<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>\n',align_right:'\n<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>\n',align_justify:'\n<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>\n',text_color:'\n<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>\n',color_fill:'\n<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>\n',horizontal_rule:'\n  <g>\n    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>\n    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>\n  </g>\n',format_clear:'\n<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>\n'};class Icon{static get(name,fill="currentColor"){return`\n      <svg\n        xmlns="http://www.w3.org/2000/svg"\n        viewBox="0 0 24 24"\n        fill=${fill}\n        height=20\n        width=20\n      >\n        ${icons[name]||"<path></path>"}\n      </svg>\n    `}}__name(Icon,"Icon");class ngx_editor_Mark{constructor(name){this.name=name}apply(){return(state,dispatch)=>{const{schema:schema2}=state,type=schema2.marks[this.name];return!!type&&applyMark(type)(state,dispatch)}}toggle(){return(state,dispatch)=>{const{schema:schema2}=state,type=schema2.marks[this.name];return!!type&&dist_toggleMark(type)(state,dispatch)}}isActive(state){const{schema:schema2}=state,type=schema2.marks[this.name];return!!type&&isMarkActive(state,type)}canExecute(state){return this.toggle()(state)}}__name(ngx_editor_Mark,"ngx_editor_Mark");class Blockqote{toggle(){return(state,dispatch)=>{const{schema:schema2}=state,type=schema2.nodes.blockquote;return!!type&&(this.isActive(state)?dist_lift(state,dispatch):wrapIn(type)(state,dispatch))}}isActive(state){const{schema:schema2}=state,type=schema2.nodes.blockquote;return!!type&&isNodeActive(state,type)}canExecute(state){return this.toggle()(state)}}__name(Blockqote,"Blockqote");class HorizontalRule{insert(){return(state,dispatch)=>{const{schema:schema2,tr}=state,type=schema2.nodes.horizontal_rule;return!!type&&(dispatch(tr.replaceSelectionWith(type.create()).scrollIntoView()),!0)}}canExecute(state){return canInsert(state,state.schema.nodes.horizontal_rule)}}__name(HorizontalRule,"HorizontalRule");class ListItem{constructor(isBulletList=!1){this.isBulletList=!1,this.isBulletList=isBulletList}getType(schema2){return this.isBulletList?schema2.nodes.bullet_list:schema2.nodes.ordered_list}toggle(){return(state,dispatch)=>{const{schema:schema2}=state,type=this.getType(schema2);return!!type&&(this.isActive(state)?dist_liftListItem(schema2.nodes.list_item)(state,dispatch):wrapInList(type)(state,dispatch))}}isActive(state){const{schema:schema2}=state,type=this.getType(schema2);return!!type&&isNodeActive(state,type)}canExecute(state){return this.toggle()(state)}}__name(ListItem,"ListItem");class Heading{constructor(level){this.level=level}apply(){return(state,dispatch)=>{const{schema:schema2}=state,type=schema2.nodes.heading;return!!type&&dist_setBlockType(type)(state,dispatch)}}toggle(){return(state,dispatch)=>{var _a;const{schema:schema2,selection,doc:doc2}=state,type=schema2.nodes.heading;if(!type)return!1;const nodePos=selection.$from.before(1),node=doc2.nodeAt(nodePos),attrs=null!==(_a=null==node?void 0:node.attrs)&&void 0!==_a?_a:{};return this.isActive(state)?dist_setBlockType(schema2.nodes.paragraph,attrs)(state,dispatch):dist_setBlockType(type,Object.assign(Object.assign({},attrs),{level:this.level}))(state,dispatch)}}isActive(state){const{schema:schema2}=state,nodesInSelection=getSelectionNodes(state),type=schema2.nodes.heading;if(!type)return!1;const supportedNodes=[type,schema2.nodes.text,schema2.nodes.blockquote],acitveNode=nodesInSelection.filter(node=>supportedNodes.includes(node.type)).find(node=>node.attrs.level===this.level);return Boolean(acitveNode)}canExecute(state){return this.toggle()(state)}}__name(Heading,"Heading");class TextAlign{constructor(align){this.align=align}toggle(){return(state,dispatch)=>{const{doc:doc2,selection,tr,schema:schema2}=state,{from,to}=selection;let applicable=!1;return doc2.nodesBetween(from,to,(node,pos)=>{const nodeType=node.type;return[schema2.nodes.paragraph,schema2.nodes.heading].includes(nodeType)&&(applicable=!0,tr.setNodeMarkup(pos,nodeType,Object.assign(Object.assign({},node.attrs),{align:this.align}))),!0}),!!applicable&&(tr.docChanged&&(null==dispatch||dispatch(tr)),!0)}}isActive(state){const active=getSelectionNodes(state).find(node=>node.attrs.align===this.align);return Boolean(active)}canExecute(state){return this.toggle()(state)}}__name(TextAlign,"TextAlign");const defaultOptions={strict:!0};class Link$1{update(attrs){return(state,dispatch)=>{const{schema:schema2,selection}=state,type=schema2.marks.link;return!(!type||selection.empty)&&dist_toggleMark(type,attrs)(state,dispatch)}}insert(text,attrs){return(state,dispatch)=>{var _a,_b;const{schema:schema2,tr}=state;if(!schema2.marks.link)return!1;const linkAttrs={href:attrs.href,title:null!==(_a=attrs.title)&&void 0!==_a?_a:text,target:null!==(_b=attrs.target)&&void 0!==_b?_b:"_blank"},node=schema2.text(text,[schema2.marks.link.create(linkAttrs)]);return tr.replaceSelectionWith(node,!1).scrollIntoView(),!!tr.docChanged&&(null==dispatch||dispatch(tr),!0)}}isActive(state,options=defaultOptions){if(options.strict)return!0;const{schema:schema2}=state,type=schema2.marks.link;return!!type&&isMarkActive(state,type)}remove(state,dispatch){return removeLink()(state,dispatch)}canExecute(state){const testAttrs={href:""};return this.insert("Exec",testAttrs)(state)||this.update(testAttrs)(state)}}__name(Link$1,"Link$1");class Image$1{insert(src,attrs){return(state,dispatch)=>{const{schema:schema2,tr,selection}=state,type=schema2.nodes.image;if(!type)return!1;const imageAttrs=Object.assign({width:null,src},attrs);!imageAttrs.width&&selection instanceof dist_NodeSelection&&selection.node.type===type&&(imageAttrs.width=selection.node.attrs.width),tr.replaceSelectionWith(type.createAndFill(imageAttrs));const resolvedPos=tr.doc.resolve(tr.selection.anchor-tr.selection.$anchor.nodeBefore.nodeSize);return tr.setSelection(new dist_NodeSelection(resolvedPos)).scrollIntoView(),!!tr.docChanged&&(null==dispatch||dispatch(tr),!0)}}isActive(state){const{selection}=state;return selection instanceof dist_NodeSelection&&"image"===selection.node.type.name}}__name(Image$1,"Image$1");class TextColor$1{constructor(name,attrName="color"){this.name=name,this.attrName=attrName}apply(attrs){return(state,dispatch)=>{const{schema:schema2,selection,doc:doc2}=state,type=schema2.marks[this.name];if(!type)return!1;const{from,to,empty:empty2}=selection;if(!empty2&&from+1===to){const node=doc2.nodeAt(from);if((null==node?void 0:node.isAtom)&&!node.isText&&node.isLeaf)return!1}return applyMark(type,attrs)(state,dispatch)}}isActive(state){const{schema:schema2}=state,type=schema2.marks[this.name];return!!type&&isMarkActive(state,type)}getActiveColors(state){if(!this.isActive(state))return[];const{schema:schema2}=state;return getSelectionMarks(state).filter(mark=>mark.type===schema2.marks[this.name]).map(mark=>mark.attrs[this.attrName]).filter(Boolean)}remove(){return(state,dispatch)=>{const{schema:schema2}=state,type=schema2.marks[this.name];return!!type&&ngx_editor_commands_removeMark(type)(state,dispatch)}}canExecute(state){const attrs="text_color"===this.name?{color:""}:{backgroundColor:""};return this.apply(attrs)(state)}}__name(TextColor$1,"TextColor$1");const SAFE_MARKS=["link"];class FormatClear{insert(){return(state,dispatch)=>{const{tr}=state,{ranges,empty:empty2}=tr.selection;return empty2||(Object.entries(state.schema.marks).forEach(([markType,mark])=>{SAFE_MARKS.includes(markType)||ranges.forEach(range2=>{tr.removeMark(range2.$from.pos,range2.$to.pos,mark)})}),dispatch(tr)),!0}}canExecute(){return!0}}__name(FormatClear,"FormatClear");const STRONG=new ngx_editor_Mark("strong"),EM=new ngx_editor_Mark("em"),CODE=new ngx_editor_Mark("code"),UNDERLINE=new ngx_editor_Mark("u"),STRIKE=new ngx_editor_Mark("s"),BLOCKQUOTE=new Blockqote,HORIZONTAL_RULE=new HorizontalRule,FORMAT_CLEAR=new FormatClear,UL=new ListItem(!0),OL=new ListItem(!1),H1=new Heading(1),H2=new Heading(2),H3=new Heading(3),H4=new Heading(4),H5=new Heading(5),H6=new Heading(6),ALIGN_LEFT=new TextAlign("left"),ALIGN_CENTER=new TextAlign("center"),ALIGN_RIGHT=new TextAlign("right"),ALIGN_JUSTIFY=new TextAlign("justify"),LINK=new Link$1,IMAGE=new Image$1,TEXT_COLOR=new TextColor$1("text_color","color"),TEXT_BACKGROUND_COLOR=new TextColor$1("text_background_color","backgroundColor"),ToggleCommands={bold:STRONG,italic:EM,code:CODE,underline:UNDERLINE,strike:STRIKE,blockquote:BLOCKQUOTE,bullet_list:UL,ordered_list:OL,h1:H1,h2:H2,h3:H3,h4:H4,h5:H5,h6:H6,align_left:ALIGN_LEFT,align_center:ALIGN_CENTER,align_right:ALIGN_RIGHT,align_justify:ALIGN_JUSTIFY},InsertCommands={horizontal_rule:HORIZONTAL_RULE,format_clear:FORMAT_CLEAR},Link=LINK,ngx_editor_Image=IMAGE,TextColor=TEXT_COLOR,TextBackgroundColor=TEXT_BACKGROUND_COLOR,defaults={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"};class Locals{constructor(newLocals={}){this.locals=defaults,this.get=key=>{var _a;return null!==(_a=this.locals[key])&&void 0!==_a?_a:""},this.locals=Object.assign(Object.assign({},defaults),newLocals)}}__name(Locals,"Locals");class NgxEditorServiceConfig{constructor(){this.locals={}}}__name(NgxEditorServiceConfig,"NgxEditorServiceConfig"),NgxEditorServiceConfig.\u0275fac=__name(function(t){return new(t||NgxEditorServiceConfig)},"NgxEditorServiceConfig_Factory"),NgxEditorServiceConfig.\u0275prov=core.Yz7({token:NgxEditorServiceConfig,factory:NgxEditorServiceConfig.\u0275fac,providedIn:"root"});class NgxEditorService{constructor(config){this.config=config}get locals(){return new Locals(this.config.locals)}}__name(NgxEditorService,"NgxEditorService"),NgxEditorService.\u0275fac=__name(function(t){return new(t||NgxEditorService)(core.LFG(NgxEditorServiceConfig,8))},"NgxEditorService_Factory"),NgxEditorService.\u0275prov=core.Yz7({token:NgxEditorService,factory:NgxEditorService.\u0275fac,providedIn:"root"});const provideMyServiceOptions=__name(config=>{var _a;return{locals:null!==(_a=config.locals)&&void 0!==_a?_a:{}}},"provideMyServiceOptions");class SanitizeHtmlPipe{constructor(sanitizer){this.sanitizer=sanitizer}transform(value){return this.sanitizer.bypassSecurityTrustHtml(value)}}__name(SanitizeHtmlPipe,"SanitizeHtmlPipe"),SanitizeHtmlPipe.\u0275fac=__name(function(t){return new(t||SanitizeHtmlPipe)(core.Y36(platform_browser.H7,16))},"SanitizeHtmlPipe_Factory"),SanitizeHtmlPipe.\u0275pipe=core.Yjl({name:"sanitizeHtml",type:SanitizeHtmlPipe,pure:!0});class ToggleCommandComponent{constructor(ngxeService,menuService){this.ngxeService=ngxeService,this.menuService=menuService,this.isActive=!1,this.disabled=!1,this.update=view=>{const{state}=view,command=ToggleCommands[this.name];this.isActive=command.isActive(state),this.disabled=!command.canExecute(state)}}get name(){return this.toolbarItem}toggle(e){if(e.preventDefault(),0!==e.button)return;const{state,dispatch}=this.editorView;ToggleCommands[this.name].toggle()(state,dispatch)}getTitle(name){return this.ngxeService.locals.get(name)}ngOnInit(){this.html=Icon.get(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(view=>{this.update(view)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}__name(ToggleCommandComponent,"ToggleCommandComponent"),ToggleCommandComponent.\u0275fac=__name(function(t){return new(t||ToggleCommandComponent)(core.Y36(NgxEditorService),core.Y36(MenuService))},"ToggleCommandComponent_Factory"),ToggleCommandComponent.\u0275cmp=core.Xpm({type:ToggleCommandComponent,selectors:[["ngx-toggle-command"]],inputs:{toolbarItem:"toolbarItem"},decls:2,vars:8,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.NdJ("mousedown",__name(function($event){return ctx.toggle($event)},"ToggleCommandComponent_Template_div_mousedown_0_listener")),core.ALo(1,"sanitizeHtml"),core.qZA()),2&rf&&(core.ekj("NgxEditor__MenuItem--Active",ctx.isActive)("NgxEditor--Disabled",ctx.disabled),core.Q6J("innerHTML",core.lcZ(1,6,ctx.html),core.oJD)("title",ctx.getTitle(ctx.name)))},"ToggleCommandComponent_Template"),dependencies:[SanitizeHtmlPipe]});class InsertCommandComponent{constructor(ngxeService,menuService){this.ngxeService=ngxeService,this.menuService=menuService,this.disabled=!1,this.update=view=>{const{state}=view,command=InsertCommands[this.name];this.disabled=!command.canExecute(state)}}get name(){return this.toolbarItem}insert(e){if(e.preventDefault(),0!==e.button)return;const{state,dispatch}=this.editorView;InsertCommands[this.name].insert()(state,dispatch)}getTitle(name){return this.ngxeService.locals.get(name)}ngOnInit(){this.html=Icon.get(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(view=>{this.update(view)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}__name(InsertCommandComponent,"InsertCommandComponent"),InsertCommandComponent.\u0275fac=__name(function(t){return new(t||InsertCommandComponent)(core.Y36(NgxEditorService),core.Y36(MenuService))},"InsertCommandComponent_Factory"),InsertCommandComponent.\u0275cmp=core.Xpm({type:InsertCommandComponent,selectors:[["ngx-insert-command"]],inputs:{toolbarItem:"toolbarItem"},decls:2,vars:6,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.NdJ("mousedown",__name(function($event){return ctx.insert($event)},"InsertCommandComponent_Template_div_mousedown_0_listener")),core.ALo(1,"sanitizeHtml"),core.qZA()),2&rf&&(core.ekj("NgxEditor--Disabled",ctx.disabled),core.Q6J("innerHTML",core.lcZ(1,4,ctx.html),core.oJD)("title",ctx.getTitle(ctx.name)))},"InsertCommandComponent_Template"),dependencies:[SanitizeHtmlPipe]});class LinkComponent{constructor(el,ngxeService,menuService){this.el=el,this.ngxeService=ngxeService,this.menuService=menuService,this.showPopup=!1,this.isActive=!1,this.canExecute=!0,this.setText=()=>{const{state:{selection,doc:doc2}}=this.editorView,{empty:empty2,from,to}=selection,selectedText=empty2?"":doc2.textBetween(from,to);selectedText&&(this.text.patchValue(selectedText),this.text.disable())},this.update=view=>{const{state}=view;this.isActive=Link.isActive(state,{strict:!1}),this.canExecute=Link.canExecute(state)}}get icon(){return Icon.get(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hideForm()}getLabel(key){return this.ngxeService.locals.get(key)}hideForm(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}onMouseDown(e){if(0!==e.button)return;const{state,dispatch}=this.editorView;this.isActive?Link.remove(state,dispatch):(this.showPopup=!this.showPopup,this.showPopup&&this.setText())}insertLink(e){e.preventDefault();const{text,href,openInNewTab}=this.form.getRawValue(),{dispatch,state}=this.editorView,{selection}=state,attrs={title:href,href,target:openInNewTab?"_blank":"_self"};selection.empty?(Link.insert(text,attrs)(state,dispatch),this.editorView.focus()):Link.update(attrs)(state,dispatch),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.form=new fesm2015_forms.cw({href:new fesm2015_forms.NI("",[fesm2015_forms.kI.required,fesm2015_forms.kI.pattern(this.menuService.editor.linkValidationPattern)]),text:new fesm2015_forms.NI("",[fesm2015_forms.kI.required]),openInNewTab:new fesm2015_forms.NI(!0)}),this.updateSubscription=this.menuService.editor.update.subscribe(view=>{this.update(view)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}__name(LinkComponent,"LinkComponent"),LinkComponent.\u0275fac=__name(function(t){return new(t||LinkComponent)(core.Y36(core.SBq),core.Y36(NgxEditorService),core.Y36(MenuService))},"LinkComponent_Factory"),LinkComponent.\u0275cmp=core.Xpm({type:LinkComponent,selectors:[["ngx-link"]],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("mousedown",__name(function($event){return ctx.onDocumentClick($event)},"LinkComponent_mousedown_HostBindingHandler"),!1,core.evT)},"LinkComponent_HostBindings"),decls:3,vars:9,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","href","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off"],["type","checkbox","formControlName","openInNewTab"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.NdJ("mousedown",__name(function($event){return ctx.onMouseDown($event)},"LinkComponent_Template_div_mousedown_0_listener")),core.ALo(1,"sanitizeHtml"),core.qZA(),core.YNc(2,LinkComponent_div_2_Template,21,8,"div",1)),2&rf&&(core.ekj("NgxEditor__MenuItem--Active",ctx.isActive||ctx.showPopup)("NgxEditor--Disabled",!ctx.canExecute),core.Q6J("innerHTML",core.lcZ(1,7,ctx.icon),core.oJD)("title",ctx.title),core.xp6(2),core.Q6J("ngIf",ctx.showPopup))},"LinkComponent_Template"),dependencies:[common.O5,fesm2015_forms._Y,fesm2015_forms.Fj,fesm2015_forms.Wl,fesm2015_forms.JJ,fesm2015_forms.JL,fesm2015_forms.sg,fesm2015_forms.u,SanitizeHtmlPipe]});class DropdownComponent{constructor(ngxeService,menuService,el){this.ngxeService=ngxeService,this.menuService=menuService,this.el=el,this.isDropdownOpen=!1,this.disabledItems=[],this.update=view=>{const{state}=view;this.disabledItems=[];const activeItems=[];this.items.forEach(item=>{const command=ToggleCommands[item];command.isActive(state)&&activeItems.push(item),command.canExecute(state)||this.disabledItems.push(item)}),1===activeItems.length?[this.activeItem]=activeItems:this.activeItem=null}}get isSelected(){return Boolean(this.activeItem||this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(target){!this.el.nativeElement.contains(target)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(key){return this.ngxeService.locals.get(key)}toggleDropdown(e){e.preventDefault(),this.isDropdownOpen=!this.isDropdownOpen}trackByIndex(index){return index}onClick(e,item){if(e.preventDefault(),0!==e.button)return;const command=ToggleCommands[item],{state,dispatch}=this.editorView;command.toggle()(state,dispatch),this.isDropdownOpen=!1}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(view=>{this.update(view)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}__name(DropdownComponent,"DropdownComponent"),DropdownComponent.\u0275fac=__name(function(t){return new(t||DropdownComponent)(core.Y36(NgxEditorService),core.Y36(MenuService),core.Y36(core.SBq))},"DropdownComponent_Factory"),DropdownComponent.\u0275cmp=core.Xpm({type:DropdownComponent,selectors:[["ngx-dropdown"]],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("mousedown",__name(function($event){return ctx.onDocumentClick($event.target)},"DropdownComponent_mousedown_HostBindingHandler"),!1,core.evT)},"DropdownComponent_HostBindings"),inputs:{group:"group",items:"items"},decls:3,vars:6,consts:[[1,"NgxEditor__Dropdown--Text",3,"mousedown"],["class","NgxEditor__Dropdown--DropdownMenu",4,"ngIf"],[1,"NgxEditor__Dropdown--DropdownMenu"],["class","NgxEditor__Dropdown--Item",3,"ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Dropdown--Item",3,"ngClass","mousedown"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.NdJ("mousedown",__name(function($event){return ctx.toggleDropdown($event)},"DropdownComponent_Template_div_mousedown_0_listener")),core._uU(1),core.qZA(),core.YNc(2,DropdownComponent_div_2_Template,2,2,"div",1)),2&rf&&(core.ekj("NgxEditor__Dropdown--Selected",ctx.isSelected)("NgxEditor--Disabled",ctx.isDropdownDisabled),core.xp6(1),core.hij(" ",ctx.getName(ctx.activeItem||ctx.group),"\n"),core.xp6(1),core.Q6J("ngIf",ctx.isDropdownOpen))},"DropdownComponent_Template"),dependencies:[common.mk,common.sg,common.O5]});class ImageComponent{constructor(el,ngxeService,menuService){this.el=el,this.ngxeService=ngxeService,this.menuService=menuService,this.showPopup=!1,this.isActive=!1,this.form=new fesm2015_forms.cw({src:new fesm2015_forms.NI("",[fesm2015_forms.kI.required,fesm2015_forms.kI.pattern("(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)")]),alt:new fesm2015_forms.NI(""),title:new fesm2015_forms.NI("")}),this.update=view=>{const{state}=view;this.isActive=ngx_editor_Image.isActive(state)}}get icon(){return Icon.get("image")}get src(){return this.form.get("src")}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hideForm()}getLabel(key){return this.ngxeService.locals.get(key)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}onMouseDown(e){0===e.button&&(this.showPopup=!this.showPopup,this.showPopup&&this.fillForm())}fillForm(){const{state}=this.editorView,{selection}=state;if(selection instanceof dist_NodeSelection&&this.isActive){const{src,alt="",title=""}=selection.node.attrs;this.form.setValue({src,alt,title})}}insertLink(e){e.preventDefault();const{src,alt,title}=this.form.getRawValue(),{dispatch,state}=this.editorView,attrs={alt,title};ngx_editor_Image.insert(src,attrs)(state,dispatch),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(view=>{this.update(view)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}__name(ImageComponent,"ImageComponent"),ImageComponent.\u0275fac=__name(function(t){return new(t||ImageComponent)(core.Y36(core.SBq),core.Y36(NgxEditorService),core.Y36(MenuService))},"ImageComponent_Factory"),ImageComponent.\u0275cmp=core.Xpm({type:ImageComponent,selectors:[["ngx-image"]],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("mousedown",__name(function($event){return ctx.onDocumentClick($event)},"ImageComponent_mousedown_HostBindingHandler"),!1,core.evT)},"ImageComponent_HostBindings"),decls:3,vars:7,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"formGroup","ngSubmit"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label"],["type","href","id","href","formControlName","src","autofocus","","autocomplete","off"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off"],["type","text","formControlName","title","autocomplete","off"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.NdJ("mousedown",__name(function($event){return ctx.onMouseDown($event)},"ImageComponent_Template_div_mousedown_0_listener")),core.ALo(1,"sanitizeHtml"),core.qZA(),core.YNc(2,ImageComponent_div_2_Template,20,7,"div",1)),2&rf&&(core.ekj("NgxEditor__MenuItem--Active",ctx.isActive||ctx.showPopup),core.Q6J("innerHTML",core.lcZ(1,5,ctx.icon),core.oJD)("title",ctx.getLabel("insertImage")),core.xp6(2),core.Q6J("ngIf",ctx.showPopup))},"ImageComponent_Template"),dependencies:[common.O5,fesm2015_forms._Y,fesm2015_forms.Fj,fesm2015_forms.JJ,fesm2015_forms.JL,fesm2015_forms.sg,fesm2015_forms.u,SanitizeHtmlPipe]});class ColorPickerComponent{constructor(el,menuService,ngxeService){this.el=el,this.menuService=menuService,this.ngxeService=ngxeService,this.showPopup=!1,this.isActive=!1,this.activeColors=[],this.canExecute=!0,this.update=view=>{const{state}=view;this.canExecute=this.command.canExecute(state),this.isActive=this.command.isActive(state),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(state))}}get title(){return this.getLabel("text_color"===this.type?"text_color":"background_color")}get icon(){return Icon.get("text_color"===this.type?"text_color":"color_fill")}get command(){return"text_color"===this.type?TextColor:TextBackgroundColor}getContrastYIQ(hexcolor){const color=hexcolor.replace("#","");return(299*parseInt(color.substring(0,2),16)+587*parseInt(color.substring(2,4),16)+114*parseInt(color.substring(4,6),16))/1e3>=128?"black":"white"}onDocumentClick(e){!this.el.nativeElement.contains(e.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(e){e.preventDefault(),0===e.button&&(this.showPopup=!this.showPopup)}remove(e){e.preventDefault();const{state,dispatch}=this.editorView;this.command.remove()(state,dispatch),this.hidePopup()}trackByIndex(index){return index}onColorSelect(e,color){if(e.preventDefault(),0!==e.button)return;const{state,dispatch}=this.editorView;if("text_color"===this.type){const attrs={color};this.command.apply(attrs)(state,dispatch)}else{const attrs={backgroundColor:color};this.command.apply(attrs)(state,dispatch)}this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}getLabel(key){return this.ngxeService.locals.get(key)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(view=>{this.update(view)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}__name(ColorPickerComponent,"ColorPickerComponent"),ColorPickerComponent.\u0275fac=__name(function(t){return new(t||ColorPickerComponent)(core.Y36(core.SBq),core.Y36(MenuService),core.Y36(NgxEditorService))},"ColorPickerComponent_Factory"),ColorPickerComponent.\u0275cmp=core.Xpm({type:ColorPickerComponent,selectors:[["ngx-color-picker"]],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("mousedown",__name(function($event){return ctx.onDocumentClick($event)},"ColorPickerComponent_mousedown_HostBindingHandler"),!1,core.evT)},"ColorPickerComponent_HostBindings"),inputs:{presets:"presets",type:"type"},decls:3,vars:9,consts:[[1,"NgxEditor__MenuItem--IconContainer",3,"innerHTML","title","mousedown"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"disabled","mousedown"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.NdJ("mousedown",__name(function($event){return ctx.togglePopup($event)},"ColorPickerComponent_Template_div_mousedown_0_listener")),core.ALo(1,"sanitizeHtml"),core.qZA(),core.YNc(2,ColorPickerComponent_div_2_Template,4,4,"div",1)),2&rf&&(core.ekj("NgxEditor__MenuItem--Active",ctx.isActive||ctx.showPopup)("NgxEditor--Disabled",!ctx.canExecute),core.Q6J("innerHTML",core.lcZ(1,7,ctx.icon),core.oJD)("title",ctx.title),core.xp6(2),core.Q6J("ngIf",ctx.showPopup))},"ColorPickerComponent_Template"),dependencies:[common.mk,common.sg,common.O5,common.PC,SanitizeHtmlPipe],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']});const TOOLBAR_MINIMAL=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]],DEFAULT_COLOR_PRESETS=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"];class MenuComponent{constructor(menuService){this.menuService=menuService,this.toolbar=TOOLBAR_MINIMAL,this.colorPresets=DEFAULT_COLOR_PRESETS,this.disabled=!1,this.customMenuRef=null,this.dropdownPlacement="bottom",this.toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify"],this.insertCommands=["horizontal_rule","format_clear"],this.iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--Icon"],this.dropdownContainerClass=["NgxEditor__Dropdown"],this.seperatorClass=["NgxEditor__Seperator"]}get presets(){const colors=[];return this.colorPresets.forEach((color,index)=>{const row=Math.floor(index/8);colors[row]||colors.push([]),colors[row].push(color)}),colors}trackByIndex(index){return index}isDropDown(item){return!(null==item||!item.heading)}getDropdownItems(item){return item}ngOnInit(){if(!this.editor)throw new ngx_editor_utils_NgxEditorError("Required editor instance to initialize menu component");this.menuService.editor=this.editor}}__name(MenuComponent,"MenuComponent"),MenuComponent.\u0275fac=__name(function(t){return new(t||MenuComponent)(core.Y36(MenuService))},"MenuComponent_Factory"),MenuComponent.\u0275cmp=core.Xpm({type:MenuComponent,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},features:[core._Bn([MenuService])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.YNc(1,MenuComponent_ng_container_1_Template,2,2,"ng-container",1),core.YNc(2,MenuComponent_ng_container_2_Template,2,1,"ng-container",2),core.qZA()),2&rf&&(core.Q6J("ngClass",core.WLB(4,_c7,ctx.disabled,"top"===ctx.dropdownPlacement)),core.xp6(1),core.Q6J("ngForOf",ctx.toolbar)("ngForTrackBy",ctx.trackByIndex),core.xp6(1),core.Q6J("ngIf",ctx.customMenuRef))},"MenuComponent_Template"),dependencies:[common.mk,common.sg,common.O5,common.tP,ToggleCommandComponent,InsertCommandComponent,LinkComponent,DropdownComponent,ImageComponent,ColorPickerComponent,common.Nd]});class BubbleComponent{constructor(sanitizeHTML,ngxeService){this.sanitizeHTML=sanitizeHTML,this.ngxeService=ngxeService,this.execulableItems=[],this.activeItems=[],this.toolbar=[["bold","italic","underline","strike"],["ordered_list","bullet_list","blockquote","code"],["align_left","align_center","align_right","align_justify"]],this.toggleCommands=["bold","italic","underline","strike","ordered_list","bullet_list","blockquote","code","align_left","align_center","align_right","align_justify"]}get view(){return this.editor.view}getIcon(name){const icon=Icon.get(name);return this.sanitizeHTML.transform(icon)}getTitle(name){return this.ngxeService.locals.get(name)}trackByIndex(index){return index}onClick(e,commandName){if(e.preventDefault(),e.stopPropagation(),0!==e.button)return;const{state,dispatch}=this.view;ToggleCommands[commandName].toggle()(state,dispatch)}update(view){this.activeItems=[],this.execulableItems=[];const{state}=view;this.toggleCommands.forEach(toolbarItem=>{const command=ToggleCommands[toolbarItem];command.isActive(state)&&this.activeItems.push(toolbarItem),command.canExecute(state)&&this.execulableItems.push(toolbarItem)})}ngOnInit(){this.updateSubscription=this.editor.update.subscribe(view=>{this.update(view)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}}__name(BubbleComponent,"BubbleComponent"),BubbleComponent.\u0275fac=__name(function(t){return new(t||BubbleComponent)(core.Y36(SanitizeHtmlPipe),core.Y36(NgxEditorService))},"BubbleComponent_Factory"),BubbleComponent.\u0275cmp=core.Xpm({type:BubbleComponent,selectors:[["ngx-bubble"]],inputs:{editor:"editor"},decls:1,vars:2,consts:[[4,"ngFor","ngForOf","ngForTrackBy"],["class","NgxBubbleMenu__Icon",3,"ngClass","title","innerHTML","mousedown",4,"ngIf"],["class","NgxBubbleMenu__Seperator",4,"ngIf"],[1,"NgxBubbleMenu__Icon",3,"ngClass","title","innerHTML","mousedown"],[1,"NgxBubbleMenu__Seperator"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,BubbleComponent_ng_container_0_Template,2,2,"ng-container",0),2&rf&&core.Q6J("ngForOf",ctx.toolbar)("ngForTrackBy",ctx.trackByIndex)},"BubbleComponent_Template"),dependencies:[common.mk,common.sg,common.O5],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{display:flex;flex-wrap:wrap;background-color:#000;color:#fff;padding:5px;border-radius:4px}.NgxBubbleMenu__Icon[_ngcontent-%COMP%]{height:30px;width:30px;transition:.3s ease-in-out;border-radius:2px;display:flex;align-items:center;justify-content:center;color:#fff}.NgxBubbleMenu__Icon[_ngcontent-%COMP%]:hover{background-color:#636262}.NgxBubbleMenu__Icon[_ngcontent-%COMP%] + .NgxBubbleMenu__Icon[_ngcontent-%COMP%]{margin-left:5px}.NgxBubbleMenu__Icon.NgxBubbleMenu__Icon--Active[_ngcontent-%COMP%]{background-color:#fff;color:#000}.NgxBubbleMenu__Seperator[_ngcontent-%COMP%]{border-left:1px solid white;margin:0 5px}"]});class FloatingMenuComponent{constructor(el){this.el=el,this.autoPlace=!1,this.posLeft=0,this.posTop=0,this.showMenu=!1,this.dragging=!1}get display(){return{visibility:this.showMenu?"visible":"hidden",opacity:this.showMenu?"1":"0",top:`${this.posTop}px`,left:`${this.posLeft}px`}}get view(){return this.editor.view}onMouseDown(e){const target=e.target;this.el.nativeElement.contains(target)&&"INPUT"!==target.nodeName?e.preventDefault():this.dragging=!0}onKeyDown(e){"INPUT"!==e.target.nodeName&&(this.dragging=!0,this.hide())}onMouseUp(e){const target=e.target;this.el.nativeElement.contains(target)||"INPUT"===target.nodeName?e.preventDefault():(this.dragging=!1,this.useUpdate())}onKeyUp(e){"INPUT"!==e.target.nodeName&&(this.dragging=!1,this.useUpdate())}useUpdate(){!this.view||this.update(this.view)}hide(){this.showMenu=!1}show(){this.showMenu=!0}calculateBubblePosition(view){return(0,tslib_es6.mG)(this,void 0,void 0,function*(){const{state:{selection}}=view,{from,to}=selection,start=view.coordsAtPos(from),end=view.coordsAtPos(to),selectionElement={getBoundingClientRect(){if(selection instanceof dist_NodeSelection)return view.nodeDOM(from).getBoundingClientRect();const{top:top2,left:left2}=start,{bottom,right}=end;return{x:left2,y:top2,top:top2,bottom,left:left2,right,width:right-left2,height:bottom-top2}}},bubbleEl=this.el.nativeElement,{x:left,y:top}=yield floating_ui_dom_computePosition(selectionElement,bubbleEl,{placement:"top",middleware:[offset(5),this.autoPlace&&autoPlacement({boundary:view.dom,padding:5,allowedPlacements:["top","bottom"]}),{name:"overflowMiddleware",fn(middlewareArgs){return(0,tslib_es6.mG)(this,void 0,void 0,function*(){const overflow=yield detectOverflow(middlewareArgs,{boundary:view.dom,padding:5});return overflow.left>0?{x:middlewareArgs.x+overflow.left}:overflow.right>0?{x:middlewareArgs.x-overflow.right}:{}})}}].filter(Boolean)});return{left,top}})}canShowMenu(view){const{state}=view,{selection}=state,{empty:empty2}=selection;return!(selection instanceof dist_NodeSelection&&"image"===selection.node.type.name)&&(!(!this.view.hasFocus()||empty2||this.dragging)||(this.hide(),!1))}update(view){this.canShowMenu(view)?this.calculateBubblePosition(this.view).then(({top,left})=>{this.canShowMenu?(this.posLeft=left,this.posTop=top,this.show()):this.hide()}):this.hide()}ngOnInit(){if(!this.editor)throw new ngx_editor_utils_NgxEditorError("Required editor instance to initialize floating menu component");this.updateSubscription=this.editor.update.subscribe(view=>{this.update(view)}),this.resizeSubscription=(0,cjs.fromEvent)(window,"resize").pipe((0,operators.pO)(500,cjs.asyncScheduler,{leading:!0,trailing:!0})).subscribe(()=>{this.useUpdate()})}ngOnDestroy(){this.updateSubscription.unsubscribe(),this.resizeSubscription.unsubscribe()}}__name(FloatingMenuComponent,"FloatingMenuComponent"),FloatingMenuComponent.\u0275fac=__name(function(t){return new(t||FloatingMenuComponent)(core.Y36(core.SBq))},"FloatingMenuComponent_Factory"),FloatingMenuComponent.\u0275cmp=core.Xpm({type:FloatingMenuComponent,selectors:[["ngx-editor-floating-menu"]],hostVars:2,hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("mousedown",__name(function($event){return ctx.onMouseDown($event)},"FloatingMenuComponent_mousedown_HostBindingHandler"),!1,core.evT)("keydown",__name(function($event){return ctx.onKeyDown($event)},"FloatingMenuComponent_keydown_HostBindingHandler"),!1,core.evT)("mouseup",__name(function($event){return ctx.onMouseUp($event)},"FloatingMenuComponent_mouseup_HostBindingHandler"),!1,core.evT)("keyup",__name(function($event){return ctx.onKeyUp($event)},"FloatingMenuComponent_keyup_HostBindingHandler"),!1,core.evT),2&rf&&core.Akn(ctx.display)},"FloatingMenuComponent_HostBindings"),inputs:{editor:"editor",autoPlace:"autoPlace"},ngContentSelectors:_c3,decls:4,vars:1,consts:[["ref",""],[4,"ngIf"],[3,"editor"]],template:__name(function(rf,ctx){if(1&rf&&(core.F$t(),core.TgZ(0,"div",null,0),core.Hsn(2),core.qZA(),core.YNc(3,FloatingMenuComponent_ng_container_3_Template,2,1,"ng-container",1)),2&rf){const _r0=core.MAs(1);core.xp6(3),core.Q6J("ngIf",0===_r0.children.length)}},"FloatingMenuComponent_Template"),dependencies:[common.O5,BubbleComponent],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_nghost-%COMP%]{position:absolute;z-index:20;margin-bottom:5px;visibility:hidden;opacity:0}"]});class MenuModule{}__name(MenuModule,"MenuModule"),MenuModule.\u0275fac=__name(function(t){return new(t||MenuModule)},"MenuModule_Factory"),MenuModule.\u0275mod=core.oAB({type:MenuModule}),MenuModule.\u0275inj=core.cJS({providers:[SanitizeHtmlPipe],imports:[common.ez,fesm2015_forms.UX]});const NGX_EDITOR_CONFIG_TOKEN=new core.OlP("NgxEditorConfig"),defaultConfig={locals:defaults};class NgxEditorModule{static forRoot(config=defaultConfig){return{ngModule:NgxEditorModule,providers:[{provide:NGX_EDITOR_CONFIG_TOKEN,useValue:config},{provide:NgxEditorServiceConfig,useFactory:provideMyServiceOptions,deps:[NGX_EDITOR_CONFIG_TOKEN]}]}}static forChild(config=defaultConfig){return{ngModule:NgxEditorModule,providers:[{provide:NGX_EDITOR_CONFIG_TOKEN,useValue:config},{provide:NgxEditorServiceConfig,useFactory:provideMyServiceOptions,deps:[NGX_EDITOR_CONFIG_TOKEN]},NgxEditorService]}}}__name(NgxEditorModule,"NgxEditorModule"),NgxEditorModule.\u0275fac=__name(function(t){return new(t||NgxEditorModule)},"NgxEditorModule_Factory"),NgxEditorModule.\u0275mod=core.oAB({type:NgxEditorModule}),NgxEditorModule.\u0275inj=core.cJS({imports:[common.ez,MenuModule]});const isEmptyInputValue=__name(value=>null===value||0===value.length,"isEmptyInputValue"),hasValidLength=__name(value=>null!==value&&"number"==typeof value.length,"hasValidLength"),isDocEmpty=__name(doc2=>{if(!doc2)return!0;const{childCount,firstChild}=doc2;return Boolean(1===childCount&&(null==firstChild?void 0:firstChild.isTextblock)&&0===firstChild.content.size)},"isDocEmpty");__name(class Validators{static required(userSchema){return control=>{const schema$1=userSchema||schema,doc2=parseContent(control.value,schema$1);return isDocEmpty(doc2)?{required:!0}:null}}static maxLength(maxLength,userSchema){return control=>{const schema$1=userSchema||schema,value=parseContent(control.value,schema$1).textContent;return hasValidLength(value)&&value.length>maxLength?{maxlength:{requiredLength:maxLength,actualLength:value.length}}:null}}static minLength(minLength,userSchema){return control=>{const schema$1=userSchema||schema,value=parseContent(control.value,schema$1).textContent;return isEmptyInputValue(value)||!hasValidLength(value)?null:value.length<minLength?{minlength:{requiredLength:minLength,actualLength:value.length}}:null}}},"Validators");const execMark=__name((name,toggle=!1)=>(state,dispatch)=>{const command=new ngx_editor_Mark(name);return toggle?command.toggle()(state,dispatch):command.apply()(state,dispatch)},"execMark");class EditorCommands{constructor(view){if(this.applyTrx=tr=>{this.state=this.state.apply(null!=tr?tr:this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)},this.dispatch=tr=>{this.applyTrx(tr)},!view)throw new NgxEditorError("Required view to initialize commands.");this.view=view,this.state=view.state,this.tr=this.view.state.tr}exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;const forceEmit=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);const tr=this.tr.setMeta("FORCE_EMIT",forceEmit);return this.view.dispatch(tr),!0}focus(){return this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(text){return this.tr.insertText(text),this.applyTrx(),this}insertNewLine(){const newLineCommands=[newlineInCode,createParagraphNear,liftEmptyBlock,splitBlock];return chainCommands(...newLineCommands)(this.state,this.dispatch),this}applyMark(name){return execMark(name,!1)(this.state,this.dispatch),this}toggleMark(name){return execMark(name,!0)(this.state,this.dispatch),this}bold(){return execMark("strong")(this.state,this.dispatch),this}toggleBold(){return execMark("strong",!0)(this.state,this.dispatch),this}italics(){return execMark("em")(this.state,this.dispatch),this}toggleItalics(){return execMark("em",!0)(this.state,this.dispatch),this}underline(){return execMark("u")(this.state,this.dispatch),this}toggleUnderline(){return execMark("u",!0)(this.state,this.dispatch),this}strike(){return execMark("s")(this.state,this.dispatch),this}toggleStrike(){return execMark("s",!0)(this.state,this.dispatch),this}code(){return execMark("code")(this.state,this.dispatch),this}toggleCode(){return execMark("code",!0)(this.state,this.dispatch),this}toggleOrderedList(){return new ListItem(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new ListItem(!0).toggle()(this.state,this.dispatch),this}toggleHeading(level){return new Heading(level).toggle()(this.state,this.dispatch),this}insertLink(text,attrs){return(new Link$1).insert(text,attrs)(this.state,this.dispatch),this}updateLink(attrs){return(new Link$1).update(attrs)(this.state,this.dispatch),this}insertImage(src,attrs={}){return(new Image$1).insert(src,attrs)(this.state,this.dispatch),this}textColor(color){return new TextColor$1("text_color").apply({color})(this.state,this.dispatch),this}backgroundColor(color){return new TextColor$1("text_background_color").apply({backgroundColor:color})(this.state,this.dispatch),this}removeTextColor(){return new TextColor$1("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new TextColor$1("text_background_color").remove()(this.state,this.dispatch),this}align(p){return new TextAlign(p).toggle()(this.state,this.dispatch),this}insertHTML(html){const{selection,schema:schema2,tr}=this.state,{from,to}=selection,element=document.createElement("div");element.innerHTML=html.trim();const slice=DOMParser.fromSchema(schema2).parseSlice(element),transaction=tr.replaceRange(from,to,slice);return this.applyTrx(transaction),this}}__name(EditorCommands,"EditorCommands");const isMacOs="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),blockQuoteRule=__name(nodeType=>wrappingInputRule(/^\s*>\s$/,nodeType),"blockQuoteRule"),orderedListRule=__name(nodeType=>wrappingInputRule(/^(?:\d+)\.\s$/,nodeType,match=>({order:Number(match[1])}),(match,node)=>node.childCount+node.attrs.order===Number(match[1])),"orderedListRule"),bulletListRule=__name(nodeType=>wrappingInputRule(/^\s*(?:[-+*])\s$/,nodeType),"bulletListRule"),codeBlockRule=__name(nodeType=>textblockTypeInputRule(/^```$/,nodeType),"codeBlockRule"),headingRule=__name((nodeType,maxLevel)=>textblockTypeInputRule(new RegExp(`^(#{1,${maxLevel}})\\s$`),nodeType,match=>({level:match[1].length})),"headingRule"),boldRule=__name(markType=>markInputRule(/(?:^|\s)(?:(?:\*\*|__)(?:(?:[^*_]+))(?:\*\*|__))$/,markType),"boldRule"),emRule=__name(markType=>markInputRule(/(?:^|\s)(?:(?:\*|_)(?:(?:[^*_]+))(?:\*|_))$/,markType),"emRule"),buildInputRules=__name(schema2=>{const rules=smartQuotes.concat(ellipsis,emDash);return rules.push(boldRule(schema2.marks.strong)),rules.push(emRule(schema2.marks.em)),rules.push(blockQuoteRule(schema2.nodes.blockquote)),rules.push(orderedListRule(schema2.nodes.ordered_list)),rules.push(bulletListRule(schema2.nodes.bullet_list)),rules.push(codeBlockRule(schema2.nodes.code_block)),rules.push(headingRule(schema2.nodes.heading,6)),inputRules({rules})},"buildInputRules"),getKeyboardShortcuts=__name((schema2,options)=>{const historyKeyMap={};historyKeyMap["Mod-z"]=undo,isMacOs?historyKeyMap["Shift-Mod-z"]=redo:historyKeyMap["Mod-y"]=redo;const plugins=[keymap({"Mod-b":toggleMark(schema2.marks.strong),"Mod-i":toggleMark(schema2.marks.em),"Mod-u":toggleMark(schema2.marks.u),"Mod-`":toggleMark(schema2.marks.code)}),keymap({Enter:splitListItem(schema2.nodes.list_item),"Shift-Enter":chainCommands(exitCode,(state,dispatch)=>{const{tr}=state,br=schema2.nodes.hard_break;return dispatch(tr.replaceSelectionWith(br.create()).scrollIntoView()),!0}),"Mod-[":liftListItem(schema2.nodes.list_item),"Mod-]":sinkListItem(schema2.nodes.list_item),Tab:sinkListItem(schema2.nodes.list_item)}),keymap(baseKeymap)];return options.history&&plugins.push(keymap(historyKeyMap)),plugins},"getKeyboardShortcuts"),getDefaultPlugins=__name((schema2,options)=>{const plugins=[];return options.keyboardShortcuts&&plugins.push(...getKeyboardShortcuts(schema2,{history:options.history})),options.history&&plugins.push(history()),options.inputRules&&plugins.push(buildInputRules(schema2)),plugins},"getDefaultPlugins"),defaultFeatures={linkOnPaste:!0,resizeImage:!0},DEFAULT_OPTIONS={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:ngx_editor_schema_schema,plugins:[],nodeViews:{},attributes:{},features:defaultFeatures,handleScrollToSelection:null,linkValidationPattern:"(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#\n\r]*)?#?([^\n\r]*)|(mailto:.*[@].*)"};function SwalPortalComponent_ng_container_0_Template(rf,ctx){1&rf&&core.GkF(0)}__name(class Editor{constructor(options=DEFAULT_OPTIONS){this.valueChangesSubject=new Subject,this.updateSubject=new Subject,this.options=Object.assign(Object.assign({},DEFAULT_OPTIONS),options),this.createEditor()}get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||schema}get linkValidationPattern(){return this.options.linkValidationPattern}get commands(){return new EditorCommands(this.view)}get features(){return Object.assign(Object.assign({},defaultFeatures),this.options.features)}handleTransactions(tr){const state=this.view.state.apply(tr);if(this.view.updateState(state),this.updateSubject.next(this.view),!tr.docChanged&&!tr.getMeta("FORCE_EMIT"))return;const json=state.doc.toJSON();this.valueChangesSubject.next(json)}createEditor(){var _a,_b;const{options,schema:schema2}=this,{content=null,nodeViews}=options,{history:history2=!0,keyboardShortcuts=!0,inputRules:inputRules2=!0}=options,doc2=parseContent(content,schema2),plugins=null!==(_a=options.plugins)&&void 0!==_a?_a:[],attributes=null!==(_b=options.attributes)&&void 0!==_b?_b:{},defaultPlugins=getDefaultPlugins(schema2,{history:history2,keyboardShortcuts,inputRules:inputRules2});this.view=new EditorView(null,{state:EditorState.create({doc:doc2,schema:schema2,plugins:[...defaultPlugins,...plugins]}),nodeViews,dispatchTransaction:this.handleTransactions.bind(this),attributes,handleScrollToSelection:options.handleScrollToSelection})}setContent(content){if(isNil(content))return;const{state}=this.view,{tr,doc:doc2}=state,newDoc=parseContent(content,this.schema);tr.replaceWith(0,state.doc.content.size,newDoc),!doc2.eq(tr.doc)&&(!tr.docChanged||this.view.dispatch(tr))}registerPlugin(plugin){const{state}=this.view,plugins=[...state.plugins,plugin],newState=state.reconfigure({plugins});this.view.updateState(newState)}destroy(){this.view.destroy()}},"Editor"),__name(SwalPortalComponent_ng_container_0_Template,"SwalPortalComponent_ng_container_0_Template");const swalProviderToken=new core.OlP("@sweetalert2/ngx-sweetalert2#swalProvider"),fireOnInitToken=new core.OlP("@sweetalert2/ngx-sweetalert2#fireOnInit"),dismissOnDestroyToken=new core.OlP("@sweetalert2/ngx-sweetalert2#dismissOnDestroy");class SweetAlert2LoaderService{constructor(swalProvider){this.swalProvider=swalProvider}get swal(){return this.swalPromiseCache||this.preloadSweetAlertLibrary(),this.swalPromiseCache}preloadSweetAlertLibrary(){if(this.swalPromiseCache)return;const libPromise=isLoader(this.swalProvider)?this.swalProvider():Promise.resolve(this.swalProvider);function isLoader(value){return"function"==typeof value&&void 0===value.version}function isDefaultExport(value){return"function"==typeof value}this.swalPromiseCache=libPromise.then(value=>isDefaultExport(value)?value:value.default),__name(isLoader,"isLoader"),__name(isDefaultExport,"isDefaultExport")}}__name(SweetAlert2LoaderService,"SweetAlert2LoaderService"),SweetAlert2LoaderService.\u0275fac=__name(function(t){return new(t||SweetAlert2LoaderService)(core.LFG(swalProviderToken))},"SweetAlert2LoaderService_Factory"),SweetAlert2LoaderService.\u0275prov=core.Yz7({token:SweetAlert2LoaderService,factory:SweetAlert2LoaderService.\u0275fac});class SwalComponent{constructor(sweetAlert2Loader,moduleLevelFireOnInit,moduleLevelDismissOnDestroy){this.sweetAlert2Loader=sweetAlert2Loader,this.moduleLevelFireOnInit=moduleLevelFireOnInit,this.moduleLevelDismissOnDestroy=moduleLevelDismissOnDestroy,this.willOpen=new core.vpe,this.didOpen=new core.vpe,this.didRender=new core.vpe,this.willClose=new core.vpe,this.didClose=new core.vpe,this.didDestroy=new core.vpe,this.confirm=new core.vpe,this.deny=new core.vpe,this.dismiss=new core.vpe,this.touchedProps=new Set,this.markTouched=this.touchedProps.add.bind(this.touchedProps),this.isCurrentlyShown=!1}set swalOptions(options){Object.assign(this,options),Object.keys(options).forEach(this.markTouched)}get swalOptions(){return[...this.touchedProps].reduce((obj,key)=>Object.assign(Object.assign({},obj),{[key]:this[key]}),{})}set swalVisible(visible){visible?this.fire():this.close()}get swalVisible(){return this.isCurrentlyShown}ngOnInit(){this.sweetAlert2Loader.preloadSweetAlertLibrary()}ngAfterViewInit(){(void 0===this.swalFireOnInit?this.moduleLevelFireOnInit:this.swalFireOnInit)&&this.fire()}ngOnChanges(changes){Object.keys(changes).filter(key=>!key.startsWith("swal")).forEach(this.markTouched),this.update()}ngOnDestroy(){(void 0===this.swalDismissOnDestroy?this.moduleLevelDismissOnDestroy:this.swalDismissOnDestroy)&&this.close()}fire(){return(0,tslib_es6.mG)(this,void 0,void 0,function*(){const swal=yield this.sweetAlert2Loader.swal,userOptions=this.swalOptions,options=Object.assign(Object.assign({},userOptions),{willOpen:composeHook(userOptions.willOpen,modalElement=>{this.willOpen.emit({modalElement})}),didOpen:composeHook(userOptions.didOpen,modalElement=>{this.isCurrentlyShown=!0,this.didOpen.emit({modalElement})}),didRender:composeHook(userOptions.didRender,modalElement=>{this.didRender.emit({modalElement})}),willClose:composeHook(userOptions.willClose,modalElement=>{this.isCurrentlyShown=!1,this.willClose.emit({modalElement})}),didClose:composeHook(userOptions.didClose,()=>{this.didClose.emit()}),didDestroy:composeHook(userOptions.didDestroy,()=>{this.didDestroy.emit()})}),result=yield swal.fire(options);switch(!0){case result.isConfirmed:this.confirm.emit(result.value);break;case result.isDenied:this.deny.emit();break;case result.isDismissed:this.dismiss.emit(result.dismiss)}return result;function composeHook(userHook,libHook){return(...args)=>(libHook(...args),null==userHook?void 0:userHook(...args))}})}close(result){return(0,tslib_es6.mG)(this,void 0,void 0,function*(){this.isCurrentlyShown&&(yield this.sweetAlert2Loader.swal).close(result)})}update(options){return(0,tslib_es6.mG)(this,void 0,void 0,function*(){if(options&&(this.swalOptions=options),!this.isCurrentlyShown)return;const swal=yield this.sweetAlert2Loader.swal,allOptions=this.swalOptions,updatableOptions=Object.keys(allOptions).filter(swal.isUpdatableParameter).reduce((obj,key)=>Object.assign(Object.assign({},obj),{[key]:allOptions[key]}),{});swal.update(updatableOptions)})}}__name(SwalComponent,"SwalComponent"),SwalComponent.\u0275fac=__name(function(t){return new(t||SwalComponent)(core.Y36(SweetAlert2LoaderService),core.Y36(fireOnInitToken),core.Y36(dismissOnDestroyToken))},"SwalComponent_Factory"),SwalComponent.\u0275cmp=core.Xpm({type:SwalComponent,selectors:[["swal"]],inputs:{title:"title",titleText:"titleText",text:"text",html:"html",footer:"footer",icon:"icon",iconColor:"iconColor",iconHtml:"iconHtml",backdrop:"backdrop",toast:"toast",target:"target",input:"input",width:"width",padding:"padding",background:"background",position:"position",grow:"grow",showClass:"showClass",hideClass:"hideClass",customClass:"customClass",timer:"timer",timerProgressBar:"timerProgressBar",heightAuto:"heightAuto",allowOutsideClick:"allowOutsideClick",allowEscapeKey:"allowEscapeKey",allowEnterKey:"allowEnterKey",stopKeydownPropagation:"stopKeydownPropagation",keydownListenerCapture:"keydownListenerCapture",showConfirmButton:"showConfirmButton",showDenyButton:"showDenyButton",showCancelButton:"showCancelButton",confirmButtonText:"confirmButtonText",denyButtonText:"denyButtonText",cancelButtonText:"cancelButtonText",confirmButtonColor:"confirmButtonColor",denyButtonColor:"denyButtonColor",cancelButtonColor:"cancelButtonColor",confirmButtonAriaLabel:"confirmButtonAriaLabel",denyButtonAriaLabel:"denyButtonAriaLabel",cancelButtonAriaLabel:"cancelButtonAriaLabel",buttonsStyling:"buttonsStyling",reverseButtons:"reverseButtons",focusConfirm:"focusConfirm",focusDeny:"focusDeny",focusCancel:"focusCancel",showCloseButton:"showCloseButton",closeButtonHtml:"closeButtonHtml",closeButtonAriaLabel:"closeButtonAriaLabel",loaderHtml:"loaderHtml",showLoaderOnConfirm:"showLoaderOnConfirm",preConfirm:"preConfirm",preDeny:"preDeny",imageUrl:"imageUrl",imageWidth:"imageWidth",imageHeight:"imageHeight",imageAlt:"imageAlt",inputLabel:"inputLabel",inputPlaceholder:"inputPlaceholder",inputValue:"inputValue",inputOptions:"inputOptions",inputAutoTrim:"inputAutoTrim",inputAttributes:"inputAttributes",inputValidator:"inputValidator",returnInputValueOnDeny:"returnInputValueOnDeny",validationMessage:"validationMessage",progressSteps:"progressSteps",currentProgressStep:"currentProgressStep",progressStepsDistance:"progressStepsDistance",scrollbarPadding:"scrollbarPadding",swalOptions:"swalOptions",swalFireOnInit:"swalFireOnInit",swalDismissOnDestroy:"swalDismissOnDestroy",swalVisible:"swalVisible"},outputs:{willOpen:"willOpen",didOpen:"didOpen",didRender:"didRender",willClose:"willClose",didClose:"didClose",didDestroy:"didDestroy",confirm:"confirm",deny:"deny",dismiss:"dismiss"},features:[core.TTD],decls:0,vars:0,template:__name(function(rf,ctx){},"SwalComponent_Template"),encapsulation:2,changeDetection:0});class SwalDirective{constructor(viewContainerRef,resolver){this.viewContainerRef=viewContainerRef,this.resolver=resolver,this.confirm=new core.vpe,this.deny=new core.vpe,this.dismiss=new core.vpe}set swal(options){function isArrayOptions(value){return Array.isArray(options)}options instanceof SwalComponent?this.swalInstance=options:isArrayOptions(options)?(this.swalOptions={},[this.swalOptions.title,this.swalOptions.text,this.swalOptions.icon]=options):this.swalOptions=options,__name(isArrayOptions,"isArrayOptions")}ngOnInit(){if(!this.swalInstance){const factory=this.resolver.resolveComponentFactory(SwalComponent);this.swalRef=this.viewContainerRef.createComponent(factory),this.swalInstance=this.swalRef.instance}}ngOnDestroy(){this.swalRef&&this.swalRef.destroy()}onClick(event){if(event.preventDefault(),event.stopImmediatePropagation(),event.stopPropagation(),!this.swalInstance)return;this.swalOptions&&(this.swalInstance.swalOptions=this.swalOptions);const swalClosed=new cjs.Subject;this.swalInstance.confirm.asObservable().pipe((0,operators.Rs)(swalClosed)).subscribe(v=>this.confirm.emit(v)),this.swalInstance.deny.asObservable().pipe((0,operators.Rs)(swalClosed)).subscribe(v=>this.deny.emit(v)),this.swalInstance.dismiss.asObservable().pipe((0,operators.Rs)(swalClosed)).subscribe(v=>this.dismiss.emit(v)),this.swalInstance.fire().then(()=>swalClosed.next())}}__name(SwalDirective,"SwalDirective"),SwalDirective.\u0275fac=__name(function(t){return new(t||SwalDirective)(core.Y36(core.s_b),core.Y36(core._Vd))},"SwalDirective_Factory"),SwalDirective.\u0275dir=core.lG2({type:SwalDirective,selectors:[["","swal",""]],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("click",__name(function($event){return ctx.onClick($event)},"SwalDirective_click_HostBindingHandler"))},"SwalDirective_HostBindings"),inputs:{swal:"swal"},outputs:{confirm:"confirm",deny:"deny",dismiss:"dismiss"}});class SwalPortalComponent{constructor(){this.template=null}}__name(SwalPortalComponent,"SwalPortalComponent"),SwalPortalComponent.\u0275fac=__name(function(t){return new(t||SwalPortalComponent)},"SwalPortalComponent_Factory"),SwalPortalComponent.\u0275cmp=core.Xpm({type:SwalPortalComponent,selectors:[["swal-portal"]],inputs:{template:"template"},decls:1,vars:1,consts:[[4,"ngTemplateOutlet"]],template:__name(function(rf,ctx){1&rf&&core.YNc(0,SwalPortalComponent_ng_container_0_Template,1,0,"ng-container",0),2&rf&&core.Q6J("ngTemplateOutlet",ctx.template)},"SwalPortalComponent_Template"),dependencies:[common.tP],encapsulation:2,changeDetection:0});class SwalPortalTargets{constructor(){this.closeButton={element:swal=>swal.getCloseButton(),options:{showCloseButton:!0}},this.title={element:swal=>swal.getTitle(),options:{title:" "}},this.content={element:swal=>swal.getHtmlContainer(),options:{text:" "}},this.actions={element:swal=>swal.getActions(),options:{showConfirmButton:!0}},this.confirmButton={element:swal=>swal.getConfirmButton(),options:{showConfirmButton:!0}},this.denyButton={element:swal=>swal.getDenyButton(),options:{showDenyButton:!0}},this.cancelButton={element:swal=>swal.getCancelButton(),options:{showCancelButton:!0}},this.footer={element:swal=>swal.getFooter(),options:{footer:" "}}}}__name(SwalPortalTargets,"SwalPortalTargets"),SwalPortalTargets.\u0275fac=__name(function(t){return new(t||SwalPortalTargets)},"SwalPortalTargets_Factory"),SwalPortalTargets.\u0275prov=core.Yz7({token:SwalPortalTargets,factory:SwalPortalTargets.\u0275fac,providedIn:"root"});class SwalPortalDirective{constructor(resolver,injector,app,templateRef,sweetAlert2Loader,swalTargets,swalComponent){this.resolver=resolver,this.injector=injector,this.app=app,this.templateRef=templateRef,this.sweetAlert2Loader=sweetAlert2Loader,this.swalTargets=swalTargets,this.swalComponent=swalComponent,this.destroyed=new cjs.Subject}ngOnInit(){this.target=this.target||this.swalTargets.content,this.swalComponent.update(this.target.options),this.swalComponent.didRender.pipe((0,operators.Rs)(this.destroyed)).subscribe(this.didRenderHook.bind(this)),this.swalComponent.willOpen.pipe((0,operators.Rs)(this.destroyed)).subscribe(this.willOpenHook.bind(this)),this.swalComponent.didDestroy.pipe((0,operators.Rs)(this.destroyed)).subscribe(this.didDestroyHook.bind(this))}ngOnDestroy(){this.destroyed.next()}didRenderHook(){return(0,tslib_es6.mG)(this,void 0,void 0,function*(){this.portalComponentRef||(this.portalComponentRef=this.createPortalComponent());const swal=yield this.sweetAlert2Loader.swal,targetEl=this.target.element(swal);if(targetEl){for(;targetEl.firstChild;)targetEl.removeChild(targetEl.firstChild);targetEl.appendChild(this.portalComponentRef.location.nativeElement)}})}willOpenHook(){!this.portalComponentRef||this.app.attachView(this.portalComponentRef.hostView)}didDestroyHook(){!this.portalComponentRef||(this.app.detachView(this.portalComponentRef.hostView),this.portalComponentRef.destroy(),this.portalComponentRef=void 0)}createPortalComponent(){const componentRef=this.resolver.resolveComponentFactory(SwalPortalComponent).create(this.injector,[]);return componentRef.instance.template=this.templateRef,componentRef}}function provideDefaultSwal(){return __webpack_require__.e(226).then(__webpack_require__.t.bind(__webpack_require__,35226,19))}__name(SwalPortalDirective,"SwalPortalDirective"),SwalPortalDirective.\u0275fac=__name(function(t){return new(t||SwalPortalDirective)(core.Y36(core._Vd),core.Y36(core.zs3),core.Y36(core.z2F),core.Y36(core.Rgc),core.Y36(SweetAlert2LoaderService),core.Y36(SwalPortalTargets),core.Y36(SwalComponent,1))},"SwalPortalDirective_Factory"),SwalPortalDirective.\u0275dir=core.lG2({type:SwalPortalDirective,selectors:[["","swalPortal",""]],inputs:{target:["swalPortal","target"]}}),__name(provideDefaultSwal,"provideDefaultSwal");class SweetAlert2Module{static forRoot(options={}){return{ngModule:SweetAlert2Module,providers:[SweetAlert2LoaderService,{provide:swalProviderToken,useValue:options.provideSwal||provideDefaultSwal},{provide:fireOnInitToken,useValue:options.fireOnInit||!1},{provide:dismissOnDestroyToken,useValue:options.dismissOnDestroy||!0}]}}static forChild(options={}){return{ngModule:SweetAlert2Module,providers:[...options.provideSwal?[SweetAlert2LoaderService,{provide:swalProviderToken,useValue:options.provideSwal}]:[],...void 0!==options.fireOnInit?[{provide:fireOnInitToken,useValue:options.fireOnInit}]:[],...void 0!==options.dismissOnDestroy?[{provide:dismissOnDestroyToken,useValue:options.dismissOnDestroy}]:[]]}}}__name(SweetAlert2Module,"SweetAlert2Module"),SweetAlert2Module.\u0275fac=__name(function(t){return new(t||SweetAlert2Module)},"SweetAlert2Module_Factory"),SweetAlert2Module.\u0275mod=core.oAB({type:SweetAlert2Module}),SweetAlert2Module.\u0275inj=core.cJS({imports:[[common.ez]]});const DIR_DOCUMENT=new core.OlP("cdk-dir-doc",{providedIn:"root",factory:DIR_DOCUMENT_FACTORY});function DIR_DOCUMENT_FACTORY(){return(0,core.f3M)(common.K0)}__name(DIR_DOCUMENT_FACTORY,"DIR_DOCUMENT_FACTORY");const RTL_LOCALE_PATTERN=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function _resolveDirectionality(rawValue){const value=(null==rawValue?void 0:rawValue.toLowerCase())||"";return"auto"===value&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?RTL_LOCALE_PATTERN.test(navigator.language)?"rtl":"ltr":"rtl"===value?"rtl":"ltr"}__name(_resolveDirectionality,"_resolveDirectionality");class Directionality{constructor(_document){if(this.value="ltr",this.change=new core.vpe,_document){const bodyDir=_document.body?_document.body.dir:null,htmlDir=_document.documentElement?_document.documentElement.dir:null;this.value=_resolveDirectionality(bodyDir||htmlDir||"ltr")}}ngOnDestroy(){this.change.complete()}}__name(Directionality,"Directionality"),Directionality.\u0275fac=__name(function(t){return new(t||Directionality)(core.LFG(DIR_DOCUMENT,8))},"Directionality_Factory"),Directionality.\u0275prov=core.Yz7({token:Directionality,factory:Directionality.\u0275fac,providedIn:"root"});class Dir{constructor(){this._dir="ltr",this._isInitialized=!1,this.change=new core.vpe}get dir(){return this._dir}set dir(value){const previousValue=this._dir;this._dir=_resolveDirectionality(value),this._rawDir=value,previousValue!==this._dir&&this._isInitialized&&this.change.emit(this._dir)}get value(){return this.dir}ngAfterContentInit(){this._isInitialized=!0}ngOnDestroy(){this.change.complete()}}__name(Dir,"Dir"),Dir.\u0275fac=__name(function(t){return new(t||Dir)},"Dir_Factory"),Dir.\u0275dir=core.lG2({type:Dir,selectors:[["","dir",""]],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&core.uIk("dir",ctx._rawDir)},"Dir_HostBindings"),inputs:{dir:"dir"},outputs:{change:"dirChange"},exportAs:["dir"],features:[core._Bn([{provide:Directionality,useExisting:Dir}])]});class BidiModule{}__name(BidiModule,"BidiModule"),BidiModule.\u0275fac=__name(function(t){return new(t||BidiModule)},"BidiModule_Factory"),BidiModule.\u0275mod=core.oAB({type:BidiModule}),BidiModule.\u0275inj=core.cJS({});const VERSION=new core.GfV("14.2.2");var fesm2015_platform=__webpack_require__(70925),a11y=__webpack_require__(15664),coercion=__webpack_require__(63191),keycodes=__webpack_require__(91159);const core_c0=["*",[["mat-option"],["ng-container"]]];function MatOption_mat_pseudo_checkbox_0_Template(rf,ctx){if(1&rf&&core._UZ(0,"mat-pseudo-checkbox",4),2&rf){const ctx_r0=core.oxw();core.Q6J("state",ctx_r0.selected?"checked":"unchecked")("disabled",ctx_r0.disabled)}}function MatOption_span_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"span",5),core._uU(1),core.qZA()),2&rf){const ctx_r1=core.oxw();core.xp6(1),core.hij("(",ctx_r1.group.label,")")}}__name(MatOption_mat_pseudo_checkbox_0_Template,"MatOption_mat_pseudo_checkbox_0_Template"),__name(MatOption_span_3_Template,"MatOption_span_3_Template");const core_VERSION=new core.GfV("14.2.2");class AnimationCurves{}__name(AnimationCurves,"AnimationCurves"),AnimationCurves.STANDARD_CURVE="cubic-bezier(0.4,0.0,0.2,1)",AnimationCurves.DECELERATION_CURVE="cubic-bezier(0.0,0.0,0.2,1)",AnimationCurves.ACCELERATION_CURVE="cubic-bezier(0.4,0.0,1,1)",AnimationCurves.SHARP_CURVE="cubic-bezier(0.4,0.0,0.6,1)";class AnimationDurations{}function MATERIAL_SANITY_CHECKS_FACTORY(){return!0}__name(AnimationDurations,"AnimationDurations"),AnimationDurations.COMPLEX="375ms",AnimationDurations.ENTERING="225ms",AnimationDurations.EXITING="195ms",__name(MATERIAL_SANITY_CHECKS_FACTORY,"MATERIAL_SANITY_CHECKS_FACTORY");const MATERIAL_SANITY_CHECKS=new core.OlP("mat-sanity-checks",{providedIn:"root",factory:MATERIAL_SANITY_CHECKS_FACTORY});class MatCommonModule{constructor(highContrastModeDetector,_sanityChecks,_document){this._sanityChecks=_sanityChecks,this._document=_document,this._hasDoneGlobalChecks=!1,highContrastModeDetector._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(name){return!(0,fesm2015_platform.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[name])}}function mixinDisabled(base){return class extends base{constructor(...args){super(...args),this._disabled=!1}get disabled(){return this._disabled}set disabled(value){this._disabled=(0,coercion.Ig)(value)}}}function mixinColor(base,defaultColor){return class extends base{constructor(...args){super(...args),this.defaultColor=defaultColor,this.color=defaultColor}get color(){return this._color}set color(value){const colorPalette=value||this.defaultColor;colorPalette!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),colorPalette&&this._elementRef.nativeElement.classList.add(`mat-${colorPalette}`),this._color=colorPalette)}}}function mixinDisableRipple(base){return class extends base{constructor(...args){super(...args),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(value){this._disableRipple=(0,coercion.Ig)(value)}}}function mixinTabIndex(base,defaultTabIndex=0){return class extends base{constructor(...args){super(...args),this._tabIndex=defaultTabIndex,this.defaultTabIndex=defaultTabIndex}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(value){this._tabIndex=null!=value?(0,coercion.su)(value):this.defaultTabIndex}}}function mixinErrorState(base){return class extends base{constructor(...args){super(...args),this.errorState=!1}updateErrorState(){const oldState=this.errorState,parent=this._parentFormGroup||this._parentForm,matcher=this.errorStateMatcher||this._defaultErrorStateMatcher,control=this.ngControl?this.ngControl.control:null,newState=matcher.isErrorState(control,parent);newState!==oldState&&(this.errorState=newState,this.stateChanges.next())}}}__name(MatCommonModule,"MatCommonModule"),MatCommonModule.\u0275fac=__name(function(t){return new(t||MatCommonModule)(core.LFG(a11y.qm),core.LFG(MATERIAL_SANITY_CHECKS,8),core.LFG(common.K0))},"MatCommonModule_Factory"),MatCommonModule.\u0275mod=core.oAB({type:MatCommonModule}),MatCommonModule.\u0275inj=core.cJS({imports:[BidiModule,BidiModule]}),__name(function _checkDoctypeIsDefined(doc2){doc2.doctype||console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")},"_checkDoctypeIsDefined"),__name(function _checkThemeIsPresent(doc2){if(!doc2.body||"function"!=typeof getComputedStyle)return;const testElement=doc2.createElement("div");testElement.classList.add("mat-theme-loaded-marker"),doc2.body.appendChild(testElement);const computedStyle=getComputedStyle(testElement);computedStyle&&"none"!==computedStyle.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),testElement.remove()},"_checkThemeIsPresent"),__name(function _checkCdkVersionMatch(){core_VERSION.full!==VERSION.full&&console.warn("The Angular Material version ("+core_VERSION.full+") does not match the Angular CDK version ("+VERSION.full+").\nPlease ensure the versions of these two packages exactly match.")},"_checkCdkVersionMatch"),__name(mixinDisabled,"mixinDisabled"),__name(mixinColor,"mixinColor"),__name(mixinDisableRipple,"mixinDisableRipple"),__name(mixinTabIndex,"mixinTabIndex"),__name(mixinErrorState,"mixinErrorState"),__name(function mixinInitialized(base){return class extends base{constructor(...args){super(...args),this._isInitialized=!1,this._pendingSubscribers=[],this.initialized=new Observable(subscriber=>{this._isInitialized?this._notifySubscriber(subscriber):this._pendingSubscribers.push(subscriber)})}_markInitialized(){this._isInitialized,this._isInitialized=!0,this._pendingSubscribers.forEach(this._notifySubscriber),this._pendingSubscribers=null}_notifySubscriber(subscriber){subscriber.next(),subscriber.complete()}}},"mixinInitialized");const MAT_DATE_LOCALE=new core.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:MAT_DATE_LOCALE_FACTORY});function MAT_DATE_LOCALE_FACTORY(){return(0,core.f3M)(core.soG)}__name(MAT_DATE_LOCALE_FACTORY,"MAT_DATE_LOCALE_FACTORY");class DateAdapter{constructor(){this._localeChanges=new cjs.Subject,this.localeChanges=this._localeChanges}getValidDateOrNull(obj){return this.isDateInstance(obj)&&this.isValid(obj)?obj:null}deserialize(value){return null==value||this.isDateInstance(value)&&this.isValid(value)?value:this.invalid()}setLocale(locale){this.locale=locale,this._localeChanges.next()}compareDate(first,second){return this.getYear(first)-this.getYear(second)||this.getMonth(first)-this.getMonth(second)||this.getDate(first)-this.getDate(second)}sameDate(first,second){if(first&&second){let firstValid=this.isValid(first),secondValid=this.isValid(second);return firstValid&&secondValid?!this.compareDate(first,second):firstValid==secondValid}return first==second}clampDate(date,min2,max2){return min2&&this.compareDate(date,min2)<0?min2:max2&&this.compareDate(date,max2)>0?max2:date}}__name(DateAdapter,"DateAdapter");const MAT_DATE_FORMATS=new core.OlP("mat-date-formats"),ISO_8601_REGEX=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function range(length,valueFunction){const valuesArray=Array(length);for(let i=0;i<length;i++)valuesArray[i]=valueFunction(i);return valuesArray}__name(range,"range");class NativeDateAdapter extends DateAdapter{constructor(matDateLocale,_platform){super(),this.useUtcForDisplay=!1,super.setLocale(matDateLocale)}getYear(date){return date.getFullYear()}getMonth(date){return date.getMonth()}getDate(date){return date.getDate()}getDayOfWeek(date){return date.getDay()}getMonthNames(style){const dtf=new Intl.DateTimeFormat(this.locale,{month:style,timeZone:"utc"});return range(12,i=>this._format(dtf,new Date(2017,i,1)))}getDateNames(){const dtf=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return range(31,i=>this._format(dtf,new Date(2017,0,i+1)))}getDayOfWeekNames(style){const dtf=new Intl.DateTimeFormat(this.locale,{weekday:style,timeZone:"utc"});return range(7,i=>this._format(dtf,new Date(2017,0,i+1)))}getYearName(date){const dtf=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(dtf,date)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(date){return this.getDate(this._createDateWithOverflow(this.getYear(date),this.getMonth(date)+1,0))}clone(date){return new Date(date.getTime())}createDate(year,month,date){let result=this._createDateWithOverflow(year,month,date);return result.getMonth(),result}today(){return new Date}parse(value,parseFormat){return"number"==typeof value?new Date(value):value?new Date(Date.parse(value)):null}format(date,displayFormat){if(!this.isValid(date))throw Error("NativeDateAdapter: Cannot format invalid date.");const dtf=new Intl.DateTimeFormat(this.locale,Object.assign(Object.assign({},displayFormat),{timeZone:"utc"}));return this._format(dtf,date)}addCalendarYears(date,years){return this.addCalendarMonths(date,12*years)}addCalendarMonths(date,months){let newDate=this._createDateWithOverflow(this.getYear(date),this.getMonth(date)+months,this.getDate(date));return this.getMonth(newDate)!=((this.getMonth(date)+months)%12+12)%12&&(newDate=this._createDateWithOverflow(this.getYear(newDate),this.getMonth(newDate),0)),newDate}addCalendarDays(date,days){return this._createDateWithOverflow(this.getYear(date),this.getMonth(date),this.getDate(date)+days)}toIso8601(date){return[date.getUTCFullYear(),this._2digit(date.getUTCMonth()+1),this._2digit(date.getUTCDate())].join("-")}deserialize(value){if("string"==typeof value){if(!value)return null;if(ISO_8601_REGEX.test(value)){let date=new Date(value);if(this.isValid(date))return date}}return super.deserialize(value)}isDateInstance(obj){return obj instanceof Date}isValid(date){return!isNaN(date.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(year,month,date){const d=new Date;return d.setFullYear(year,month,date),d.setHours(0,0,0,0),d}_2digit(n){return("00"+n).slice(-2)}_format(dtf,date){const d=new Date;return d.setUTCFullYear(date.getFullYear(),date.getMonth(),date.getDate()),d.setUTCHours(date.getHours(),date.getMinutes(),date.getSeconds(),date.getMilliseconds()),dtf.format(d)}}__name(NativeDateAdapter,"NativeDateAdapter"),NativeDateAdapter.\u0275fac=__name(function(t){return new(t||NativeDateAdapter)(core.LFG(MAT_DATE_LOCALE,8),core.LFG(fesm2015_platform.t4))},"NativeDateAdapter_Factory"),NativeDateAdapter.\u0275prov=core.Yz7({token:NativeDateAdapter,factory:NativeDateAdapter.\u0275fac});class NativeDateModule{}__name(NativeDateModule,"NativeDateModule"),NativeDateModule.\u0275fac=__name(function(t){return new(t||NativeDateModule)},"NativeDateModule_Factory"),NativeDateModule.\u0275mod=core.oAB({type:NativeDateModule}),NativeDateModule.\u0275inj=core.cJS({providers:[{provide:DateAdapter,useClass:NativeDateAdapter}]});class MatNativeDateModule{}__name(MatNativeDateModule,"MatNativeDateModule"),MatNativeDateModule.\u0275fac=__name(function(t){return new(t||MatNativeDateModule)},"MatNativeDateModule_Factory"),MatNativeDateModule.\u0275mod=core.oAB({type:MatNativeDateModule}),MatNativeDateModule.\u0275inj=core.cJS({providers:[{provide:MAT_DATE_FORMATS,useValue:{parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}}}],imports:[NativeDateModule]});class ShowOnDirtyErrorStateMatcher{isErrorState(control,form){return!!(control&&control.invalid&&(control.dirty||form&&form.submitted))}}__name(ShowOnDirtyErrorStateMatcher,"ShowOnDirtyErrorStateMatcher"),ShowOnDirtyErrorStateMatcher.\u0275fac=__name(function(t){return new(t||ShowOnDirtyErrorStateMatcher)},"ShowOnDirtyErrorStateMatcher_Factory"),ShowOnDirtyErrorStateMatcher.\u0275prov=core.Yz7({token:ShowOnDirtyErrorStateMatcher,factory:ShowOnDirtyErrorStateMatcher.\u0275fac});class ErrorStateMatcher{isErrorState(control,form){return!!(control&&control.invalid&&(control.touched||form&&form.submitted))}}__name(ErrorStateMatcher,"ErrorStateMatcher"),ErrorStateMatcher.\u0275fac=__name(function(t){return new(t||ErrorStateMatcher)},"ErrorStateMatcher_Factory"),ErrorStateMatcher.\u0275prov=core.Yz7({token:ErrorStateMatcher,factory:ErrorStateMatcher.\u0275fac,providedIn:"root"});class MatLine{}function setClass(element,className,isAdd){element.nativeElement.classList.toggle(className,isAdd)}__name(MatLine,"MatLine"),MatLine.\u0275fac=__name(function(t){return new(t||MatLine)},"MatLine_Factory"),MatLine.\u0275dir=core.lG2({type:MatLine,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),__name(function setLines(lines,element,prefix="mat"){lines.changes.pipe(startWith(lines)).subscribe(({length})=>{setClass(element,`${prefix}-2-line`,!1),setClass(element,`${prefix}-3-line`,!1),setClass(element,`${prefix}-multi-line`,!1),2===length||3===length?setClass(element,`${prefix}-${length}-line`,!0):length>3&&setClass(element,`${prefix}-multi-line`,!0)})},"setLines"),__name(setClass,"setClass");class MatLineModule{}__name(MatLineModule,"MatLineModule"),MatLineModule.\u0275fac=__name(function(t){return new(t||MatLineModule)},"MatLineModule_Factory"),MatLineModule.\u0275mod=core.oAB({type:MatLineModule}),MatLineModule.\u0275inj=core.cJS({imports:[MatCommonModule,MatCommonModule]});class RippleRef{constructor(_renderer,element,config,_animationForciblyDisabledThroughCss=!1){this._renderer=_renderer,this.element=element,this.config=config,this._animationForciblyDisabledThroughCss=_animationForciblyDisabledThroughCss,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}__name(RippleRef,"RippleRef");const defaultRippleAnimationConfig={enterDuration:225,exitDuration:150},passiveEventOptions=(0,fesm2015_platform.i$)({passive:!0}),pointerDownEvents=["mousedown","touchstart"],pointerUpEvents=["mouseup","mouseleave","touchend","touchcancel"];class RippleRenderer{constructor(_target,_ngZone,elementOrElementRef,platform2){this._target=_target,this._ngZone=_ngZone,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,platform2.isBrowser&&(this._containerElement=(0,coercion.fI)(elementOrElementRef))}fadeInRipple(x,y,config={}){const containerRect=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),animationConfig=Object.assign(Object.assign({},defaultRippleAnimationConfig),config.animation);config.centered&&(x=containerRect.left+containerRect.width/2,y=containerRect.top+containerRect.height/2);const radius=config.radius||distanceToFurthestCorner(x,y,containerRect),offsetX=x-containerRect.left,offsetY=y-containerRect.top,enterDuration=animationConfig.enterDuration,ripple=document.createElement("div");ripple.classList.add("mat-ripple-element"),ripple.style.left=offsetX-radius+"px",ripple.style.top=offsetY-radius+"px",ripple.style.height=2*radius+"px",ripple.style.width=2*radius+"px",null!=config.color&&(ripple.style.backgroundColor=config.color),ripple.style.transitionDuration=`${enterDuration}ms`,this._containerElement.appendChild(ripple);const computedStyles=window.getComputedStyle(ripple),userTransitionProperty=computedStyles.transitionProperty,userTransitionDuration=computedStyles.transitionDuration,animationForciblyDisabledThroughCss="none"===userTransitionProperty||"0s"===userTransitionDuration||"0s, 0s"===userTransitionDuration,rippleRef=new RippleRef(this,ripple,config,animationForciblyDisabledThroughCss);ripple.style.transform="scale3d(1, 1, 1)",rippleRef.state=0,config.persistent||(this._mostRecentTransientRipple=rippleRef);let eventListeners=null;return!animationForciblyDisabledThroughCss&&(enterDuration||animationConfig.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const onTransitionEnd=__name(()=>this._finishRippleTransition(rippleRef),"onTransitionEnd"),onTransitionCancel=__name(()=>this._destroyRipple(rippleRef),"onTransitionCancel");ripple.addEventListener("transitionend",onTransitionEnd),ripple.addEventListener("transitioncancel",onTransitionCancel),eventListeners={onTransitionEnd,onTransitionCancel}}),this._activeRipples.set(rippleRef,eventListeners),(animationForciblyDisabledThroughCss||!enterDuration)&&this._finishRippleTransition(rippleRef),rippleRef}fadeOutRipple(rippleRef){if(2===rippleRef.state||3===rippleRef.state)return;const rippleEl=rippleRef.element,animationConfig=Object.assign(Object.assign({},defaultRippleAnimationConfig),rippleRef.config.animation);rippleEl.style.transitionDuration=`${animationConfig.exitDuration}ms`,rippleEl.style.opacity="0",rippleRef.state=2,(rippleRef._animationForciblyDisabledThroughCss||!animationConfig.exitDuration)&&this._finishRippleTransition(rippleRef)}fadeOutAll(){this._getActiveRipples().forEach(ripple=>ripple.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(ripple=>{ripple.config.persistent||ripple.fadeOut()})}setupTriggerEvents(elementOrElementRef){const element=(0,coercion.fI)(elementOrElementRef);!element||element===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=element,this._registerEvents(pointerDownEvents))}handleEvent(event){"mousedown"===event.type?this._onMousedown(event):"touchstart"===event.type?this._onTouchStart(event):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(pointerUpEvents),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(rippleRef){0===rippleRef.state?this._startFadeOutTransition(rippleRef):2===rippleRef.state&&this._destroyRipple(rippleRef)}_startFadeOutTransition(rippleRef){const isMostRecentTransientRipple=rippleRef===this._mostRecentTransientRipple,{persistent}=rippleRef.config;rippleRef.state=1,!persistent&&(!isMostRecentTransientRipple||!this._isPointerDown)&&rippleRef.fadeOut()}_destroyRipple(rippleRef){var _a;const eventListeners=null!==(_a=this._activeRipples.get(rippleRef))&&void 0!==_a?_a:null;this._activeRipples.delete(rippleRef),this._activeRipples.size||(this._containerRect=null),rippleRef===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),rippleRef.state=3,null!==eventListeners&&(rippleRef.element.removeEventListener("transitionend",eventListeners.onTransitionEnd),rippleRef.element.removeEventListener("transitioncancel",eventListeners.onTransitionCancel)),rippleRef.element.remove()}_onMousedown(event){const isFakeMousedown=(0,a11y.X6)(event),isSyntheticEvent=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!isFakeMousedown&&!isSyntheticEvent&&(this._isPointerDown=!0,this.fadeInRipple(event.clientX,event.clientY,this._target.rippleConfig))}_onTouchStart(event){if(!this._target.rippleDisabled&&!(0,a11y.yG)(event)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const touches=event.changedTouches;for(let i=0;i<touches.length;i++)this.fadeInRipple(touches[i].clientX,touches[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._getActiveRipples().forEach(ripple=>{const isVisible=1===ripple.state||ripple.config.terminateOnPointerUp&&0===ripple.state;!ripple.config.persistent&&isVisible&&ripple.fadeOut()}))}_registerEvents(eventTypes){this._ngZone.runOutsideAngular(()=>{eventTypes.forEach(type=>{this._triggerElement.addEventListener(type,this,passiveEventOptions)})})}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){this._triggerElement&&(pointerDownEvents.forEach(type=>{this._triggerElement.removeEventListener(type,this,passiveEventOptions)}),this._pointerUpEventsRegistered&&pointerUpEvents.forEach(type=>{this._triggerElement.removeEventListener(type,this,passiveEventOptions)}))}}function distanceToFurthestCorner(x,y,rect){const distX=Math.max(Math.abs(x-rect.left),Math.abs(x-rect.right)),distY=Math.max(Math.abs(y-rect.top),Math.abs(y-rect.bottom));return Math.sqrt(distX*distX+distY*distY)}__name(RippleRenderer,"RippleRenderer"),__name(distanceToFurthestCorner,"distanceToFurthestCorner");const MAT_RIPPLE_GLOBAL_OPTIONS=new core.OlP("mat-ripple-global-options");class MatRipple{constructor(_elementRef,ngZone,platform2,globalOptions,_animationMode){this._elementRef=_elementRef,this._animationMode=_animationMode,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=globalOptions||{},this._rippleRenderer=new RippleRenderer(this,ngZone,_elementRef,platform2)}get disabled(){return this._disabled}set disabled(value){value&&this.fadeOutAllNonPersistent(),this._disabled=value,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(trigger){this._trigger=trigger,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(configOrX,y=0,config){return"number"==typeof configOrX?this._rippleRenderer.fadeInRipple(configOrX,y,Object.assign(Object.assign({},this.rippleConfig),config)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),configOrX))}}__name(MatRipple,"MatRipple"),MatRipple.\u0275fac=__name(function(t){return new(t||MatRipple)(core.Y36(core.SBq),core.Y36(core.R0b),core.Y36(fesm2015_platform.t4),core.Y36(MAT_RIPPLE_GLOBAL_OPTIONS,8),core.Y36(core.QbO,8))},"MatRipple_Factory"),MatRipple.\u0275dir=core.lG2({type:MatRipple,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("mat-ripple-unbounded",ctx.unbounded)},"MatRipple_HostBindings"),inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]});class MatRippleModule{}__name(MatRippleModule,"MatRippleModule"),MatRippleModule.\u0275fac=__name(function(t){return new(t||MatRippleModule)},"MatRippleModule_Factory"),MatRippleModule.\u0275mod=core.oAB({type:MatRippleModule}),MatRippleModule.\u0275inj=core.cJS({imports:[MatCommonModule,MatCommonModule]});class MatPseudoCheckbox{constructor(_animationMode){this._animationMode=_animationMode,this.state="unchecked",this.disabled=!1}}__name(MatPseudoCheckbox,"MatPseudoCheckbox"),MatPseudoCheckbox.\u0275fac=__name(function(t){return new(t||MatPseudoCheckbox)(core.Y36(core.QbO,8))},"MatPseudoCheckbox_Factory"),MatPseudoCheckbox.\u0275cmp=core.Xpm({type:MatPseudoCheckbox,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:8,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("mat-pseudo-checkbox-indeterminate","indeterminate"===ctx.state)("mat-pseudo-checkbox-checked","checked"===ctx.state)("mat-pseudo-checkbox-disabled",ctx.disabled)("_mat-animation-noopable","NoopAnimations"===ctx._animationMode)},"MatPseudoCheckbox_HostBindings"),inputs:{state:"state",disabled:"disabled"},decls:0,vars:0,template:__name(function(rf,ctx){},"MatPseudoCheckbox_Template"),styles:['.mat-pseudo-checkbox{width:16px;height:16px;border:2px solid;border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox.mat-pseudo-checkbox-indeterminate{border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{top:5px;left:1px;width:10px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{top:2.4px;left:1px;width:8px;height:3px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}'],encapsulation:2,changeDetection:0});class MatPseudoCheckboxModule{}__name(MatPseudoCheckboxModule,"MatPseudoCheckboxModule"),MatPseudoCheckboxModule.\u0275fac=__name(function(t){return new(t||MatPseudoCheckboxModule)},"MatPseudoCheckboxModule_Factory"),MatPseudoCheckboxModule.\u0275mod=core.oAB({type:MatPseudoCheckboxModule}),MatPseudoCheckboxModule.\u0275inj=core.cJS({imports:[MatCommonModule]});const MAT_OPTION_PARENT_COMPONENT=new core.OlP("MAT_OPTION_PARENT_COMPONENT"),_MatOptgroupMixinBase=mixinDisabled(class{});let _uniqueOptgroupIdCounter=0;class _MatOptgroupBase extends _MatOptgroupMixinBase{constructor(parent){var _a;super(),this._labelId="mat-optgroup-label-"+_uniqueOptgroupIdCounter++,this._inert=null!==(_a=null==parent?void 0:parent.inertGroups)&&void 0!==_a&&_a}}__name(_MatOptgroupBase,"_MatOptgroupBase"),_MatOptgroupBase.\u0275fac=__name(function(t){return new(t||_MatOptgroupBase)(core.Y36(MAT_OPTION_PARENT_COMPONENT,8))},"_MatOptgroupBase_Factory"),_MatOptgroupBase.\u0275dir=core.lG2({type:_MatOptgroupBase,inputs:{label:"label"},features:[core.qOj]});const MAT_OPTGROUP=new core.OlP("MatOptgroup");class MatOptgroup extends _MatOptgroupBase{}__name(MatOptgroup,"MatOptgroup"),MatOptgroup.\u0275fac=function(){let \u0275MatOptgroup_BaseFactory;return __name(function(t){return(\u0275MatOptgroup_BaseFactory||(\u0275MatOptgroup_BaseFactory=core.n5z(MatOptgroup)))(t||MatOptgroup)},"MatOptgroup_Factory")}(),MatOptgroup.\u0275cmp=core.Xpm({type:MatOptgroup,selectors:[["mat-optgroup"]],hostAttrs:[1,"mat-optgroup"],hostVars:5,hostBindings:__name(function(rf,ctx){2&rf&&(core.uIk("role",ctx._inert?null:"group")("aria-disabled",ctx._inert?null:ctx.disabled.toString())("aria-labelledby",ctx._inert?null:ctx._labelId),core.ekj("mat-optgroup-disabled",ctx.disabled))},"MatOptgroup_HostBindings"),inputs:{disabled:"disabled"},exportAs:["matOptgroup"],features:[core._Bn([{provide:MAT_OPTGROUP,useExisting:MatOptgroup}]),core.qOj],ngContentSelectors:["*","mat-option, ng-container"],decls:4,vars:2,consts:[["aria-hidden","true",1,"mat-optgroup-label",3,"id"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(core_c0),core.TgZ(0,"span",0),core._uU(1),core.Hsn(2),core.qZA(),core.Hsn(3,1)),2&rf&&(core.Q6J("id",ctx._labelId),core.xp6(1),core.hij("",ctx.label," "))},"MatOptgroup_Template"),styles:[".mat-optgroup-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup-label[disabled]{cursor:default}[dir=rtl] .mat-optgroup-label{text-align:right}.mat-optgroup-label .mat-icon{margin-right:16px;vertical-align:middle}.mat-optgroup-label .mat-icon svg{vertical-align:top}[dir=rtl] .mat-optgroup-label .mat-icon{margin-left:16px;margin-right:0}"],encapsulation:2,changeDetection:0});let _uniqueIdCounter=0;class MatOptionSelectionChange{constructor(source,isUserInput=!1){this.source=source,this.isUserInput=isUserInput}}__name(MatOptionSelectionChange,"MatOptionSelectionChange");class _MatOptionBase{constructor(_element,_changeDetectorRef,_parent,group){this._element=_element,this._changeDetectorRef=_changeDetectorRef,this._parent=_parent,this.group=group,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id="mat-option-"+_uniqueIdCounter++,this.onSelectionChange=new core.vpe,this._stateChanges=new cjs.Subject}get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(value){this._disabled=(0,coercion.Ig)(value)}get disableRipple(){return!(!this._parent||!this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._getHostElement().textContent||"").trim()}select(){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}deselect(){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent())}focus(_origin,options){const element=this._getHostElement();"function"==typeof element.focus&&element.focus(options)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(event){(event.keyCode===keycodes.K5||event.keyCode===keycodes.L_)&&!(0,keycodes.Vb)(event)&&(this._selectViaInteraction(),event.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=!this.multiple||!this._selected,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getAriaSelected(){return this.selected||!this.multiple&&null}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){const viewValue=this.viewValue;viewValue!==this._mostRecentViewValue&&(this._mostRecentViewValue=viewValue,this._stateChanges.next())}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(isUserInput=!1){this.onSelectionChange.emit(new MatOptionSelectionChange(this,isUserInput))}}__name(_MatOptionBase,"_MatOptionBase"),_MatOptionBase.\u0275fac=__name(function(t){core.$Z()},"_MatOptionBase_Factory"),_MatOptionBase.\u0275dir=core.lG2({type:_MatOptionBase,inputs:{value:"value",id:"id",disabled:"disabled"},outputs:{onSelectionChange:"onSelectionChange"}});class MatOption extends _MatOptionBase{constructor(element,changeDetectorRef,parent,group){super(element,changeDetectorRef,parent,group)}}__name(MatOption,"MatOption"),MatOption.\u0275fac=__name(function(t){return new(t||MatOption)(core.Y36(core.SBq),core.Y36(core.sBO),core.Y36(MAT_OPTION_PARENT_COMPONENT,8),core.Y36(MAT_OPTGROUP,8))},"MatOption_Factory"),MatOption.\u0275cmp=core.Xpm({type:MatOption,selectors:[["mat-option"]],hostAttrs:["role","option",1,"mat-option","mat-focus-indicator"],hostVars:12,hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("click",__name(function(){return ctx._selectViaInteraction()},"MatOption_click_HostBindingHandler"))("keydown",__name(function($event){return ctx._handleKeydown($event)},"MatOption_keydown_HostBindingHandler")),2&rf&&(core.Ikx("id",ctx.id),core.uIk("tabindex",ctx._getTabIndex())("aria-selected",ctx._getAriaSelected())("aria-disabled",ctx.disabled.toString()),core.ekj("mat-selected",ctx.selected)("mat-option-multiple",ctx.multiple)("mat-active",ctx.active)("mat-option-disabled",ctx.disabled))},"MatOption_HostBindings"),exportAs:["matOption"],features:[core.qOj],ngContentSelectors:["*"],decls:5,vars:4,consts:[["class","mat-option-pseudo-checkbox",3,"state","disabled",4,"ngIf"],[1,"mat-option-text"],["class","cdk-visually-hidden",4,"ngIf"],["mat-ripple","",1,"mat-option-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mat-option-pseudo-checkbox",3,"state","disabled"],[1,"cdk-visually-hidden"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.YNc(0,MatOption_mat_pseudo_checkbox_0_Template,1,2,"mat-pseudo-checkbox",0),core.TgZ(1,"span",1),core.Hsn(2),core.qZA(),core.YNc(3,MatOption_span_3_Template,2,1,"span",2),core._UZ(4,"div",3)),2&rf&&(core.Q6J("ngIf",ctx.multiple),core.xp6(3),core.Q6J("ngIf",ctx.group&&ctx.group._inert),core.xp6(1),core.Q6J("matRippleTrigger",ctx._getHostElement())("matRippleDisabled",ctx.disabled||ctx.disableRipple))},"MatOption_Template"),dependencies:[MatRipple,common.O5,MatPseudoCheckbox],styles:['.mat-option{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;line-height:48px;height:48px;padding:0 16px;text-align:left;text-decoration:none;max-width:100%;position:relative;cursor:pointer;outline:none;display:flex;flex-direction:row;max-width:100%;box-sizing:border-box;align-items:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-option[disabled]{cursor:default}[dir=rtl] .mat-option{text-align:right}.mat-option .mat-icon{margin-right:16px;vertical-align:middle}.mat-option .mat-icon svg{vertical-align:top}[dir=rtl] .mat-option .mat-icon{margin-left:16px;margin-right:0}.mat-option[aria-disabled=true]{-webkit-user-select:none;user-select:none;cursor:default}.mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:32px}[dir=rtl] .mat-optgroup .mat-option:not(.mat-option-multiple){padding-left:16px;padding-right:32px}.mat-option.mat-active::before{content:""}.cdk-high-contrast-active .mat-option[aria-disabled=true]{opacity:.5}.cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-option.mat-selected:not(.mat-option-multiple)::after{right:auto;left:16px}.mat-option-text{display:inline-block;flex-grow:1;overflow:hidden;text-overflow:ellipsis}.mat-option .mat-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-option-pseudo-checkbox{margin-right:8px}[dir=rtl] .mat-option-pseudo-checkbox{margin-left:8px;margin-right:0}'],encapsulation:2,changeDetection:0}),__name(function _countGroupLabelsBeforeOption(optionIndex,options,optionGroups){if(optionGroups.length){let optionsArray=options.toArray(),groups=optionGroups.toArray(),groupCounter=0;for(let i=0;i<optionIndex+1;i++)optionsArray[i].group&&optionsArray[i].group===groups[groupCounter]&&groupCounter++;return groupCounter}return 0},"_countGroupLabelsBeforeOption"),__name(function _getOptionScrollPosition(optionOffset,optionHeight,currentScrollPosition,panelHeight){return optionOffset<currentScrollPosition?optionOffset:optionOffset+optionHeight>currentScrollPosition+panelHeight?Math.max(0,optionOffset-panelHeight+optionHeight):currentScrollPosition},"_getOptionScrollPosition");class MatOptionModule{}__name(MatOptionModule,"MatOptionModule"),MatOptionModule.\u0275fac=__name(function(t){return new(t||MatOptionModule)},"MatOptionModule_Factory"),MatOptionModule.\u0275mod=core.oAB({type:MatOptionModule}),MatOptionModule.\u0275inj=core.cJS({imports:[MatRippleModule,common.ez,MatCommonModule,MatPseudoCheckboxModule]});const button_c0=["mat-button",""],button_c1=["*"],BUTTON_HOST_ATTRIBUTES=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],_MatButtonBase=mixinColor(mixinDisabled(mixinDisableRipple(class{constructor(_elementRef){this._elementRef=_elementRef}})));class MatButton extends _MatButtonBase{constructor(elementRef,_focusMonitor,_animationMode){super(elementRef),this._focusMonitor=_focusMonitor,this._animationMode=_animationMode,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const attr of BUTTON_HOST_ATTRIBUTES)this._hasHostAttributes(attr)&&this._getHostElement().classList.add(attr);elementRef.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(origin,options){origin?this._focusMonitor.focusVia(this._getHostElement(),origin,options):this._getHostElement().focus(options)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...attributes){return attributes.some(attribute=>this._getHostElement().hasAttribute(attribute))}}__name(MatButton,"MatButton"),MatButton.\u0275fac=__name(function(t){return new(t||MatButton)(core.Y36(core.SBq),core.Y36(a11y.tE),core.Y36(core.QbO,8))},"MatButton_Factory"),MatButton.\u0275cmp=core.Xpm({type:MatButton,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(MatRipple,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.ripple=_t.first)}},"MatButton_Query"),hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:__name(function(rf,ctx){2&rf&&(core.uIk("disabled",ctx.disabled||null),core.ekj("_mat-animation-noopable","NoopAnimations"===ctx._animationMode)("mat-button-disabled",ctx.disabled))},"MatButton_HostBindings"),inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[core.qOj],attrs:button_c0,ngContentSelectors:button_c1,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.TgZ(0,"span",0),core.Hsn(1),core.qZA(),core._UZ(2,"span",1)(3,"span",2)),2&rf&&(core.xp6(2),core.ekj("mat-button-ripple-round",ctx.isRoundButton||ctx.isIconButton),core.Q6J("matRippleDisabled",ctx._isRippleDisabled())("matRippleCentered",ctx.isIconButton)("matRippleTrigger",ctx._getHostElement()))},"MatButton_Template"),dependencies:[MatRipple],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0});class MatAnchor extends MatButton{constructor(focusMonitor,elementRef,animationMode,_ngZone){super(elementRef,focusMonitor,animationMode),this._ngZone=_ngZone,this._haltDisabledEvents=event=>{this.disabled&&(event.preventDefault(),event.stopImmediatePropagation())}}ngAfterViewInit(){super.ngAfterViewInit(),this._ngZone?this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}):this._elementRef.nativeElement.addEventListener("click",this._haltDisabledEvents)}ngOnDestroy(){super.ngOnDestroy(),this._elementRef.nativeElement.removeEventListener("click",this._haltDisabledEvents)}}__name(MatAnchor,"MatAnchor"),MatAnchor.\u0275fac=__name(function(t){return new(t||MatAnchor)(core.Y36(a11y.tE),core.Y36(core.SBq),core.Y36(core.QbO,8),core.Y36(core.R0b,8))},"MatAnchor_Factory"),MatAnchor.\u0275cmp=core.Xpm({type:MatAnchor,selectors:[["a","mat-button",""],["a","mat-raised-button",""],["a","mat-icon-button",""],["a","mat-fab",""],["a","mat-mini-fab",""],["a","mat-stroked-button",""],["a","mat-flat-button",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:7,hostBindings:__name(function(rf,ctx){2&rf&&(core.uIk("tabindex",ctx.disabled?-1:ctx.tabIndex)("disabled",ctx.disabled||null)("aria-disabled",ctx.disabled.toString()),core.ekj("_mat-animation-noopable","NoopAnimations"===ctx._animationMode)("mat-button-disabled",ctx.disabled))},"MatAnchor_HostBindings"),inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matButton","matAnchor"],features:[core.qOj],attrs:button_c0,ngContentSelectors:button_c1,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.TgZ(0,"span",0),core.Hsn(1),core.qZA(),core._UZ(2,"span",1)(3,"span",2)),2&rf&&(core.xp6(2),core.ekj("mat-button-ripple-round",ctx.isRoundButton||ctx.isIconButton),core.Q6J("matRippleDisabled",ctx._isRippleDisabled())("matRippleCentered",ctx.isIconButton)("matRippleTrigger",ctx._getHostElement()))},"MatAnchor_Template"),dependencies:[MatRipple],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}.mat-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.mat-flat-button::before,.mat-raised-button::before,.mat-fab::before,.mat-mini-fab::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-stroked-button::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}"],encapsulation:2,changeDetection:0});class MatButtonModule{}__name(MatButtonModule,"MatButtonModule"),MatButtonModule.\u0275fac=__name(function(t){return new(t||MatButtonModule)},"MatButtonModule_Factory"),MatButtonModule.\u0275mod=core.oAB({type:MatButtonModule}),MatButtonModule.\u0275inj=core.cJS({imports:[MatRippleModule,MatCommonModule,MatCommonModule]});const toolbar_c0=["*",[["mat-toolbar-row"]]],_MatToolbarBase=mixinColor(class{constructor(_elementRef){this._elementRef=_elementRef}});class MatToolbarRow{}__name(MatToolbarRow,"MatToolbarRow"),MatToolbarRow.\u0275fac=__name(function(t){return new(t||MatToolbarRow)},"MatToolbarRow_Factory"),MatToolbarRow.\u0275dir=core.lG2({type:MatToolbarRow,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]});class MatToolbar extends _MatToolbarBase{constructor(elementRef,_platform,document2){super(elementRef),this._platform=_platform,this._document=document2}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){this._toolbarRows.length}}__name(MatToolbar,"MatToolbar"),MatToolbar.\u0275fac=__name(function(t){return new(t||MatToolbar)(core.Y36(core.SBq),core.Y36(fesm2015_platform.t4),core.Y36(common.K0))},"MatToolbar_Factory"),MatToolbar.\u0275cmp=core.Xpm({type:MatToolbar,selectors:[["mat-toolbar"]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&core.Suo(dirIndex,MatToolbarRow,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._toolbarRows=_t)}},"MatToolbar_ContentQueries"),hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("mat-toolbar-multiple-rows",ctx._toolbarRows.length>0)("mat-toolbar-single-row",0===ctx._toolbarRows.length)},"MatToolbar_HostBindings"),inputs:{color:"color"},exportAs:["matToolbar"],features:[core.qOj],ngContentSelectors:["*","mat-toolbar-row"],decls:2,vars:0,template:__name(function(rf,ctx){1&rf&&(core.F$t(toolbar_c0),core.Hsn(0),core.Hsn(1,1))},"MatToolbar_Template"),styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}"],encapsulation:2,changeDetection:0}),__name(function throwToolbarMixedModesError(){throw Error("MatToolbar: Attempting to combine different toolbar modes. Either specify multiple `<mat-toolbar-row>` elements explicitly or just place content inside of a `<mat-toolbar>` for a single row.")},"throwToolbarMixedModesError");class MatToolbarModule{}__name(MatToolbarModule,"MatToolbarModule"),MatToolbarModule.\u0275fac=__name(function(t){return new(t||MatToolbarModule)},"MatToolbarModule_Factory"),MatToolbarModule.\u0275mod=core.oAB({type:MatToolbarModule}),MatToolbarModule.\u0275inj=core.cJS({imports:[MatCommonModule,MatCommonModule]});var observers=__webpack_require__(17144),animations=__webpack_require__(41777);const form_field_c0=["connectionContainer"],form_field_c1=["inputContainer"],form_field_c2=["label"];function MatFormField_ng_container_3_Template(rf,ctx){1&rf&&(core.ynx(0),core.TgZ(1,"div",14),core._UZ(2,"div",15)(3,"div",16)(4,"div",17),core.qZA(),core.TgZ(5,"div",18),core._UZ(6,"div",15)(7,"div",16)(8,"div",17),core.qZA(),core.BQk())}function MatFormField_div_4_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.TgZ(0,"div",19),core.NdJ("cdkObserveContent",__name(function(){core.CHM(_r10);const ctx_r9=core.oxw();return core.KtG(ctx_r9.updateOutlineGap())},"MatFormField_div_4_Template_div_cdkObserveContent_0_listener")),core.Hsn(1,1),core.qZA()}if(2&rf){const ctx_r2=core.oxw();core.Q6J("cdkObserveContentDisabled","outline"!=ctx_r2.appearance)}}function MatFormField_label_9_ng_container_2_Template(rf,ctx){if(1&rf&&(core.ynx(0),core.Hsn(1,2),core.TgZ(2,"span"),core._uU(3),core.qZA(),core.BQk()),2&rf){const ctx_r12=core.oxw(2);core.xp6(3),core.Oqu(ctx_r12._control.placeholder)}}function MatFormField_label_9_ng_content_3_Template(rf,ctx){1&rf&&core.Hsn(0,3,["*ngSwitchCase","true"])}function MatFormField_label_9_span_4_Template(rf,ctx){1&rf&&(core.TgZ(0,"span",23),core._uU(1," *"),core.qZA())}function MatFormField_label_9_Template(rf,ctx){if(1&rf){const _r16=core.EpF();core.TgZ(0,"label",20,21),core.NdJ("cdkObserveContent",__name(function(){core.CHM(_r16);const ctx_r15=core.oxw();return core.KtG(ctx_r15.updateOutlineGap())},"MatFormField_label_9_Template_label_cdkObserveContent_0_listener")),core.YNc(2,MatFormField_label_9_ng_container_2_Template,4,1,"ng-container",12),core.YNc(3,MatFormField_label_9_ng_content_3_Template,1,0,"ng-content",12),core.YNc(4,MatFormField_label_9_span_4_Template,2,0,"span",22),core.qZA()}if(2&rf){const ctx_r4=core.oxw();core.ekj("mat-empty",ctx_r4._control.empty&&!ctx_r4._shouldAlwaysFloat())("mat-form-field-empty",ctx_r4._control.empty&&!ctx_r4._shouldAlwaysFloat())("mat-accent","accent"==ctx_r4.color)("mat-warn","warn"==ctx_r4.color),core.Q6J("cdkObserveContentDisabled","outline"!=ctx_r4.appearance)("id",ctx_r4._labelId)("ngSwitch",ctx_r4._hasLabel()),core.uIk("for",ctx_r4._control.id)("aria-owns",ctx_r4._control.id),core.xp6(2),core.Q6J("ngSwitchCase",!1),core.xp6(1),core.Q6J("ngSwitchCase",!0),core.xp6(1),core.Q6J("ngIf",!ctx_r4.hideRequiredMarker&&ctx_r4._control.required&&!ctx_r4._control.disabled)}}function MatFormField_div_10_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",24),core.Hsn(1,4),core.qZA())}function MatFormField_div_11_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",25),core._UZ(1,"span",26),core.qZA()),2&rf){const ctx_r6=core.oxw();core.xp6(1),core.ekj("mat-accent","accent"==ctx_r6.color)("mat-warn","warn"==ctx_r6.color)}}function MatFormField_div_13_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div"),core.Hsn(1,5),core.qZA()),2&rf){const ctx_r7=core.oxw();core.Q6J("@transitionMessages",ctx_r7._subscriptAnimationState)}}function MatFormField_div_14_div_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",30),core._uU(1),core.qZA()),2&rf){const ctx_r17=core.oxw(2);core.Q6J("id",ctx_r17._hintLabelId),core.xp6(1),core.Oqu(ctx_r17.hintLabel)}}function MatFormField_div_14_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"div",27),core.YNc(1,MatFormField_div_14_div_1_Template,2,2,"div",28),core.Hsn(2,6),core._UZ(3,"div",29),core.Hsn(4,7),core.qZA()),2&rf){const ctx_r8=core.oxw();core.Q6J("@transitionMessages",ctx_r8._subscriptAnimationState),core.xp6(1),core.Q6J("ngIf",ctx_r8.hintLabel)}}__name(MatFormField_ng_container_3_Template,"MatFormField_ng_container_3_Template"),__name(MatFormField_div_4_Template,"MatFormField_div_4_Template"),__name(MatFormField_label_9_ng_container_2_Template,"MatFormField_label_9_ng_container_2_Template"),__name(MatFormField_label_9_ng_content_3_Template,"MatFormField_label_9_ng_content_3_Template"),__name(MatFormField_label_9_span_4_Template,"MatFormField_label_9_span_4_Template"),__name(MatFormField_label_9_Template,"MatFormField_label_9_Template"),__name(MatFormField_div_10_Template,"MatFormField_div_10_Template"),__name(MatFormField_div_11_Template,"MatFormField_div_11_Template"),__name(MatFormField_div_13_Template,"MatFormField_div_13_Template"),__name(MatFormField_div_14_div_1_Template,"MatFormField_div_14_div_1_Template"),__name(MatFormField_div_14_Template,"MatFormField_div_14_Template");const form_field_c3=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]];let nextUniqueId$2=0;const MAT_ERROR=new core.OlP("MatError");class MatError{constructor(ariaLive,elementRef){this.id="mat-error-"+nextUniqueId$2++,ariaLive||elementRef.nativeElement.setAttribute("aria-live","polite")}}__name(MatError,"MatError"),MatError.\u0275fac=__name(function(t){return new(t||MatError)(core.$8M("aria-live"),core.Y36(core.SBq))},"MatError_Factory"),MatError.\u0275dir=core.lG2({type:MatError,selectors:[["mat-error"]],hostAttrs:["aria-atomic","true",1,"mat-error"],hostVars:1,hostBindings:__name(function(rf,ctx){2&rf&&core.uIk("id",ctx.id)},"MatError_HostBindings"),inputs:{id:"id"},features:[core._Bn([{provide:MAT_ERROR,useExisting:MatError}])]});const matFormFieldAnimations={transitionMessages:(0,animations.X$)("transitionMessages",[(0,animations.SB)("enter",(0,animations.oB)({opacity:1,transform:"translateY(0%)"})),(0,animations.eR)("void => enter",[(0,animations.oB)({opacity:0,transform:"translateY(-5px)"}),(0,animations.jt)("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};class MatFormFieldControl{}__name(MatFormFieldControl,"MatFormFieldControl"),MatFormFieldControl.\u0275fac=__name(function(t){return new(t||MatFormFieldControl)},"MatFormFieldControl_Factory"),MatFormFieldControl.\u0275dir=core.lG2({type:MatFormFieldControl}),__name(function getMatFormFieldPlaceholderConflictError(){return Error("Placeholder attribute and child element were both specified.")},"getMatFormFieldPlaceholderConflictError"),__name(function getMatFormFieldDuplicatedHintError(align){return Error(`A hint was already declared for 'align="${align}"'.`)},"getMatFormFieldDuplicatedHintError"),__name(function getMatFormFieldMissingControlError(){return Error("mat-form-field must contain a MatFormFieldControl.")},"getMatFormFieldMissingControlError");let nextUniqueId$1=0;const _MAT_HINT=new core.OlP("MatHint");class MatHint{constructor(){this.align="start",this.id="mat-hint-"+nextUniqueId$1++}}__name(MatHint,"MatHint"),MatHint.\u0275fac=__name(function(t){return new(t||MatHint)},"MatHint_Factory"),MatHint.\u0275dir=core.lG2({type:MatHint,selectors:[["mat-hint"]],hostAttrs:[1,"mat-hint"],hostVars:4,hostBindings:__name(function(rf,ctx){2&rf&&(core.uIk("id",ctx.id)("align",null),core.ekj("mat-form-field-hint-end","end"===ctx.align))},"MatHint_HostBindings"),inputs:{align:"align",id:"id"},features:[core._Bn([{provide:_MAT_HINT,useExisting:MatHint}])]});class MatLabel{}__name(MatLabel,"MatLabel"),MatLabel.\u0275fac=__name(function(t){return new(t||MatLabel)},"MatLabel_Factory"),MatLabel.\u0275dir=core.lG2({type:MatLabel,selectors:[["mat-label"]]});class MatPlaceholder{}__name(MatPlaceholder,"MatPlaceholder"),MatPlaceholder.\u0275fac=__name(function(t){return new(t||MatPlaceholder)},"MatPlaceholder_Factory"),MatPlaceholder.\u0275dir=core.lG2({type:MatPlaceholder,selectors:[["mat-placeholder"]]});const MAT_PREFIX=new core.OlP("MatPrefix");class MatPrefix{}__name(MatPrefix,"MatPrefix"),MatPrefix.\u0275fac=__name(function(t){return new(t||MatPrefix)},"MatPrefix_Factory"),MatPrefix.\u0275dir=core.lG2({type:MatPrefix,selectors:[["","matPrefix",""]],features:[core._Bn([{provide:MAT_PREFIX,useExisting:MatPrefix}])]});const MAT_SUFFIX=new core.OlP("MatSuffix");class MatSuffix{}__name(MatSuffix,"MatSuffix"),MatSuffix.\u0275fac=__name(function(t){return new(t||MatSuffix)},"MatSuffix_Factory"),MatSuffix.\u0275dir=core.lG2({type:MatSuffix,selectors:[["","matSuffix",""]],features:[core._Bn([{provide:MAT_SUFFIX,useExisting:MatSuffix}])]});let nextUniqueId=0;const _MatFormFieldBase=mixinColor(class{constructor(_elementRef){this._elementRef=_elementRef}},"primary"),MAT_FORM_FIELD_DEFAULT_OPTIONS=new core.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS"),MAT_FORM_FIELD=new core.OlP("MatFormField");class MatFormField extends _MatFormFieldBase{constructor(elementRef,_changeDetectorRef,_dir,_defaults,_platform,_ngZone,_animationMode){super(elementRef),this._changeDetectorRef=_changeDetectorRef,this._dir=_dir,this._defaults=_defaults,this._platform=_platform,this._ngZone=_ngZone,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new cjs.Subject,this._hideRequiredMarker=!1,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+nextUniqueId++,this._labelId="mat-form-field-label-"+nextUniqueId++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==_animationMode,this.appearance=(null==_defaults?void 0:_defaults.appearance)||"legacy",_defaults&&(this._hideRequiredMarker=Boolean(_defaults.hideRequiredMarker),_defaults.color&&(this.color=this.defaultColor=_defaults.color))}get appearance(){return this._appearance}set appearance(value){var _a;const oldValue=this._appearance;this._appearance=value||(null===(_a=this._defaults)||void 0===_a?void 0:_a.appearance)||"legacy","outline"===this._appearance&&oldValue!==value&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(value){this._hideRequiredMarker=(0,coercion.Ig)(value)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(value){this._hintLabel=value,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(value){value!==this._floatLabel&&(this._floatLabel=value||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(value){this._explicitFormFieldControl=value}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const control=this._control;control.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${control.controlType}`),control.stateChanges.pipe((0,operators.O4)(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),control.ngControl&&control.ngControl.valueChanges&&control.ngControl.valueChanges.pipe((0,operators.Rs)(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,operators.Rs)(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),(0,cjs.merge)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe((0,operators.O4)(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe((0,operators.O4)(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe((0,operators.Rs)(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(prop){const control=this._control?this._control.ngControl:null;return control&&control[prop]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,(0,cjs.fromEvent)(this._label.nativeElement,"transitionend").pipe((0,operators.qn)(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){this._control.placeholder&&this._placeholderChild}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let ids=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&ids.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const startHint=this._hintChildren?this._hintChildren.find(hint=>"start"===hint.align):null,endHint=this._hintChildren?this._hintChildren.find(hint=>"end"===hint.align):null;startHint?ids.push(startHint.id):this._hintLabel&&ids.push(this._hintLabelId),endHint&&ids.push(endHint.id)}else this._errorChildren&&ids.push(...this._errorChildren.map(error=>error.id));this._control.setDescribedByIds(ids)}}_validateControlChild(){this._control}updateOutlineGap(){const labelEl=this._label?this._label.nativeElement:null,container=this._connectionContainerRef.nativeElement;if("outline"!==this.appearance||!this._platform.isBrowser)return;if(!labelEl||!labelEl.children.length||!labelEl.textContent.trim()){const gapElements=container.querySelectorAll(".mat-form-field-outline-start, .mat-form-field-outline-gap");for(let i=0;i<gapElements.length;i++)gapElements[i].style.width="0";return}if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let startWidth=0,gapWidth=0;const startEls=container.querySelectorAll(".mat-form-field-outline-start"),gapEls=container.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const containerRect=container.getBoundingClientRect();if(0===containerRect.width&&0===containerRect.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const containerStart=this._getStartEnd(containerRect),labelChildren=labelEl.children,labelStart=this._getStartEnd(labelChildren[0].getBoundingClientRect());let labelWidth=0;for(let i=0;i<labelChildren.length;i++)labelWidth+=labelChildren[i].offsetWidth;startWidth=Math.abs(labelStart-containerStart)-5,gapWidth=labelWidth>0?.75*labelWidth+10:0}for(let i=0;i<startEls.length;i++)startEls[i].style.width=`${startWidth}px`;for(let i=0;i<gapEls.length;i++)gapEls[i].style.width=`${gapWidth}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(rect){return this._dir&&"rtl"===this._dir.value?rect.right:rect.left}_isAttachedToDOM(){const element=this._elementRef.nativeElement;if(element.getRootNode){const rootNode=element.getRootNode();return rootNode&&rootNode!==element}return document.documentElement.contains(element)}}__name(MatFormField,"MatFormField"),MatFormField.\u0275fac=__name(function(t){return new(t||MatFormField)(core.Y36(core.SBq),core.Y36(core.sBO),core.Y36(Directionality,8),core.Y36(MAT_FORM_FIELD_DEFAULT_OPTIONS,8),core.Y36(fesm2015_platform.t4),core.Y36(core.R0b),core.Y36(core.QbO,8))},"MatFormField_Factory"),MatFormField.\u0275cmp=core.Xpm({type:MatFormField,selectors:[["mat-form-field"]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&(core.Suo(dirIndex,MatFormFieldControl,5),core.Suo(dirIndex,MatFormFieldControl,7),core.Suo(dirIndex,MatLabel,5),core.Suo(dirIndex,MatLabel,7),core.Suo(dirIndex,MatPlaceholder,5),core.Suo(dirIndex,MAT_ERROR,5),core.Suo(dirIndex,_MAT_HINT,5),core.Suo(dirIndex,MAT_PREFIX,5),core.Suo(dirIndex,MAT_SUFFIX,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._controlNonStatic=_t.first),core.iGM(_t=core.CRH())&&(ctx._controlStatic=_t.first),core.iGM(_t=core.CRH())&&(ctx._labelChildNonStatic=_t.first),core.iGM(_t=core.CRH())&&(ctx._labelChildStatic=_t.first),core.iGM(_t=core.CRH())&&(ctx._placeholderChild=_t.first),core.iGM(_t=core.CRH())&&(ctx._errorChildren=_t),core.iGM(_t=core.CRH())&&(ctx._hintChildren=_t),core.iGM(_t=core.CRH())&&(ctx._prefixChildren=_t),core.iGM(_t=core.CRH())&&(ctx._suffixChildren=_t)}},"MatFormField_ContentQueries"),viewQuery:__name(function(rf,ctx){if(1&rf&&(core.Gf(form_field_c0,7),core.Gf(form_field_c1,5),core.Gf(form_field_c2,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._connectionContainerRef=_t.first),core.iGM(_t=core.CRH())&&(ctx._inputContainerRef=_t.first),core.iGM(_t=core.CRH())&&(ctx._label=_t.first)}},"MatFormField_Query"),hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("mat-form-field-appearance-standard","standard"==ctx.appearance)("mat-form-field-appearance-fill","fill"==ctx.appearance)("mat-form-field-appearance-outline","outline"==ctx.appearance)("mat-form-field-appearance-legacy","legacy"==ctx.appearance)("mat-form-field-invalid",ctx._control.errorState)("mat-form-field-can-float",ctx._canLabelFloat())("mat-form-field-should-float",ctx._shouldLabelFloat())("mat-form-field-has-label",ctx._hasFloatingLabel())("mat-form-field-hide-placeholder",ctx._hideControlPlaceholder())("mat-form-field-disabled",ctx._control.disabled)("mat-form-field-autofilled",ctx._control.autofilled)("mat-focused",ctx._control.focused)("ng-untouched",ctx._shouldForward("untouched"))("ng-touched",ctx._shouldForward("touched"))("ng-pristine",ctx._shouldForward("pristine"))("ng-dirty",ctx._shouldForward("dirty"))("ng-valid",ctx._shouldForward("valid"))("ng-invalid",ctx._shouldForward("invalid"))("ng-pending",ctx._shouldForward("pending"))("_mat-animation-noopable",!ctx._animationsEnabled)},"MatFormField_HostBindings"),inputs:{color:"color",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel",floatLabel:"floatLabel"},exportAs:["matFormField"],features:[core._Bn([{provide:MAT_FORM_FIELD,useExisting:MatFormField}]),core.qOj],ngContentSelectors:["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix",3,"cdkObserveContentDisabled","cdkObserveContent"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(form_field_c3),core.TgZ(0,"div",0)(1,"div",1,2),core.NdJ("click",__name(function($event){return ctx._control.onContainerClick&&ctx._control.onContainerClick($event)},"MatFormField_Template_div_click_1_listener")),core.YNc(3,MatFormField_ng_container_3_Template,9,0,"ng-container",3),core.YNc(4,MatFormField_div_4_Template,2,1,"div",4),core.TgZ(5,"div",5,6),core.Hsn(7),core.TgZ(8,"span",7),core.YNc(9,MatFormField_label_9_Template,5,16,"label",8),core.qZA()(),core.YNc(10,MatFormField_div_10_Template,2,0,"div",9),core.qZA(),core.YNc(11,MatFormField_div_11_Template,2,4,"div",10),core.TgZ(12,"div",11),core.YNc(13,MatFormField_div_13_Template,2,1,"div",12),core.YNc(14,MatFormField_div_14_Template,5,2,"div",13),core.qZA()()),2&rf&&(core.xp6(3),core.Q6J("ngIf","outline"==ctx.appearance),core.xp6(1),core.Q6J("ngIf",ctx._prefixChildren.length),core.xp6(5),core.Q6J("ngIf",ctx._hasFloatingLabel()),core.xp6(1),core.Q6J("ngIf",ctx._suffixChildren.length),core.xp6(1),core.Q6J("ngIf","outline"!=ctx.appearance),core.xp6(1),core.Q6J("ngSwitch",ctx._getDisplayedMessages()),core.xp6(1),core.Q6J("ngSwitchCase","error"),core.xp6(1),core.Q6J("ngSwitchCase","hint"))},"MatFormField_Template"),dependencies:[common.O5,common.RF,common.n9,observers.wD],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.cdk-high-contrast-active .mat-form-field-disabled .mat-form-field-label{color:GrayText}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-form-field-flex{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}','.mat-input-element{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element:not([type=password])::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-input-element::placeholder{transition:none}._mat-animation-noopable .mat-input-element::-moz-placeholder{transition:none}._mat-animation-noopable .mat-input-element::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-input-element:-ms-input-placeholder{transition:none}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px)}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px;border-top-color:GrayText}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:rgba(0,0,0,0)}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-form-field-disabled .mat-form-field-outline{color:GrayText}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}"],encapsulation:2,data:{animation:[matFormFieldAnimations.transitionMessages]},changeDetection:0});class MatFormFieldModule{}__name(MatFormFieldModule,"MatFormFieldModule"),MatFormFieldModule.\u0275fac=__name(function(t){return new(t||MatFormFieldModule)},"MatFormFieldModule_Factory"),MatFormFieldModule.\u0275mod=core.oAB({type:MatFormFieldModule}),MatFormFieldModule.\u0275inj=core.cJS({imports:[common.ez,MatCommonModule,observers.Q8,MatCommonModule]});const slide_toggle_c0=["input"],slide_toggle_c1=__name(function(a0){return{enterDuration:a0}},"slide_toggle_c1"),MAT_SLIDE_TOGGLE_DEFAULT_OPTIONS=new core.OlP("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1})});let slide_toggle_nextUniqueId=0;const MAT_SLIDE_TOGGLE_VALUE_ACCESSOR={provide:fesm2015_forms.JU,useExisting:(0,core.Gpc)(()=>MatSlideToggle),multi:!0};class MatSlideToggleChange{constructor(source,checked){this.source=source,this.checked=checked}}__name(MatSlideToggleChange,"MatSlideToggleChange");const _MatSlideToggleMixinBase=mixinTabIndex(mixinColor(mixinDisableRipple(mixinDisabled(class{constructor(_elementRef){this._elementRef=_elementRef}}))));class _MatSlideToggleBase extends _MatSlideToggleMixinBase{constructor(elementRef,_focusMonitor,_changeDetectorRef,tabIndex,defaults2,animationMode,idPrefix){super(elementRef),this._focusMonitor=_focusMonitor,this._changeDetectorRef=_changeDetectorRef,this.defaults=defaults2,this._onChange=_=>{},this._onTouched=()=>{},this._required=!1,this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.change=new core.vpe,this.toggleChange=new core.vpe,this.tabIndex=parseInt(tabIndex)||0,this.color=this.defaultColor=defaults2.color||"accent",this._noopAnimations="NoopAnimations"===animationMode,this.id=this._uniqueId=`${idPrefix}${++slide_toggle_nextUniqueId}`}get required(){return this._required}set required(value){this._required=(0,coercion.Ig)(value)}get checked(){return this._checked}set checked(value){this._checked=(0,coercion.Ig)(value),this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(focusOrigin=>{"keyboard"===focusOrigin||"program"===focusOrigin?this._focused=!0:focusOrigin||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(value){this.checked=!!value}registerOnChange(fn){this._onChange=fn}registerOnTouched(fn){this._onTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}}__name(_MatSlideToggleBase,"_MatSlideToggleBase"),_MatSlideToggleBase.\u0275fac=__name(function(t){core.$Z()},"_MatSlideToggleBase_Factory"),_MatSlideToggleBase.\u0275dir=core.lG2({type:_MatSlideToggleBase,inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],ariaDescribedby:["aria-describedby","ariaDescribedby"],required:"required",checked:"checked"},outputs:{change:"change",toggleChange:"toggleChange"},features:[core.qOj]});class MatSlideToggle extends _MatSlideToggleBase{constructor(elementRef,focusMonitor,changeDetectorRef,tabIndex,defaults2,animationMode){super(elementRef,focusMonitor,changeDetectorRef,tabIndex,defaults2,animationMode,"mat-slide-toggle-")}_createChangeEvent(isChecked){return new MatSlideToggleChange(this,isChecked)}_onChangeEvent(event){event.stopPropagation(),this.toggleChange.emit(),this.defaults.disableToggleValue?this._inputElement.nativeElement.checked=this.checked:(this.checked=this._inputElement.nativeElement.checked,this._emitChangeEvent())}_onInputClick(event){event.stopPropagation()}focus(options,origin){origin?this._focusMonitor.focusVia(this._inputElement,origin,options):this._inputElement.nativeElement.focus(options)}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}}__name(MatSlideToggle,"MatSlideToggle"),MatSlideToggle.\u0275fac=__name(function(t){return new(t||MatSlideToggle)(core.Y36(core.SBq),core.Y36(a11y.tE),core.Y36(core.sBO),core.$8M("tabindex"),core.Y36(MAT_SLIDE_TOGGLE_DEFAULT_OPTIONS),core.Y36(core.QbO,8))},"MatSlideToggle_Factory"),MatSlideToggle.\u0275cmp=core.Xpm({type:MatSlideToggle,selectors:[["mat-slide-toggle"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(slide_toggle_c0,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._inputElement=_t.first)}},"MatSlideToggle_Query"),hostAttrs:[1,"mat-slide-toggle"],hostVars:13,hostBindings:__name(function(rf,ctx){2&rf&&(core.Ikx("id",ctx.id),core.uIk("tabindex",null)("aria-label",null)("aria-labelledby",null)("name",null),core.ekj("mat-checked",ctx.checked)("mat-disabled",ctx.disabled)("mat-slide-toggle-label-before","before"==ctx.labelPosition)("_mat-animation-noopable",ctx._noopAnimations))},"MatSlideToggle_HostBindings"),inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex"},exportAs:["matSlideToggle"],features:[core._Bn([MAT_SLIDE_TOGGLE_VALUE_ACCESSOR]),core.qOj],ngContentSelectors:["*"],decls:14,vars:20,consts:[[1,"mat-slide-toggle-label"],["label",""],[1,"mat-slide-toggle-bar"],["type","checkbox","role","switch",1,"mat-slide-toggle-input","cdk-visually-hidden",3,"id","required","tabIndex","checked","disabled","change","click"],["input",""],[1,"mat-slide-toggle-thumb-container"],[1,"mat-slide-toggle-thumb"],["mat-ripple","",1,"mat-slide-toggle-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered","matRippleRadius","matRippleAnimation"],[1,"mat-ripple-element","mat-slide-toggle-persistent-ripple"],[1,"mat-slide-toggle-content",3,"cdkObserveContent"],["labelContent",""],[2,"display","none"]],template:__name(function(rf,ctx){if(1&rf&&(core.F$t(),core.TgZ(0,"label",0,1)(2,"span",2)(3,"input",3,4),core.NdJ("change",__name(function($event){return ctx._onChangeEvent($event)},"MatSlideToggle_Template_input_change_3_listener"))("click",__name(function($event){return ctx._onInputClick($event)},"MatSlideToggle_Template_input_click_3_listener")),core.qZA(),core.TgZ(5,"span",5),core._UZ(6,"span",6),core.TgZ(7,"span",7),core._UZ(8,"span",8),core.qZA()()(),core.TgZ(9,"span",9,10),core.NdJ("cdkObserveContent",__name(function(){return ctx._onLabelTextChange()},"MatSlideToggle_Template_span_cdkObserveContent_9_listener")),core.TgZ(11,"span",11),core._uU(12,"\xa0"),core.qZA(),core.Hsn(13),core.qZA()()),2&rf){const _r0=core.MAs(1),_r2=core.MAs(10);core.uIk("for",ctx.inputId),core.xp6(2),core.ekj("mat-slide-toggle-bar-no-side-margin",!_r2.textContent||!_r2.textContent.trim()),core.xp6(1),core.Q6J("id",ctx.inputId)("required",ctx.required)("tabIndex",ctx.tabIndex)("checked",ctx.checked)("disabled",ctx.disabled),core.uIk("name",ctx.name)("aria-checked",ctx.checked)("aria-label",ctx.ariaLabel)("aria-labelledby",ctx.ariaLabelledby)("aria-describedby",ctx.ariaDescribedby),core.xp6(4),core.Q6J("matRippleTrigger",_r0)("matRippleDisabled",ctx.disableRipple||ctx.disabled)("matRippleCentered",!0)("matRippleRadius",20)("matRippleAnimation",core.VKq(18,slide_toggle_c1,ctx._noopAnimations?0:150))}},"MatSlideToggle_Template"),dependencies:[MatRipple,observers.wD],styles:['.mat-slide-toggle{display:inline-block;height:24px;max-width:100%;line-height:24px;white-space:nowrap;outline:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(16px, 0, 0)}[dir=rtl] .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb-container{transform:translate3d(-16px, 0, 0)}.mat-slide-toggle.mat-disabled{opacity:.38}.mat-slide-toggle.mat-disabled .mat-slide-toggle-label,.mat-slide-toggle.mat-disabled .mat-slide-toggle-thumb-container{cursor:default}.mat-slide-toggle-label{-webkit-user-select:none;user-select:none;display:flex;flex:1;flex-direction:row;align-items:center;height:inherit;cursor:pointer}.mat-slide-toggle-content{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-slide-toggle-label-before .mat-slide-toggle-label{order:1}.mat-slide-toggle-label-before .mat-slide-toggle-bar{order:2}[dir=rtl] .mat-slide-toggle-label-before .mat-slide-toggle-bar,.mat-slide-toggle-bar{margin-right:8px;margin-left:0}[dir=rtl] .mat-slide-toggle-bar,.mat-slide-toggle-label-before .mat-slide-toggle-bar{margin-left:8px;margin-right:0}.mat-slide-toggle-bar-no-side-margin{margin-left:0;margin-right:0}.mat-slide-toggle-thumb-container{position:absolute;z-index:1;width:20px;height:20px;top:-3px;left:0;transform:translate3d(0, 0, 0);transition:all 80ms linear;transition-property:transform}._mat-animation-noopable .mat-slide-toggle-thumb-container{transition:none}[dir=rtl] .mat-slide-toggle-thumb-container{left:auto;right:0}.mat-slide-toggle-thumb{height:20px;width:20px;border-radius:50%;display:block}.mat-slide-toggle-bar{position:relative;width:36px;height:14px;flex-shrink:0;border-radius:8px}.mat-slide-toggle-input{bottom:0;left:10px}[dir=rtl] .mat-slide-toggle-input{left:auto;right:10px}.mat-slide-toggle-bar,.mat-slide-toggle-thumb{transition:all 80ms linear;transition-property:background-color;transition-delay:50ms}._mat-animation-noopable .mat-slide-toggle-bar,._mat-animation-noopable .mat-slide-toggle-thumb{transition:none}.mat-slide-toggle .mat-slide-toggle-ripple{position:absolute;top:calc(50% - 20px);left:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.mat-slide-toggle .mat-slide-toggle-ripple .mat-ripple-element:not(.mat-slide-toggle-persistent-ripple){opacity:.12}.mat-slide-toggle-persistent-ripple{width:100%;height:100%;transform:none}.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:.04}.mat-slide-toggle:not(.mat-disabled).cdk-keyboard-focused .mat-slide-toggle-persistent-ripple{opacity:.12}.mat-slide-toggle-persistent-ripple,.mat-slide-toggle.mat-disabled .mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{opacity:0}@media(hover: none){.mat-slide-toggle-bar:hover .mat-slide-toggle-persistent-ripple{display:none}}.mat-slide-toggle-input:focus~.mat-slide-toggle-thumb-container .mat-focus-indicator::before{content:""}.cdk-high-contrast-active .mat-slide-toggle-thumb,.cdk-high-contrast-active .mat-slide-toggle-bar{border:1px solid}'],encapsulation:2,changeDetection:0});const MAT_SLIDE_TOGGLE_REQUIRED_VALIDATOR={provide:fesm2015_forms.Cf,useExisting:(0,core.Gpc)(()=>MatSlideToggleRequiredValidator),multi:!0};class MatSlideToggleRequiredValidator extends fesm2015_forms.Zs{}__name(MatSlideToggleRequiredValidator,"MatSlideToggleRequiredValidator"),MatSlideToggleRequiredValidator.\u0275fac=function(){let \u0275MatSlideToggleRequiredValidator_BaseFactory;return __name(function(t){return(\u0275MatSlideToggleRequiredValidator_BaseFactory||(\u0275MatSlideToggleRequiredValidator_BaseFactory=core.n5z(MatSlideToggleRequiredValidator)))(t||MatSlideToggleRequiredValidator)},"MatSlideToggleRequiredValidator_Factory")}(),MatSlideToggleRequiredValidator.\u0275dir=core.lG2({type:MatSlideToggleRequiredValidator,selectors:[["mat-slide-toggle","required","","formControlName",""],["mat-slide-toggle","required","","formControl",""],["mat-slide-toggle","required","","ngModel",""]],features:[core._Bn([MAT_SLIDE_TOGGLE_REQUIRED_VALIDATOR]),core.qOj]});class _MatSlideToggleRequiredValidatorModule{}__name(_MatSlideToggleRequiredValidatorModule,"_MatSlideToggleRequiredValidatorModule"),_MatSlideToggleRequiredValidatorModule.\u0275fac=__name(function(t){return new(t||_MatSlideToggleRequiredValidatorModule)},"_MatSlideToggleRequiredValidatorModule_Factory"),_MatSlideToggleRequiredValidatorModule.\u0275mod=core.oAB({type:_MatSlideToggleRequiredValidatorModule}),_MatSlideToggleRequiredValidatorModule.\u0275inj=core.cJS({});class MatSlideToggleModule{}__name(MatSlideToggleModule,"MatSlideToggleModule"),MatSlideToggleModule.\u0275fac=__name(function(t){return new(t||MatSlideToggleModule)},"MatSlideToggleModule_Factory"),MatSlideToggleModule.\u0275mod=core.oAB({type:MatSlideToggleModule}),MatSlideToggleModule.\u0275inj=core.cJS({imports:[_MatSlideToggleRequiredValidatorModule,MatRippleModule,MatCommonModule,observers.Q8,_MatSlideToggleRequiredValidatorModule,MatCommonModule]});class DataSource{}function isDataSource(value){return value&&"function"==typeof value.connect&&!(value instanceof cjs.ConnectableObservable)}__name(DataSource,"DataSource"),__name(isDataSource,"isDataSource");class ArrayDataSource extends DataSource{constructor(_data){super(),this._data=_data}connect(){return(0,cjs.isObservable)(this._data)?this._data:(0,cjs.of)(this._data)}disconnect(){}}__name(ArrayDataSource,"ArrayDataSource");__name(class _DisposeViewRepeaterStrategy{applyChanges(changes,viewContainerRef,itemContextFactory,itemValueResolver,itemViewChanged){changes.forEachOperation((record,adjustedPreviousIndex,currentIndex)=>{let view,operation;if(null==record.previousIndex){const insertContext=itemContextFactory(record,adjustedPreviousIndex,currentIndex);view=viewContainerRef.createEmbeddedView(insertContext.templateRef,insertContext.context,insertContext.index),operation=1}else null==currentIndex?(viewContainerRef.remove(adjustedPreviousIndex),operation=3):(view=viewContainerRef.get(adjustedPreviousIndex),viewContainerRef.move(view,currentIndex),operation=2);itemViewChanged&&itemViewChanged({context:null==view?void 0:view.context,operation,record})})}detach(){}},"_DisposeViewRepeaterStrategy");class _RecycleViewRepeaterStrategy{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(changes,viewContainerRef,itemContextFactory,itemValueResolver,itemViewChanged){changes.forEachOperation((record,adjustedPreviousIndex,currentIndex)=>{let view,operation;if(null==record.previousIndex){const viewArgsFactory=__name(()=>itemContextFactory(record,adjustedPreviousIndex,currentIndex),"viewArgsFactory");view=this._insertView(viewArgsFactory,currentIndex,viewContainerRef,itemValueResolver(record)),operation=view?1:0}else null==currentIndex?(this._detachAndCacheView(adjustedPreviousIndex,viewContainerRef),operation=3):(view=this._moveView(adjustedPreviousIndex,currentIndex,viewContainerRef,itemValueResolver(record)),operation=2);itemViewChanged&&itemViewChanged({context:null==view?void 0:view.context,operation,record})})}detach(){for(const view of this._viewCache)view.destroy();this._viewCache=[]}_insertView(viewArgsFactory,currentIndex,viewContainerRef,value){const cachedView=this._insertViewFromCache(currentIndex,viewContainerRef);if(cachedView)return void(cachedView.context.$implicit=value);const viewArgs=viewArgsFactory();return viewContainerRef.createEmbeddedView(viewArgs.templateRef,viewArgs.context,viewArgs.index)}_detachAndCacheView(index,viewContainerRef){const detachedView=viewContainerRef.detach(index);this._maybeCacheView(detachedView,viewContainerRef)}_moveView(adjustedPreviousIndex,currentIndex,viewContainerRef,value){const view=viewContainerRef.get(adjustedPreviousIndex);return viewContainerRef.move(view,currentIndex),view.context.$implicit=value,view}_maybeCacheView(view,viewContainerRef){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(view);else{const index=viewContainerRef.indexOf(view);-1===index?view.destroy():viewContainerRef.remove(index)}}_insertViewFromCache(index,viewContainerRef){const cachedView=this._viewCache.pop();return cachedView&&viewContainerRef.insert(cachedView,index),cachedView||null}}__name(_RecycleViewRepeaterStrategy,"_RecycleViewRepeaterStrategy");__name(class SelectionModel{constructor(_multiple=!1,initiallySelectedValues,_emitChanges=!0,compareWith){this._multiple=_multiple,this._emitChanges=_emitChanges,this.compareWith=compareWith,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Subject,initiallySelectedValues&&initiallySelectedValues.length&&(_multiple?initiallySelectedValues.forEach(value=>this._markSelected(value)):this._markSelected(initiallySelectedValues[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...values){this._verifyValueAssignment(values),values.forEach(value=>this._markSelected(value));const changed=this._hasQueuedChanges();return this._emitChangeEvent(),changed}deselect(...values){this._verifyValueAssignment(values),values.forEach(value=>this._unmarkSelected(value));const changed=this._hasQueuedChanges();return this._emitChangeEvent(),changed}setSelection(...values){this._verifyValueAssignment(values);const oldValues=this.selected,newSelectedSet=new Set(values);values.forEach(value=>this._markSelected(value)),oldValues.filter(value=>!newSelectedSet.has(value)).forEach(value=>this._unmarkSelected(value));const changed=this._hasQueuedChanges();return this._emitChangeEvent(),changed}toggle(value){return this.isSelected(value)?this.deselect(value):this.select(value)}clear(flushEvent=!0){this._unmarkAll();const changed=this._hasQueuedChanges();return flushEvent&&this._emitChangeEvent(),changed}isSelected(value){if(this.compareWith){for(const otherValue of this._selection)if(this.compareWith(otherValue,value))return!0;return!1}return this._selection.has(value)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(predicate){this._multiple&&this.selected&&this._selected.sort(predicate)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(value){this.isSelected(value)||(this._multiple||this._unmarkAll(),this.isSelected(value)||this._selection.add(value),this._emitChanges&&this._selectedToEmit.push(value))}_unmarkSelected(value){this.isSelected(value)&&(this._selection.delete(value),this._emitChanges&&this._deselectedToEmit.push(value))}_unmarkAll(){this.isEmpty()||this._selection.forEach(value=>this._unmarkSelected(value))}_verifyValueAssignment(values){values.length>1&&this._multiple}_hasQueuedChanges(){return!(!this._deselectedToEmit.length&&!this._selectedToEmit.length)}},"SelectionModel"),__name(function getMultipleValuesInSingleSelectionError(){return Error("Cannot pass multiple values into SelectionModel with single-value mode.")},"getMultipleValuesInSingleSelectionError");class UniqueSelectionDispatcher{constructor(){this._listeners=[]}notify(id,name){for(let listener of this._listeners)listener(id,name)}listen(listener){return this._listeners.push(listener),()=>{this._listeners=this._listeners.filter(registered=>listener!==registered)}}ngOnDestroy(){this._listeners=[]}}__name(UniqueSelectionDispatcher,"UniqueSelectionDispatcher"),UniqueSelectionDispatcher.\u0275fac=__name(function(t){return new(t||UniqueSelectionDispatcher)},"UniqueSelectionDispatcher_Factory"),UniqueSelectionDispatcher.\u0275prov=core.Yz7({token:UniqueSelectionDispatcher,factory:UniqueSelectionDispatcher.\u0275fac,providedIn:"root"});const _VIEW_REPEATER_STRATEGY=new core.OlP("_ViewRepeater"),scrolling_c0=["contentWrapper"],VIRTUAL_SCROLL_STRATEGY=new core.OlP("VIRTUAL_SCROLL_STRATEGY");class FixedSizeVirtualScrollStrategy{constructor(itemSize,minBufferPx,maxBufferPx){this._scrolledIndexChange=new cjs.Subject,this.scrolledIndexChange=this._scrolledIndexChange.pipe((0,operators.xb)()),this._viewport=null,this._itemSize=itemSize,this._minBufferPx=minBufferPx,this._maxBufferPx=maxBufferPx}attach(viewport){this._viewport=viewport,this._updateTotalContentSize(),this._updateRenderedRange()}detach(){this._scrolledIndexChange.complete(),this._viewport=null}updateItemAndBufferSize(itemSize,minBufferPx,maxBufferPx){this._itemSize=itemSize,this._minBufferPx=minBufferPx,this._maxBufferPx=maxBufferPx,this._updateTotalContentSize(),this._updateRenderedRange()}onContentScrolled(){this._updateRenderedRange()}onDataLengthChanged(){this._updateTotalContentSize(),this._updateRenderedRange()}onContentRendered(){}onRenderedOffsetChanged(){}scrollToIndex(index,behavior){this._viewport&&this._viewport.scrollToOffset(index*this._itemSize,behavior)}_updateTotalContentSize(){!this._viewport||this._viewport.setTotalContentSize(this._viewport.getDataLength()*this._itemSize)}_updateRenderedRange(){if(!this._viewport)return;const renderedRange=this._viewport.getRenderedRange(),newRange={start:renderedRange.start,end:renderedRange.end},viewportSize=this._viewport.getViewportSize(),dataLength=this._viewport.getDataLength();let scrollOffset=this._viewport.measureScrollOffset(),firstVisibleIndex=this._itemSize>0?scrollOffset/this._itemSize:0;if(newRange.end>dataLength){const maxVisibleItems=Math.ceil(viewportSize/this._itemSize),newVisibleIndex=Math.max(0,Math.min(firstVisibleIndex,dataLength-maxVisibleItems));firstVisibleIndex!=newVisibleIndex&&(firstVisibleIndex=newVisibleIndex,scrollOffset=newVisibleIndex*this._itemSize,newRange.start=Math.floor(firstVisibleIndex)),newRange.end=Math.max(0,Math.min(dataLength,newRange.start+maxVisibleItems))}const startBuffer=scrollOffset-newRange.start*this._itemSize;if(startBuffer<this._minBufferPx&&0!=newRange.start){const expandStart=Math.ceil((this._maxBufferPx-startBuffer)/this._itemSize);newRange.start=Math.max(0,newRange.start-expandStart),newRange.end=Math.min(dataLength,Math.ceil(firstVisibleIndex+(viewportSize+this._minBufferPx)/this._itemSize))}else{const endBuffer=newRange.end*this._itemSize-(scrollOffset+viewportSize);if(endBuffer<this._minBufferPx&&newRange.end!=dataLength){const expandEnd=Math.ceil((this._maxBufferPx-endBuffer)/this._itemSize);expandEnd>0&&(newRange.end=Math.min(dataLength,newRange.end+expandEnd),newRange.start=Math.max(0,Math.floor(firstVisibleIndex-this._minBufferPx/this._itemSize)))}}this._viewport.setRenderedRange(newRange),this._viewport.setRenderedContentOffset(this._itemSize*newRange.start),this._scrolledIndexChange.next(Math.floor(firstVisibleIndex))}}function _fixedSizeVirtualScrollStrategyFactory(fixedSizeDir){return fixedSizeDir._scrollStrategy}__name(FixedSizeVirtualScrollStrategy,"FixedSizeVirtualScrollStrategy"),__name(_fixedSizeVirtualScrollStrategyFactory,"_fixedSizeVirtualScrollStrategyFactory");class CdkFixedSizeVirtualScroll{constructor(){this._itemSize=20,this._minBufferPx=100,this._maxBufferPx=200,this._scrollStrategy=new FixedSizeVirtualScrollStrategy(this.itemSize,this.minBufferPx,this.maxBufferPx)}get itemSize(){return this._itemSize}set itemSize(value){this._itemSize=(0,coercion.su)(value)}get minBufferPx(){return this._minBufferPx}set minBufferPx(value){this._minBufferPx=(0,coercion.su)(value)}get maxBufferPx(){return this._maxBufferPx}set maxBufferPx(value){this._maxBufferPx=(0,coercion.su)(value)}ngOnChanges(){this._scrollStrategy.updateItemAndBufferSize(this.itemSize,this.minBufferPx,this.maxBufferPx)}}__name(CdkFixedSizeVirtualScroll,"CdkFixedSizeVirtualScroll"),CdkFixedSizeVirtualScroll.\u0275fac=__name(function(t){return new(t||CdkFixedSizeVirtualScroll)},"CdkFixedSizeVirtualScroll_Factory"),CdkFixedSizeVirtualScroll.\u0275dir=core.lG2({type:CdkFixedSizeVirtualScroll,selectors:[["cdk-virtual-scroll-viewport","itemSize",""]],inputs:{itemSize:"itemSize",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},features:[core._Bn([{provide:VIRTUAL_SCROLL_STRATEGY,useFactory:_fixedSizeVirtualScrollStrategyFactory,deps:[(0,core.Gpc)(()=>CdkFixedSizeVirtualScroll)]}]),core.TTD]});class ScrollDispatcher{constructor(_ngZone,_platform,document2){this._ngZone=_ngZone,this._platform=_platform,this._scrolled=new cjs.Subject,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=document2}register(scrollable){this.scrollContainers.has(scrollable)||this.scrollContainers.set(scrollable,scrollable.elementScrolled().subscribe(()=>this._scrolled.next(scrollable)))}deregister(scrollable){const scrollableReference=this.scrollContainers.get(scrollable);scrollableReference&&(scrollableReference.unsubscribe(),this.scrollContainers.delete(scrollable))}scrolled(auditTimeInMs=20){return this._platform.isBrowser?new cjs.Observable(observer=>{this._globalSubscription||this._addGlobalListener();const subscription=auditTimeInMs>0?this._scrolled.pipe((0,operators.e9)(auditTimeInMs)).subscribe(observer):this._scrolled.subscribe(observer);return this._scrolledCount++,()=>{subscription.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,cjs.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((_,container)=>this.deregister(container)),this._scrolled.complete()}ancestorScrolled(elementOrElementRef,auditTimeInMs){const ancestors=this.getAncestorScrollContainers(elementOrElementRef);return this.scrolled(auditTimeInMs).pipe((0,operators.hX)(target=>!target||ancestors.indexOf(target)>-1))}getAncestorScrollContainers(elementOrElementRef){const scrollingContainers=[];return this.scrollContainers.forEach((_subscription,scrollable)=>{this._scrollableContainsElement(scrollable,elementOrElementRef)&&scrollingContainers.push(scrollable)}),scrollingContainers}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(scrollable,elementOrElementRef){let element=(0,coercion.fI)(elementOrElementRef),scrollableElement=scrollable.getElementRef().nativeElement;do{if(element==scrollableElement)return!0}while(element=element.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const window2=this._getWindow();return(0,cjs.fromEvent)(window2.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}__name(ScrollDispatcher,"ScrollDispatcher"),ScrollDispatcher.\u0275fac=__name(function(t){return new(t||ScrollDispatcher)(core.LFG(core.R0b),core.LFG(fesm2015_platform.t4),core.LFG(common.K0,8))},"ScrollDispatcher_Factory"),ScrollDispatcher.\u0275prov=core.Yz7({token:ScrollDispatcher,factory:ScrollDispatcher.\u0275fac,providedIn:"root"});class CdkScrollable{constructor(elementRef,scrollDispatcher,ngZone,dir){this.elementRef=elementRef,this.scrollDispatcher=scrollDispatcher,this.ngZone=ngZone,this.dir=dir,this._destroyed=new cjs.Subject,this._elementScrolled=new cjs.Observable(observer=>this.ngZone.runOutsideAngular(()=>(0,cjs.fromEvent)(this.elementRef.nativeElement,"scroll").pipe((0,operators.Rs)(this._destroyed)).subscribe(observer)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(options){const el=this.elementRef.nativeElement,isRtl=this.dir&&"rtl"==this.dir.value;null==options.left&&(options.left=isRtl?options.end:options.start),null==options.right&&(options.right=isRtl?options.start:options.end),null!=options.bottom&&(options.top=el.scrollHeight-el.clientHeight-options.bottom),isRtl&&0!=(0,fesm2015_platform._i)()?(null!=options.left&&(options.right=el.scrollWidth-el.clientWidth-options.left),2==(0,fesm2015_platform._i)()?options.left=options.right:1==(0,fesm2015_platform._i)()&&(options.left=options.right?-options.right:options.right)):null!=options.right&&(options.left=el.scrollWidth-el.clientWidth-options.right),this._applyScrollToOptions(options)}_applyScrollToOptions(options){const el=this.elementRef.nativeElement;(0,fesm2015_platform.Mq)()?el.scrollTo(options):(null!=options.top&&(el.scrollTop=options.top),null!=options.left&&(el.scrollLeft=options.left))}measureScrollOffset(from){const el=this.elementRef.nativeElement;if("top"==from)return el.scrollTop;if("bottom"==from)return el.scrollHeight-el.clientHeight-el.scrollTop;const isRtl=this.dir&&"rtl"==this.dir.value;return"start"==from?from=isRtl?"right":"left":"end"==from&&(from=isRtl?"left":"right"),isRtl&&2==(0,fesm2015_platform._i)()?"left"==from?el.scrollWidth-el.clientWidth-el.scrollLeft:el.scrollLeft:isRtl&&1==(0,fesm2015_platform._i)()?"left"==from?el.scrollLeft+el.scrollWidth-el.clientWidth:-el.scrollLeft:"left"==from?el.scrollLeft:el.scrollWidth-el.clientWidth-el.scrollLeft}}__name(CdkScrollable,"CdkScrollable"),CdkScrollable.\u0275fac=__name(function(t){return new(t||CdkScrollable)(core.Y36(core.SBq),core.Y36(ScrollDispatcher),core.Y36(core.R0b),core.Y36(Directionality,8))},"CdkScrollable_Factory"),CdkScrollable.\u0275dir=core.lG2({type:CdkScrollable,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]});const VIRTUAL_SCROLLABLE=new core.OlP("VIRTUAL_SCROLLABLE");class CdkVirtualScrollable extends CdkScrollable{constructor(elementRef,scrollDispatcher,ngZone,dir){super(elementRef,scrollDispatcher,ngZone,dir)}measureViewportSize(orientation){const viewportEl=this.elementRef.nativeElement;return"horizontal"===orientation?viewportEl.clientWidth:viewportEl.clientHeight}}__name(CdkVirtualScrollable,"CdkVirtualScrollable"),CdkVirtualScrollable.\u0275fac=__name(function(t){return new(t||CdkVirtualScrollable)(core.Y36(core.SBq),core.Y36(ScrollDispatcher),core.Y36(core.R0b),core.Y36(Directionality,8))},"CdkVirtualScrollable_Factory"),CdkVirtualScrollable.\u0275dir=core.lG2({type:CdkVirtualScrollable,features:[core.qOj]});class ViewportRuler{constructor(_platform,ngZone,document2){this._platform=_platform,this._change=new cjs.Subject,this._changeListener=event=>{this._change.next(event)},this._document=document2,ngZone.runOutsideAngular(()=>{if(_platform.isBrowser){const window2=this._getWindow();window2.addEventListener("resize",this._changeListener),window2.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const window2=this._getWindow();window2.removeEventListener("resize",this._changeListener),window2.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const output={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),output}getViewportRect(){const scrollPosition=this.getViewportScrollPosition(),{width,height}=this.getViewportSize();return{top:scrollPosition.top,left:scrollPosition.left,bottom:scrollPosition.top+height,right:scrollPosition.left+width,height,width}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const document2=this._document,window2=this._getWindow(),documentElement=document2.documentElement,documentRect=documentElement.getBoundingClientRect();return{top:-documentRect.top||document2.body.scrollTop||window2.scrollY||documentElement.scrollTop||0,left:-documentRect.left||document2.body.scrollLeft||window2.scrollX||documentElement.scrollLeft||0}}change(throttleTime=20){return throttleTime>0?this._change.pipe((0,operators.e9)(throttleTime)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const window2=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:window2.innerWidth,height:window2.innerHeight}:{width:0,height:0}}}function rangesEqual(r1,r2){return r1.start==r2.start&&r1.end==r2.end}__name(ViewportRuler,"ViewportRuler"),ViewportRuler.\u0275fac=__name(function(t){return new(t||ViewportRuler)(core.LFG(fesm2015_platform.t4),core.LFG(core.R0b),core.LFG(common.K0,8))},"ViewportRuler_Factory"),ViewportRuler.\u0275prov=core.Yz7({token:ViewportRuler,factory:ViewportRuler.\u0275fac,providedIn:"root"}),__name(rangesEqual,"rangesEqual");const SCROLL_SCHEDULER="undefined"!=typeof requestAnimationFrame?cjs.animationFrameScheduler:cjs.asapScheduler;class CdkVirtualScrollViewport extends CdkVirtualScrollable{constructor(elementRef,_changeDetectorRef,ngZone,_scrollStrategy,dir,scrollDispatcher,viewportRuler,scrollable){super(elementRef,scrollDispatcher,ngZone,dir),this.elementRef=elementRef,this._changeDetectorRef=_changeDetectorRef,this._scrollStrategy=_scrollStrategy,this.scrollable=scrollable,this._platform=(0,core.f3M)(fesm2015_platform.t4),this._detachedSubject=new cjs.Subject,this._renderedRangeSubject=new cjs.Subject,this._orientation="vertical",this._appendOnly=!1,this.scrolledIndexChange=new cjs.Observable(observer=>this._scrollStrategy.scrolledIndexChange.subscribe(index=>Promise.resolve().then(()=>this.ngZone.run(()=>observer.next(index))))),this.renderedRangeStream=this._renderedRangeSubject,this._totalContentSize=0,this._totalContentWidth="",this._totalContentHeight="",this._renderedRange={start:0,end:0},this._dataLength=0,this._viewportSize=0,this._renderedContentOffset=0,this._renderedContentOffsetNeedsRewrite=!1,this._isChangeDetectionPending=!1,this._runAfterChangeDetection=[],this._viewportChanges=cjs.Subscription.EMPTY,this._viewportChanges=viewportRuler.change().subscribe(()=>{this.checkViewportSize()}),this.scrollable||(this.elementRef.nativeElement.classList.add("cdk-virtual-scrollable"),this.scrollable=this)}get orientation(){return this._orientation}set orientation(orientation){this._orientation!==orientation&&(this._orientation=orientation,this._calculateSpacerSize())}get appendOnly(){return this._appendOnly}set appendOnly(value){this._appendOnly=(0,coercion.Ig)(value)}ngOnInit(){!this._platform.isBrowser||(this.scrollable===this&&super.ngOnInit(),this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._measureViewportSize(),this._scrollStrategy.attach(this),this.scrollable.elementScrolled().pipe((0,operators.O4)(null),(0,operators.e9)(0,SCROLL_SCHEDULER)).subscribe(()=>this._scrollStrategy.onContentScrolled()),this._markChangeDetectionNeeded()})))}ngOnDestroy(){this.detach(),this._scrollStrategy.detach(),this._renderedRangeSubject.complete(),this._detachedSubject.complete(),this._viewportChanges.unsubscribe(),super.ngOnDestroy()}attach(forOf){this._forOf,this.ngZone.runOutsideAngular(()=>{this._forOf=forOf,this._forOf.dataStream.pipe((0,operators.Rs)(this._detachedSubject)).subscribe(data=>{const newLength=data.length;newLength!==this._dataLength&&(this._dataLength=newLength,this._scrollStrategy.onDataLengthChanged()),this._doChangeDetection()})})}detach(){this._forOf=null,this._detachedSubject.next()}getDataLength(){return this._dataLength}getViewportSize(){return this._viewportSize}getRenderedRange(){return this._renderedRange}measureBoundingClientRectWithScrollOffset(from){return this.getElementRef().nativeElement.getBoundingClientRect()[from]}setTotalContentSize(size2){this._totalContentSize!==size2&&(this._totalContentSize=size2,this._calculateSpacerSize(),this._markChangeDetectionNeeded())}setRenderedRange(range2){rangesEqual(this._renderedRange,range2)||(this.appendOnly&&(range2={start:0,end:Math.max(this._renderedRange.end,range2.end)}),this._renderedRangeSubject.next(this._renderedRange=range2),this._markChangeDetectionNeeded(()=>this._scrollStrategy.onContentRendered()))}getOffsetToRenderedContentStart(){return this._renderedContentOffsetNeedsRewrite?null:this._renderedContentOffset}setRenderedContentOffset(offset2,to="to-start"){offset2=this.appendOnly&&"to-start"===to?0:offset2;const isRtl=this.dir&&"rtl"==this.dir.value,isHorizontal="horizontal"==this.orientation,axis=isHorizontal?"X":"Y";let transform=`translate${axis}(${Number((isHorizontal&&isRtl?-1:1)*offset2)}px)`;this._renderedContentOffset=offset2,"to-end"===to&&(transform+=` translate${axis}(-100%)`,this._renderedContentOffsetNeedsRewrite=!0),this._renderedContentTransform!=transform&&(this._renderedContentTransform=transform,this._markChangeDetectionNeeded(()=>{this._renderedContentOffsetNeedsRewrite?(this._renderedContentOffset-=this.measureRenderedContentSize(),this._renderedContentOffsetNeedsRewrite=!1,this.setRenderedContentOffset(this._renderedContentOffset)):this._scrollStrategy.onRenderedOffsetChanged()}))}scrollToOffset(offset2,behavior="auto"){const options={behavior};"horizontal"===this.orientation?options.start=offset2:options.top=offset2,this.scrollable.scrollTo(options)}scrollToIndex(index,behavior="auto"){this._scrollStrategy.scrollToIndex(index,behavior)}measureScrollOffset(from){let measureScrollOffset;return measureScrollOffset=this.scrollable==this?__name(_from=>super.measureScrollOffset(_from),"measureScrollOffset"):__name(_from=>this.scrollable.measureScrollOffset(_from),"measureScrollOffset"),Math.max(0,measureScrollOffset(null!=from?from:"horizontal"===this.orientation?"start":"top")-this.measureViewportOffset())}measureViewportOffset(from){var _a;let fromRect;const isRtl="rtl"==(null===(_a=this.dir)||void 0===_a?void 0:_a.value);fromRect="start"==from?isRtl?"right":"left":"end"==from?isRtl?"left":"right":from||("horizontal"===this.orientation?"left":"top");const scrollerClientRect=this.scrollable.measureBoundingClientRectWithScrollOffset(fromRect);return this.elementRef.nativeElement.getBoundingClientRect()[fromRect]-scrollerClientRect}measureRenderedContentSize(){const contentEl=this._contentWrapper.nativeElement;return"horizontal"===this.orientation?contentEl.offsetWidth:contentEl.offsetHeight}measureRangeSize(range2){return this._forOf?this._forOf.measureRangeSize(range2,this.orientation):0}checkViewportSize(){this._measureViewportSize(),this._scrollStrategy.onDataLengthChanged()}_measureViewportSize(){this._viewportSize=this.scrollable.measureViewportSize(this.orientation)}_markChangeDetectionNeeded(runAfter){runAfter&&this._runAfterChangeDetection.push(runAfter),this._isChangeDetectionPending||(this._isChangeDetectionPending=!0,this.ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>{this._doChangeDetection()})))}_doChangeDetection(){this._isChangeDetectionPending=!1,this._contentWrapper.nativeElement.style.transform=this._renderedContentTransform,this.ngZone.run(()=>this._changeDetectorRef.markForCheck());const runAfterChangeDetection=this._runAfterChangeDetection;this._runAfterChangeDetection=[];for(const fn of runAfterChangeDetection)fn()}_calculateSpacerSize(){this._totalContentHeight="horizontal"===this.orientation?"":`${this._totalContentSize}px`,this._totalContentWidth="horizontal"===this.orientation?`${this._totalContentSize}px`:""}}function getOffset(orientation,direction,node){const el=node;if(!el.getBoundingClientRect)return 0;const rect=el.getBoundingClientRect();return"horizontal"===orientation?"start"===direction?rect.left:rect.right:"start"===direction?rect.top:rect.bottom}__name(CdkVirtualScrollViewport,"CdkVirtualScrollViewport"),CdkVirtualScrollViewport.\u0275fac=__name(function(t){return new(t||CdkVirtualScrollViewport)(core.Y36(core.SBq),core.Y36(core.sBO),core.Y36(core.R0b),core.Y36(VIRTUAL_SCROLL_STRATEGY,8),core.Y36(Directionality,8),core.Y36(ScrollDispatcher),core.Y36(ViewportRuler),core.Y36(VIRTUAL_SCROLLABLE,8))},"CdkVirtualScrollViewport_Factory"),CdkVirtualScrollViewport.\u0275cmp=core.Xpm({type:CdkVirtualScrollViewport,selectors:[["cdk-virtual-scroll-viewport"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(scrolling_c0,7),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._contentWrapper=_t.first)}},"CdkVirtualScrollViewport_Query"),hostAttrs:[1,"cdk-virtual-scroll-viewport"],hostVars:4,hostBindings:__name(function(rf,ctx){2&rf&&core.ekj("cdk-virtual-scroll-orientation-horizontal","horizontal"===ctx.orientation)("cdk-virtual-scroll-orientation-vertical","horizontal"!==ctx.orientation)},"CdkVirtualScrollViewport_HostBindings"),inputs:{orientation:"orientation",appendOnly:"appendOnly"},outputs:{scrolledIndexChange:"scrolledIndexChange"},features:[core._Bn([{provide:CdkScrollable,useFactory:(virtualScrollable,viewport)=>virtualScrollable||viewport,deps:[CdkVirtualScrollable,CdkVirtualScrollViewport]}]),core.qOj],ngContentSelectors:["*"],decls:4,vars:4,consts:[[1,"cdk-virtual-scroll-content-wrapper"],["contentWrapper",""],[1,"cdk-virtual-scroll-spacer"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.TgZ(0,"div",0,1),core.Hsn(2),core.qZA(),core._UZ(3,"div",2)),2&rf&&(core.xp6(3),core.Udp("width",ctx._totalContentWidth)("height",ctx._totalContentHeight))},"CdkVirtualScrollViewport_Template"),styles:["cdk-virtual-scroll-viewport{display:block;position:relative;transform:translateZ(0)}.cdk-virtual-scrollable{overflow:auto;will-change:scroll-position;contain:strict;-webkit-overflow-scrolling:touch}.cdk-virtual-scroll-content-wrapper{position:absolute;top:0;left:0;contain:content}[dir=rtl] .cdk-virtual-scroll-content-wrapper{right:0;left:auto}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper{min-height:100%}.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-horizontal .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-left:0;padding-right:0;margin-left:0;margin-right:0;border-left-width:0;border-right-width:0;outline:none}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper{min-width:100%}.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>dl:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ol:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>table:not([cdkVirtualFor]),.cdk-virtual-scroll-orientation-vertical .cdk-virtual-scroll-content-wrapper>ul:not([cdkVirtualFor]){padding-top:0;padding-bottom:0;margin-top:0;margin-bottom:0;border-top-width:0;border-bottom-width:0;outline:none}.cdk-virtual-scroll-spacer{height:1px;transform-origin:0 0;flex:0 0 auto}[dir=rtl] .cdk-virtual-scroll-spacer{transform-origin:100% 0}"],encapsulation:2,changeDetection:0}),__name(getOffset,"getOffset");class CdkVirtualForOf{constructor(_viewContainerRef,_template,_differs,_viewRepeater,_viewport,ngZone){this._viewContainerRef=_viewContainerRef,this._template=_template,this._differs=_differs,this._viewRepeater=_viewRepeater,this._viewport=_viewport,this.viewChange=new cjs.Subject,this._dataSourceChanges=new cjs.Subject,this.dataStream=this._dataSourceChanges.pipe((0,operators.O4)(null),(0,operators.Gv)(),(0,operators.wt)(([prev,cur])=>this._changeDataSource(prev,cur)),(0,operators.d)(1)),this._differ=null,this._needsUpdate=!1,this._destroyed=new cjs.Subject,this.dataStream.subscribe(data=>{this._data=data,this._onRenderedDataChange()}),this._viewport.renderedRangeStream.pipe((0,operators.Rs)(this._destroyed)).subscribe(range2=>{this._renderedRange=range2,this.viewChange.observers.length&&ngZone.run(()=>this.viewChange.next(this._renderedRange)),this._onRenderedDataChange()}),this._viewport.attach(this)}get cdkVirtualForOf(){return this._cdkVirtualForOf}set cdkVirtualForOf(value){this._cdkVirtualForOf=value,isDataSource(value)?this._dataSourceChanges.next(value):this._dataSourceChanges.next(new ArrayDataSource((0,cjs.isObservable)(value)?value:Array.from(value||[])))}get cdkVirtualForTrackBy(){return this._cdkVirtualForTrackBy}set cdkVirtualForTrackBy(fn){this._needsUpdate=!0,this._cdkVirtualForTrackBy=fn?(index,item)=>fn(index+(this._renderedRange?this._renderedRange.start:0),item):void 0}set cdkVirtualForTemplate(value){value&&(this._needsUpdate=!0,this._template=value)}get cdkVirtualForTemplateCacheSize(){return this._viewRepeater.viewCacheSize}set cdkVirtualForTemplateCacheSize(size2){this._viewRepeater.viewCacheSize=(0,coercion.su)(size2)}measureRangeSize(range2,orientation){if(range2.start>=range2.end)return 0;range2.start<this._renderedRange.start||(range2.end,this._renderedRange.end);const renderedStartIndex=range2.start-this._renderedRange.start,rangeLen=range2.end-range2.start;let firstNode,lastNode;for(let i=0;i<rangeLen;i++){const view=this._viewContainerRef.get(i+renderedStartIndex);if(view&&view.rootNodes.length){firstNode=lastNode=view.rootNodes[0];break}}for(let i=rangeLen-1;i>-1;i--){const view=this._viewContainerRef.get(i+renderedStartIndex);if(view&&view.rootNodes.length){lastNode=view.rootNodes[view.rootNodes.length-1];break}}return firstNode&&lastNode?getOffset(orientation,"end",lastNode)-getOffset(orientation,"start",firstNode):0}ngDoCheck(){if(this._differ&&this._needsUpdate){const changes=this._differ.diff(this._renderedItems);changes?this._applyChanges(changes):this._updateContext(),this._needsUpdate=!1}}ngOnDestroy(){this._viewport.detach(),this._dataSourceChanges.next(void 0),this._dataSourceChanges.complete(),this.viewChange.complete(),this._destroyed.next(),this._destroyed.complete(),this._viewRepeater.detach()}_onRenderedDataChange(){!this._renderedRange||(this._renderedItems=this._data.slice(this._renderedRange.start,this._renderedRange.end),this._differ||(this._differ=this._differs.find(this._renderedItems).create((index,item)=>this.cdkVirtualForTrackBy?this.cdkVirtualForTrackBy(index,item):item)),this._needsUpdate=!0)}_changeDataSource(oldDs,newDs){return oldDs&&oldDs.disconnect(this),this._needsUpdate=!0,newDs?newDs.connect(this):(0,cjs.of)()}_updateContext(){const count=this._data.length;let i=this._viewContainerRef.length;for(;i--;){const view=this._viewContainerRef.get(i);view.context.index=this._renderedRange.start+i,view.context.count=count,this._updateComputedContextProperties(view.context),view.detectChanges()}}_applyChanges(changes){this._viewRepeater.applyChanges(changes,this._viewContainerRef,(record,_adjustedPreviousIndex,currentIndex)=>this._getEmbeddedViewArgs(record,currentIndex),record=>record.item),changes.forEachIdentityChange(record=>{this._viewContainerRef.get(record.currentIndex).context.$implicit=record.item});const count=this._data.length;let i=this._viewContainerRef.length;for(;i--;){const view=this._viewContainerRef.get(i);view.context.index=this._renderedRange.start+i,view.context.count=count,this._updateComputedContextProperties(view.context)}}_updateComputedContextProperties(context){context.first=0===context.index,context.last=context.index===context.count-1,context.even=context.index%2==0,context.odd=!context.even}_getEmbeddedViewArgs(record,index){return{templateRef:this._template,context:{$implicit:record.item,cdkVirtualForOf:this._cdkVirtualForOf,index:-1,count:-1,first:!1,last:!1,odd:!1,even:!1},index}}}__name(CdkVirtualForOf,"CdkVirtualForOf"),CdkVirtualForOf.\u0275fac=__name(function(t){return new(t||CdkVirtualForOf)(core.Y36(core.s_b),core.Y36(core.Rgc),core.Y36(core.ZZ4),core.Y36(_VIEW_REPEATER_STRATEGY),core.Y36(CdkVirtualScrollViewport,4),core.Y36(core.R0b))},"CdkVirtualForOf_Factory"),CdkVirtualForOf.\u0275dir=core.lG2({type:CdkVirtualForOf,selectors:[["","cdkVirtualFor","","cdkVirtualForOf",""]],inputs:{cdkVirtualForOf:"cdkVirtualForOf",cdkVirtualForTrackBy:"cdkVirtualForTrackBy",cdkVirtualForTemplate:"cdkVirtualForTemplate",cdkVirtualForTemplateCacheSize:"cdkVirtualForTemplateCacheSize"},features:[core._Bn([{provide:_VIEW_REPEATER_STRATEGY,useClass:_RecycleViewRepeaterStrategy}])]});class CdkVirtualScrollableElement extends CdkVirtualScrollable{constructor(elementRef,scrollDispatcher,ngZone,dir){super(elementRef,scrollDispatcher,ngZone,dir)}measureBoundingClientRectWithScrollOffset(from){return this.getElementRef().nativeElement.getBoundingClientRect()[from]-this.measureScrollOffset(from)}}__name(CdkVirtualScrollableElement,"CdkVirtualScrollableElement"),CdkVirtualScrollableElement.\u0275fac=__name(function(t){return new(t||CdkVirtualScrollableElement)(core.Y36(core.SBq),core.Y36(ScrollDispatcher),core.Y36(core.R0b),core.Y36(Directionality,8))},"CdkVirtualScrollableElement_Factory"),CdkVirtualScrollableElement.\u0275dir=core.lG2({type:CdkVirtualScrollableElement,selectors:[["","cdkVirtualScrollingElement",""]],hostAttrs:[1,"cdk-virtual-scrollable"],features:[core._Bn([{provide:VIRTUAL_SCROLLABLE,useExisting:CdkVirtualScrollableElement}]),core.qOj]});class CdkVirtualScrollableWindow extends CdkVirtualScrollable{constructor(scrollDispatcher,ngZone,dir){super(new core.SBq(document.documentElement),scrollDispatcher,ngZone,dir),this._elementScrolled=new cjs.Observable(observer=>this.ngZone.runOutsideAngular(()=>(0,cjs.fromEvent)(document,"scroll").pipe((0,operators.Rs)(this._destroyed)).subscribe(observer)))}measureBoundingClientRectWithScrollOffset(from){return this.getElementRef().nativeElement.getBoundingClientRect()[from]}}__name(CdkVirtualScrollableWindow,"CdkVirtualScrollableWindow"),CdkVirtualScrollableWindow.\u0275fac=__name(function(t){return new(t||CdkVirtualScrollableWindow)(core.Y36(ScrollDispatcher),core.Y36(core.R0b),core.Y36(Directionality,8))},"CdkVirtualScrollableWindow_Factory"),CdkVirtualScrollableWindow.\u0275dir=core.lG2({type:CdkVirtualScrollableWindow,selectors:[["cdk-virtual-scroll-viewport","scrollWindow",""]],features:[core._Bn([{provide:VIRTUAL_SCROLLABLE,useExisting:CdkVirtualScrollableWindow}]),core.qOj]});class CdkScrollableModule{}__name(CdkScrollableModule,"CdkScrollableModule"),CdkScrollableModule.\u0275fac=__name(function(t){return new(t||CdkScrollableModule)},"CdkScrollableModule_Factory"),CdkScrollableModule.\u0275mod=core.oAB({type:CdkScrollableModule}),CdkScrollableModule.\u0275inj=core.cJS({});class ScrollingModule{}__name(ScrollingModule,"ScrollingModule"),ScrollingModule.\u0275fac=__name(function(t){return new(t||ScrollingModule)},"ScrollingModule_Factory"),ScrollingModule.\u0275mod=core.oAB({type:ScrollingModule}),ScrollingModule.\u0275inj=core.cJS({imports:[BidiModule,CdkScrollableModule,BidiModule,CdkScrollableModule]}),__name(function throwNullPortalError(){throw Error("Must provide a portal to attach")},"throwNullPortalError"),__name(function throwPortalAlreadyAttachedError(){throw Error("Host already has a portal attached")},"throwPortalAlreadyAttachedError"),__name(function throwPortalOutletAlreadyDisposedError(){throw Error("This PortalOutlet has already been disposed")},"throwPortalOutletAlreadyDisposedError"),__name(function throwUnknownPortalTypeError(){throw Error("Attempting to attach an unknown Portal type. BasePortalOutlet accepts either a ComponentPortal or a TemplatePortal.")},"throwUnknownPortalTypeError"),__name(function throwNullPortalOutletError(){throw Error("Attempting to attach a portal to a null PortalOutlet")},"throwNullPortalOutletError"),__name(function throwNoPortalAttachedError(){throw Error("Attempting to detach a portal that is not attached to a host")},"throwNoPortalAttachedError");class Portal{attach(host){return this._attachedHost=host,host.attach(this)}detach(){let host=this._attachedHost;null!=host&&(this._attachedHost=null,host.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(host){this._attachedHost=host}}__name(Portal,"Portal");class ComponentPortal extends Portal{constructor(component,viewContainerRef,injector,componentFactoryResolver){super(),this.component=component,this.viewContainerRef=viewContainerRef,this.injector=injector,this.componentFactoryResolver=componentFactoryResolver}}__name(ComponentPortal,"ComponentPortal");class TemplatePortal extends Portal{constructor(templateRef,viewContainerRef,context,injector){super(),this.templateRef=templateRef,this.viewContainerRef=viewContainerRef,this.context=context,this.injector=injector}get origin(){return this.templateRef.elementRef}attach(host,context=this.context){return this.context=context,super.attach(host)}detach(){return this.context=void 0,super.detach()}}__name(TemplatePortal,"TemplatePortal");class DomPortal extends Portal{constructor(element){super(),this.element=element instanceof core.SBq?element.nativeElement:element}}__name(DomPortal,"DomPortal");class BasePortalOutlet{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(portal){return portal instanceof ComponentPortal?(this._attachedPortal=portal,this.attachComponentPortal(portal)):portal instanceof TemplatePortal?(this._attachedPortal=portal,this.attachTemplatePortal(portal)):this.attachDomPortal&&portal instanceof DomPortal?(this._attachedPortal=portal,this.attachDomPortal(portal)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(fn){this._disposeFn=fn}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}__name(BasePortalOutlet,"BasePortalOutlet");__name(class BasePortalHost extends(null){},"BasePortalHost");class DomPortalOutlet extends BasePortalOutlet{constructor(outletElement,_componentFactoryResolver,_appRef,_defaultInjector,_document){super(),this.outletElement=outletElement,this._componentFactoryResolver=_componentFactoryResolver,this._appRef=_appRef,this._defaultInjector=_defaultInjector,this.attachDomPortal=portal=>{this._document;const element=portal.element;element.parentNode;const anchorNode=this._document.createComment("dom-portal");element.parentNode.insertBefore(anchorNode,element),this.outletElement.appendChild(element),this._attachedPortal=portal,super.setDisposeFn(()=>{anchorNode.parentNode&&anchorNode.parentNode.replaceChild(element,anchorNode)})},this._document=_document}attachComponentPortal(portal){const componentFactory=(portal.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(portal.component);let componentRef;return portal.viewContainerRef?(componentRef=portal.viewContainerRef.createComponent(componentFactory,portal.viewContainerRef.length,portal.injector||portal.viewContainerRef.injector),this.setDisposeFn(()=>componentRef.destroy())):(componentRef=componentFactory.create(portal.injector||this._defaultInjector||core.zs3.NULL),this._appRef.attachView(componentRef.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(componentRef.hostView),componentRef.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(componentRef)),this._attachedPortal=portal,componentRef}attachTemplatePortal(portal){let viewContainer=portal.viewContainerRef,viewRef=viewContainer.createEmbeddedView(portal.templateRef,portal.context,{injector:portal.injector});return viewRef.rootNodes.forEach(rootNode=>this.outletElement.appendChild(rootNode)),viewRef.detectChanges(),this.setDisposeFn(()=>{let index=viewContainer.indexOf(viewRef);-1!==index&&viewContainer.remove(index)}),this._attachedPortal=portal,viewRef}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(componentRef){return componentRef.hostView.rootNodes[0]}}__name(DomPortalOutlet,"DomPortalOutlet");__name(class DomPortalHost extends(null){},"DomPortalHost");class CdkPortal extends TemplatePortal{constructor(templateRef,viewContainerRef){super(templateRef,viewContainerRef)}}__name(CdkPortal,"CdkPortal"),CdkPortal.\u0275fac=__name(function(t){return new(t||CdkPortal)(core.Y36(core.Rgc),core.Y36(core.s_b))},"CdkPortal_Factory"),CdkPortal.\u0275dir=core.lG2({type:CdkPortal,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],features:[core.qOj]});class TemplatePortalDirective extends CdkPortal{}__name(TemplatePortalDirective,"TemplatePortalDirective"),TemplatePortalDirective.\u0275fac=function(){let \u0275TemplatePortalDirective_BaseFactory;return __name(function(t){return(\u0275TemplatePortalDirective_BaseFactory||(\u0275TemplatePortalDirective_BaseFactory=core.n5z(TemplatePortalDirective)))(t||TemplatePortalDirective)},"TemplatePortalDirective_Factory")}(),TemplatePortalDirective.\u0275dir=core.lG2({type:TemplatePortalDirective,selectors:[["","cdk-portal",""],["","portal",""]],exportAs:["cdkPortal"],features:[core._Bn([{provide:CdkPortal,useExisting:TemplatePortalDirective}]),core.qOj]});class CdkPortalOutlet extends BasePortalOutlet{constructor(_componentFactoryResolver,_viewContainerRef,_document){super(),this._componentFactoryResolver=_componentFactoryResolver,this._viewContainerRef=_viewContainerRef,this._isInitialized=!1,this.attached=new core.vpe,this.attachDomPortal=portal=>{this._document;const element=portal.element;element.parentNode;const anchorNode=this._document.createComment("dom-portal");portal.setAttachedHost(this),element.parentNode.insertBefore(anchorNode,element),this._getRootNode().appendChild(element),this._attachedPortal=portal,super.setDisposeFn(()=>{anchorNode.parentNode&&anchorNode.parentNode.replaceChild(element,anchorNode)})},this._document=_document}get portal(){return this._attachedPortal}set portal(portal){this.hasAttached()&&!portal&&!this._isInitialized||(this.hasAttached()&&super.detach(),portal&&super.attach(portal),this._attachedPortal=portal||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(portal){portal.setAttachedHost(this);const viewContainerRef=null!=portal.viewContainerRef?portal.viewContainerRef:this._viewContainerRef,componentFactory=(portal.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(portal.component),ref=viewContainerRef.createComponent(componentFactory,viewContainerRef.length,portal.injector||viewContainerRef.injector);return viewContainerRef!==this._viewContainerRef&&this._getRootNode().appendChild(ref.hostView.rootNodes[0]),super.setDisposeFn(()=>ref.destroy()),this._attachedPortal=portal,this._attachedRef=ref,this.attached.emit(ref),ref}attachTemplatePortal(portal){portal.setAttachedHost(this);const viewRef=this._viewContainerRef.createEmbeddedView(portal.templateRef,portal.context,{injector:portal.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=portal,this._attachedRef=viewRef,this.attached.emit(viewRef),viewRef}_getRootNode(){const nativeElement=this._viewContainerRef.element.nativeElement;return nativeElement.nodeType===nativeElement.ELEMENT_NODE?nativeElement:nativeElement.parentNode}}__name(CdkPortalOutlet,"CdkPortalOutlet"),CdkPortalOutlet.\u0275fac=__name(function(t){return new(t||CdkPortalOutlet)(core.Y36(core._Vd),core.Y36(core.s_b),core.Y36(common.K0))},"CdkPortalOutlet_Factory"),CdkPortalOutlet.\u0275dir=core.lG2({type:CdkPortalOutlet,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[core.qOj]});class PortalHostDirective extends CdkPortalOutlet{}__name(PortalHostDirective,"PortalHostDirective"),PortalHostDirective.\u0275fac=function(){let \u0275PortalHostDirective_BaseFactory;return __name(function(t){return(\u0275PortalHostDirective_BaseFactory||(\u0275PortalHostDirective_BaseFactory=core.n5z(PortalHostDirective)))(t||PortalHostDirective)},"PortalHostDirective_Factory")}(),PortalHostDirective.\u0275dir=core.lG2({type:PortalHostDirective,selectors:[["","cdkPortalHost",""],["","portalHost",""]],inputs:{portal:["cdkPortalHost","portal"]},exportAs:["cdkPortalHost"],features:[core._Bn([{provide:CdkPortalOutlet,useExisting:PortalHostDirective}]),core.qOj]});class PortalModule{}__name(PortalModule,"PortalModule"),PortalModule.\u0275fac=__name(function(t){return new(t||PortalModule)},"PortalModule_Factory"),PortalModule.\u0275mod=core.oAB({type:PortalModule}),PortalModule.\u0275inj=core.cJS({});__name(class PortalInjector{constructor(_parentInjector,_customTokens){this._parentInjector=_parentInjector,this._customTokens=_customTokens}get(token,notFoundValue){const value=this._customTokens.get(token);return void 0!==value?value:this._parentInjector.get(token,notFoundValue)}},"PortalInjector");const scrollBehaviorSupported=(0,fesm2015_platform.Mq)();class BlockScrollStrategy{constructor(_viewportRuler,document2){this._viewportRuler=_viewportRuler,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=document2}attach(){}enable(){if(this._canBeEnabled()){const root=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=root.style.left||"",this._previousHTMLStyles.top=root.style.top||"",root.style.left=(0,coercion.HM)(-this._previousScrollPosition.left),root.style.top=(0,coercion.HM)(-this._previousScrollPosition.top),root.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const html=this._document.documentElement,body=this._document.body,htmlStyle=html.style,bodyStyle=body.style,previousHtmlScrollBehavior=htmlStyle.scrollBehavior||"",previousBodyScrollBehavior=bodyStyle.scrollBehavior||"";this._isEnabled=!1,htmlStyle.left=this._previousHTMLStyles.left,htmlStyle.top=this._previousHTMLStyles.top,html.classList.remove("cdk-global-scrollblock"),scrollBehaviorSupported&&(htmlStyle.scrollBehavior=bodyStyle.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),scrollBehaviorSupported&&(htmlStyle.scrollBehavior=previousHtmlScrollBehavior,bodyStyle.scrollBehavior=previousBodyScrollBehavior)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const body=this._document.body,viewport=this._viewportRuler.getViewportSize();return body.scrollHeight>viewport.height||body.scrollWidth>viewport.width}}__name(BlockScrollStrategy,"BlockScrollStrategy"),__name(function getMatScrollStrategyAlreadyAttachedError(){return Error("Scroll strategy has already been attached.")},"getMatScrollStrategyAlreadyAttachedError");class CloseScrollStrategy{constructor(_scrollDispatcher,_ngZone,_viewportRuler,_config){this._scrollDispatcher=_scrollDispatcher,this._ngZone=_ngZone,this._viewportRuler=_viewportRuler,this._config=_config,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(overlayRef){this._overlayRef,this._overlayRef=overlayRef}enable(){if(this._scrollSubscription)return;const stream=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=stream.subscribe(()=>{const scrollPosition=this._viewportRuler.getViewportScrollPosition().top;Math.abs(scrollPosition-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=stream.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}__name(CloseScrollStrategy,"CloseScrollStrategy");class NoopScrollStrategy{enable(){}disable(){}attach(){}}function isElementScrolledOutsideView(element,scrollContainers){return scrollContainers.some(containerBounds=>{const outsideAbove=element.bottom<containerBounds.top,outsideBelow=element.top>containerBounds.bottom,outsideLeft=element.right<containerBounds.left,outsideRight=element.left>containerBounds.right;return outsideAbove||outsideBelow||outsideLeft||outsideRight})}function isElementClippedByScrolling(element,scrollContainers){return scrollContainers.some(scrollContainerRect=>{const clippedAbove=element.top<scrollContainerRect.top,clippedBelow=element.bottom>scrollContainerRect.bottom,clippedLeft=element.left<scrollContainerRect.left,clippedRight=element.right>scrollContainerRect.right;return clippedAbove||clippedBelow||clippedLeft||clippedRight})}__name(NoopScrollStrategy,"NoopScrollStrategy"),__name(isElementScrolledOutsideView,"isElementScrolledOutsideView"),__name(isElementClippedByScrolling,"isElementClippedByScrolling");class RepositionScrollStrategy{constructor(_scrollDispatcher,_viewportRuler,_ngZone,_config){this._scrollDispatcher=_scrollDispatcher,this._viewportRuler=_viewportRuler,this._ngZone=_ngZone,this._config=_config,this._scrollSubscription=null}attach(overlayRef){this._overlayRef,this._overlayRef=overlayRef}enable(){if(!this._scrollSubscription){const throttle=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(throttle).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const overlayRect=this._overlayRef.overlayElement.getBoundingClientRect(),{width,height}=this._viewportRuler.getViewportSize();isElementScrolledOutsideView(overlayRect,[{width,height,bottom:height,right:width,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}__name(RepositionScrollStrategy,"RepositionScrollStrategy");class ScrollStrategyOptions{constructor(_scrollDispatcher,_viewportRuler,_ngZone,document2){this._scrollDispatcher=_scrollDispatcher,this._viewportRuler=_viewportRuler,this._ngZone=_ngZone,this.noop=()=>new NoopScrollStrategy,this.close=config=>new CloseScrollStrategy(this._scrollDispatcher,this._ngZone,this._viewportRuler,config),this.block=()=>new BlockScrollStrategy(this._viewportRuler,this._document),this.reposition=config=>new RepositionScrollStrategy(this._scrollDispatcher,this._viewportRuler,this._ngZone,config),this._document=document2}}__name(ScrollStrategyOptions,"ScrollStrategyOptions"),ScrollStrategyOptions.\u0275fac=__name(function(t){return new(t||ScrollStrategyOptions)(core.LFG(ScrollDispatcher),core.LFG(ViewportRuler),core.LFG(core.R0b),core.LFG(common.K0))},"ScrollStrategyOptions_Factory"),ScrollStrategyOptions.\u0275prov=core.Yz7({token:ScrollStrategyOptions,factory:ScrollStrategyOptions.\u0275fac,providedIn:"root"});class OverlayConfig{constructor(config){if(this.scrollStrategy=new NoopScrollStrategy,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,config){const configKeys=Object.keys(config);for(const key of configKeys)void 0!==config[key]&&(this[key]=config[key])}}}__name(OverlayConfig,"OverlayConfig");__name(class ConnectionPositionPair{constructor(origin,overlay,offsetX,offsetY,panelClass){this.offsetX=offsetX,this.offsetY=offsetY,this.panelClass=panelClass,this.originX=origin.originX,this.originY=origin.originY,this.overlayX=overlay.overlayX,this.overlayY=overlay.overlayY}},"ConnectionPositionPair");__name(class ScrollingVisibility{},"ScrollingVisibility");class ConnectedOverlayPositionChange{constructor(connectionPair,scrollableViewProperties){this.connectionPair=connectionPair,this.scrollableViewProperties=scrollableViewProperties}}__name(ConnectedOverlayPositionChange,"ConnectedOverlayPositionChange"),__name(function validateVerticalPosition(property,value){if("top"!==value&&"bottom"!==value&&"center"!==value)throw Error(`ConnectedPosition: Invalid ${property} "${value}". Expected "top", "bottom" or "center".`)},"validateVerticalPosition"),__name(function validateHorizontalPosition(property,value){if("start"!==value&&"end"!==value&&"center"!==value)throw Error(`ConnectedPosition: Invalid ${property} "${value}". Expected "start", "end" or "center".`)},"validateHorizontalPosition");class OverlayRef{constructor(_portalOutlet,_host,_pane,_config,_ngZone,_keyboardDispatcher,_document,_location,_outsideClickDispatcher,_animationsDisabled=!1){this._portalOutlet=_portalOutlet,this._host=_host,this._pane=_pane,this._config=_config,this._ngZone=_ngZone,this._keyboardDispatcher=_keyboardDispatcher,this._document=_document,this._location=_location,this._outsideClickDispatcher=_outsideClickDispatcher,this._animationsDisabled=_animationsDisabled,this._backdropElement=null,this._backdropClick=new cjs.Subject,this._attachments=new cjs.Subject,this._detachments=new cjs.Subject,this._locationChanges=cjs.Subscription.EMPTY,this._backdropClickHandler=event=>this._backdropClick.next(event),this._backdropTransitionendHandler=event=>{this._disposeBackdrop(event.target)},this._keydownEvents=new cjs.Subject,this._outsidePointerEvents=new cjs.Subject,_config.scrollStrategy&&(this._scrollStrategy=_config.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=_config.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(portal){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const attachResult=this._portalOutlet.attach(portal);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,operators.qn)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof(null==attachResult?void 0:attachResult.onDestroy)&&attachResult.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),attachResult}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const detachmentResult=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),detachmentResult}dispose(){var _a;const isAttached=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(_a=this._host)||void 0===_a||_a.remove(),this._previousHostParent=this._pane=this._host=null,isAttached&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(strategy){strategy!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=strategy,this.hasAttached()&&(strategy.attach(this),this.updatePosition()))}updateSize(sizeConfig){this._config=Object.assign(Object.assign({},this._config),sizeConfig),this._updateElementSize()}setDirection(dir){this._config=Object.assign(Object.assign({},this._config),{direction:dir}),this._updateElementDirection()}addPanelClass(classes){this._pane&&this._toggleClasses(this._pane,classes,!0)}removePanelClass(classes){this._pane&&this._toggleClasses(this._pane,classes,!1)}getDirection(){const direction=this._config.direction;return direction?"string"==typeof direction?direction:direction.value:"ltr"}updateScrollStrategy(strategy){strategy!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=strategy,this.hasAttached()&&(strategy.attach(this),strategy.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const style=this._pane.style;style.width=(0,coercion.HM)(this._config.width),style.height=(0,coercion.HM)(this._config.height),style.minWidth=(0,coercion.HM)(this._config.minWidth),style.minHeight=(0,coercion.HM)(this._config.minHeight),style.maxWidth=(0,coercion.HM)(this._config.maxWidth),style.maxHeight=(0,coercion.HM)(this._config.maxHeight)}_togglePointerEvents(enablePointer){this._pane.style.pointerEvents=enablePointer?"":"none"}_attachBackdrop(){this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),this._animationsDisabled||"undefined"==typeof requestAnimationFrame?this._backdropElement.classList.add("cdk-overlay-backdrop-showing"):this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add("cdk-overlay-backdrop-showing")})})}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const backdropToDetach=this._backdropElement;if(backdropToDetach){if(this._animationsDisabled)return void this._disposeBackdrop(backdropToDetach);backdropToDetach.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{backdropToDetach.addEventListener("transitionend",this._backdropTransitionendHandler)}),backdropToDetach.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(backdropToDetach)},500))}}_toggleClasses(element,cssClasses,isAdd){const classes=(0,coercion.Eq)(cssClasses||[]).filter(c=>!!c);classes.length&&(isAdd?element.classList.add(...classes):element.classList.remove(...classes))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const subscription=this._ngZone.onStable.pipe((0,operators.Rs)((0,cjs.merge)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),subscription.unsubscribe())})})}_disposeScrollStrategy(){const scrollStrategy=this._scrollStrategy;scrollStrategy&&(scrollStrategy.disable(),scrollStrategy.detach&&scrollStrategy.detach())}_disposeBackdrop(backdrop){backdrop&&(backdrop.removeEventListener("click",this._backdropClickHandler),backdrop.removeEventListener("transitionend",this._backdropTransitionendHandler),backdrop.remove(),this._backdropElement===backdrop&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}__name(OverlayRef,"OverlayRef");class OverlayContainer{constructor(document2,_platform){this._platform=_platform,this._document=document2}ngOnDestroy(){var _a;null===(_a=this._containerElement)||void 0===_a||_a.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){if(this._platform.isBrowser||(0,fesm2015_platform.Oy)()){const oppositePlatformContainers=this._document.querySelectorAll('.cdk-overlay-container[platform="server"], .cdk-overlay-container[platform="test"]');for(let i=0;i<oppositePlatformContainers.length;i++)oppositePlatformContainers[i].remove()}const container=this._document.createElement("div");container.classList.add("cdk-overlay-container"),(0,fesm2015_platform.Oy)()?container.setAttribute("platform","test"):this._platform.isBrowser||container.setAttribute("platform","server"),this._document.body.appendChild(container),this._containerElement=container}}__name(OverlayContainer,"OverlayContainer"),OverlayContainer.\u0275fac=__name(function(t){return new(t||OverlayContainer)(core.LFG(common.K0),core.LFG(fesm2015_platform.t4))},"OverlayContainer_Factory"),OverlayContainer.\u0275prov=core.Yz7({token:OverlayContainer,factory:OverlayContainer.\u0275fac,providedIn:"root"});const cssUnitPattern=/([A-Za-z%]+)$/;class FlexibleConnectedPositionStrategy{constructor(connectedTo,_viewportRuler,_document,_platform,_overlayContainer){this._viewportRuler=_viewportRuler,this._document=_document,this._platform=_platform,this._overlayContainer=_overlayContainer,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new cjs.Subject,this._resizeSubscription=cjs.Subscription.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(connectedTo)}get positions(){return this._preferredPositions}attach(overlayRef){this._overlayRef&&this._overlayRef,this._validatePositions(),overlayRef.hostElement.classList.add("cdk-overlay-connected-position-bounding-box"),this._overlayRef=overlayRef,this._boundingBox=overlayRef.hostElement,this._pane=overlayRef.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const originRect=this._originRect,overlayRect=this._overlayRect,viewportRect=this._viewportRect,containerRect=this._containerRect,flexibleFits=[];let fallback;for(let pos of this._preferredPositions){let originPoint=this._getOriginPoint(originRect,containerRect,pos),overlayPoint=this._getOverlayPoint(originPoint,overlayRect,pos),overlayFit=this._getOverlayFit(overlayPoint,overlayRect,viewportRect,pos);if(overlayFit.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(pos,originPoint);this._canFitWithFlexibleDimensions(overlayFit,overlayPoint,viewportRect)?flexibleFits.push({position:pos,origin:originPoint,overlayRect,boundingBoxRect:this._calculateBoundingBoxRect(originPoint,pos)}):(!fallback||fallback.overlayFit.visibleArea<overlayFit.visibleArea)&&(fallback={overlayFit,overlayPoint,originPoint,position:pos,overlayRect})}if(flexibleFits.length){let bestFit=null,bestScore=-1;for(const fit of flexibleFits){const score=fit.boundingBoxRect.width*fit.boundingBoxRect.height*(fit.position.weight||1);score>bestScore&&(bestScore=score,bestFit=fit)}return this._isPushed=!1,void this._applyPosition(bestFit.position,bestFit.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(fallback.position,fallback.originPoint);this._applyPosition(fallback.position,fallback.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&extendStyles(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove("cdk-overlay-connected-position-bounding-box"),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const lastPosition=this._lastPosition;if(lastPosition){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const originPoint=this._getOriginPoint(this._originRect,this._containerRect,lastPosition);this._applyPosition(lastPosition,originPoint)}else this.apply()}withScrollableContainers(scrollables){return this._scrollables=scrollables,this}withPositions(positions){return this._preferredPositions=positions,-1===positions.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(margin){return this._viewportMargin=margin,this}withFlexibleDimensions(flexibleDimensions=!0){return this._hasFlexibleDimensions=flexibleDimensions,this}withGrowAfterOpen(growAfterOpen=!0){return this._growAfterOpen=growAfterOpen,this}withPush(canPush=!0){return this._canPush=canPush,this}withLockedPosition(isLocked=!0){return this._positionLocked=isLocked,this}setOrigin(origin){return this._origin=origin,this}withDefaultOffsetX(offset2){return this._offsetX=offset2,this}withDefaultOffsetY(offset2){return this._offsetY=offset2,this}withTransformOriginOn(selector){return this._transformOriginSelector=selector,this}_getOriginPoint(originRect,containerRect,pos){let x,y;if("center"==pos.originX)x=originRect.left+originRect.width/2;else{const startX=this._isRtl()?originRect.right:originRect.left,endX=this._isRtl()?originRect.left:originRect.right;x="start"==pos.originX?startX:endX}return containerRect.left<0&&(x-=containerRect.left),y="center"==pos.originY?originRect.top+originRect.height/2:"top"==pos.originY?originRect.top:originRect.bottom,containerRect.top<0&&(y-=containerRect.top),{x,y}}_getOverlayPoint(originPoint,overlayRect,pos){let overlayStartX,overlayStartY;return overlayStartX="center"==pos.overlayX?-overlayRect.width/2:"start"===pos.overlayX?this._isRtl()?-overlayRect.width:0:this._isRtl()?0:-overlayRect.width,overlayStartY="center"==pos.overlayY?-overlayRect.height/2:"top"==pos.overlayY?0:-overlayRect.height,{x:originPoint.x+overlayStartX,y:originPoint.y+overlayStartY}}_getOverlayFit(point,rawOverlayRect,viewport,position){const overlay=getRoundedBoundingClientRect(rawOverlayRect);let{x,y}=point,offsetX=this._getOffset(position,"x"),offsetY=this._getOffset(position,"y");offsetX&&(x+=offsetX),offsetY&&(y+=offsetY);let leftOverflow=0-x,rightOverflow=x+overlay.width-viewport.width,topOverflow=0-y,bottomOverflow=y+overlay.height-viewport.height,visibleWidth=this._subtractOverflows(overlay.width,leftOverflow,rightOverflow),visibleHeight=this._subtractOverflows(overlay.height,topOverflow,bottomOverflow),visibleArea=visibleWidth*visibleHeight;return{visibleArea,isCompletelyWithinViewport:overlay.width*overlay.height===visibleArea,fitsInViewportVertically:visibleHeight===overlay.height,fitsInViewportHorizontally:visibleWidth==overlay.width}}_canFitWithFlexibleDimensions(fit,point,viewport){if(this._hasFlexibleDimensions){const availableHeight=viewport.bottom-point.y,availableWidth=viewport.right-point.x,minHeight=getPixelValue(this._overlayRef.getConfig().minHeight),minWidth=getPixelValue(this._overlayRef.getConfig().minWidth),verticalFit=fit.fitsInViewportVertically||null!=minHeight&&minHeight<=availableHeight,horizontalFit=fit.fitsInViewportHorizontally||null!=minWidth&&minWidth<=availableWidth;return verticalFit&&horizontalFit}return!1}_pushOverlayOnScreen(start,rawOverlayRect,scrollPosition){if(this._previousPushAmount&&this._positionLocked)return{x:start.x+this._previousPushAmount.x,y:start.y+this._previousPushAmount.y};const overlay=getRoundedBoundingClientRect(rawOverlayRect),viewport=this._viewportRect,overflowRight=Math.max(start.x+overlay.width-viewport.width,0),overflowBottom=Math.max(start.y+overlay.height-viewport.height,0),overflowTop=Math.max(viewport.top-scrollPosition.top-start.y,0),overflowLeft=Math.max(viewport.left-scrollPosition.left-start.x,0);let pushX=0,pushY=0;return pushX=overlay.width<=viewport.width?overflowLeft||-overflowRight:start.x<this._viewportMargin?viewport.left-scrollPosition.left-start.x:0,pushY=overlay.height<=viewport.height?overflowTop||-overflowBottom:start.y<this._viewportMargin?viewport.top-scrollPosition.top-start.y:0,this._previousPushAmount={x:pushX,y:pushY},{x:start.x+pushX,y:start.y+pushY}}_applyPosition(position,originPoint){if(this._setTransformOrigin(position),this._setOverlayElementStyles(originPoint,position),this._setBoundingBoxStyles(originPoint,position),position.panelClass&&this._addPanelClasses(position.panelClass),this._lastPosition=position,this._positionChanges.observers.length){const scrollableViewProperties=this._getScrollVisibility(),changeEvent=new ConnectedOverlayPositionChange(position,scrollableViewProperties);this._positionChanges.next(changeEvent)}this._isInitialRender=!1}_setTransformOrigin(position){if(!this._transformOriginSelector)return;const elements=this._boundingBox.querySelectorAll(this._transformOriginSelector);let xOrigin,yOrigin=position.overlayY;xOrigin="center"===position.overlayX?"center":this._isRtl()?"start"===position.overlayX?"right":"left":"start"===position.overlayX?"left":"right";for(let i=0;i<elements.length;i++)elements[i].style.transformOrigin=`${xOrigin} ${yOrigin}`}_calculateBoundingBoxRect(origin,position){const viewport=this._viewportRect,isRtl=this._isRtl();let height,top,bottom;if("top"===position.overlayY)top=origin.y,height=viewport.height-top+this._viewportMargin;else if("bottom"===position.overlayY)bottom=viewport.height-origin.y+2*this._viewportMargin,height=viewport.height-bottom+this._viewportMargin;else{const smallestDistanceToViewportEdge=Math.min(viewport.bottom-origin.y+viewport.top,origin.y),previousHeight=this._lastBoundingBoxSize.height;height=2*smallestDistanceToViewportEdge,top=origin.y-smallestDistanceToViewportEdge,height>previousHeight&&!this._isInitialRender&&!this._growAfterOpen&&(top=origin.y-previousHeight/2)}const isBoundedByRightViewportEdge="start"===position.overlayX&&!isRtl||"end"===position.overlayX&&isRtl;let width,left,right;if("end"===position.overlayX&&!isRtl||"start"===position.overlayX&&isRtl)right=viewport.width-origin.x+this._viewportMargin,width=origin.x-this._viewportMargin;else if(isBoundedByRightViewportEdge)left=origin.x,width=viewport.right-origin.x;else{const smallestDistanceToViewportEdge=Math.min(viewport.right-origin.x+viewport.left,origin.x),previousWidth=this._lastBoundingBoxSize.width;width=2*smallestDistanceToViewportEdge,left=origin.x-smallestDistanceToViewportEdge,width>previousWidth&&!this._isInitialRender&&!this._growAfterOpen&&(left=origin.x-previousWidth/2)}return{top,left,bottom,right,width,height}}_setBoundingBoxStyles(origin,position){const boundingBoxRect=this._calculateBoundingBoxRect(origin,position);!this._isInitialRender&&!this._growAfterOpen&&(boundingBoxRect.height=Math.min(boundingBoxRect.height,this._lastBoundingBoxSize.height),boundingBoxRect.width=Math.min(boundingBoxRect.width,this._lastBoundingBoxSize.width));const styles={};if(this._hasExactPosition())styles.top=styles.left="0",styles.bottom=styles.right=styles.maxHeight=styles.maxWidth="",styles.width=styles.height="100%";else{const maxHeight=this._overlayRef.getConfig().maxHeight,maxWidth=this._overlayRef.getConfig().maxWidth;styles.height=(0,coercion.HM)(boundingBoxRect.height),styles.top=(0,coercion.HM)(boundingBoxRect.top),styles.bottom=(0,coercion.HM)(boundingBoxRect.bottom),styles.width=(0,coercion.HM)(boundingBoxRect.width),styles.left=(0,coercion.HM)(boundingBoxRect.left),styles.right=(0,coercion.HM)(boundingBoxRect.right),"center"===position.overlayX?styles.alignItems="center":styles.alignItems="end"===position.overlayX?"flex-end":"flex-start","center"===position.overlayY?styles.justifyContent="center":styles.justifyContent="bottom"===position.overlayY?"flex-end":"flex-start",maxHeight&&(styles.maxHeight=(0,coercion.HM)(maxHeight)),maxWidth&&(styles.maxWidth=(0,coercion.HM)(maxWidth))}this._lastBoundingBoxSize=boundingBoxRect,extendStyles(this._boundingBox.style,styles)}_resetBoundingBoxStyles(){extendStyles(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){extendStyles(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(originPoint,position){const styles={},hasExactPosition=this._hasExactPosition(),hasFlexibleDimensions=this._hasFlexibleDimensions,config=this._overlayRef.getConfig();if(hasExactPosition){const scrollPosition=this._viewportRuler.getViewportScrollPosition();extendStyles(styles,this._getExactOverlayY(position,originPoint,scrollPosition)),extendStyles(styles,this._getExactOverlayX(position,originPoint,scrollPosition))}else styles.position="static";let transformString="",offsetX=this._getOffset(position,"x"),offsetY=this._getOffset(position,"y");offsetX&&(transformString+=`translateX(${offsetX}px) `),offsetY&&(transformString+=`translateY(${offsetY}px)`),styles.transform=transformString.trim(),config.maxHeight&&(hasExactPosition?styles.maxHeight=(0,coercion.HM)(config.maxHeight):hasFlexibleDimensions&&(styles.maxHeight="")),config.maxWidth&&(hasExactPosition?styles.maxWidth=(0,coercion.HM)(config.maxWidth):hasFlexibleDimensions&&(styles.maxWidth="")),extendStyles(this._pane.style,styles)}_getExactOverlayY(position,originPoint,scrollPosition){let styles={top:"",bottom:""},overlayPoint=this._getOverlayPoint(originPoint,this._overlayRect,position);if(this._isPushed&&(overlayPoint=this._pushOverlayOnScreen(overlayPoint,this._overlayRect,scrollPosition)),"bottom"===position.overlayY){const documentHeight=this._document.documentElement.clientHeight;styles.bottom=documentHeight-(overlayPoint.y+this._overlayRect.height)+"px"}else styles.top=(0,coercion.HM)(overlayPoint.y);return styles}_getExactOverlayX(position,originPoint,scrollPosition){let horizontalStyleProperty,styles={left:"",right:""},overlayPoint=this._getOverlayPoint(originPoint,this._overlayRect,position);if(this._isPushed&&(overlayPoint=this._pushOverlayOnScreen(overlayPoint,this._overlayRect,scrollPosition)),horizontalStyleProperty=this._isRtl()?"end"===position.overlayX?"left":"right":"end"===position.overlayX?"right":"left","right"===horizontalStyleProperty){const documentWidth=this._document.documentElement.clientWidth;styles.right=documentWidth-(overlayPoint.x+this._overlayRect.width)+"px"}else styles.left=(0,coercion.HM)(overlayPoint.x);return styles}_getScrollVisibility(){const originBounds=this._getOriginRect(),overlayBounds=this._pane.getBoundingClientRect(),scrollContainerBounds=this._scrollables.map(scrollable=>scrollable.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:isElementClippedByScrolling(originBounds,scrollContainerBounds),isOriginOutsideView:isElementScrolledOutsideView(originBounds,scrollContainerBounds),isOverlayClipped:isElementClippedByScrolling(overlayBounds,scrollContainerBounds),isOverlayOutsideView:isElementScrolledOutsideView(overlayBounds,scrollContainerBounds)}}_subtractOverflows(length,...overflows){return overflows.reduce((currentValue,currentOverflow)=>currentValue-Math.max(currentOverflow,0),length)}_getNarrowedViewportRect(){const width=this._document.documentElement.clientWidth,height=this._document.documentElement.clientHeight,scrollPosition=this._viewportRuler.getViewportScrollPosition();return{top:scrollPosition.top+this._viewportMargin,left:scrollPosition.left+this._viewportMargin,right:scrollPosition.left+width-this._viewportMargin,bottom:scrollPosition.top+height-this._viewportMargin,width:width-2*this._viewportMargin,height:height-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(position,axis){return"x"===axis?null==position.offsetX?this._offsetX:position.offsetX:null==position.offsetY?this._offsetY:position.offsetY}_validatePositions(){}_addPanelClasses(cssClasses){this._pane&&(0,coercion.Eq)(cssClasses).forEach(cssClass=>{""!==cssClass&&-1===this._appliedPanelClasses.indexOf(cssClass)&&(this._appliedPanelClasses.push(cssClass),this._pane.classList.add(cssClass))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(cssClass=>{this._pane.classList.remove(cssClass)}),this._appliedPanelClasses=[])}_getOriginRect(){const origin=this._origin;if(origin instanceof core.SBq)return origin.nativeElement.getBoundingClientRect();if(origin instanceof Element)return origin.getBoundingClientRect();const width=origin.width||0,height=origin.height||0;return{top:origin.y,bottom:origin.y+height,left:origin.x,right:origin.x+width,height,width}}}function extendStyles(destination,source){for(let key in source)source.hasOwnProperty(key)&&(destination[key]=source[key]);return destination}function getPixelValue(input){if("number"!=typeof input&&null!=input){const[value,units]=input.split(cssUnitPattern);return units&&"px"!==units?null:parseFloat(value)}return input||null}function getRoundedBoundingClientRect(clientRect2){return{top:Math.floor(clientRect2.top),right:Math.floor(clientRect2.right),bottom:Math.floor(clientRect2.bottom),left:Math.floor(clientRect2.left),width:Math.floor(clientRect2.width),height:Math.floor(clientRect2.height)}}__name(FlexibleConnectedPositionStrategy,"FlexibleConnectedPositionStrategy"),__name(extendStyles,"extendStyles"),__name(getPixelValue,"getPixelValue"),__name(getRoundedBoundingClientRect,"getRoundedBoundingClientRect");class GlobalPositionStrategy{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(overlayRef){const config=overlayRef.getConfig();this._overlayRef=overlayRef,this._width&&!config.width&&overlayRef.updateSize({width:this._width}),this._height&&!config.height&&overlayRef.updateSize({height:this._height}),overlayRef.hostElement.classList.add("cdk-global-overlay-wrapper"),this._isDisposed=!1}top(value=""){return this._bottomOffset="",this._topOffset=value,this._alignItems="flex-start",this}left(value=""){return this._xOffset=value,this._xPosition="left",this}bottom(value=""){return this._topOffset="",this._bottomOffset=value,this._alignItems="flex-end",this}right(value=""){return this._xOffset=value,this._xPosition="right",this}start(value=""){return this._xOffset=value,this._xPosition="start",this}end(value=""){return this._xOffset=value,this._xPosition="end",this}width(value=""){return this._overlayRef?this._overlayRef.updateSize({width:value}):this._width=value,this}height(value=""){return this._overlayRef?this._overlayRef.updateSize({height:value}):this._height=value,this}centerHorizontally(offset2=""){return this.left(offset2),this._xPosition="center",this}centerVertically(offset2=""){return this.top(offset2),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const styles=this._overlayRef.overlayElement.style,parentStyles=this._overlayRef.hostElement.style,config=this._overlayRef.getConfig(),{width,height,maxWidth,maxHeight}=config,shouldBeFlushHorizontally=!("100%"!==width&&"100vw"!==width||maxWidth&&"100%"!==maxWidth&&"100vw"!==maxWidth),shouldBeFlushVertically=!("100%"!==height&&"100vh"!==height||maxHeight&&"100%"!==maxHeight&&"100vh"!==maxHeight),xPosition=this._xPosition,xOffset=this._xOffset,isRtl="rtl"===this._overlayRef.getConfig().direction;let marginLeft="",marginRight="",justifyContent="";shouldBeFlushHorizontally?justifyContent="flex-start":"center"===xPosition?(justifyContent="center",isRtl?marginRight=xOffset:marginLeft=xOffset):isRtl?"left"===xPosition||"end"===xPosition?(justifyContent="flex-end",marginLeft=xOffset):("right"===xPosition||"start"===xPosition)&&(justifyContent="flex-start",marginRight=xOffset):"left"===xPosition||"start"===xPosition?(justifyContent="flex-start",marginLeft=xOffset):("right"===xPosition||"end"===xPosition)&&(justifyContent="flex-end",marginRight=xOffset),styles.position=this._cssPosition,styles.marginLeft=shouldBeFlushHorizontally?"0":marginLeft,styles.marginTop=shouldBeFlushVertically?"0":this._topOffset,styles.marginBottom=this._bottomOffset,styles.marginRight=shouldBeFlushHorizontally?"0":marginRight,parentStyles.justifyContent=justifyContent,parentStyles.alignItems=shouldBeFlushVertically?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const styles=this._overlayRef.overlayElement.style,parent=this._overlayRef.hostElement,parentStyles=parent.style;parent.classList.remove("cdk-global-overlay-wrapper"),parentStyles.justifyContent=parentStyles.alignItems=styles.marginTop=styles.marginBottom=styles.marginLeft=styles.marginRight=styles.position="",this._overlayRef=null,this._isDisposed=!0}}__name(GlobalPositionStrategy,"GlobalPositionStrategy");class OverlayPositionBuilder{constructor(_viewportRuler,_document,_platform,_overlayContainer){this._viewportRuler=_viewportRuler,this._document=_document,this._platform=_platform,this._overlayContainer=_overlayContainer}global(){return new GlobalPositionStrategy}flexibleConnectedTo(origin){return new FlexibleConnectedPositionStrategy(origin,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}__name(OverlayPositionBuilder,"OverlayPositionBuilder"),OverlayPositionBuilder.\u0275fac=__name(function(t){return new(t||OverlayPositionBuilder)(core.LFG(ViewportRuler),core.LFG(common.K0),core.LFG(fesm2015_platform.t4),core.LFG(OverlayContainer))},"OverlayPositionBuilder_Factory"),OverlayPositionBuilder.\u0275prov=core.Yz7({token:OverlayPositionBuilder,factory:OverlayPositionBuilder.\u0275fac,providedIn:"root"});class BaseOverlayDispatcher{constructor(document2){this._attachedOverlays=[],this._document=document2}ngOnDestroy(){this.detach()}add(overlayRef){this.remove(overlayRef),this._attachedOverlays.push(overlayRef)}remove(overlayRef){const index=this._attachedOverlays.indexOf(overlayRef);index>-1&&this._attachedOverlays.splice(index,1),0===this._attachedOverlays.length&&this.detach()}}__name(BaseOverlayDispatcher,"BaseOverlayDispatcher"),BaseOverlayDispatcher.\u0275fac=__name(function(t){return new(t||BaseOverlayDispatcher)(core.LFG(common.K0))},"BaseOverlayDispatcher_Factory"),BaseOverlayDispatcher.\u0275prov=core.Yz7({token:BaseOverlayDispatcher,factory:BaseOverlayDispatcher.\u0275fac,providedIn:"root"});class OverlayKeyboardDispatcher extends BaseOverlayDispatcher{constructor(document2,_ngZone){super(document2),this._ngZone=_ngZone,this._keydownListener=event=>{const overlays=this._attachedOverlays;for(let i=overlays.length-1;i>-1;i--)if(overlays[i]._keydownEvents.observers.length>0){const keydownEvents=overlays[i]._keydownEvents;this._ngZone?this._ngZone.run(()=>keydownEvents.next(event)):keydownEvents.next(event);break}}}add(overlayRef){super.add(overlayRef),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}__name(OverlayKeyboardDispatcher,"OverlayKeyboardDispatcher"),OverlayKeyboardDispatcher.\u0275fac=__name(function(t){return new(t||OverlayKeyboardDispatcher)(core.LFG(common.K0),core.LFG(core.R0b,8))},"OverlayKeyboardDispatcher_Factory"),OverlayKeyboardDispatcher.\u0275prov=core.Yz7({token:OverlayKeyboardDispatcher,factory:OverlayKeyboardDispatcher.\u0275fac,providedIn:"root"});class OverlayOutsideClickDispatcher extends BaseOverlayDispatcher{constructor(document2,_platform,_ngZone){super(document2),this._platform=_platform,this._ngZone=_ngZone,this._cursorStyleIsSet=!1,this._pointerDownListener=event=>{this._pointerDownEventTarget=(0,fesm2015_platform.sA)(event)},this._clickListener=event=>{const target=(0,fesm2015_platform.sA)(event),origin="click"===event.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:target;this._pointerDownEventTarget=null;const overlays=this._attachedOverlays.slice();for(let i=overlays.length-1;i>-1;i--){const overlayRef=overlays[i];if(overlayRef._outsidePointerEvents.observers.length<1||!overlayRef.hasAttached())continue;if(overlayRef.overlayElement.contains(target)||overlayRef.overlayElement.contains(origin))break;const outsidePointerEvents=overlayRef._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>outsidePointerEvents.next(event)):outsidePointerEvents.next(event)}}}add(overlayRef){if(super.add(overlayRef),!this._isAttached){const body=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(body)):this._addEventListeners(body),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=body.style.cursor,body.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const body=this._document.body;body.removeEventListener("pointerdown",this._pointerDownListener,!0),body.removeEventListener("click",this._clickListener,!0),body.removeEventListener("auxclick",this._clickListener,!0),body.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(body.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(body){body.addEventListener("pointerdown",this._pointerDownListener,!0),body.addEventListener("click",this._clickListener,!0),body.addEventListener("auxclick",this._clickListener,!0),body.addEventListener("contextmenu",this._clickListener,!0)}}__name(OverlayOutsideClickDispatcher,"OverlayOutsideClickDispatcher"),OverlayOutsideClickDispatcher.\u0275fac=__name(function(t){return new(t||OverlayOutsideClickDispatcher)(core.LFG(common.K0),core.LFG(fesm2015_platform.t4),core.LFG(core.R0b,8))},"OverlayOutsideClickDispatcher_Factory"),OverlayOutsideClickDispatcher.\u0275prov=core.Yz7({token:OverlayOutsideClickDispatcher,factory:OverlayOutsideClickDispatcher.\u0275fac,providedIn:"root"});let overlay_nextUniqueId=0;class Overlay{constructor(scrollStrategies,_overlayContainer,_componentFactoryResolver,_positionBuilder,_keyboardDispatcher,_injector,_ngZone,_document,_directionality,_location,_outsideClickDispatcher,_animationsModuleType){this.scrollStrategies=scrollStrategies,this._overlayContainer=_overlayContainer,this._componentFactoryResolver=_componentFactoryResolver,this._positionBuilder=_positionBuilder,this._keyboardDispatcher=_keyboardDispatcher,this._injector=_injector,this._ngZone=_ngZone,this._document=_document,this._directionality=_directionality,this._location=_location,this._outsideClickDispatcher=_outsideClickDispatcher,this._animationsModuleType=_animationsModuleType}create(config){const host=this._createHostElement(),pane=this._createPaneElement(host),portalOutlet=this._createPortalOutlet(pane),overlayConfig=new OverlayConfig(config);return overlayConfig.direction=overlayConfig.direction||this._directionality.value,new OverlayRef(portalOutlet,host,pane,overlayConfig,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(host){const pane=this._document.createElement("div");return pane.id="cdk-overlay-"+overlay_nextUniqueId++,pane.classList.add("cdk-overlay-pane"),host.appendChild(pane),pane}_createHostElement(){const host=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(host),host}_createPortalOutlet(pane){return this._appRef||(this._appRef=this._injector.get(core.z2F)),new DomPortalOutlet(pane,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}__name(Overlay,"Overlay"),Overlay.\u0275fac=__name(function(t){return new(t||Overlay)(core.LFG(ScrollStrategyOptions),core.LFG(OverlayContainer),core.LFG(core._Vd),core.LFG(OverlayPositionBuilder),core.LFG(OverlayKeyboardDispatcher),core.LFG(core.zs3),core.LFG(core.R0b),core.LFG(common.K0),core.LFG(Directionality),core.LFG(common.Ye),core.LFG(OverlayOutsideClickDispatcher),core.LFG(core.QbO,8))},"Overlay_Factory"),Overlay.\u0275prov=core.Yz7({token:Overlay,factory:Overlay.\u0275fac});const defaultPositionList=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],CDK_CONNECTED_OVERLAY_SCROLL_STRATEGY=new core.OlP("cdk-connected-overlay-scroll-strategy");class CdkOverlayOrigin{constructor(elementRef){this.elementRef=elementRef}}__name(CdkOverlayOrigin,"CdkOverlayOrigin"),CdkOverlayOrigin.\u0275fac=__name(function(t){return new(t||CdkOverlayOrigin)(core.Y36(core.SBq))},"CdkOverlayOrigin_Factory"),CdkOverlayOrigin.\u0275dir=core.lG2({type:CdkOverlayOrigin,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"]});class CdkConnectedOverlay{constructor(_overlay,templateRef,viewContainerRef,scrollStrategyFactory,_dir){this._overlay=_overlay,this._dir=_dir,this._hasBackdrop=!1,this._lockPosition=!1,this._growAfterOpen=!1,this._flexibleDimensions=!1,this._push=!1,this._backdropSubscription=cjs.Subscription.EMPTY,this._attachSubscription=cjs.Subscription.EMPTY,this._detachSubscription=cjs.Subscription.EMPTY,this._positionSubscription=cjs.Subscription.EMPTY,this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.backdropClick=new core.vpe,this.positionChange=new core.vpe,this.attach=new core.vpe,this.detach=new core.vpe,this.overlayKeydown=new core.vpe,this.overlayOutsideClick=new core.vpe,this._templatePortal=new TemplatePortal(templateRef,viewContainerRef),this._scrollStrategyFactory=scrollStrategyFactory,this.scrollStrategy=this._scrollStrategyFactory()}get offsetX(){return this._offsetX}set offsetX(offsetX){this._offsetX=offsetX,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(offsetY){this._offsetY=offsetY,this._position&&this._updatePositionStrategy(this._position)}get hasBackdrop(){return this._hasBackdrop}set hasBackdrop(value){this._hasBackdrop=(0,coercion.Ig)(value)}get lockPosition(){return this._lockPosition}set lockPosition(value){this._lockPosition=(0,coercion.Ig)(value)}get flexibleDimensions(){return this._flexibleDimensions}set flexibleDimensions(value){this._flexibleDimensions=(0,coercion.Ig)(value)}get growAfterOpen(){return this._growAfterOpen}set growAfterOpen(value){this._growAfterOpen=(0,coercion.Ig)(value)}get push(){return this._push}set push(value){this._push=(0,coercion.Ig)(value)}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(changes){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),changes.origin&&this.open&&this._position.apply()),changes.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=defaultPositionList);const overlayRef=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=overlayRef.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=overlayRef.detachments().subscribe(()=>this.detach.emit()),overlayRef.keydownEvents().subscribe(event=>{this.overlayKeydown.next(event),event.keyCode===keycodes.hY&&!this.disableClose&&!(0,keycodes.Vb)(event)&&(event.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(event=>{this.overlayOutsideClick.next(event)})}_buildConfig(){const positionStrategy=this._position=this.positionStrategy||this._createPositionStrategy(),overlayConfig=new OverlayConfig({direction:this._dir,positionStrategy,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop});return(this.width||0===this.width)&&(overlayConfig.width=this.width),(this.height||0===this.height)&&(overlayConfig.height=this.height),(this.minWidth||0===this.minWidth)&&(overlayConfig.minWidth=this.minWidth),(this.minHeight||0===this.minHeight)&&(overlayConfig.minHeight=this.minHeight),this.backdropClass&&(overlayConfig.backdropClass=this.backdropClass),this.panelClass&&(overlayConfig.panelClass=this.panelClass),overlayConfig}_updatePositionStrategy(positionStrategy){const positions=this.positions.map(currentPosition=>({originX:currentPosition.originX,originY:currentPosition.originY,overlayX:currentPosition.overlayX,overlayY:currentPosition.overlayY,offsetX:currentPosition.offsetX||this.offsetX,offsetY:currentPosition.offsetY||this.offsetY,panelClass:currentPosition.panelClass||void 0}));return positionStrategy.setOrigin(this._getFlexibleConnectedPositionStrategyOrigin()).withPositions(positions).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){const strategy=this._overlay.position().flexibleConnectedTo(this._getFlexibleConnectedPositionStrategyOrigin());return this._updatePositionStrategy(strategy),strategy}_getFlexibleConnectedPositionStrategyOrigin(){return this.origin instanceof CdkOverlayOrigin?this.origin.elementRef:this.origin}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(event=>{this.backdropClick.emit(event)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe((0,operators.oE)(()=>this.positionChange.observers.length>0)).subscribe(position=>{this.positionChange.emit(position),0===this.positionChange.observers.length&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}}function CDK_CONNECTED_OVERLAY_SCROLL_STRATEGY_PROVIDER_FACTORY(overlay){return()=>overlay.scrollStrategies.reposition()}__name(CdkConnectedOverlay,"CdkConnectedOverlay"),CdkConnectedOverlay.\u0275fac=__name(function(t){return new(t||CdkConnectedOverlay)(core.Y36(Overlay),core.Y36(core.Rgc),core.Y36(core.s_b),core.Y36(CDK_CONNECTED_OVERLAY_SCROLL_STRATEGY),core.Y36(Directionality,8))},"CdkConnectedOverlay_Factory"),CdkConnectedOverlay.\u0275dir=core.lG2({type:CdkConnectedOverlay,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:["cdkConnectedOverlayOrigin","origin"],positions:["cdkConnectedOverlayPositions","positions"],positionStrategy:["cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:["cdkConnectedOverlayOffsetX","offsetX"],offsetY:["cdkConnectedOverlayOffsetY","offsetY"],width:["cdkConnectedOverlayWidth","width"],height:["cdkConnectedOverlayHeight","height"],minWidth:["cdkConnectedOverlayMinWidth","minWidth"],minHeight:["cdkConnectedOverlayMinHeight","minHeight"],backdropClass:["cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:["cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:["cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:["cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:["cdkConnectedOverlayOpen","open"],disableClose:["cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:["cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:["cdkConnectedOverlayHasBackdrop","hasBackdrop"],lockPosition:["cdkConnectedOverlayLockPosition","lockPosition"],flexibleDimensions:["cdkConnectedOverlayFlexibleDimensions","flexibleDimensions"],growAfterOpen:["cdkConnectedOverlayGrowAfterOpen","growAfterOpen"],push:["cdkConnectedOverlayPush","push"]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],features:[core.TTD]}),__name(CDK_CONNECTED_OVERLAY_SCROLL_STRATEGY_PROVIDER_FACTORY,"CDK_CONNECTED_OVERLAY_SCROLL_STRATEGY_PROVIDER_FACTORY");const CDK_CONNECTED_OVERLAY_SCROLL_STRATEGY_PROVIDER={provide:CDK_CONNECTED_OVERLAY_SCROLL_STRATEGY,deps:[Overlay],useFactory:CDK_CONNECTED_OVERLAY_SCROLL_STRATEGY_PROVIDER_FACTORY};class OverlayModule{}__name(OverlayModule,"OverlayModule"),OverlayModule.\u0275fac=__name(function(t){return new(t||OverlayModule)},"OverlayModule_Factory"),OverlayModule.\u0275mod=core.oAB({type:OverlayModule}),OverlayModule.\u0275inj=core.cJS({providers:[Overlay,CDK_CONNECTED_OVERLAY_SCROLL_STRATEGY_PROVIDER],imports:[BidiModule,PortalModule,ScrollingModule,ScrollingModule]});class FullscreenOverlayContainer extends OverlayContainer{constructor(_document,platform2){super(_document,platform2)}ngOnDestroy(){super.ngOnDestroy(),this._fullScreenEventName&&this._fullScreenListener&&this._document.removeEventListener(this._fullScreenEventName,this._fullScreenListener)}_createContainer(){super._createContainer(),this._adjustParentForFullscreenChange(),this._addFullscreenChangeListener(()=>this._adjustParentForFullscreenChange())}_adjustParentForFullscreenChange(){this._containerElement&&(this.getFullscreenElement()||this._document.body).appendChild(this._containerElement)}_addFullscreenChangeListener(fn){const eventName=this._getEventName();eventName&&(this._fullScreenListener&&this._document.removeEventListener(eventName,this._fullScreenListener),this._document.addEventListener(eventName,fn),this._fullScreenListener=fn)}_getEventName(){if(!this._fullScreenEventName){const _document=this._document;_document.fullscreenEnabled?this._fullScreenEventName="fullscreenchange":_document.webkitFullscreenEnabled?this._fullScreenEventName="webkitfullscreenchange":_document.mozFullScreenEnabled?this._fullScreenEventName="mozfullscreenchange":_document.msFullscreenEnabled&&(this._fullScreenEventName="MSFullscreenChange")}return this._fullScreenEventName}getFullscreenElement(){const _document=this._document;return _document.fullscreenElement||_document.webkitFullscreenElement||_document.mozFullScreenElement||_document.msFullscreenElement||null}}__name(FullscreenOverlayContainer,"FullscreenOverlayContainer"),FullscreenOverlayContainer.\u0275fac=__name(function(t){return new(t||FullscreenOverlayContainer)(core.LFG(common.K0),core.LFG(fesm2015_platform.t4))},"FullscreenOverlayContainer_Factory"),FullscreenOverlayContainer.\u0275prov=core.Yz7({token:FullscreenOverlayContainer,factory:FullscreenOverlayContainer.\u0275fac,providedIn:"root"});const listenerOptions=(0,fesm2015_platform.i$)({passive:!0});class AutofillMonitor{constructor(_platform,_ngZone){this._platform=_platform,this._ngZone=_ngZone,this._monitoredElements=new Map}monitor(elementOrRef){if(!this._platform.isBrowser)return cjs.EMPTY;const element=(0,coercion.fI)(elementOrRef),info=this._monitoredElements.get(element);if(info)return info.subject;const result=new cjs.Subject,cssClass="cdk-text-field-autofilled",listener=__name(event=>{"cdk-text-field-autofill-start"!==event.animationName||element.classList.contains(cssClass)?"cdk-text-field-autofill-end"===event.animationName&&element.classList.contains(cssClass)&&(element.classList.remove(cssClass),this._ngZone.run(()=>result.next({target:event.target,isAutofilled:!1}))):(element.classList.add(cssClass),this._ngZone.run(()=>result.next({target:event.target,isAutofilled:!0})))},"listener");return this._ngZone.runOutsideAngular(()=>{element.addEventListener("animationstart",listener,listenerOptions),element.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(element,{subject:result,unlisten:()=>{element.removeEventListener("animationstart",listener,listenerOptions)}}),result}stopMonitoring(elementOrRef){const element=(0,coercion.fI)(elementOrRef),info=this._monitoredElements.get(element);info&&(info.unlisten(),info.subject.complete(),element.classList.remove("cdk-text-field-autofill-monitored"),element.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(element))}ngOnDestroy(){this._monitoredElements.forEach((_info,element)=>this.stopMonitoring(element))}}__name(AutofillMonitor,"AutofillMonitor"),AutofillMonitor.\u0275fac=__name(function(t){return new(t||AutofillMonitor)(core.LFG(fesm2015_platform.t4),core.LFG(core.R0b))},"AutofillMonitor_Factory"),AutofillMonitor.\u0275prov=core.Yz7({token:AutofillMonitor,factory:AutofillMonitor.\u0275fac,providedIn:"root"});class CdkAutofill{constructor(_elementRef,_autofillMonitor){this._elementRef=_elementRef,this._autofillMonitor=_autofillMonitor,this.cdkAutofill=new core.vpe}ngOnInit(){this._autofillMonitor.monitor(this._elementRef).subscribe(event=>this.cdkAutofill.emit(event))}ngOnDestroy(){this._autofillMonitor.stopMonitoring(this._elementRef)}}__name(CdkAutofill,"CdkAutofill"),CdkAutofill.\u0275fac=__name(function(t){return new(t||CdkAutofill)(core.Y36(core.SBq),core.Y36(AutofillMonitor))},"CdkAutofill_Factory"),CdkAutofill.\u0275dir=core.lG2({type:CdkAutofill,selectors:[["","cdkAutofill",""]],outputs:{cdkAutofill:"cdkAutofill"}});class CdkTextareaAutosize{constructor(_elementRef,_platform,_ngZone,document2){this._elementRef=_elementRef,this._platform=_platform,this._ngZone=_ngZone,this._destroyed=new cjs.Subject,this._enabled=!0,this._previousMinRows=-1,this._isViewInited=!1,this._handleFocusEvent=event=>{this._hasFocus="focus"===event.type},this._document=document2,this._textareaElement=this._elementRef.nativeElement}get minRows(){return this._minRows}set minRows(value){this._minRows=(0,coercion.su)(value),this._setMinHeight()}get maxRows(){return this._maxRows}set maxRows(value){this._maxRows=(0,coercion.su)(value),this._setMaxHeight()}get enabled(){return this._enabled}set enabled(value){value=(0,coercion.Ig)(value),this._enabled!==value&&((this._enabled=value)?this.resizeToFitContent(!0):this.reset())}get placeholder(){return this._textareaElement.placeholder}set placeholder(value){this._cachedPlaceholderHeight=void 0,value?this._textareaElement.setAttribute("placeholder",value):this._textareaElement.removeAttribute("placeholder"),this._cacheTextareaPlaceholderHeight()}_setMinHeight(){const minHeight=this.minRows&&this._cachedLineHeight?this.minRows*this._cachedLineHeight+"px":null;minHeight&&(this._textareaElement.style.minHeight=minHeight)}_setMaxHeight(){const maxHeight=this.maxRows&&this._cachedLineHeight?this.maxRows*this._cachedLineHeight+"px":null;maxHeight&&(this._textareaElement.style.maxHeight=maxHeight)}ngAfterViewInit(){this._platform.isBrowser&&(this._initialHeight=this._textareaElement.style.height,this.resizeToFitContent(),this._ngZone.runOutsideAngular(()=>{const window2=this._getWindow();(0,cjs.fromEvent)(window2,"resize").pipe((0,operators.e9)(16),(0,operators.Rs)(this._destroyed)).subscribe(()=>this.resizeToFitContent(!0)),this._textareaElement.addEventListener("focus",this._handleFocusEvent),this._textareaElement.addEventListener("blur",this._handleFocusEvent)}),this._isViewInited=!0,this.resizeToFitContent(!0))}ngOnDestroy(){this._textareaElement.removeEventListener("focus",this._handleFocusEvent),this._textareaElement.removeEventListener("blur",this._handleFocusEvent),this._destroyed.next(),this._destroyed.complete()}_cacheTextareaLineHeight(){if(this._cachedLineHeight)return;let textareaClone=this._textareaElement.cloneNode(!1);textareaClone.rows=1,textareaClone.style.position="absolute",textareaClone.style.visibility="hidden",textareaClone.style.border="none",textareaClone.style.padding="0",textareaClone.style.height="",textareaClone.style.minHeight="",textareaClone.style.maxHeight="",textareaClone.style.overflow="hidden",this._textareaElement.parentNode.appendChild(textareaClone),this._cachedLineHeight=textareaClone.clientHeight,textareaClone.remove(),this._setMinHeight(),this._setMaxHeight()}_measureScrollHeight(){const element=this._textareaElement,previousMargin=element.style.marginBottom||"",isFirefox=this._platform.FIREFOX,needsMarginFiller=isFirefox&&this._hasFocus,measuringClass=isFirefox?"cdk-textarea-autosize-measuring-firefox":"cdk-textarea-autosize-measuring";needsMarginFiller&&(element.style.marginBottom=`${element.clientHeight}px`),element.classList.add(measuringClass);const scrollHeight=element.scrollHeight-4;return element.classList.remove(measuringClass),needsMarginFiller&&(element.style.marginBottom=previousMargin),scrollHeight}_cacheTextareaPlaceholderHeight(){if(!this._isViewInited||null!=this._cachedPlaceholderHeight)return;if(!this.placeholder)return void(this._cachedPlaceholderHeight=0);const value=this._textareaElement.value;this._textareaElement.value=this._textareaElement.placeholder,this._cachedPlaceholderHeight=this._measureScrollHeight(),this._textareaElement.value=value}ngDoCheck(){this._platform.isBrowser&&this.resizeToFitContent()}resizeToFitContent(force=!1){if(!this._enabled||(this._cacheTextareaLineHeight(),this._cacheTextareaPlaceholderHeight(),!this._cachedLineHeight))return;const textarea=this._elementRef.nativeElement,value=textarea.value;if(!force&&this._minRows===this._previousMinRows&&value===this._previousValue)return;const scrollHeight=this._measureScrollHeight(),height=Math.max(scrollHeight,this._cachedPlaceholderHeight||0);textarea.style.height=`${height}px`,this._ngZone.runOutsideAngular(()=>{"undefined"!=typeof requestAnimationFrame?requestAnimationFrame(()=>this._scrollToCaretPosition(textarea)):setTimeout(()=>this._scrollToCaretPosition(textarea))}),this._previousValue=value,this._previousMinRows=this._minRows}reset(){void 0!==this._initialHeight&&(this._textareaElement.style.height=this._initialHeight)}_noopInputHandler(){}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_scrollToCaretPosition(textarea){const{selectionStart,selectionEnd}=textarea;!this._destroyed.isStopped&&this._hasFocus&&textarea.setSelectionRange(selectionStart,selectionEnd)}}__name(CdkTextareaAutosize,"CdkTextareaAutosize"),CdkTextareaAutosize.\u0275fac=__name(function(t){return new(t||CdkTextareaAutosize)(core.Y36(core.SBq),core.Y36(fesm2015_platform.t4),core.Y36(core.R0b),core.Y36(common.K0,8))},"CdkTextareaAutosize_Factory"),CdkTextareaAutosize.\u0275dir=core.lG2({type:CdkTextareaAutosize,selectors:[["textarea","cdkTextareaAutosize",""]],hostAttrs:["rows","1",1,"cdk-textarea-autosize"],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("input",__name(function(){return ctx._noopInputHandler()},"CdkTextareaAutosize_input_HostBindingHandler"))},"CdkTextareaAutosize_HostBindings"),inputs:{minRows:["cdkAutosizeMinRows","minRows"],maxRows:["cdkAutosizeMaxRows","maxRows"],enabled:["cdkTextareaAutosize","enabled"],placeholder:"placeholder"},exportAs:["cdkTextareaAutosize"]});class TextFieldModule{}__name(TextFieldModule,"TextFieldModule"),TextFieldModule.\u0275fac=__name(function(t){return new(t||TextFieldModule)},"TextFieldModule_Factory"),TextFieldModule.\u0275mod=core.oAB({type:TextFieldModule}),TextFieldModule.\u0275inj=core.cJS({}),__name(function getMatInputUnsupportedTypeError(type){return Error(`Input type "${type}" isn't supported by matInput.`)},"getMatInputUnsupportedTypeError");const MAT_INPUT_VALUE_ACCESSOR=new core.OlP("MAT_INPUT_VALUE_ACCESSOR"),MAT_INPUT_INVALID_TYPES=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let input_nextUniqueId=0;const _MatInputBase=mixinErrorState(class{constructor(_defaultErrorStateMatcher,_parentForm,_parentFormGroup,ngControl){this._defaultErrorStateMatcher=_defaultErrorStateMatcher,this._parentForm=_parentForm,this._parentFormGroup=_parentFormGroup,this.ngControl=ngControl,this.stateChanges=new cjs.Subject}});class MatInput extends _MatInputBase{constructor(_elementRef,_platform,ngControl,_parentForm,_parentFormGroup,_defaultErrorStateMatcher,inputValueAccessor,_autofillMonitor,ngZone,_formField){super(_defaultErrorStateMatcher,_parentForm,_parentFormGroup,ngControl),this._elementRef=_elementRef,this._platform=_platform,this._autofillMonitor=_autofillMonitor,this._formField=_formField,this._uid="mat-input-"+input_nextUniqueId++,this.focused=!1,this.stateChanges=new cjs.Subject,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>(0,fesm2015_platform.qK)().has(t)),this._iOSKeyupListener=event=>{const el=event.target;!el.value&&0===el.selectionStart&&0===el.selectionEnd&&(el.setSelectionRange(1,1),el.setSelectionRange(0,0))};const element=this._elementRef.nativeElement,nodeName=element.nodeName.toLowerCase();this._inputValueAccessor=inputValueAccessor||element,this._previousNativeValue=this.value,this.id=this.id,_platform.IOS&&ngZone.runOutsideAngular(()=>{_elementRef.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===nodeName,this._isTextarea="textarea"===nodeName,this._isInFormField=!!_formField,this._isNativeSelect&&(this.controlType=element.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(value){this._disabled=(0,coercion.Ig)(value),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(value){this._id=value||this._uid}get required(){var _a,_b,_c,_d;return null!==(_d=null!==(_a=this._required)&&void 0!==_a?_a:null===(_c=null===(_b=this.ngControl)||void 0===_b?void 0:_b.control)||void 0===_c?void 0:_c.hasValidator(fesm2015_forms.kI.required))&&void 0!==_d&&_d}set required(value){this._required=(0,coercion.Ig)(value)}get type(){return this._type}set type(value){this._type=value||"text",this._validateType(),!this._isTextarea&&(0,fesm2015_platform.qK)().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(value){value!==this.value&&(this._inputValueAccessor.value=value,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(value){this._readonly=(0,coercion.Ig)(value)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(event=>{this.autofilled=event.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(options){this._elementRef.nativeElement.focus(options)}_focusChanged(isFocused){isFocused!==this.focused&&(this.focused=isFocused,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var _a;const formField=this._formField,placeholder=!formField||"legacy"!==formField.appearance||null!==(_a=formField._hasLabel)&&void 0!==_a&&_a.call(formField)?this.placeholder:null;if(placeholder!==this._previousPlaceholder){const element=this._elementRef.nativeElement;this._previousPlaceholder=placeholder,placeholder?element.setAttribute("placeholder",placeholder):element.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const newValue=this._elementRef.nativeElement.value;this._previousNativeValue!==newValue&&(this._previousNativeValue=newValue,this.stateChanges.next())}_validateType(){MAT_INPUT_INVALID_TYPES.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let validity=this._elementRef.nativeElement.validity;return validity&&validity.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const selectElement=this._elementRef.nativeElement,firstOption=selectElement.options[0];return this.focused||selectElement.multiple||!this.empty||!!(selectElement.selectedIndex>-1&&firstOption&&firstOption.label)}return this.focused||!this.empty}setDescribedByIds(ids){ids.length?this._elementRef.nativeElement.setAttribute("aria-describedby",ids.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const element=this._elementRef.nativeElement;return this._isNativeSelect&&(element.multiple||element.size>1)}}__name(MatInput,"MatInput"),MatInput.\u0275fac=__name(function(t){return new(t||MatInput)(core.Y36(core.SBq),core.Y36(fesm2015_platform.t4),core.Y36(fesm2015_forms.a5,10),core.Y36(fesm2015_forms.F,8),core.Y36(fesm2015_forms.sg,8),core.Y36(ErrorStateMatcher),core.Y36(MAT_INPUT_VALUE_ACCESSOR,10),core.Y36(AutofillMonitor),core.Y36(core.R0b),core.Y36(MAT_FORM_FIELD,8))},"MatInput_Factory"),MatInput.\u0275dir=core.lG2({type:MatInput,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:12,hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("focus",__name(function(){return ctx._focusChanged(!0)},"MatInput_focus_HostBindingHandler"))("blur",__name(function(){return ctx._focusChanged(!1)},"MatInput_blur_HostBindingHandler"))("input",__name(function(){return ctx._onInput()},"MatInput_input_HostBindingHandler")),2&rf&&(core.Ikx("disabled",ctx.disabled)("required",ctx.required),core.uIk("id",ctx.id)("data-placeholder",ctx.placeholder)("name",ctx.name||null)("readonly",ctx.readonly&&!ctx._isNativeSelect||null)("aria-invalid",ctx.empty&&ctx.required?null:ctx.errorState)("aria-required",ctx.required),core.ekj("mat-input-server",ctx._isServer)("mat-native-select-inline",ctx._isInlineSelect()))},"MatInput_HostBindings"),inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[core._Bn([{provide:MatFormFieldControl,useExisting:MatInput}]),core.qOj,core.TTD]});class MatInputModule{}__name(MatInputModule,"MatInputModule"),MatInputModule.\u0275fac=__name(function(t){return new(t||MatInputModule)},"MatInputModule_Factory"),MatInputModule.\u0275mod=core.oAB({type:MatInputModule}),MatInputModule.\u0275inj=core.cJS({providers:[ErrorStateMatcher],imports:[TextFieldModule,MatFormFieldModule,MatCommonModule,TextFieldModule,MatFormFieldModule]});function MatCalendarBody_tr_0_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"tr",2)(1,"td",3),core._uU(2),core.qZA()()),2&rf){const ctx_r0=core.oxw();core.xp6(1),core.Udp("padding-top",ctx_r0._cellPadding)("padding-bottom",ctx_r0._cellPadding),core.uIk("colspan",ctx_r0.numCols),core.xp6(1),core.hij(" ",ctx_r0.label," ")}}function MatCalendarBody_tr_1_td_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"td",3),core._uU(1),core.qZA()),2&rf){const ctx_r4=core.oxw(2);core.Udp("padding-top",ctx_r4._cellPadding)("padding-bottom",ctx_r4._cellPadding),core.uIk("colspan",ctx_r4._firstRowOffset),core.xp6(1),core.hij(" ",ctx_r4._firstRowOffset>=ctx_r4.labelMinRequiredCells?ctx_r4.label:""," ")}}function MatCalendarBody_tr_1_td_2_Template(rf,ctx){if(1&rf){const _r9=core.EpF();core.TgZ(0,"td",7)(1,"button",8),core.NdJ("click",__name(function($event){const item_r6=core.CHM(_r9).$implicit,ctx_r8=core.oxw(2);return core.KtG(ctx_r8._cellClicked(item_r6,$event))},"MatCalendarBody_tr_1_td_2_Template_button_click_1_listener"))("focus",__name(function($event){const item_r6=core.CHM(_r9).$implicit,ctx_r10=core.oxw(2);return core.KtG(ctx_r10._emitActiveDateChange(item_r6,$event))},"MatCalendarBody_tr_1_td_2_Template_button_focus_1_listener")),core.TgZ(2,"div",9),core._uU(3),core.qZA(),core._UZ(4,"div",10),core.qZA()()}if(2&rf){const item_r6=ctx.$implicit,colIndex_r7=ctx.index,rowIndex_r3=core.oxw().index,ctx_r5=core.oxw();core.Udp("width",ctx_r5._cellWidth)("padding-top",ctx_r5._cellPadding)("padding-bottom",ctx_r5._cellPadding),core.uIk("data-mat-row",rowIndex_r3)("data-mat-col",colIndex_r7),core.xp6(1),core.ekj("mat-calendar-body-disabled",!item_r6.enabled)("mat-calendar-body-active",ctx_r5._isActiveCell(rowIndex_r3,colIndex_r7))("mat-calendar-body-range-start",ctx_r5._isRangeStart(item_r6.compareValue))("mat-calendar-body-range-end",ctx_r5._isRangeEnd(item_r6.compareValue))("mat-calendar-body-in-range",ctx_r5._isInRange(item_r6.compareValue))("mat-calendar-body-comparison-bridge-start",ctx_r5._isComparisonBridgeStart(item_r6.compareValue,rowIndex_r3,colIndex_r7))("mat-calendar-body-comparison-bridge-end",ctx_r5._isComparisonBridgeEnd(item_r6.compareValue,rowIndex_r3,colIndex_r7))("mat-calendar-body-comparison-start",ctx_r5._isComparisonStart(item_r6.compareValue))("mat-calendar-body-comparison-end",ctx_r5._isComparisonEnd(item_r6.compareValue))("mat-calendar-body-in-comparison-range",ctx_r5._isInComparisonRange(item_r6.compareValue))("mat-calendar-body-preview-start",ctx_r5._isPreviewStart(item_r6.compareValue))("mat-calendar-body-preview-end",ctx_r5._isPreviewEnd(item_r6.compareValue))("mat-calendar-body-in-preview",ctx_r5._isInPreview(item_r6.compareValue)),core.Q6J("ngClass",item_r6.cssClasses)("tabindex",ctx_r5._isActiveCell(rowIndex_r3,colIndex_r7)?0:-1),core.uIk("aria-label",item_r6.ariaLabel)("aria-disabled",!item_r6.enabled||null)("aria-pressed",ctx_r5._isSelected(item_r6.compareValue))("aria-current",ctx_r5.todayValue===item_r6.compareValue?"date":null),core.xp6(1),core.ekj("mat-calendar-body-selected",ctx_r5._isSelected(item_r6.compareValue))("mat-calendar-body-comparison-identical",ctx_r5._isComparisonIdentical(item_r6.compareValue))("mat-calendar-body-today",ctx_r5.todayValue===item_r6.compareValue),core.xp6(1),core.hij(" ",item_r6.displayValue," ")}}function MatCalendarBody_tr_1_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"tr",4),core.YNc(1,MatCalendarBody_tr_1_td_1_Template,2,6,"td",5),core.YNc(2,MatCalendarBody_tr_1_td_2_Template,5,47,"td",6),core.qZA()),2&rf){const row_r2=ctx.$implicit,rowIndex_r3=ctx.index,ctx_r1=core.oxw();core.xp6(1),core.Q6J("ngIf",0===rowIndex_r3&&ctx_r1._firstRowOffset),core.xp6(1),core.Q6J("ngForOf",row_r2)}}function MatMonthView_th_3_Template(rf,ctx){if(1&rf&&(core.TgZ(0,"th",5)(1,"span",6),core._uU(2),core.qZA(),core.TgZ(3,"span",7),core._uU(4),core.qZA()()),2&rf){const day_r1=ctx.$implicit;core.xp6(2),core.Oqu(day_r1.long),core.xp6(2),core.Oqu(day_r1.narrow)}}__name(MatCalendarBody_tr_0_Template,"MatCalendarBody_tr_0_Template"),__name(MatCalendarBody_tr_1_td_1_Template,"MatCalendarBody_tr_1_td_1_Template"),__name(MatCalendarBody_tr_1_td_2_Template,"MatCalendarBody_tr_1_td_2_Template"),__name(MatCalendarBody_tr_1_Template,"MatCalendarBody_tr_1_Template"),__name(MatMonthView_th_3_Template,"MatMonthView_th_3_Template");const datepicker_c1=["*"];function MatCalendar_ng_template_0_Template(rf,ctx){}function MatCalendar_mat_month_view_2_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"mat-month-view",5),core.NdJ("activeDateChange",__name(function($event){core.CHM(_r5);const ctx_r4=core.oxw();return core.KtG(ctx_r4.activeDate=$event)},"MatCalendar_mat_month_view_2_Template_mat_month_view_activeDateChange_0_listener"))("_userSelection",__name(function($event){core.CHM(_r5);const ctx_r6=core.oxw();return core.KtG(ctx_r6._dateSelected($event))},"MatCalendar_mat_month_view_2_Template_mat_month_view__userSelection_0_listener")),core.qZA()}if(2&rf){const ctx_r1=core.oxw();core.Q6J("activeDate",ctx_r1.activeDate)("selected",ctx_r1.selected)("dateFilter",ctx_r1.dateFilter)("maxDate",ctx_r1.maxDate)("minDate",ctx_r1.minDate)("dateClass",ctx_r1.dateClass)("comparisonStart",ctx_r1.comparisonStart)("comparisonEnd",ctx_r1.comparisonEnd)}}function MatCalendar_mat_year_view_3_Template(rf,ctx){if(1&rf){const _r8=core.EpF();core.TgZ(0,"mat-year-view",6),core.NdJ("activeDateChange",__name(function($event){core.CHM(_r8);const ctx_r7=core.oxw();return core.KtG(ctx_r7.activeDate=$event)},"MatCalendar_mat_year_view_3_Template_mat_year_view_activeDateChange_0_listener"))("monthSelected",__name(function($event){core.CHM(_r8);const ctx_r9=core.oxw();return core.KtG(ctx_r9._monthSelectedInYearView($event))},"MatCalendar_mat_year_view_3_Template_mat_year_view_monthSelected_0_listener"))("selectedChange",__name(function($event){core.CHM(_r8);const ctx_r10=core.oxw();return core.KtG(ctx_r10._goToDateInView($event,"month"))},"MatCalendar_mat_year_view_3_Template_mat_year_view_selectedChange_0_listener")),core.qZA()}if(2&rf){const ctx_r2=core.oxw();core.Q6J("activeDate",ctx_r2.activeDate)("selected",ctx_r2.selected)("dateFilter",ctx_r2.dateFilter)("maxDate",ctx_r2.maxDate)("minDate",ctx_r2.minDate)("dateClass",ctx_r2.dateClass)}}function MatCalendar_mat_multi_year_view_4_Template(rf,ctx){if(1&rf){const _r12=core.EpF();core.TgZ(0,"mat-multi-year-view",7),core.NdJ("activeDateChange",__name(function($event){core.CHM(_r12);const ctx_r11=core.oxw();return core.KtG(ctx_r11.activeDate=$event)},"MatCalendar_mat_multi_year_view_4_Template_mat_multi_year_view_activeDateChange_0_listener"))("yearSelected",__name(function($event){core.CHM(_r12);const ctx_r13=core.oxw();return core.KtG(ctx_r13._yearSelectedInMultiYearView($event))},"MatCalendar_mat_multi_year_view_4_Template_mat_multi_year_view_yearSelected_0_listener"))("selectedChange",__name(function($event){core.CHM(_r12);const ctx_r14=core.oxw();return core.KtG(ctx_r14._goToDateInView($event,"year"))},"MatCalendar_mat_multi_year_view_4_Template_mat_multi_year_view_selectedChange_0_listener")),core.qZA()}if(2&rf){const ctx_r3=core.oxw();core.Q6J("activeDate",ctx_r3.activeDate)("selected",ctx_r3.selected)("dateFilter",ctx_r3.dateFilter)("maxDate",ctx_r3.maxDate)("minDate",ctx_r3.minDate)("dateClass",ctx_r3.dateClass)}}function MatDatepickerContent_ng_template_2_Template(rf,ctx){}__name(MatCalendar_ng_template_0_Template,"MatCalendar_ng_template_0_Template"),__name(MatCalendar_mat_month_view_2_Template,"MatCalendar_mat_month_view_2_Template"),__name(MatCalendar_mat_year_view_3_Template,"MatCalendar_mat_year_view_3_Template"),__name(MatCalendar_mat_multi_year_view_4_Template,"MatCalendar_mat_multi_year_view_4_Template"),__name(MatDatepickerContent_ng_template_2_Template,"MatDatepickerContent_ng_template_2_Template");const datepicker_c2=["button"];function MatDatepickerToggle__svg_svg_2_Template(rf,ctx){1&rf&&(core.O4$(),core.TgZ(0,"svg",3),core._UZ(1,"path",4),core.qZA())}__name(MatDatepickerToggle__svg_svg_2_Template,"MatDatepickerToggle__svg_svg_2_Template");const datepicker_c3=[[["","matDatepickerToggleIcon",""]]],datepicker_c5=[[["input","matStartDate",""]],[["input","matEndDate",""]]];function MatDatepickerActions_ng_template_0_Template(rf,ctx){1&rf&&(core.TgZ(0,"div",0),core.Hsn(1),core.qZA())}__name(MatDatepickerActions_ng_template_0_Template,"MatDatepickerActions_ng_template_0_Template"),__name(function createMissingDateImplError(provider){return Error(`MatDatepicker: No provider found for ${provider}. You must import one of the following modules at your application root: MatNativeDateModule, MatMomentDateModule, or provide a custom implementation.`)},"createMissingDateImplError");class MatCalendarCell{constructor(value,displayValue,ariaLabel,enabled,cssClasses={},compareValue=value,rawValue){this.value=value,this.displayValue=displayValue,this.ariaLabel=ariaLabel,this.enabled=enabled,this.cssClasses=cssClasses,this.compareValue=compareValue,this.rawValue=rawValue}}__name(MatCalendarCell,"MatCalendarCell");class MatCalendarBody{constructor(_elementRef,_ngZone){this._elementRef=_elementRef,this._ngZone=_ngZone,this._focusActiveCellAfterViewChecked=!1,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new core.vpe,this.previewChange=new core.vpe,this.activeDateChange=new core.vpe,this._enterHandler=event=>{if(this._skipNextFocus&&"focus"===event.type)this._skipNextFocus=!1;else if(event.target&&this.isRange){const cell=this._getCellFromElement(event.target);cell&&this._ngZone.run(()=>this.previewChange.emit({value:cell.enabled?cell:null,event}))}},this._leaveHandler=event=>{null!==this.previewEnd&&this.isRange&&event.target&&this._getCellFromElement(event.target)&&this._ngZone.run(()=>this.previewChange.emit({value:null,event}))},_ngZone.runOutsideAngular(()=>{const element=_elementRef.nativeElement;element.addEventListener("mouseenter",this._enterHandler,!0),element.addEventListener("focus",this._enterHandler,!0),element.addEventListener("mouseleave",this._leaveHandler,!0),element.addEventListener("blur",this._leaveHandler,!0)})}ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}_cellClicked(cell,event){cell.enabled&&this.selectedValueChange.emit({value:cell.value,event})}_emitActiveDateChange(cell,event){cell.enabled&&this.activeDateChange.emit({value:cell.value,event})}_isSelected(value){return this.startValue===value||this.endValue===value}ngOnChanges(changes){const columnChanges=changes.numCols,{rows,numCols}=this;(changes.rows||columnChanges)&&(this._firstRowOffset=rows&&rows.length&&rows[0].length?numCols-rows[0].length:0),(changes.cellAspectRatio||columnChanges||!this._cellPadding)&&(this._cellPadding=50*this.cellAspectRatio/numCols+"%"),(columnChanges||!this._cellWidth)&&(this._cellWidth=100/numCols+"%")}ngOnDestroy(){const element=this._elementRef.nativeElement;element.removeEventListener("mouseenter",this._enterHandler,!0),element.removeEventListener("focus",this._enterHandler,!0),element.removeEventListener("mouseleave",this._leaveHandler,!0),element.removeEventListener("blur",this._leaveHandler,!0)}_isActiveCell(rowIndex,colIndex){let cellNumber=rowIndex*this.numCols+colIndex;return rowIndex&&(cellNumber-=this._firstRowOffset),cellNumber==this.activeCell}_focusActiveCell(movePreview=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,operators.qn)(1)).subscribe(()=>{setTimeout(()=>{const activeCell=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");activeCell&&(movePreview||(this._skipNextFocus=!0),activeCell.focus())})})})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(value){return isStart(value,this.startValue,this.endValue)}_isRangeEnd(value){return isEnd(value,this.startValue,this.endValue)}_isInRange(value){return isInRange(value,this.startValue,this.endValue,this.isRange)}_isComparisonStart(value){return isStart(value,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(value,rowIndex,colIndex){if(!this._isComparisonStart(value)||this._isRangeStart(value)||!this._isInRange(value))return!1;let previousCell=this.rows[rowIndex][colIndex-1];if(!previousCell){const previousRow=this.rows[rowIndex-1];previousCell=previousRow&&previousRow[previousRow.length-1]}return previousCell&&!this._isRangeEnd(previousCell.compareValue)}_isComparisonBridgeEnd(value,rowIndex,colIndex){if(!this._isComparisonEnd(value)||this._isRangeEnd(value)||!this._isInRange(value))return!1;let nextCell=this.rows[rowIndex][colIndex+1];if(!nextCell){const nextRow=this.rows[rowIndex+1];nextCell=nextRow&&nextRow[0]}return nextCell&&!this._isRangeStart(nextCell.compareValue)}_isComparisonEnd(value){return isEnd(value,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(value){return isInRange(value,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(value){return this.comparisonStart===this.comparisonEnd&&value===this.comparisonStart}_isPreviewStart(value){return isStart(value,this.previewStart,this.previewEnd)}_isPreviewEnd(value){return isEnd(value,this.previewStart,this.previewEnd)}_isInPreview(value){return isInRange(value,this.previewStart,this.previewEnd,this.isRange)}_getCellFromElement(element){let cell;if(isTableCell(element)?cell=element:isTableCell(element.parentNode)&&(cell=element.parentNode),cell){const row=cell.getAttribute("data-mat-row"),col=cell.getAttribute("data-mat-col");if(row&&col)return this.rows[parseInt(row)][parseInt(col)]}return null}}function isTableCell(node){return"TD"===node.nodeName}function isStart(value,start,end){return null!==end&&start!==end&&value<end&&value===start}function isEnd(value,start,end){return null!==start&&start!==end&&value>=start&&value===end}function isInRange(value,start,end,rangeEnabled){return rangeEnabled&&null!==start&&null!==end&&start!==end&&value>=start&&value<=end}__name(MatCalendarBody,"MatCalendarBody"),MatCalendarBody.\u0275fac=__name(function(t){return new(t||MatCalendarBody)(core.Y36(core.SBq),core.Y36(core.R0b))},"MatCalendarBody_Factory"),MatCalendarBody.\u0275cmp=core.Xpm({type:MatCalendarBody,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange"},exportAs:["matCalendarBody"],features:[core.TTD],attrs:["mat-calendar-body",""],decls:2,vars:2,consts:[["aria-hidden","true",4,"ngIf"],["role","row",4,"ngFor","ngForOf"],["aria-hidden","true"],[1,"mat-calendar-body-label"],["role","row"],["class","mat-calendar-body-label",3,"paddingTop","paddingBottom",4,"ngIf"],["role","gridcell","class","mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom",4,"ngFor","ngForOf"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"ngClass","tabindex","click","focus"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,MatCalendarBody_tr_0_Template,3,6,"tr",0),core.YNc(1,MatCalendarBody_tr_1_Template,3,2,"tr",1)),2&rf&&(core.Q6J("ngIf",ctx._firstRowOffset<ctx.labelMinRequiredCells),core.xp6(1),core.Q6J("ngForOf",ctx.rows))},"MatCalendarBody_Template"),dependencies:[common.mk,common.sg,common.O5],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-label{height:0;line-height:0;text-align:left;padding-left:4.7142857143%;padding-right:4.7142857143%}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}[dir=rtl] .mat-calendar-body-label{text-align:right}'],encapsulation:2,changeDetection:0}),__name(isTableCell,"isTableCell"),__name(isStart,"isStart"),__name(isEnd,"isEnd"),__name(isInRange,"isInRange");class DateRange{constructor(start,end){this.start=start,this.end=end}}__name(DateRange,"DateRange");class MatDateSelectionModel{constructor(selection,_adapter){this.selection=selection,this._adapter=_adapter,this._selectionChanged=new cjs.Subject,this.selectionChanged=this._selectionChanged,this.selection=selection}updateSelection(value,source){const oldValue=this.selection;this.selection=value,this._selectionChanged.next({selection:value,source,oldValue})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(date){return this._adapter.isDateInstance(date)&&this._adapter.isValid(date)}}__name(MatDateSelectionModel,"MatDateSelectionModel"),MatDateSelectionModel.\u0275fac=__name(function(t){core.$Z()},"MatDateSelectionModel_Factory"),MatDateSelectionModel.\u0275prov=core.Yz7({token:MatDateSelectionModel,factory:MatDateSelectionModel.\u0275fac});class MatSingleDateSelectionModel extends MatDateSelectionModel{constructor(adapter){super(null,adapter)}add(date){super.updateSelection(date,this)}isValid(){return null!=this.selection&&this._isValidDateInstance(this.selection)}isComplete(){return null!=this.selection}clone(){const clone=new MatSingleDateSelectionModel(this._adapter);return clone.updateSelection(this.selection,this),clone}}__name(MatSingleDateSelectionModel,"MatSingleDateSelectionModel"),MatSingleDateSelectionModel.\u0275fac=__name(function(t){return new(t||MatSingleDateSelectionModel)(core.LFG(DateAdapter))},"MatSingleDateSelectionModel_Factory"),MatSingleDateSelectionModel.\u0275prov=core.Yz7({token:MatSingleDateSelectionModel,factory:MatSingleDateSelectionModel.\u0275fac});class MatRangeDateSelectionModel extends MatDateSelectionModel{constructor(adapter){super(new DateRange(null,null),adapter)}add(date){let{start,end}=this.selection;null==start?start=date:null==end?end=date:(start=date,end=null),super.updateSelection(new DateRange(start,end),this)}isValid(){const{start,end}=this.selection;return null==start&&null==end||(null!=start&&null!=end?this._isValidDateInstance(start)&&this._isValidDateInstance(end)&&this._adapter.compareDate(start,end)<=0:(null==start||this._isValidDateInstance(start))&&(null==end||this._isValidDateInstance(end)))}isComplete(){return null!=this.selection.start&&null!=this.selection.end}clone(){const clone=new MatRangeDateSelectionModel(this._adapter);return clone.updateSelection(this.selection,this),clone}}function MAT_SINGLE_DATE_SELECTION_MODEL_FACTORY(parent,adapter){return parent||new MatSingleDateSelectionModel(adapter)}__name(MatRangeDateSelectionModel,"MatRangeDateSelectionModel"),MatRangeDateSelectionModel.\u0275fac=__name(function(t){return new(t||MatRangeDateSelectionModel)(core.LFG(DateAdapter))},"MatRangeDateSelectionModel_Factory"),MatRangeDateSelectionModel.\u0275prov=core.Yz7({token:MatRangeDateSelectionModel,factory:MatRangeDateSelectionModel.\u0275fac}),__name(MAT_SINGLE_DATE_SELECTION_MODEL_FACTORY,"MAT_SINGLE_DATE_SELECTION_MODEL_FACTORY");const MAT_SINGLE_DATE_SELECTION_MODEL_PROVIDER={provide:MatDateSelectionModel,deps:[[new core.FiY,new core.tp0,MatDateSelectionModel],DateAdapter],useFactory:MAT_SINGLE_DATE_SELECTION_MODEL_FACTORY};function MAT_RANGE_DATE_SELECTION_MODEL_FACTORY(parent,adapter){return parent||new MatRangeDateSelectionModel(adapter)}__name(MAT_RANGE_DATE_SELECTION_MODEL_FACTORY,"MAT_RANGE_DATE_SELECTION_MODEL_FACTORY");const MAT_RANGE_DATE_SELECTION_MODEL_PROVIDER={provide:MatDateSelectionModel,deps:[[new core.FiY,new core.tp0,MatDateSelectionModel],DateAdapter],useFactory:MAT_RANGE_DATE_SELECTION_MODEL_FACTORY},MAT_DATE_RANGE_SELECTION_STRATEGY=new core.OlP("MAT_DATE_RANGE_SELECTION_STRATEGY");class DefaultMatCalendarRangeStrategy{constructor(_dateAdapter){this._dateAdapter=_dateAdapter}selectionFinished(date,currentRange){let{start,end}=currentRange;return null==start?start=date:null==end&&date&&this._dateAdapter.compareDate(date,start)>=0?end=date:(start=date,end=null),new DateRange(start,end)}createPreview(activeDate,currentRange){let start=null,end=null;return currentRange.start&&!currentRange.end&&activeDate&&(start=currentRange.start,end=activeDate),new DateRange(start,end)}}function MAT_CALENDAR_RANGE_STRATEGY_PROVIDER_FACTORY(parent,adapter){return parent||new DefaultMatCalendarRangeStrategy(adapter)}__name(DefaultMatCalendarRangeStrategy,"DefaultMatCalendarRangeStrategy"),DefaultMatCalendarRangeStrategy.\u0275fac=__name(function(t){return new(t||DefaultMatCalendarRangeStrategy)(core.LFG(DateAdapter))},"DefaultMatCalendarRangeStrategy_Factory"),DefaultMatCalendarRangeStrategy.\u0275prov=core.Yz7({token:DefaultMatCalendarRangeStrategy,factory:DefaultMatCalendarRangeStrategy.\u0275fac}),__name(MAT_CALENDAR_RANGE_STRATEGY_PROVIDER_FACTORY,"MAT_CALENDAR_RANGE_STRATEGY_PROVIDER_FACTORY");const MAT_CALENDAR_RANGE_STRATEGY_PROVIDER={provide:MAT_DATE_RANGE_SELECTION_STRATEGY,deps:[[new core.FiY,new core.tp0,MAT_DATE_RANGE_SELECTION_STRATEGY],DateAdapter],useFactory:MAT_CALENDAR_RANGE_STRATEGY_PROVIDER_FACTORY};class MatMonthView{constructor(_changeDetectorRef,_dateFormats,_dateAdapter,_dir,_rangeStrategy){this._changeDetectorRef=_changeDetectorRef,this._dateFormats=_dateFormats,this._dateAdapter=_dateAdapter,this._dir=_dir,this._rangeStrategy=_rangeStrategy,this._rerenderSubscription=cjs.Subscription.EMPTY,this.selectedChange=new core.vpe,this._userSelection=new core.vpe,this.activeDateChange=new core.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(value){const oldActiveDate=this._activeDate,validDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(validDate,this.minDate,this.maxDate),this._hasSameMonthAndYear(oldActiveDate,this._activeDate)||this._init()}get selected(){return this._selected}set selected(value){this._selected=value instanceof DateRange?value:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(value){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))}get maxDate(){return this._maxDate}set maxDate(value){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,operators.O4)(null)).subscribe(()=>this._init())}ngOnChanges(changes){const comparisonChange=changes.comparisonStart||changes.comparisonEnd;comparisonChange&&!comparisonChange.firstChange&&this._setRanges(this.selected)}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(event){const date=event.value,selectedDate=this._getDateFromDayOfMonth(date);let rangeStartDate,rangeEndDate;this._selected instanceof DateRange?(rangeStartDate=this._getDateInCurrentMonth(this._selected.start),rangeEndDate=this._getDateInCurrentMonth(this._selected.end)):rangeStartDate=rangeEndDate=this._getDateInCurrentMonth(this._selected),(rangeStartDate!==date||rangeEndDate!==date)&&this.selectedChange.emit(selectedDate),this._userSelection.emit({value:selectedDate,event:event.event}),this._previewStart=this._previewEnd=null,this._changeDetectorRef.markForCheck()}_updateActiveDate(event){const month=event.value,oldActiveDate=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(month),this._dateAdapter.compareDate(oldActiveDate,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(event){const oldActiveDate=this._activeDate,isRtl=this._isRtl();switch(event.keyCode){case keycodes.oh:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,isRtl?1:-1);break;case keycodes.SV:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,isRtl?-1:1);break;case keycodes.LH:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case keycodes.JH:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case keycodes.Sd:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case keycodes.uR:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case keycodes.Ku:this.activeDate=event.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case keycodes.VM:this.activeDate=event.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case keycodes.K5:case keycodes.L_:return this._selectionKeyPressed=!0,void(this._canSelect(this._activeDate)&&event.preventDefault());case keycodes.hY:return void(null!=this._previewEnd&&!(0,keycodes.Vb)(event)&&(this._previewStart=this._previewEnd=null,this.selectedChange.emit(null),this._userSelection.emit({value:null,event}),event.preventDefault(),event.stopPropagation()));default:return}this._dateAdapter.compareDate(oldActiveDate,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),event.preventDefault()}_handleCalendarBodyKeyup(event){(event.keyCode===keycodes.L_||event.keyCode===keycodes.K5)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let firstOfMonth=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(7+this._dateAdapter.getDayOfWeek(firstOfMonth)-this._dateAdapter.getFirstDayOfWeek())%7,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(movePreview){this._matCalendarBody._focusActiveCell(movePreview)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event,value:cell}){if(this._rangeStrategy){const value=cell?cell.rawValue:null,previewRange=this._rangeStrategy.createPreview(value,this.selected,event);this._previewStart=this._getCellCompareValue(previewRange.start),this._previewEnd=this._getCellCompareValue(previewRange.end),this._changeDetectorRef.detectChanges()}}_getDateFromDayOfMonth(dayOfMonth){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),dayOfMonth)}_initWeekdays(){const firstDayOfWeek=this._dateAdapter.getFirstDayOfWeek(),narrowWeekdays=this._dateAdapter.getDayOfWeekNames("narrow");let weekdays=this._dateAdapter.getDayOfWeekNames("long").map((long,i)=>({long,narrow:narrowWeekdays[i]}));this._weekdays=weekdays.slice(firstDayOfWeek).concat(weekdays.slice(0,firstDayOfWeek))}_createWeekCells(){const daysInMonth=this._dateAdapter.getNumDaysInMonth(this.activeDate),dateNames=this._dateAdapter.getDateNames();this._weeks=[[]];for(let i=0,cell=this._firstWeekOffset;i<daysInMonth;i++,cell++){7==cell&&(this._weeks.push([]),cell=0);const date=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),i+1),enabled=this._shouldEnableDate(date),ariaLabel=this._dateAdapter.format(date,this._dateFormats.display.dateA11yLabel),cellClasses=this.dateClass?this.dateClass(date,"month"):void 0;this._weeks[this._weeks.length-1].push(new MatCalendarCell(i+1,dateNames[i],ariaLabel,enabled,cellClasses,this._getCellCompareValue(date),date))}}_shouldEnableDate(date){return!!date&&(!this.minDate||this._dateAdapter.compareDate(date,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(date,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(date))}_getDateInCurrentMonth(date){return date&&this._hasSameMonthAndYear(date,this.activeDate)?this._dateAdapter.getDate(date):null}_hasSameMonthAndYear(d1,d2){return!(!d1||!d2||this._dateAdapter.getMonth(d1)!=this._dateAdapter.getMonth(d2)||this._dateAdapter.getYear(d1)!=this._dateAdapter.getYear(d2))}_getCellCompareValue(date){if(date){const year=this._dateAdapter.getYear(date),month=this._dateAdapter.getMonth(date),day=this._dateAdapter.getDate(date);return new Date(year,month,day).getTime()}return null}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setRanges(selectedValue){selectedValue instanceof DateRange?(this._rangeStart=this._getCellCompareValue(selectedValue.start),this._rangeEnd=this._getCellCompareValue(selectedValue.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(selectedValue),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(date){return!this.dateFilter||this.dateFilter(date)}}__name(MatMonthView,"MatMonthView"),MatMonthView.\u0275fac=__name(function(t){return new(t||MatMonthView)(core.Y36(core.sBO),core.Y36(MAT_DATE_FORMATS,8),core.Y36(DateAdapter,8),core.Y36(Directionality,8),core.Y36(MAT_DATE_RANGE_SELECTION_STRATEGY,8))},"MatMonthView_Factory"),MatMonthView.\u0275cmp=core.Xpm({type:MatMonthView,selectors:[["mat-month-view"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(MatCalendarBody,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._matCalendarBody=_t.first)}},"MatMonthView_Query"),inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[core.TTD],decls:7,vars:13,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col",4,"ngFor","ngForOf"],["aria-hidden","true","colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","selectedValueChange","activeDateChange","previewChange","keyup","keydown"],["scope","col"],[1,"cdk-visually-hidden"],["aria-hidden","true"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),core.YNc(3,MatMonthView_th_3_Template,5,2,"th",2),core.qZA(),core.TgZ(4,"tr"),core._UZ(5,"th",3),core.qZA()(),core.TgZ(6,"tbody",4),core.NdJ("selectedValueChange",__name(function($event){return ctx._dateSelected($event)},"MatMonthView_Template_tbody_selectedValueChange_6_listener"))("activeDateChange",__name(function($event){return ctx._updateActiveDate($event)},"MatMonthView_Template_tbody_activeDateChange_6_listener"))("previewChange",__name(function($event){return ctx._previewChanged($event)},"MatMonthView_Template_tbody_previewChange_6_listener"))("keyup",__name(function($event){return ctx._handleCalendarBodyKeyup($event)},"MatMonthView_Template_tbody_keyup_6_listener"))("keydown",__name(function($event){return ctx._handleCalendarBodyKeydown($event)},"MatMonthView_Template_tbody_keydown_6_listener")),core.qZA()()),2&rf&&(core.xp6(3),core.Q6J("ngForOf",ctx._weekdays),core.xp6(3),core.Q6J("label",ctx._monthLabel)("rows",ctx._weeks)("todayValue",ctx._todayDate)("startValue",ctx._rangeStart)("endValue",ctx._rangeEnd)("comparisonStart",ctx._comparisonRangeStart)("comparisonEnd",ctx._comparisonRangeEnd)("previewStart",ctx._previewStart)("previewEnd",ctx._previewEnd)("isRange",ctx._isRange)("labelMinRequiredCells",3)("activeCell",ctx._dateAdapter.getDate(ctx.activeDate)-1))},"MatMonthView_Template"),dependencies:[common.sg,MatCalendarBody],encapsulation:2,changeDetection:0});class MatMultiYearView{constructor(_changeDetectorRef,_dateAdapter,_dir){this._changeDetectorRef=_changeDetectorRef,this._dateAdapter=_dateAdapter,this._dir=_dir,this._rerenderSubscription=cjs.Subscription.EMPTY,this.selectedChange=new core.vpe,this.yearSelected=new core.vpe,this.activeDateChange=new core.vpe,this._dateAdapter,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(value){let oldActiveDate=this._activeDate;const validDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(validDate,this.minDate,this.maxDate),isSameMultiYearView(this._dateAdapter,oldActiveDate,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(value){this._selected=value instanceof DateRange?value:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value)),this._setSelectedYear(value)}get minDate(){return this._minDate}set minDate(value){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))}get maxDate(){return this._maxDate}set maxDate(value){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,operators.O4)(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());const minYearOfPage=this._dateAdapter.getYear(this._activeDate)-getActiveOffset(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let i=0,row=[];i<24;i++)row.push(minYearOfPage+i),4==row.length&&(this._years.push(row.map(year=>this._createCellForYear(year))),row=[]);this._changeDetectorRef.markForCheck()}_yearSelected(event){const year=event.value,selectedYear=this._dateAdapter.createDate(year,0,1),selectedDate=this._getDateFromYear(year);this.yearSelected.emit(selectedYear),this.selectedChange.emit(selectedDate)}_updateActiveDate(event){const year=event.value,oldActiveDate=this._activeDate;this.activeDate=this._getDateFromYear(year),this._dateAdapter.compareDate(oldActiveDate,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(event){const oldActiveDate=this._activeDate,isRtl=this._isRtl();switch(event.keyCode){case keycodes.oh:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,isRtl?1:-1);break;case keycodes.SV:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,isRtl?-1:1);break;case keycodes.LH:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-4);break;case keycodes.JH:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,4);break;case keycodes.Sd:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-getActiveOffset(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case keycodes.uR:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,24-getActiveOffset(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case keycodes.Ku:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,event.altKey?-240:-24);break;case keycodes.VM:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,event.altKey?240:24);break;case keycodes.K5:case keycodes.L_:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(oldActiveDate,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),event.preventDefault()}_handleCalendarBodyKeyup(event){(event.keyCode===keycodes.L_||event.keyCode===keycodes.K5)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event}),this._selectionKeyPressed=!1)}_getActiveCell(){return getActiveOffset(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(year){const activeMonth=this._dateAdapter.getMonth(this.activeDate),daysInMonth=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(year,activeMonth,1));return this._dateAdapter.createDate(year,activeMonth,Math.min(this._dateAdapter.getDate(this.activeDate),daysInMonth))}_createCellForYear(year){const date=this._dateAdapter.createDate(year,0,1),yearName=this._dateAdapter.getYearName(date),cellClasses=this.dateClass?this.dateClass(date,"multi-year"):void 0;return new MatCalendarCell(year,yearName,yearName,this._shouldEnableYear(year),cellClasses)}_shouldEnableYear(year){if(null==year||this.maxDate&&year>this._dateAdapter.getYear(this.maxDate)||this.minDate&&year<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;for(let date=this._dateAdapter.createDate(year,0,1);this._dateAdapter.getYear(date)==year;date=this._dateAdapter.addCalendarDays(date,1))if(this.dateFilter(date))return!0;return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedYear(value){if(this._selectedYear=null,value instanceof DateRange){const displayValue=value.start||value.end;displayValue&&(this._selectedYear=this._dateAdapter.getYear(displayValue))}else value&&(this._selectedYear=this._dateAdapter.getYear(value))}}function isSameMultiYearView(dateAdapter,date1,date2,minDate,maxDate){const year1=dateAdapter.getYear(date1),year2=dateAdapter.getYear(date2),startingYear=getStartingYear(dateAdapter,minDate,maxDate);return Math.floor((year1-startingYear)/24)===Math.floor((year2-startingYear)/24)}function getActiveOffset(dateAdapter,activeDate,minDate,maxDate){return euclideanModulo(dateAdapter.getYear(activeDate)-getStartingYear(dateAdapter,minDate,maxDate),24)}function getStartingYear(dateAdapter,minDate,maxDate){let startingYear=0;return maxDate?startingYear=dateAdapter.getYear(maxDate)-24+1:minDate&&(startingYear=dateAdapter.getYear(minDate)),startingYear}function euclideanModulo(a,b){return(a%b+b)%b}__name(MatMultiYearView,"MatMultiYearView"),MatMultiYearView.\u0275fac=__name(function(t){return new(t||MatMultiYearView)(core.Y36(core.sBO),core.Y36(DateAdapter,8),core.Y36(Directionality,8))},"MatMultiYearView_Factory"),MatMultiYearView.\u0275cmp=core.Xpm({type:MatMultiYearView,selectors:[["mat-multi-year-view"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(MatCalendarBody,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._matCalendarBody=_t.first)}},"MatMultiYearView_Query"),inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),core._UZ(3,"th",2),core.qZA()(),core.TgZ(4,"tbody",3),core.NdJ("selectedValueChange",__name(function($event){return ctx._yearSelected($event)},"MatMultiYearView_Template_tbody_selectedValueChange_4_listener"))("activeDateChange",__name(function($event){return ctx._updateActiveDate($event)},"MatMultiYearView_Template_tbody_activeDateChange_4_listener"))("keyup",__name(function($event){return ctx._handleCalendarBodyKeyup($event)},"MatMultiYearView_Template_tbody_keyup_4_listener"))("keydown",__name(function($event){return ctx._handleCalendarBodyKeydown($event)},"MatMultiYearView_Template_tbody_keydown_4_listener")),core.qZA()()),2&rf&&(core.xp6(4),core.Q6J("rows",ctx._years)("todayValue",ctx._todayYear)("startValue",ctx._selectedYear)("endValue",ctx._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",ctx._getActiveCell()))},"MatMultiYearView_Template"),dependencies:[MatCalendarBody],encapsulation:2,changeDetection:0}),__name(isSameMultiYearView,"isSameMultiYearView"),__name(getActiveOffset,"getActiveOffset"),__name(getStartingYear,"getStartingYear"),__name(euclideanModulo,"euclideanModulo");class MatYearView{constructor(_changeDetectorRef,_dateFormats,_dateAdapter,_dir){this._changeDetectorRef=_changeDetectorRef,this._dateFormats=_dateFormats,this._dateAdapter=_dateAdapter,this._dir=_dir,this._rerenderSubscription=cjs.Subscription.EMPTY,this.selectedChange=new core.vpe,this.monthSelected=new core.vpe,this.activeDateChange=new core.vpe,this._activeDate=this._dateAdapter.today()}get activeDate(){return this._activeDate}set activeDate(value){let oldActiveDate=this._activeDate;const validDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(validDate,this.minDate,this.maxDate),this._dateAdapter.getYear(oldActiveDate)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(value){this._selected=value instanceof DateRange?value:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value)),this._setSelectedMonth(value)}get minDate(){return this._minDate}set minDate(value){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))}get maxDate(){return this._maxDate}set maxDate(value){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe((0,operators.O4)(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(event){const month=event.value,selectedMonth=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),month,1);this.monthSelected.emit(selectedMonth);const selectedDate=this._getDateFromMonth(month);this.selectedChange.emit(selectedDate)}_updateActiveDate(event){const month=event.value,oldActiveDate=this._activeDate;this.activeDate=this._getDateFromMonth(month),this._dateAdapter.compareDate(oldActiveDate,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(event){const oldActiveDate=this._activeDate,isRtl=this._isRtl();switch(event.keyCode){case keycodes.oh:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,isRtl?1:-1);break;case keycodes.SV:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,isRtl?-1:1);break;case keycodes.LH:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case keycodes.JH:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case keycodes.Sd:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case keycodes.uR:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case keycodes.Ku:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,event.altKey?-10:-1);break;case keycodes.VM:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,event.altKey?10:1);break;case keycodes.K5:case keycodes.L_:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(oldActiveDate,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),event.preventDefault()}_handleCalendarBodyKeyup(event){(event.keyCode===keycodes.L_||event.keyCode===keycodes.K5)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let monthNames=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(row=>row.map(month=>this._createCellForMonth(month,monthNames[month]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(date){return date&&this._dateAdapter.getYear(date)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(date):null}_getDateFromMonth(month){const normalizedDate=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),month,1),daysInMonth=this._dateAdapter.getNumDaysInMonth(normalizedDate);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),month,Math.min(this._dateAdapter.getDate(this.activeDate),daysInMonth))}_createCellForMonth(month,monthName){const date=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),month,1),ariaLabel=this._dateAdapter.format(date,this._dateFormats.display.monthYearA11yLabel),cellClasses=this.dateClass?this.dateClass(date,"year"):void 0;return new MatCalendarCell(month,monthName.toLocaleUpperCase(),ariaLabel,this._shouldEnableMonth(month),cellClasses)}_shouldEnableMonth(month){const activeYear=this._dateAdapter.getYear(this.activeDate);if(null==month||this._isYearAndMonthAfterMaxDate(activeYear,month)||this._isYearAndMonthBeforeMinDate(activeYear,month))return!1;if(!this.dateFilter)return!0;for(let date=this._dateAdapter.createDate(activeYear,month,1);this._dateAdapter.getMonth(date)==month;date=this._dateAdapter.addCalendarDays(date,1))if(this.dateFilter(date))return!0;return!1}_isYearAndMonthAfterMaxDate(year,month){if(this.maxDate){const maxYear=this._dateAdapter.getYear(this.maxDate),maxMonth=this._dateAdapter.getMonth(this.maxDate);return year>maxYear||year===maxYear&&month>maxMonth}return!1}_isYearAndMonthBeforeMinDate(year,month){if(this.minDate){const minYear=this._dateAdapter.getYear(this.minDate),minMonth=this._dateAdapter.getMonth(this.minDate);return year<minYear||year===minYear&&month<minMonth}return!1}_isRtl(){return this._dir&&"rtl"===this._dir.value}_setSelectedMonth(value){this._selectedMonth=value instanceof DateRange?this._getMonthInCurrentYear(value.start)||this._getMonthInCurrentYear(value.end):this._getMonthInCurrentYear(value)}}__name(MatYearView,"MatYearView"),MatYearView.\u0275fac=__name(function(t){return new(t||MatYearView)(core.Y36(core.sBO),core.Y36(MAT_DATE_FORMATS,8),core.Y36(DateAdapter,8),core.Y36(Directionality,8))},"MatYearView_Factory"),MatYearView.\u0275cmp=core.Xpm({type:MatYearView,selectors:[["mat-year-view"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(MatCalendarBody,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._matCalendarBody=_t.first)}},"MatYearView_Query"),inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell","selectedValueChange","activeDateChange","keyup","keydown"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"table",0)(1,"thead",1)(2,"tr"),core._UZ(3,"th",2),core.qZA()(),core.TgZ(4,"tbody",3),core.NdJ("selectedValueChange",__name(function($event){return ctx._monthSelected($event)},"MatYearView_Template_tbody_selectedValueChange_4_listener"))("activeDateChange",__name(function($event){return ctx._updateActiveDate($event)},"MatYearView_Template_tbody_activeDateChange_4_listener"))("keyup",__name(function($event){return ctx._handleCalendarBodyKeyup($event)},"MatYearView_Template_tbody_keyup_4_listener"))("keydown",__name(function($event){return ctx._handleCalendarBodyKeydown($event)},"MatYearView_Template_tbody_keydown_4_listener")),core.qZA()()),2&rf&&(core.xp6(4),core.Q6J("label",ctx._yearLabel)("rows",ctx._months)("todayValue",ctx._todayMonth)("startValue",ctx._selectedMonth)("endValue",ctx._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",ctx._dateAdapter.getMonth(ctx.activeDate)))},"MatYearView_Template"),dependencies:[MatCalendarBody],encapsulation:2,changeDetection:0});class MatDatepickerIntl{constructor(){this.changes=new cjs.Subject,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(start,end){return`${start} \u2013 ${end}`}formatYearRangeLabel(start,end){return`${start} to ${end}`}}__name(MatDatepickerIntl,"MatDatepickerIntl"),MatDatepickerIntl.\u0275fac=__name(function(t){return new(t||MatDatepickerIntl)},"MatDatepickerIntl_Factory"),MatDatepickerIntl.\u0275prov=core.Yz7({token:MatDatepickerIntl,factory:MatDatepickerIntl.\u0275fac,providedIn:"root"});let uniqueId=0;class MatCalendarHeader{constructor(_intl,calendar,_dateAdapter,_dateFormats,changeDetectorRef){this._intl=_intl,this.calendar=calendar,this._dateAdapter=_dateAdapter,this._dateFormats=_dateFormats,this._buttonDescriptionId="mat-calendar-button-"+uniqueId++,this.calendar.stateChanges.subscribe(()=>changeDetectorRef.markForCheck())}get periodButtonText(){if("month"==this.calendar.currentView)return this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase();if("year"==this.calendar.currentView)return this._dateAdapter.getYearName(this.calendar.activeDate);const minYearOfPage=this._dateAdapter.getYear(this.calendar.activeDate)-getActiveOffset(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),maxYearOfPage=minYearOfPage+24-1,minYearName=this._dateAdapter.getYearName(this._dateAdapter.createDate(minYearOfPage,0,1)),maxYearName=this._dateAdapter.getYearName(this._dateAdapter.createDate(maxYearOfPage,0,1));return this._intl.formatYearRange(minYearName,maxYearName)}get periodButtonLabel(){return"month"==this.calendar.currentView?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView="month"==this.calendar.currentView?"multi-year":"month"}previousClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?-1:-24)}nextClicked(){this.calendar.activeDate="month"==this.calendar.currentView?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,"year"==this.calendar.currentView?1:24)}previousEnabled(){return!this.calendar.minDate||(!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate))}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(date1,date2){return"month"==this.calendar.currentView?this._dateAdapter.getYear(date1)==this._dateAdapter.getYear(date2)&&this._dateAdapter.getMonth(date1)==this._dateAdapter.getMonth(date2):"year"==this.calendar.currentView?this._dateAdapter.getYear(date1)==this._dateAdapter.getYear(date2):isSameMultiYearView(this._dateAdapter,date1,date2,this.calendar.minDate,this.calendar.maxDate)}}__name(MatCalendarHeader,"MatCalendarHeader"),MatCalendarHeader.\u0275fac=__name(function(t){return new(t||MatCalendarHeader)(core.Y36(MatDatepickerIntl),core.Y36((0,core.Gpc)(()=>MatCalendar)),core.Y36(DateAdapter,8),core.Y36(MAT_DATE_FORMATS,8),core.Y36(core.sBO))},"MatCalendarHeader_Factory"),MatCalendarHeader.\u0275cmp=core.Xpm({type:MatCalendarHeader,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:datepicker_c1,decls:11,vars:10,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["viewBox","0 0 10 5","focusable","false",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"disabled","click"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"disabled","click"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.TgZ(0,"div",0)(1,"div",1)(2,"button",2),core.NdJ("click",__name(function(){return ctx.currentPeriodClicked()},"MatCalendarHeader_Template_button_click_2_listener")),core.TgZ(3,"span"),core._uU(4),core.qZA(),core.O4$(),core.TgZ(5,"svg",3),core._UZ(6,"polygon",4),core.qZA()(),core.kcU(),core._UZ(7,"div",5),core.Hsn(8),core.TgZ(9,"button",6),core.NdJ("click",__name(function(){return ctx.previousClicked()},"MatCalendarHeader_Template_button_click_9_listener")),core.qZA(),core.TgZ(10,"button",7),core.NdJ("click",__name(function(){return ctx.nextClicked()},"MatCalendarHeader_Template_button_click_10_listener")),core.qZA()()()),2&rf&&(core.xp6(2),core.uIk("aria-label",ctx.periodButtonLabel)("aria-describedby",ctx._buttonDescriptionId),core.xp6(1),core.uIk("id",ctx._buttonDescriptionId),core.xp6(1),core.Oqu(ctx.periodButtonText),core.xp6(1),core.ekj("mat-calendar-invert","month"!==ctx.calendar.currentView),core.xp6(4),core.Q6J("disabled",!ctx.previousEnabled()),core.uIk("aria-label",ctx.prevButtonLabel),core.xp6(1),core.Q6J("disabled",!ctx.nextEnabled()),core.uIk("aria-label",ctx.nextButtonLabel))},"MatCalendarHeader_Template"),dependencies:[MatButton],encapsulation:2,changeDetection:0});class MatCalendar{constructor(_intl,_dateAdapter,_dateFormats,_changeDetectorRef){this._dateAdapter=_dateAdapter,this._dateFormats=_dateFormats,this._changeDetectorRef=_changeDetectorRef,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new core.vpe,this.yearSelected=new core.vpe,this.monthSelected=new core.vpe,this.viewChanged=new core.vpe(!0),this._userSelection=new core.vpe,this.stateChanges=new cjs.Subject,this._intlChanges=_intl.changes.subscribe(()=>{_changeDetectorRef.markForCheck(),this.stateChanges.next()})}get startAt(){return this._startAt}set startAt(value){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))}get selected(){return this._selected}set selected(value){this._selected=value instanceof DateRange?value:this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))}get minDate(){return this._minDate}set minDate(value){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))}get maxDate(){return this._maxDate}set maxDate(value){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))}get activeDate(){return this._clampedActiveDate}set activeDate(value){this._clampedActiveDate=this._dateAdapter.clampDate(value,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(value){const viewChangedResult=this._currentView!==value?value:null;this._currentView=value,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),viewChangedResult&&this.viewChanged.emit(viewChangedResult)}ngAfterContentInit(){this._calendarHeaderPortal=new ComponentPortal(this.headerComponent||MatCalendarHeader),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(changes){const minDateChange=changes.minDate&&!this._dateAdapter.sameDate(changes.minDate.previousValue,changes.minDate.currentValue)?changes.minDate:void 0,maxDateChange=changes.maxDate&&!this._dateAdapter.sameDate(changes.maxDate.previousValue,changes.maxDate.currentValue)?changes.maxDate:void 0,change=minDateChange||maxDateChange||changes.dateFilter;if(change&&!change.firstChange){const view=this._getCurrentViewComponent();view&&(this._changeDetectorRef.detectChanges(),view._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(event){const date=event.value;(this.selected instanceof DateRange||date&&!this._dateAdapter.sameDate(date,this.selected))&&this.selectedChange.emit(date),this._userSelection.emit(event)}_yearSelectedInMultiYearView(normalizedYear){this.yearSelected.emit(normalizedYear)}_monthSelectedInYearView(normalizedMonth){this.monthSelected.emit(normalizedMonth)}_goToDateInView(date,view){this.activeDate=date,this.currentView=view}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}}__name(MatCalendar,"MatCalendar"),MatCalendar.\u0275fac=__name(function(t){return new(t||MatCalendar)(core.Y36(MatDatepickerIntl),core.Y36(DateAdapter,8),core.Y36(MAT_DATE_FORMATS,8),core.Y36(core.sBO))},"MatCalendar_Factory"),MatCalendar.\u0275cmp=core.Xpm({type:MatCalendar,selectors:[["mat-calendar"]],viewQuery:__name(function(rf,ctx){if(1&rf&&(core.Gf(MatMonthView,5),core.Gf(MatYearView,5),core.Gf(MatMultiYearView,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.monthView=_t.first),core.iGM(_t=core.CRH())&&(ctx.yearView=_t.first),core.iGM(_t=core.CRH())&&(ctx.multiYearView=_t.first)}},"MatCalendar_Query"),hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection"},exportAs:["matCalendar"],features:[core._Bn([MAT_SINGLE_DATE_SELECTION_MODEL_PROVIDER]),core.TTD],decls:5,vars:5,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content",3,"ngSwitch"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange",4,"ngSwitchCase"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","activeDateChange","_userSelection"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","monthSelected","selectedChange"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","activeDateChange","yearSelected","selectedChange"]],template:__name(function(rf,ctx){1&rf&&(core.YNc(0,MatCalendar_ng_template_0_Template,0,0,"ng-template",0),core.TgZ(1,"div",1),core.YNc(2,MatCalendar_mat_month_view_2_Template,1,8,"mat-month-view",2),core.YNc(3,MatCalendar_mat_year_view_3_Template,1,6,"mat-year-view",3),core.YNc(4,MatCalendar_mat_multi_year_view_4_Template,1,6,"mat-multi-year-view",4),core.qZA()),2&rf&&(core.Q6J("cdkPortalOutlet",ctx._calendarHeaderPortal),core.xp6(1),core.Q6J("ngSwitch",ctx.currentView),core.xp6(1),core.Q6J("ngSwitchCase","month"),core.xp6(1),core.Q6J("ngSwitchCase","year"),core.xp6(1),core.Q6J("ngSwitchCase","multi-year"))},"MatCalendar_Template"),dependencies:[common.RF,common.n9,a11y.kH,CdkPortalOutlet,MatMonthView,MatYearView,MatMultiYearView],styles:['.mat-calendar{display:block}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-controls .mat-icon-button:hover .mat-button-focus-overlay{opacity:.04}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px) * -1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0});const matDatepickerAnimations={transformPanel:(0,animations.X$)("transformPanel",[(0,animations.eR)("void => enter-dropdown",(0,animations.jt)("120ms cubic-bezier(0, 0, 0.2, 1)",(0,animations.F4)([(0,animations.oB)({opacity:0,transform:"scale(1, 0.8)"}),(0,animations.oB)({opacity:1,transform:"scale(1, 1)"})]))),(0,animations.eR)("void => enter-dialog",(0,animations.jt)("150ms cubic-bezier(0, 0, 0.2, 1)",(0,animations.F4)([(0,animations.oB)({opacity:0,transform:"scale(0.7)"}),(0,animations.oB)({transform:"none",opacity:1})]))),(0,animations.eR)("* => void",(0,animations.jt)("100ms linear",(0,animations.oB)({opacity:0})))]),fadeInCalendar:(0,animations.X$)("fadeInCalendar",[(0,animations.SB)("void",(0,animations.oB)({opacity:0})),(0,animations.SB)("enter",(0,animations.oB)({opacity:1})),(0,animations.eR)("void => *",(0,animations.jt)("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])};let datepickerUid=0;const MAT_DATEPICKER_SCROLL_STRATEGY=new core.OlP("mat-datepicker-scroll-strategy");function MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY(overlay){return()=>overlay.scrollStrategies.reposition()}__name(MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY,"MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY");const MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY_PROVIDER={provide:MAT_DATEPICKER_SCROLL_STRATEGY,deps:[Overlay],useFactory:MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY},_MatDatepickerContentBase=mixinColor(class{constructor(_elementRef){this._elementRef=_elementRef}});class MatDatepickerContent extends _MatDatepickerContentBase{constructor(elementRef,_changeDetectorRef,_globalModel,_dateAdapter,_rangeSelectionStrategy,intl){super(elementRef),this._changeDetectorRef=_changeDetectorRef,this._globalModel=_globalModel,this._dateAdapter=_dateAdapter,this._rangeSelectionStrategy=_rangeSelectionStrategy,this._subscriptions=new cjs.Subscription,this._animationDone=new cjs.Subject,this._actionsPortal=null,this._closeButtonText=intl.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(event){const selection=this._model.selection,value=event.value,isRange=selection instanceof DateRange;if(isRange&&this._rangeSelectionStrategy){const newSelection=this._rangeSelectionStrategy.selectionFinished(value,selection,event.event);this._model.updateSelection(newSelection,this)}else value&&(isRange||!this._dateAdapter.sameDate(value,selection))&&this._model.add(value);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(portal,forceRerender){this._model=portal?this._globalModel.clone():this._globalModel,this._actionsPortal=portal,forceRerender&&this._changeDetectorRef.detectChanges()}}__name(MatDatepickerContent,"MatDatepickerContent"),MatDatepickerContent.\u0275fac=__name(function(t){return new(t||MatDatepickerContent)(core.Y36(core.SBq),core.Y36(core.sBO),core.Y36(MatDateSelectionModel),core.Y36(DateAdapter),core.Y36(MAT_DATE_RANGE_SELECTION_STRATEGY,8),core.Y36(MatDatepickerIntl))},"MatDatepickerContent_Factory"),MatDatepickerContent.\u0275cmp=core.Xpm({type:MatDatepickerContent,selectors:[["mat-datepicker-content"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(MatCalendar,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._calendar=_t.first)}},"MatDatepickerContent_Query"),hostAttrs:[1,"mat-datepicker-content"],hostVars:3,hostBindings:__name(function(rf,ctx){1&rf&&core.WFA("@transformPanel.done",__name(function(){return ctx._animationDone.next()},"MatDatepickerContent_animation_transformPanel_done_HostBindingHandler")),2&rf&&(core.d8E("@transformPanel",ctx._animationState),core.ekj("mat-datepicker-content-touch",ctx.datepicker.touchUi))},"MatDatepickerContent_HostBindings"),inputs:{color:"color"},exportAs:["matDatepickerContent"],features:[core.qOj],decls:5,vars:24,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"id","ngClass","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","yearSelected","monthSelected","viewChanged","_userSelection"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"color","focus","blur","click"]],template:__name(function(rf,ctx){if(1&rf&&(core.TgZ(0,"div",0)(1,"mat-calendar",1),core.NdJ("yearSelected",__name(function($event){return ctx.datepicker._selectYear($event)},"MatDatepickerContent_Template_mat_calendar_yearSelected_1_listener"))("monthSelected",__name(function($event){return ctx.datepicker._selectMonth($event)},"MatDatepickerContent_Template_mat_calendar_monthSelected_1_listener"))("viewChanged",__name(function($event){return ctx.datepicker._viewChanged($event)},"MatDatepickerContent_Template_mat_calendar_viewChanged_1_listener"))("_userSelection",__name(function($event){return ctx._handleUserSelection($event)},"MatDatepickerContent_Template_mat_calendar__userSelection_1_listener")),core.qZA(),core.YNc(2,MatDatepickerContent_ng_template_2_Template,0,0,"ng-template",2),core.TgZ(3,"button",3),core.NdJ("focus",__name(function(){return ctx._closeButtonFocused=!0},"MatDatepickerContent_Template_button_focus_3_listener"))("blur",__name(function(){return ctx._closeButtonFocused=!1},"MatDatepickerContent_Template_button_blur_3_listener"))("click",__name(function(){return ctx.datepicker.close()},"MatDatepickerContent_Template_button_click_3_listener")),core._uU(4),core.qZA()()),2&rf){let tmp_3_0;core.ekj("mat-datepicker-content-container-with-custom-header",ctx.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",ctx._actionsPortal),core.uIk("aria-modal",!0)("aria-labelledby",null!==(tmp_3_0=ctx._dialogLabelId)&&void 0!==tmp_3_0?tmp_3_0:void 0),core.xp6(1),core.Q6J("id",ctx.datepicker.id)("ngClass",ctx.datepicker.panelClass)("startAt",ctx.datepicker.startAt)("startView",ctx.datepicker.startView)("minDate",ctx.datepicker._getMinDate())("maxDate",ctx.datepicker._getMaxDate())("dateFilter",ctx.datepicker._getDateFilter())("headerComponent",ctx.datepicker.calendarHeaderComponent)("selected",ctx._getSelected())("dateClass",ctx.datepicker.dateClass)("comparisonStart",ctx.comparisonStart)("comparisonEnd",ctx.comparisonEnd)("@fadeInCalendar","enter"),core.xp6(1),core.Q6J("cdkPortalOutlet",ctx._actionsPortal),core.xp6(1),core.ekj("cdk-visually-hidden",!ctx._closeButtonFocused),core.Q6J("color",ctx.color||"primary"),core.xp6(1),core.Oqu(ctx._closeButtonText)}},"MatDatepickerContent_Template"),dependencies:[common.mk,MatButton,a11y.mK,CdkPortalOutlet,MatCalendar],styles:[".mat-datepicker-content{display:block;border-radius:4px}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[matDatepickerAnimations.transformPanel,matDatepickerAnimations.fadeInCalendar]},changeDetection:0});class MatDatepickerBase{constructor(_overlay,_ngZone,_viewContainerRef,scrollStrategy,_dateAdapter,_dir,_model){this._overlay=_overlay,this._ngZone=_ngZone,this._viewContainerRef=_viewContainerRef,this._dateAdapter=_dateAdapter,this._dir=_dir,this._model=_model,this._inputStateChanges=cjs.Subscription.EMPTY,this._document=(0,core.f3M)(common.K0),this.startView="month",this._touchUi=!1,this.xPosition="start",this.yPosition="below",this._restoreFocus=!0,this.yearSelected=new core.vpe,this.monthSelected=new core.vpe,this.viewChanged=new core.vpe(!0),this.openedStream=new core.vpe,this.closedStream=new core.vpe,this._opened=!1,this.id="mat-datepicker-"+datepickerUid++,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new cjs.Subject,this._dateAdapter,this._scrollStrategy=scrollStrategy}get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(value){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(value){this._color=value}get touchUi(){return this._touchUi}set touchUi(value){this._touchUi=(0,coercion.Ig)(value)}get disabled(){return void 0===this._disabled&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(value){const newValue=(0,coercion.Ig)(value);newValue!==this._disabled&&(this._disabled=newValue,this.stateChanges.next(void 0))}get restoreFocus(){return this._restoreFocus}set restoreFocus(value){this._restoreFocus=(0,coercion.Ig)(value)}get panelClass(){return this._panelClass}set panelClass(value){this._panelClass=(0,coercion.du)(value)}get opened(){return this._opened}set opened(value){(0,coercion.Ig)(value)?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}ngOnChanges(changes){const positionChange=changes.xPosition||changes.yPosition;if(positionChange&&!positionChange.firstChange&&this._overlayRef){const positionStrategy=this._overlayRef.getConfig().positionStrategy;positionStrategy instanceof FlexibleConnectedPositionStrategy&&(this._setConnectedPositions(positionStrategy),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(date){this._model.add(date)}_selectYear(normalizedYear){this.yearSelected.emit(normalizedYear)}_selectMonth(normalizedMonth){this.monthSelected.emit(normalizedMonth)}_viewChanged(view){this.viewChanged.emit(view)}registerInput(input){return this.datepickerInput,this._inputStateChanges.unsubscribe(),this.datepickerInput=input,this._inputStateChanges=input.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(portal){var _a;this._actionsPortal,this._actionsPortal=portal,null===(_a=this._componentRef)||void 0===_a||_a.instance._assignActions(portal,!0)}removeActions(portal){var _a;portal===this._actionsPortal&&(this._actionsPortal=null,null===(_a=this._componentRef)||void 0===_a||_a.instance._assignActions(null,!0))}open(){this._opened||this.disabled||(this.datepickerInput,this._focusedElementBeforeOpen=(0,fesm2015_platform.ht)(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened)return;const canRestoreFocus=this._restoreFocus&&this._focusedElementBeforeOpen&&"function"==typeof this._focusedElementBeforeOpen.focus,completeClose=__name(()=>{this._opened&&(this._opened=!1,this.closedStream.emit())},"completeClose");if(this._componentRef){const{instance,location}=this._componentRef;instance._startExitAnimation(),instance._animationDone.pipe((0,operators.qn)(1)).subscribe(()=>{const activeElement=this._document.activeElement;canRestoreFocus&&(!activeElement||activeElement===this._document.activeElement||location.nativeElement.contains(activeElement))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()})}canRestoreFocus?setTimeout(completeClose):completeClose()}_applyPendingSelection(){var _a,_b;null===(_b=null===(_a=this._componentRef)||void 0===_a?void 0:_a.instance)||void 0===_b||_b._applyPendingSelection()}_forwardContentValues(instance){instance.datepicker=this,instance.color=this.color,instance._dialogLabelId=this.datepickerInput.getOverlayLabelId(),instance._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();const isDialog=this.touchUi,portal=new ComponentPortal(MatDatepickerContent,this._viewContainerRef),overlayRef=this._overlayRef=this._overlay.create(new OverlayConfig({positionStrategy:isDialog?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[isDialog?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:isDialog?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:"mat-datepicker-"+(isDialog?"dialog":"popup")}));this._getCloseStream(overlayRef).subscribe(event=>{event&&event.preventDefault(),this.close()}),overlayRef.keydownEvents().subscribe(event=>{const keyCode=event.keyCode;(keyCode===keycodes.LH||keyCode===keycodes.JH||keyCode===keycodes.oh||keyCode===keycodes.SV||keyCode===keycodes.Ku||keyCode===keycodes.VM)&&event.preventDefault()}),this._componentRef=overlayRef.attach(portal),this._forwardContentValues(this._componentRef.instance),isDialog||this._ngZone.onStable.pipe((0,operators.qn)(1)).subscribe(()=>overlayRef.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){const strategy=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(strategy)}_setConnectedPositions(strategy){const primaryX="end"===this.xPosition?"end":"start",secondaryX="start"===primaryX?"end":"start",primaryY="above"===this.yPosition?"bottom":"top",secondaryY="top"===primaryY?"bottom":"top";return strategy.withPositions([{originX:primaryX,originY:secondaryY,overlayX:primaryX,overlayY:primaryY},{originX:primaryX,originY:primaryY,overlayX:primaryX,overlayY:secondaryY},{originX:secondaryX,originY:secondaryY,overlayX:secondaryX,overlayY:primaryY},{originX:secondaryX,originY:primaryY,overlayX:secondaryX,overlayY:secondaryY}])}_getCloseStream(overlayRef){return(0,cjs.merge)(overlayRef.backdropClick(),overlayRef.detachments(),overlayRef.keydownEvents().pipe((0,operators.hX)(event=>event.keyCode===keycodes.hY&&!(0,keycodes.Vb)(event)||this.datepickerInput&&(0,keycodes.Vb)(event,"altKey")&&event.keyCode===keycodes.LH)))}}__name(MatDatepickerBase,"MatDatepickerBase"),MatDatepickerBase.\u0275fac=__name(function(t){return new(t||MatDatepickerBase)(core.Y36(Overlay),core.Y36(core.R0b),core.Y36(core.s_b),core.Y36(MAT_DATEPICKER_SCROLL_STRATEGY),core.Y36(DateAdapter,8),core.Y36(Directionality,8),core.Y36(MatDateSelectionModel))},"MatDatepickerBase_Factory"),MatDatepickerBase.\u0275dir=core.lG2({type:MatDatepickerBase,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:"touchUi",disabled:"disabled",xPosition:"xPosition",yPosition:"yPosition",restoreFocus:"restoreFocus",dateClass:"dateClass",panelClass:"panelClass",opened:"opened"},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[core.TTD]});class MatDatepicker extends MatDatepickerBase{}__name(MatDatepicker,"MatDatepicker"),MatDatepicker.\u0275fac=function(){let \u0275MatDatepicker_BaseFactory;return __name(function(t){return(\u0275MatDatepicker_BaseFactory||(\u0275MatDatepicker_BaseFactory=core.n5z(MatDatepicker)))(t||MatDatepicker)},"MatDatepicker_Factory")}(),MatDatepicker.\u0275cmp=core.Xpm({type:MatDatepicker,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[core._Bn([MAT_SINGLE_DATE_SELECTION_MODEL_PROVIDER,{provide:MatDatepickerBase,useExisting:MatDatepicker}]),core.qOj],decls:0,vars:0,template:__name(function(rf,ctx){},"MatDatepicker_Template"),encapsulation:2,changeDetection:0});class MatDatepickerInputEvent{constructor(target,targetElement){this.target=target,this.targetElement=targetElement,this.value=this.target.value}}__name(MatDatepickerInputEvent,"MatDatepickerInputEvent");class MatDatepickerInputBase{constructor(_elementRef,_dateAdapter,_dateFormats){this._elementRef=_elementRef,this._dateAdapter=_dateAdapter,this._dateFormats=_dateFormats,this.dateChange=new core.vpe,this.dateInput=new core.vpe,this.stateChanges=new cjs.Subject,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=cjs.Subscription.EMPTY,this._localeSubscription=cjs.Subscription.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=control=>{const controlValue=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value));return!controlValue||this._matchesFilter(controlValue)?null:{matDatepickerFilter:!0}},this._minValidator=control=>{const controlValue=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value)),min2=this._getMinDate();return!min2||!controlValue||this._dateAdapter.compareDate(min2,controlValue)<=0?null:{matDatepickerMin:{min:min2,actual:controlValue}}},this._maxValidator=control=>{const controlValue=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value)),max2=this._getMaxDate();return!max2||!controlValue||this._dateAdapter.compareDate(max2,controlValue)>=0?null:{matDatepickerMax:{max:max2,actual:controlValue}}},this._lastValueValid=!1,this._localeSubscription=_dateAdapter.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(value){this._assignValueProgrammatically(value)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(value){const newValue=(0,coercion.Ig)(value),element=this._elementRef.nativeElement;this._disabled!==newValue&&(this._disabled=newValue,this.stateChanges.next(void 0)),newValue&&this._isInitialized&&element.blur&&element.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(model){this._model=model,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(event=>{if(this._shouldHandleChangeEvent(event)){const value=this._getValueFromModel(event.selection);this._lastValueValid=this._isValidValue(value),this._cvaOnChange(value),this._onTouched(),this._formatValue(value),this.dateInput.emit(new MatDatepickerInputEvent(this,this._elementRef.nativeElement)),this.dateChange.emit(new MatDatepickerInputEvent(this,this._elementRef.nativeElement))}})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(changes){dateInputsHaveChanged(changes,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(fn){this._validatorOnChange=fn}validate(c){return this._validator?this._validator(c):null}writeValue(value){this._assignValueProgrammatically(value)}registerOnChange(fn){this._cvaOnChange=fn}registerOnTouched(fn){this._onTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled}_onKeydown(event){event.altKey&&event.keyCode===keycodes.JH&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),event.preventDefault())}_onInput(value){const lastValueWasValid=this._lastValueValid;let date=this._dateAdapter.parse(value,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(date),date=this._dateAdapter.getValidDateOrNull(date);const hasChanged=!this._dateAdapter.sameDate(date,this.value);!date||hasChanged?this._cvaOnChange(date):(value&&!this.value&&this._cvaOnChange(date),lastValueWasValid!==this._lastValueValid&&this._validatorOnChange()),hasChanged&&(this._assignValue(date),this.dateInput.emit(new MatDatepickerInputEvent(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new MatDatepickerInputEvent(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(value){this._elementRef.nativeElement.value=null!=value?this._dateAdapter.format(value,this._dateFormats.display.dateInput):""}_assignValue(value){this._model?(this._assignValueToModel(value),this._pendingValue=null):this._pendingValue=value}_isValidValue(value){return!value||this._dateAdapter.isValid(value)}_parentDisabled(){return!1}_assignValueProgrammatically(value){value=this._dateAdapter.deserialize(value),this._lastValueValid=this._isValidValue(value),value=this._dateAdapter.getValidDateOrNull(value),this._assignValue(value),this._formatValue(value)}_matchesFilter(value){const filter=this._getDateFilter();return!filter||filter(value)}}function dateInputsHaveChanged(changes,adapter){const keys2=Object.keys(changes);for(let key of keys2){const{previousValue,currentValue}=changes[key];if(!adapter.isDateInstance(previousValue)||!adapter.isDateInstance(currentValue))return!0;if(!adapter.sameDate(previousValue,currentValue))return!0}return!1}__name(MatDatepickerInputBase,"MatDatepickerInputBase"),MatDatepickerInputBase.\u0275fac=__name(function(t){return new(t||MatDatepickerInputBase)(core.Y36(core.SBq),core.Y36(DateAdapter,8),core.Y36(MAT_DATE_FORMATS,8))},"MatDatepickerInputBase_Factory"),MatDatepickerInputBase.\u0275dir=core.lG2({type:MatDatepickerInputBase,inputs:{value:"value",disabled:"disabled"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[core.TTD]}),__name(dateInputsHaveChanged,"dateInputsHaveChanged");const MAT_DATEPICKER_VALUE_ACCESSOR={provide:fesm2015_forms.JU,useExisting:(0,core.Gpc)(()=>MatDatepickerInput),multi:!0},MAT_DATEPICKER_VALIDATORS={provide:fesm2015_forms.Cf,useExisting:(0,core.Gpc)(()=>MatDatepickerInput),multi:!0};class MatDatepickerInput extends MatDatepickerInputBase{constructor(elementRef,dateAdapter,dateFormats,_formField){super(elementRef,dateAdapter,dateFormats),this._formField=_formField,this._closedSubscription=cjs.Subscription.EMPTY,this._validator=fesm2015_forms.kI.compose(super._getValidators())}set matDatepicker(datepicker){datepicker&&(this._datepicker=datepicker,this._closedSubscription=datepicker.closedStream.subscribe(()=>this._onTouched()),this._registerModel(datepicker.registerInput(this)))}get min(){return this._min}set min(value){const validValue=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));this._dateAdapter.sameDate(validValue,this._min)||(this._min=validValue,this._validatorOnChange())}get max(){return this._max}set max(value){const validValue=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));this._dateAdapter.sameDate(validValue,this._max)||(this._max=validValue,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(value){const wasMatchingValue=this._matchesFilter(this.value);this._dateFilter=value,this._matchesFilter(this.value)!==wasMatchingValue&&this._validatorOnChange()}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(modelValue){return modelValue}_assignValueToModel(value){this._model&&this._model.updateSelection(value,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(event){return event.source!==this}}__name(MatDatepickerInput,"MatDatepickerInput"),MatDatepickerInput.\u0275fac=__name(function(t){return new(t||MatDatepickerInput)(core.Y36(core.SBq),core.Y36(DateAdapter,8),core.Y36(MAT_DATE_FORMATS,8),core.Y36(MAT_FORM_FIELD,8))},"MatDatepickerInput_Factory"),MatDatepickerInput.\u0275dir=core.lG2({type:MatDatepickerInput,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("input",__name(function($event){return ctx._onInput($event.target.value)},"MatDatepickerInput_input_HostBindingHandler"))("change",__name(function(){return ctx._onChange()},"MatDatepickerInput_change_HostBindingHandler"))("blur",__name(function(){return ctx._onBlur()},"MatDatepickerInput_blur_HostBindingHandler"))("keydown",__name(function($event){return ctx._onKeydown($event)},"MatDatepickerInput_keydown_HostBindingHandler")),2&rf&&(core.Ikx("disabled",ctx.disabled),core.uIk("aria-haspopup",ctx._datepicker?"dialog":null)("aria-owns",(null==ctx._datepicker?null:ctx._datepicker.opened)&&ctx._datepicker.id||null)("min",ctx.min?ctx._dateAdapter.toIso8601(ctx.min):null)("max",ctx.max?ctx._dateAdapter.toIso8601(ctx.max):null)("data-mat-calendar",ctx._datepicker?ctx._datepicker.id:null))},"MatDatepickerInput_HostBindings"),inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:["matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[core._Bn([MAT_DATEPICKER_VALUE_ACCESSOR,MAT_DATEPICKER_VALIDATORS,{provide:MAT_INPUT_VALUE_ACCESSOR,useExisting:MatDatepickerInput}]),core.qOj]});class MatDatepickerToggleIcon{}__name(MatDatepickerToggleIcon,"MatDatepickerToggleIcon"),MatDatepickerToggleIcon.\u0275fac=__name(function(t){return new(t||MatDatepickerToggleIcon)},"MatDatepickerToggleIcon_Factory"),MatDatepickerToggleIcon.\u0275dir=core.lG2({type:MatDatepickerToggleIcon,selectors:[["","matDatepickerToggleIcon",""]]});class MatDatepickerToggle{constructor(_intl,_changeDetectorRef,defaultTabIndex){this._intl=_intl,this._changeDetectorRef=_changeDetectorRef,this._stateChanges=cjs.Subscription.EMPTY;const parsedTabIndex=Number(defaultTabIndex);this.tabIndex=parsedTabIndex||0===parsedTabIndex?parsedTabIndex:null}get disabled(){return void 0===this._disabled&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(value){this._disabled=(0,coercion.Ig)(value)}ngOnChanges(changes){changes.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(event){this.datepicker&&!this.disabled&&(this.datepicker.open(),event.stopPropagation())}_watchStateChanges(){const datepickerStateChanged=this.datepicker?this.datepicker.stateChanges:(0,cjs.of)(),inputStateChanged=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:(0,cjs.of)(),datepickerToggled=this.datepicker?(0,cjs.merge)(this.datepicker.openedStream,this.datepicker.closedStream):(0,cjs.of)();this._stateChanges.unsubscribe(),this._stateChanges=(0,cjs.merge)(this._intl.changes,datepickerStateChanged,inputStateChanged,datepickerToggled).subscribe(()=>this._changeDetectorRef.markForCheck())}}__name(MatDatepickerToggle,"MatDatepickerToggle"),MatDatepickerToggle.\u0275fac=__name(function(t){return new(t||MatDatepickerToggle)(core.Y36(MatDatepickerIntl),core.Y36(core.sBO),core.$8M("tabindex"))},"MatDatepickerToggle_Factory"),MatDatepickerToggle.\u0275cmp=core.Xpm({type:MatDatepickerToggle,selectors:[["mat-datepicker-toggle"]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&core.Suo(dirIndex,MatDatepickerToggleIcon,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._customIcon=_t.first)}},"MatDatepickerToggle_ContentQueries"),viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(datepicker_c2,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._button=_t.first)}},"MatDatepickerToggle_Query"),hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("click",__name(function($event){return ctx._open($event)},"MatDatepickerToggle_click_HostBindingHandler")),2&rf&&(core.uIk("tabindex",null)("data-mat-calendar",ctx.datepicker?ctx.datepicker.id:null),core.ekj("mat-datepicker-toggle-active",ctx.datepicker&&ctx.datepicker.opened)("mat-accent",ctx.datepicker&&"accent"===ctx.datepicker.color)("mat-warn",ctx.datepicker&&"warn"===ctx.datepicker.color))},"MatDatepickerToggle_HostBindings"),inputs:{datepicker:["for","datepicker"],tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],disabled:"disabled",disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[core.TTD],ngContentSelectors:["[matDatepickerToggleIcon]"],decls:4,vars:6,consts:[["mat-icon-button","","type","button",3,"disabled","disableRipple"],["button",""],["class","mat-datepicker-toggle-default-icon","viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",4,"ngIf"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(datepicker_c3),core.TgZ(0,"button",0,1),core.YNc(2,MatDatepickerToggle__svg_svg_2_Template,2,0,"svg",2),core.Hsn(3),core.qZA()),2&rf&&(core.Q6J("disabled",ctx.disabled)("disableRipple",ctx.disableRipple),core.uIk("aria-haspopup",ctx.datepicker?"dialog":null)("aria-label",ctx.ariaLabel||ctx._intl.openCalendarLabel)("tabindex",ctx.disabled?-1:ctx.tabIndex),core.xp6(2),core.Q6J("ngIf",!ctx._customIcon))},"MatDatepickerToggle_Template"),dependencies:[common.O5,MatButton],styles:[".mat-form-field-appearance-legacy .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-datepicker-toggle-default-icon{width:1em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-datepicker-toggle-default-icon{display:block;width:1.5em;height:1.5em}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-datepicker-toggle-default-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-datepicker-toggle-default-icon{margin:auto}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}"],encapsulation:2,changeDetection:0});const MAT_DATE_RANGE_INPUT_PARENT=new core.OlP("MAT_DATE_RANGE_INPUT_PARENT");class MatDateRangeInputPartBase extends MatDatepickerInputBase{constructor(_rangeInput,_elementRef,_defaultErrorStateMatcher,_injector,_parentForm,_parentFormGroup,dateAdapter,dateFormats){super(_elementRef,dateAdapter,dateFormats),this._rangeInput=_rangeInput,this._elementRef=_elementRef,this._defaultErrorStateMatcher=_defaultErrorStateMatcher,this._injector=_injector,this._parentForm=_parentForm,this._parentFormGroup=_parentFormGroup,this._dir=(0,core.f3M)(Directionality,core.XFs.Optional)}ngOnInit(){const ngControl=this._injector.get(fesm2015_forms.a5,null,core.XFs.Self|core.XFs.Optional);ngControl&&(this.ngControl=ngControl)}ngDoCheck(){this.ngControl&&this.updateErrorState()}isEmpty(){return 0===this._elementRef.nativeElement.value.length}_getPlaceholder(){return this._elementRef.nativeElement.placeholder}focus(){this._elementRef.nativeElement.focus()}_onInput(value){super._onInput(value),this._rangeInput._handleChildValueChange()}_openPopup(){this._rangeInput._openDatepicker()}_getMinDate(){return this._rangeInput.min}_getMaxDate(){return this._rangeInput.max}_getDateFilter(){return this._rangeInput.dateFilter}_parentDisabled(){return this._rangeInput._groupDisabled}_shouldHandleChangeEvent({source}){return source!==this._rangeInput._startInput&&source!==this._rangeInput._endInput}_assignValueProgrammatically(value){super._assignValueProgrammatically(value);const opposite=this===this._rangeInput._startInput?this._rangeInput._endInput:this._rangeInput._startInput;null==opposite||opposite._validatorOnChange()}}__name(MatDateRangeInputPartBase,"MatDateRangeInputPartBase"),MatDateRangeInputPartBase.\u0275fac=__name(function(t){return new(t||MatDateRangeInputPartBase)(core.Y36(MAT_DATE_RANGE_INPUT_PARENT),core.Y36(core.SBq),core.Y36(ErrorStateMatcher),core.Y36(core.zs3),core.Y36(fesm2015_forms.F,8),core.Y36(fesm2015_forms.sg,8),core.Y36(DateAdapter,8),core.Y36(MAT_DATE_FORMATS,8))},"MatDateRangeInputPartBase_Factory"),MatDateRangeInputPartBase.\u0275dir=core.lG2({type:MatDateRangeInputPartBase,features:[core.qOj]});const _MatDateRangeInputBase=mixinErrorState(MatDateRangeInputPartBase);class MatStartDate extends _MatDateRangeInputBase{constructor(rangeInput,elementRef,defaultErrorStateMatcher,injector,parentForm,parentFormGroup,dateAdapter,dateFormats){super(rangeInput,elementRef,defaultErrorStateMatcher,injector,parentForm,parentFormGroup,dateAdapter,dateFormats),this._startValidator=control=>{const start=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value)),end=this._model?this._model.selection.end:null;return!start||!end||this._dateAdapter.compareDate(start,end)<=0?null:{matStartDateInvalid:{end,actual:start}}},this._validator=fesm2015_forms.kI.compose([...super._getValidators(),this._startValidator])}_getValueFromModel(modelValue){return modelValue.start}_shouldHandleChangeEvent(change){var _a;return!!super._shouldHandleChangeEvent(change)&&(null!==(_a=change.oldValue)&&void 0!==_a&&_a.start?!change.selection.start||!!this._dateAdapter.compareDate(change.oldValue.start,change.selection.start):!!change.selection.start)}_assignValueToModel(value){if(this._model){const range2=new DateRange(value,this._model.selection.end);this._model.updateSelection(range2,this)}}_formatValue(value){super._formatValue(value),this._rangeInput._handleChildValueChange()}getMirrorValue(){const element=this._elementRef.nativeElement,value=element.value;return value.length>0?value:element.placeholder}_onKeydown(event){var _a;const endInput=this._rangeInput._endInput,element=this._elementRef.nativeElement,isLtr="rtl"!==(null===(_a=this._dir)||void 0===_a?void 0:_a.value);(event.keyCode===keycodes.SV&&isLtr||event.keyCode===keycodes.oh&&!isLtr)&&element.selectionStart===element.value.length&&element.selectionEnd===element.value.length?(event.preventDefault(),endInput._elementRef.nativeElement.setSelectionRange(0,0),endInput.focus()):super._onKeydown(event)}}__name(MatStartDate,"MatStartDate"),MatStartDate.\u0275fac=__name(function(t){return new(t||MatStartDate)(core.Y36(MAT_DATE_RANGE_INPUT_PARENT),core.Y36(core.SBq),core.Y36(ErrorStateMatcher),core.Y36(core.zs3),core.Y36(fesm2015_forms.F,8),core.Y36(fesm2015_forms.sg,8),core.Y36(DateAdapter,8),core.Y36(MAT_DATE_FORMATS,8))},"MatStartDate_Factory"),MatStartDate.\u0275dir=core.lG2({type:MatStartDate,selectors:[["input","matStartDate",""]],hostAttrs:["type","text",1,"mat-start-date","mat-date-range-input-inner"],hostVars:6,hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("input",__name(function($event){return ctx._onInput($event.target.value)},"MatStartDate_input_HostBindingHandler"))("change",__name(function(){return ctx._onChange()},"MatStartDate_change_HostBindingHandler"))("keydown",__name(function($event){return ctx._onKeydown($event)},"MatStartDate_keydown_HostBindingHandler"))("blur",__name(function(){return ctx._onBlur()},"MatStartDate_blur_HostBindingHandler")),2&rf&&(core.Ikx("disabled",ctx.disabled),core.uIk("id",ctx._rangeInput.id)("aria-haspopup",ctx._rangeInput.rangePicker?"dialog":null)("aria-owns",(null==ctx._rangeInput.rangePicker?null:ctx._rangeInput.rangePicker.opened)&&ctx._rangeInput.rangePicker.id||null)("min",ctx._getMinDate()?ctx._dateAdapter.toIso8601(ctx._getMinDate()):null)("max",ctx._getMaxDate()?ctx._dateAdapter.toIso8601(ctx._getMaxDate()):null))},"MatStartDate_HostBindings"),inputs:{errorStateMatcher:"errorStateMatcher"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[core._Bn([{provide:fesm2015_forms.JU,useExisting:MatStartDate,multi:!0},{provide:fesm2015_forms.Cf,useExisting:MatStartDate,multi:!0}]),core.qOj]});class MatEndDate extends _MatDateRangeInputBase{constructor(rangeInput,elementRef,defaultErrorStateMatcher,injector,parentForm,parentFormGroup,dateAdapter,dateFormats){super(rangeInput,elementRef,defaultErrorStateMatcher,injector,parentForm,parentFormGroup,dateAdapter,dateFormats),this._endValidator=control=>{const end=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(control.value)),start=this._model?this._model.selection.start:null;return!end||!start||this._dateAdapter.compareDate(end,start)>=0?null:{matEndDateInvalid:{start,actual:end}}},this._validator=fesm2015_forms.kI.compose([...super._getValidators(),this._endValidator])}_getValueFromModel(modelValue){return modelValue.end}_shouldHandleChangeEvent(change){var _a;return!!super._shouldHandleChangeEvent(change)&&(null!==(_a=change.oldValue)&&void 0!==_a&&_a.end?!change.selection.end||!!this._dateAdapter.compareDate(change.oldValue.end,change.selection.end):!!change.selection.end)}_assignValueToModel(value){if(this._model){const range2=new DateRange(this._model.selection.start,value);this._model.updateSelection(range2,this)}}_onKeydown(event){var _a;const startInput=this._rangeInput._startInput,element=this._elementRef.nativeElement,isLtr="rtl"!==(null===(_a=this._dir)||void 0===_a?void 0:_a.value);if(event.keyCode!==keycodes.ZH||element.value)if((event.keyCode===keycodes.oh&&isLtr||event.keyCode===keycodes.SV&&!isLtr)&&0===element.selectionStart&&0===element.selectionEnd){event.preventDefault();const endPosition=startInput._elementRef.nativeElement.value.length;startInput._elementRef.nativeElement.setSelectionRange(endPosition,endPosition),startInput.focus()}else super._onKeydown(event);else startInput.focus()}}__name(MatEndDate,"MatEndDate"),MatEndDate.\u0275fac=__name(function(t){return new(t||MatEndDate)(core.Y36(MAT_DATE_RANGE_INPUT_PARENT),core.Y36(core.SBq),core.Y36(ErrorStateMatcher),core.Y36(core.zs3),core.Y36(fesm2015_forms.F,8),core.Y36(fesm2015_forms.sg,8),core.Y36(DateAdapter,8),core.Y36(MAT_DATE_FORMATS,8))},"MatEndDate_Factory"),MatEndDate.\u0275dir=core.lG2({type:MatEndDate,selectors:[["input","matEndDate",""]],hostAttrs:["type","text",1,"mat-end-date","mat-date-range-input-inner"],hostVars:5,hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("input",__name(function($event){return ctx._onInput($event.target.value)},"MatEndDate_input_HostBindingHandler"))("change",__name(function(){return ctx._onChange()},"MatEndDate_change_HostBindingHandler"))("keydown",__name(function($event){return ctx._onKeydown($event)},"MatEndDate_keydown_HostBindingHandler"))("blur",__name(function(){return ctx._onBlur()},"MatEndDate_blur_HostBindingHandler")),2&rf&&(core.Ikx("disabled",ctx.disabled),core.uIk("aria-haspopup",ctx._rangeInput.rangePicker?"dialog":null)("aria-owns",(null==ctx._rangeInput.rangePicker?null:ctx._rangeInput.rangePicker.opened)&&ctx._rangeInput.rangePicker.id||null)("min",ctx._getMinDate()?ctx._dateAdapter.toIso8601(ctx._getMinDate()):null)("max",ctx._getMaxDate()?ctx._dateAdapter.toIso8601(ctx._getMaxDate()):null))},"MatEndDate_HostBindings"),inputs:{errorStateMatcher:"errorStateMatcher"},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[core._Bn([{provide:fesm2015_forms.JU,useExisting:MatEndDate,multi:!0},{provide:fesm2015_forms.Cf,useExisting:MatEndDate,multi:!0}]),core.qOj]});let datepicker_nextUniqueId=0;class MatDateRangeInput{constructor(_changeDetectorRef,_elementRef,control,_dateAdapter,_formField){if(this._changeDetectorRef=_changeDetectorRef,this._elementRef=_elementRef,this._dateAdapter=_dateAdapter,this._formField=_formField,this._closedSubscription=cjs.Subscription.EMPTY,this.id="mat-date-range-input-"+datepicker_nextUniqueId++,this.focused=!1,this.controlType="mat-date-range-input",this._groupDisabled=!1,this._ariaDescribedBy=null,this.separator="\u2013",this.comparisonStart=null,this.comparisonEnd=null,this.stateChanges=new cjs.Subject,null!=_formField&&_formField._elementRef.nativeElement.classList.contains("mat-mdc-form-field")){const classList=_elementRef.nativeElement.classList;classList.add("mat-mdc-input-element"),classList.add("mat-mdc-form-field-input-control")}this.ngControl=control}get value(){return this._model?this._model.selection:null}get shouldLabelFloat(){return this.focused||!this.empty}get placeholder(){var _a,_b;const start=(null===(_a=this._startInput)||void 0===_a?void 0:_a._getPlaceholder())||"",end=(null===(_b=this._endInput)||void 0===_b?void 0:_b._getPlaceholder())||"";return start||end?`${start} ${this.separator} ${end}`:""}get rangePicker(){return this._rangePicker}set rangePicker(rangePicker){rangePicker&&(this._model=rangePicker.registerInput(this),this._rangePicker=rangePicker,this._closedSubscription.unsubscribe(),this._closedSubscription=rangePicker.closedStream.subscribe(()=>{var _a,_b;null===(_a=this._startInput)||void 0===_a||_a._onTouched(),null===(_b=this._endInput)||void 0===_b||_b._onTouched()}),this._registerModel(this._model))}get required(){return!!this._required}set required(value){this._required=(0,coercion.Ig)(value)}get dateFilter(){return this._dateFilter}set dateFilter(value){const start=this._startInput,end=this._endInput,wasMatchingStart=start&&start._matchesFilter(start.value),wasMatchingEnd=end&&end._matchesFilter(start.value);this._dateFilter=value,start&&start._matchesFilter(start.value)!==wasMatchingStart&&start._validatorOnChange(),end&&end._matchesFilter(end.value)!==wasMatchingEnd&&end._validatorOnChange()}get min(){return this._min}set min(value){const validValue=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));this._dateAdapter.sameDate(validValue,this._min)||(this._min=validValue,this._revalidate())}get max(){return this._max}set max(value){const validValue=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(value));this._dateAdapter.sameDate(validValue,this._max)||(this._max=validValue,this._revalidate())}get disabled(){return this._startInput&&this._endInput?this._startInput.disabled&&this._endInput.disabled:this._groupDisabled}set disabled(value){const newValue=(0,coercion.Ig)(value);newValue!==this._groupDisabled&&(this._groupDisabled=newValue,this.stateChanges.next(void 0))}get errorState(){return!(!this._startInput||!this._endInput)&&(this._startInput.errorState||this._endInput.errorState)}get empty(){const startEmpty=!!this._startInput&&this._startInput.isEmpty(),endEmpty=!!this._endInput&&this._endInput.isEmpty();return startEmpty&&endEmpty}setDescribedByIds(ids){this._ariaDescribedBy=ids.length?ids.join(" "):null}onContainerClick(){!this.focused&&!this.disabled&&(this._model&&this._model.selection.start?this._endInput.focus():this._startInput.focus())}ngAfterContentInit(){this._model&&this._registerModel(this._model),(0,cjs.merge)(this._startInput.stateChanges,this._endInput.stateChanges).subscribe(()=>{this.stateChanges.next(void 0)})}ngOnChanges(changes){dateInputsHaveChanged(changes,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._closedSubscription.unsubscribe(),this.stateChanges.complete()}getStartValue(){return this.value?this.value.start:null}getThemePalette(){return this._formField?this._formField.color:void 0}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():null}_getInputMirrorValue(){return this._startInput?this._startInput.getMirrorValue():""}_shouldHidePlaceholders(){return!!this._startInput&&!this._startInput.isEmpty()}_handleChildValueChange(){this.stateChanges.next(void 0),this._changeDetectorRef.markForCheck()}_openDatepicker(){this._rangePicker&&this._rangePicker.open()}_shouldHideSeparator(){return(!this._formField||this._formField.getLabelId()&&!this._formField._shouldLabelFloat())&&this.empty}_getAriaLabelledby(){const formField=this._formField;return formField&&formField._hasFloatingLabel()?formField._labelId:null}_updateFocus(origin){this.focused=null!==origin,this.stateChanges.next()}_revalidate(){this._startInput&&this._startInput._validatorOnChange(),this._endInput&&this._endInput._validatorOnChange()}_registerModel(model){this._startInput&&this._startInput._registerModel(model),this._endInput&&this._endInput._registerModel(model)}}__name(MatDateRangeInput,"MatDateRangeInput"),MatDateRangeInput.\u0275fac=__name(function(t){return new(t||MatDateRangeInput)(core.Y36(core.sBO),core.Y36(core.SBq),core.Y36(fesm2015_forms.gN,10),core.Y36(DateAdapter,8),core.Y36(MAT_FORM_FIELD,8))},"MatDateRangeInput_Factory"),MatDateRangeInput.\u0275cmp=core.Xpm({type:MatDateRangeInput,selectors:[["mat-date-range-input"]],contentQueries:__name(function(rf,ctx,dirIndex){if(1&rf&&(core.Suo(dirIndex,MatStartDate,5),core.Suo(dirIndex,MatEndDate,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._startInput=_t.first),core.iGM(_t=core.CRH())&&(ctx._endInput=_t.first)}},"MatDateRangeInput_ContentQueries"),hostAttrs:["role","group",1,"mat-date-range-input"],hostVars:8,hostBindings:__name(function(rf,ctx){2&rf&&(core.uIk("id",null)("aria-labelledby",ctx._getAriaLabelledby())("aria-describedby",ctx._ariaDescribedBy)("data-mat-calendar",ctx.rangePicker?ctx.rangePicker.id:null),core.ekj("mat-date-range-input-hide-placeholders",ctx._shouldHidePlaceholders())("mat-date-range-input-required",ctx.required))},"MatDateRangeInput_HostBindings"),inputs:{rangePicker:"rangePicker",required:"required",dateFilter:"dateFilter",min:"min",max:"max",disabled:"disabled",separator:"separator",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd"},exportAs:["matDateRangeInput"],features:[core._Bn([{provide:MatFormFieldControl,useExisting:MatDateRangeInput},{provide:MAT_DATE_RANGE_INPUT_PARENT,useExisting:MatDateRangeInput}]),core.TTD],ngContentSelectors:["input[matStartDate]","input[matEndDate]"],decls:9,vars:4,consts:[["cdkMonitorSubtreeFocus","",1,"mat-date-range-input-container",3,"cdkFocusChange"],[1,"mat-date-range-input-start-wrapper"],["aria-hidden","true",1,"mat-date-range-input-mirror"],[1,"mat-date-range-input-separator"],[1,"mat-date-range-input-end-wrapper"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(datepicker_c5),core.TgZ(0,"div",0),core.NdJ("cdkFocusChange",__name(function($event){return ctx._updateFocus($event)},"MatDateRangeInput_Template_div_cdkFocusChange_0_listener")),core.TgZ(1,"div",1),core.Hsn(2),core.TgZ(3,"span",2),core._uU(4),core.qZA()(),core.TgZ(5,"span",3),core._uU(6),core.qZA(),core.TgZ(7,"div",4),core.Hsn(8,1),core.qZA()()),2&rf&&(core.xp6(4),core.Oqu(ctx._getInputMirrorValue()),core.xp6(1),core.ekj("mat-date-range-input-separator-hidden",ctx._shouldHideSeparator()),core.xp6(1),core.Oqu(ctx.separator))},"MatDateRangeInput_Template"),dependencies:[a11y.kH],styles:[".mat-date-range-input{display:block;width:100%}.mat-date-range-input-container{display:flex;align-items:center}.mat-date-range-input-separator{transition:opacity 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);margin:0 4px}._mat-animation-noopable .mat-date-range-input-separator{transition:none}.mat-date-range-input-separator-hidden{-webkit-user-select:none;user-select:none;opacity:0;transition:none}.mat-date-range-input-inner{font:inherit;background:rgba(0,0,0,0);color:currentColor;border:none;outline:none;padding:0;margin:0;vertical-align:bottom;text-align:inherit;-webkit-appearance:none;width:100%}.mat-date-range-input-inner:-moz-ui-invalid{box-shadow:none}.mat-date-range-input-inner::placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-moz-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner::-webkit-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-date-range-input-inner:-ms-input-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::-moz-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner::-webkit-input-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{-webkit-user-select:none;user-select:none;color:rgba(0,0,0,0) !important;-webkit-text-fill-color:rgba(0,0,0,0);transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-date-range-input-inner:-ms-input-placeholder,.cdk-high-contrast-active .mat-date-range-input-hide-placeholders .mat-date-range-input-inner:-ms-input-placeholder{opacity:0}._mat-animation-noopable .mat-date-range-input-inner::placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner::-moz-placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner::-webkit-input-placeholder{transition:none}._mat-animation-noopable .mat-date-range-input-inner:-ms-input-placeholder{transition:none}.mat-date-range-input-mirror{-webkit-user-select:none;user-select:none;visibility:hidden;white-space:nowrap;display:inline-block;min-width:2px}.mat-date-range-input-start-wrapper{position:relative;overflow:hidden;max-width:calc(50% - 4px)}.mat-date-range-input-start-wrapper .mat-date-range-input-inner{position:absolute;top:0;left:0}.mat-date-range-input-end-wrapper{flex-grow:1;max-width:calc(50% - 4px)}.mat-form-field-type-mat-date-range-input .mat-form-field-infix{width:200px}"],encapsulation:2,changeDetection:0});class MatDateRangePicker extends MatDatepickerBase{_forwardContentValues(instance){super._forwardContentValues(instance);const input=this.datepickerInput;input&&(instance.comparisonStart=input.comparisonStart,instance.comparisonEnd=input.comparisonEnd)}}__name(MatDateRangePicker,"MatDateRangePicker"),MatDateRangePicker.\u0275fac=function(){let \u0275MatDateRangePicker_BaseFactory;return __name(function(t){return(\u0275MatDateRangePicker_BaseFactory||(\u0275MatDateRangePicker_BaseFactory=core.n5z(MatDateRangePicker)))(t||MatDateRangePicker)},"MatDateRangePicker_Factory")}(),MatDateRangePicker.\u0275cmp=core.Xpm({type:MatDateRangePicker,selectors:[["mat-date-range-picker"]],exportAs:["matDateRangePicker"],features:[core._Bn([MAT_RANGE_DATE_SELECTION_MODEL_PROVIDER,MAT_CALENDAR_RANGE_STRATEGY_PROVIDER,{provide:MatDatepickerBase,useExisting:MatDateRangePicker}]),core.qOj],decls:0,vars:0,template:__name(function(rf,ctx){},"MatDateRangePicker_Template"),encapsulation:2,changeDetection:0});class MatDatepickerApply{constructor(_datepicker){this._datepicker=_datepicker}_applySelection(){this._datepicker._applyPendingSelection(),this._datepicker.close()}}__name(MatDatepickerApply,"MatDatepickerApply"),MatDatepickerApply.\u0275fac=__name(function(t){return new(t||MatDatepickerApply)(core.Y36(MatDatepickerBase))},"MatDatepickerApply_Factory"),MatDatepickerApply.\u0275dir=core.lG2({type:MatDatepickerApply,selectors:[["","matDatepickerApply",""],["","matDateRangePickerApply",""]],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("click",__name(function(){return ctx._applySelection()},"MatDatepickerApply_click_HostBindingHandler"))},"MatDatepickerApply_HostBindings")});class MatDatepickerCancel{constructor(_datepicker){this._datepicker=_datepicker}}__name(MatDatepickerCancel,"MatDatepickerCancel"),MatDatepickerCancel.\u0275fac=__name(function(t){return new(t||MatDatepickerCancel)(core.Y36(MatDatepickerBase))},"MatDatepickerCancel_Factory"),MatDatepickerCancel.\u0275dir=core.lG2({type:MatDatepickerCancel,selectors:[["","matDatepickerCancel",""],["","matDateRangePickerCancel",""]],hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("click",__name(function(){return ctx._datepicker.close()},"MatDatepickerCancel_click_HostBindingHandler"))},"MatDatepickerCancel_HostBindings")});class MatDatepickerActions{constructor(_datepicker,_viewContainerRef){this._datepicker=_datepicker,this._viewContainerRef=_viewContainerRef}ngAfterViewInit(){this._portal=new TemplatePortal(this._template,this._viewContainerRef),this._datepicker.registerActions(this._portal)}ngOnDestroy(){var _a;this._datepicker.removeActions(this._portal),this._portal&&this._portal.isAttached&&(null===(_a=this._portal)||void 0===_a||_a.detach())}}__name(MatDatepickerActions,"MatDatepickerActions"),MatDatepickerActions.\u0275fac=__name(function(t){return new(t||MatDatepickerActions)(core.Y36(MatDatepickerBase),core.Y36(core.s_b))},"MatDatepickerActions_Factory"),MatDatepickerActions.\u0275cmp=core.Xpm({type:MatDatepickerActions,selectors:[["mat-datepicker-actions"],["mat-date-range-picker-actions"]],viewQuery:__name(function(rf,ctx){if(1&rf&&core.Gf(core.Rgc,5),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx._template=_t.first)}},"MatDatepickerActions_Query"),ngContentSelectors:datepicker_c1,decls:1,vars:0,consts:[[1,"mat-datepicker-actions"]],template:__name(function(rf,ctx){1&rf&&(core.F$t(),core.YNc(0,MatDatepickerActions_ng_template_0_Template,2,0,"ng-template"))},"MatDatepickerActions_Template"),styles:[".mat-datepicker-actions{display:flex;justify-content:flex-end;align-items:center;padding:0 8px 8px 8px}.mat-datepicker-actions .mat-button-base+.mat-button-base{margin-left:8px}[dir=rtl] .mat-datepicker-actions .mat-button-base+.mat-button-base{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0});class MatDatepickerModule{}__name(MatDatepickerModule,"MatDatepickerModule"),MatDatepickerModule.\u0275fac=__name(function(t){return new(t||MatDatepickerModule)},"MatDatepickerModule_Factory"),MatDatepickerModule.\u0275mod=core.oAB({type:MatDatepickerModule}),MatDatepickerModule.\u0275inj=core.cJS({providers:[MatDatepickerIntl,MAT_DATEPICKER_SCROLL_STRATEGY_FACTORY_PROVIDER],imports:[common.ez,MatButtonModule,OverlayModule,a11y.rt,PortalModule,MatCommonModule,CdkScrollableModule]});const MaterialComponents=[common.ez,fesm2015_forms.u5,MatInputModule,MatButtonModule,MatToolbarModule,MatFormFieldModule,MatSlideToggleModule,MatNativeDateModule,MatDatepickerModule];class MaterialModule{}__name(MaterialModule,"MaterialModule"),MaterialModule.\u0275fac=__name(function(t){return new(t||MaterialModule)},"MaterialModule_Factory"),MaterialModule.\u0275mod=core.oAB({type:MaterialModule}),MaterialModule.\u0275inj=core.cJS({imports:[MaterialComponents,common.ez,fesm2015_forms.u5,MatInputModule,MatButtonModule,MatToolbarModule,MatFormFieldModule,MatSlideToggleModule,MatNativeDateModule,MatDatepickerModule]});const ngx_image_cropper_c0=["wrapper"],ngx_image_cropper_c1=["sourceImage"];function ImageCropperComponent_img_2_Template(rf,ctx){if(1&rf){const _r5=core.EpF();core.TgZ(0,"img",4,5),core.NdJ("load",__name(function(){core.CHM(_r5);const ctx_r4=core.oxw();return core.KtG(ctx_r4.imageLoadedInView())},"ImageCropperComponent_img_2_Template_img_load_0_listener"))("mousedown",__name(function($event){core.CHM(_r5);const ctx_r6=core.oxw();return core.KtG(ctx_r6.startMove($event,ctx_r6.moveTypes.Drag))},"ImageCropperComponent_img_2_Template_img_mousedown_0_listener"))("touchstart",__name(function($event){core.CHM(_r5);const ctx_r7=core.oxw();return core.KtG(ctx_r7.startMove($event,ctx_r7.moveTypes.Drag))},"ImageCropperComponent_img_2_Template_img_touchstart_0_listener")),core.qZA()}if(2&rf){const ctx_r1=core.oxw();core.Udp("visibility",ctx_r1.imageVisible?"visible":"hidden")("transform",ctx_r1.safeTransformStyle),core.ekj("ngx-ic-draggable",!ctx_r1.disabled&&ctx_r1.allowMoveImage),core.Q6J("src",ctx_r1.safeImgDataUrl,core.LSH)}}function ImageCropperComponent_div_4_ng_container_2_Template(rf,ctx){if(1&rf){const _r10=core.EpF();core.ynx(0),core.TgZ(1,"span",9),core.NdJ("mousedown",__name(function($event){core.CHM(_r10);const ctx_r9=core.oxw(2);return core.KtG(ctx_r9.startMove($event,ctx_r9.moveTypes.Resize,"topleft"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_1_listener"))("touchstart",__name(function($event){core.CHM(_r10);const ctx_r11=core.oxw(2);return core.KtG(ctx_r11.startMove($event,ctx_r11.moveTypes.Resize,"topleft"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_1_listener")),core._UZ(2,"span",10),core.qZA(),core.TgZ(3,"span",11),core._UZ(4,"span",10),core.qZA(),core.TgZ(5,"span",12),core.NdJ("mousedown",__name(function($event){core.CHM(_r10);const ctx_r12=core.oxw(2);return core.KtG(ctx_r12.startMove($event,ctx_r12.moveTypes.Resize,"topright"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_5_listener"))("touchstart",__name(function($event){core.CHM(_r10);const ctx_r13=core.oxw(2);return core.KtG(ctx_r13.startMove($event,ctx_r13.moveTypes.Resize,"topright"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_5_listener")),core._UZ(6,"span",10),core.qZA(),core.TgZ(7,"span",13),core._UZ(8,"span",10),core.qZA(),core.TgZ(9,"span",14),core.NdJ("mousedown",__name(function($event){core.CHM(_r10);const ctx_r14=core.oxw(2);return core.KtG(ctx_r14.startMove($event,ctx_r14.moveTypes.Resize,"bottomright"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_9_listener"))("touchstart",__name(function($event){core.CHM(_r10);const ctx_r15=core.oxw(2);return core.KtG(ctx_r15.startMove($event,ctx_r15.moveTypes.Resize,"bottomright"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_9_listener")),core._UZ(10,"span",10),core.qZA(),core.TgZ(11,"span",15),core._UZ(12,"span",10),core.qZA(),core.TgZ(13,"span",16),core.NdJ("mousedown",__name(function($event){core.CHM(_r10);const ctx_r16=core.oxw(2);return core.KtG(ctx_r16.startMove($event,ctx_r16.moveTypes.Resize,"bottomleft"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_13_listener"))("touchstart",__name(function($event){core.CHM(_r10);const ctx_r17=core.oxw(2);return core.KtG(ctx_r17.startMove($event,ctx_r17.moveTypes.Resize,"bottomleft"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_13_listener")),core._UZ(14,"span",10),core.qZA(),core.TgZ(15,"span",17),core._UZ(16,"span",10),core.qZA(),core.TgZ(17,"span",18),core.NdJ("mousedown",__name(function($event){core.CHM(_r10);const ctx_r18=core.oxw(2);return core.KtG(ctx_r18.startMove($event,ctx_r18.moveTypes.Resize,"top"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_17_listener"))("touchstart",__name(function($event){core.CHM(_r10);const ctx_r19=core.oxw(2);return core.KtG(ctx_r19.startMove($event,ctx_r19.moveTypes.Resize,"top"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_17_listener")),core.qZA(),core.TgZ(18,"span",19),core.NdJ("mousedown",__name(function($event){core.CHM(_r10);const ctx_r20=core.oxw(2);return core.KtG(ctx_r20.startMove($event,ctx_r20.moveTypes.Resize,"right"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_18_listener"))("touchstart",__name(function($event){core.CHM(_r10);const ctx_r21=core.oxw(2);return core.KtG(ctx_r21.startMove($event,ctx_r21.moveTypes.Resize,"right"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_18_listener")),core.qZA(),core.TgZ(19,"span",20),core.NdJ("mousedown",__name(function($event){core.CHM(_r10);const ctx_r22=core.oxw(2);return core.KtG(ctx_r22.startMove($event,ctx_r22.moveTypes.Resize,"bottom"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_19_listener"))("touchstart",__name(function($event){core.CHM(_r10);const ctx_r23=core.oxw(2);return core.KtG(ctx_r23.startMove($event,ctx_r23.moveTypes.Resize,"bottom"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_19_listener")),core.qZA(),core.TgZ(20,"span",21),core.NdJ("mousedown",__name(function($event){core.CHM(_r10);const ctx_r24=core.oxw(2);return core.KtG(ctx_r24.startMove($event,ctx_r24.moveTypes.Resize,"left"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_mousedown_20_listener"))("touchstart",__name(function($event){core.CHM(_r10);const ctx_r25=core.oxw(2);return core.KtG(ctx_r25.startMove($event,ctx_r25.moveTypes.Resize,"left"))},"ImageCropperComponent_div_4_ng_container_2_Template_span_touchstart_20_listener")),core.qZA(),core.BQk()}}function ImageCropperComponent_div_4_Template(rf,ctx){if(1&rf){const _r27=core.EpF();core.TgZ(0,"div",6),core.NdJ("keydown",__name(function($event){core.CHM(_r27);const ctx_r26=core.oxw();return core.KtG(ctx_r26.keyboardAccess($event))},"ImageCropperComponent_div_4_Template_div_keydown_0_listener")),core.TgZ(1,"div",7),core.NdJ("mousedown",__name(function($event){core.CHM(_r27);const ctx_r28=core.oxw();return core.KtG(ctx_r28.startMove($event,ctx_r28.moveTypes.Move))},"ImageCropperComponent_div_4_Template_div_mousedown_1_listener"))("touchstart",__name(function($event){core.CHM(_r27);const ctx_r29=core.oxw();return core.KtG(ctx_r29.startMove($event,ctx_r29.moveTypes.Move))},"ImageCropperComponent_div_4_Template_div_touchstart_1_listener")),core.qZA(),core.YNc(2,ImageCropperComponent_div_4_ng_container_2_Template,21,0,"ng-container",8),core.qZA()}if(2&rf){const ctx_r2=core.oxw();core.Udp("top",ctx_r2.cropper.y1,"px")("left",ctx_r2.cropper.x1,"px")("width",ctx_r2.cropper.x2-ctx_r2.cropper.x1,"px")("height",ctx_r2.cropper.y2-ctx_r2.cropper.y1,"px")("margin-left","center"===ctx_r2.alignImage?ctx_r2.marginLeft:null)("visibility",ctx_r2.imageVisible?"visible":"hidden"),core.ekj("ngx-ic-round",ctx_r2.roundCropper),core.xp6(2),core.Q6J("ngIf",!ctx_r2.hideResizeSquares)}}__name(ImageCropperComponent_img_2_Template,"ImageCropperComponent_img_2_Template"),__name(ImageCropperComponent_div_4_ng_container_2_Template,"ImageCropperComponent_div_4_ng_container_2_Template"),__name(ImageCropperComponent_div_4_Template,"ImageCropperComponent_div_4_Template");class CropperSettings{constructor(){this.format="png",this.maintainAspectRatio=!0,this.transform={},this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.cropperMaxHeight=0,this.cropperMaxWidth=0,this.cropperStaticWidth=0,this.cropperStaticHeight=0,this.canvasRotation=0,this.initialStepSize=3,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.backgroundColor=null,this.containWithinAspectRatio=!1,this.hideResizeSquares=!1,this.alignImage="center",this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.cropperScaledMaxWidth=20,this.cropperScaledMaxHeight=20,this.stepSize=this.initialStepSize}setOptions(options){Object.keys(options).filter(k=>k in this).forEach(k=>this[k]=options[k]),this.validateOptions()}setOptionsFromChanges(changes){Object.keys(changes).filter(k=>k in this).forEach(k=>this[k]=changes[k].currentValue),this.validateOptions()}validateOptions(){if(this.maintainAspectRatio&&!this.aspectRatio)throw new Error("`aspectRatio` should > 0 when `maintainAspectRatio` is enabled")}}var MoveTypes,MoveTypes2;function getPositionForKey(key){switch(key){case"ArrowUp":return"top";case"ArrowRight":return"right";case"ArrowDown":return"bottom";default:return"left"}}function getInvertedPositionForKey(key){switch(key){case"ArrowUp":return"bottom";case"ArrowRight":return"left";case"ArrowDown":return"top";default:return"right"}}function getEventForKey(key,stepSize){switch(key){case"ArrowUp":return{clientX:0,clientY:-1*stepSize};case"ArrowRight":return{clientX:stepSize,clientY:0};case"ArrowDown":return{clientX:0,clientY:stepSize};default:return{clientX:-1*stepSize,clientY:0}}}function resizeCanvas(canvas,width,height){const width_source=canvas.width,height_source=canvas.height,ratio_w=width_source/(width=Math.round(width)),ratio_h=height_source/(height=Math.round(height)),ratio_w_half=Math.ceil(ratio_w/2),ratio_h_half=Math.ceil(ratio_h/2),ctx=canvas.getContext("2d");if(ctx){const img=ctx.getImageData(0,0,width_source,height_source),img2=ctx.createImageData(width,height),data=img.data,data2=img2.data;for(let j=0;j<height;j++)for(let i=0;i<width;i++){const x2=4*(i+j*width),center_y=j*ratio_h;let weight=0,weights=0,weights_alpha=0,gx_r=0,gx_g=0,gx_b=0,gx_a=0;const xx_start=Math.floor(i*ratio_w),yy_start=Math.floor(j*ratio_h);let xx_stop=Math.ceil((i+1)*ratio_w),yy_stop=Math.ceil((j+1)*ratio_h);xx_stop=Math.min(xx_stop,width_source),yy_stop=Math.min(yy_stop,height_source);for(let yy=yy_start;yy<yy_stop;yy++){const dy=Math.abs(center_y-yy)/ratio_h_half,center_x=i*ratio_w,w0=dy*dy;for(let xx=xx_start;xx<xx_stop;xx++){const dx=Math.abs(center_x-xx)/ratio_w_half,w=Math.sqrt(w0+dx*dx);if(w>=1)continue;weight=2*w*w*w-3*w*w+1;const pos_x=4*(xx+yy*width_source);gx_a+=weight*data[pos_x+3],weights_alpha+=weight,data[pos_x+3]<255&&(weight=weight*data[pos_x+3]/250),gx_r+=weight*data[pos_x],gx_g+=weight*data[pos_x+1],gx_b+=weight*data[pos_x+2],weights+=weight}}data2[x2]=gx_r/weights,data2[x2+1]=gx_g/weights,data2[x2+2]=gx_b/weights,data2[x2+3]=gx_a/weights_alpha}canvas.width=width,canvas.height=height,ctx.putImageData(img2,0,0)}}function percentage(percent,totalValue){return percent/100*totalValue}__name(CropperSettings,"CropperSettings"),(MoveTypes2=MoveTypes||(MoveTypes={})).Drag="drag",MoveTypes2.Move="move",MoveTypes2.Resize="resize",MoveTypes2.Pinch="pinch",__name(getPositionForKey,"getPositionForKey"),__name(getInvertedPositionForKey,"getInvertedPositionForKey"),__name(getEventForKey,"getEventForKey"),__name(resizeCanvas,"resizeCanvas"),__name(percentage,"percentage");class CropService{crop(sourceImage,loadedImage,cropper,settings){const imagePosition=this.getImagePosition(sourceImage,loadedImage,cropper,settings),width=imagePosition.x2-imagePosition.x1,height=imagePosition.y2-imagePosition.y1,cropCanvas=document.createElement("canvas");cropCanvas.width=width,cropCanvas.height=height;const ctx=cropCanvas.getContext("2d");if(!ctx)return null;null!=settings.backgroundColor&&(ctx.fillStyle=settings.backgroundColor,ctx.fillRect(0,0,width,height));const scaleX=(settings.transform.scale||1)*(settings.transform.flipH?-1:1),scaleY=(settings.transform.scale||1)*(settings.transform.flipV?-1:1),{translateH,translateV}=this.getCanvasTranslate(sourceImage,loadedImage,settings),transformedImage=loadedImage.transformed;ctx.setTransform(scaleX,0,0,scaleY,transformedImage.size.width/2+translateH,transformedImage.size.height/2+translateV),ctx.translate(-imagePosition.x1/scaleX,-imagePosition.y1/scaleY),ctx.rotate((settings.transform.rotate||0)*Math.PI/180),ctx.drawImage(transformedImage.image,-transformedImage.size.width/2,-transformedImage.size.height/2);const output={width,height,imagePosition,cropperPosition:Object.assign({},cropper)};settings.containWithinAspectRatio&&(output.offsetImagePosition=this.getOffsetImagePosition(sourceImage,loadedImage,cropper,settings));const resizeRatio=this.getResizeRatio(width,height,settings);return 1!==resizeRatio&&(output.width=Math.round(width*resizeRatio),output.height=settings.maintainAspectRatio?Math.round(output.width/settings.aspectRatio):Math.round(height*resizeRatio),resizeCanvas(cropCanvas,output.width,output.height)),output.base64=cropCanvas.toDataURL("image/"+settings.format,this.getQuality(settings)),output}getCanvasTranslate(sourceImage,loadedImage,settings){if("px"===settings.transform.translateUnit){const ratio=this.getRatio(sourceImage,loadedImage);return{translateH:(settings.transform.translateH||0)*ratio,translateV:(settings.transform.translateV||0)*ratio}}return{translateH:settings.transform.translateH?percentage(settings.transform.translateH,loadedImage.transformed.size.width):0,translateV:settings.transform.translateV?percentage(settings.transform.translateV,loadedImage.transformed.size.height):0}}getRatio(sourceImage,loadedImage){const sourceImageElement=sourceImage.nativeElement;return loadedImage.transformed.size.width/sourceImageElement.offsetWidth}getImagePosition(sourceImage,loadedImage,cropper,settings){const ratio=this.getRatio(sourceImage,loadedImage),out={x1:Math.round(cropper.x1*ratio),y1:Math.round(cropper.y1*ratio),x2:Math.round(cropper.x2*ratio),y2:Math.round(cropper.y2*ratio)};return settings.containWithinAspectRatio||(out.x1=Math.max(out.x1,0),out.y1=Math.max(out.y1,0),out.x2=Math.min(out.x2,loadedImage.transformed.size.width),out.y2=Math.min(out.y2,loadedImage.transformed.size.height)),out}getOffsetImagePosition(sourceImage,loadedImage,cropper,settings){const canvasRotation=settings.canvasRotation+loadedImage.exifTransform.rotate,sourceImageElement=sourceImage.nativeElement,ratio=loadedImage.transformed.size.width/sourceImageElement.offsetWidth;let offsetX,offsetY;canvasRotation%2?(offsetX=(loadedImage.transformed.size.width-loadedImage.original.size.height)/2,offsetY=(loadedImage.transformed.size.height-loadedImage.original.size.width)/2):(offsetX=(loadedImage.transformed.size.width-loadedImage.original.size.width)/2,offsetY=(loadedImage.transformed.size.height-loadedImage.original.size.height)/2);const out={x1:Math.round(cropper.x1*ratio)-offsetX,y1:Math.round(cropper.y1*ratio)-offsetY,x2:Math.round(cropper.x2*ratio)-offsetX,y2:Math.round(cropper.y2*ratio)-offsetY};return settings.containWithinAspectRatio||(out.x1=Math.max(out.x1,0),out.y1=Math.max(out.y1,0),out.x2=Math.min(out.x2,loadedImage.transformed.size.width),out.y2=Math.min(out.y2,loadedImage.transformed.size.height)),out}getResizeRatio(width,height,settings){const ratioWidth=settings.resizeToWidth/width,ratioHeight=settings.resizeToHeight/height,ratios=new Array;settings.resizeToWidth>0&&ratios.push(ratioWidth),settings.resizeToHeight>0&&ratios.push(ratioHeight);const result=0===ratios.length?1:Math.min(...ratios);return result>1&&!settings.onlyScaleDown?result:Math.min(result,1)}getQuality(settings){return Math.min(1,Math.max(0,settings.imageQuality/100))}}__name(CropService,"CropService"),CropService.\u0275fac=__name(function(t){return new(t||CropService)},"CropService_Factory"),CropService.\u0275prov=core.Yz7({token:CropService,factory:CropService.\u0275fac,providedIn:"root"});class CropperPositionService{resetCropperPosition(sourceImage,cropperPosition,settings){if(null==sourceImage||!sourceImage.nativeElement)return;const sourceImageElement=sourceImage.nativeElement;if(settings.cropperStaticHeight&&settings.cropperStaticWidth)cropperPosition.x1=0,cropperPosition.x2=sourceImageElement.offsetWidth>settings.cropperStaticWidth?settings.cropperStaticWidth:sourceImageElement.offsetWidth,cropperPosition.y1=0,cropperPosition.y2=sourceImageElement.offsetHeight>settings.cropperStaticHeight?settings.cropperStaticHeight:sourceImageElement.offsetHeight;else{const cropperWidth=Math.min(settings.cropperScaledMaxWidth,sourceImageElement.offsetWidth),cropperHeight=Math.min(settings.cropperScaledMaxHeight,sourceImageElement.offsetHeight);if(settings.maintainAspectRatio)if(sourceImageElement.offsetWidth/settings.aspectRatio<sourceImageElement.offsetHeight){cropperPosition.x1=0,cropperPosition.x2=cropperWidth;const cropperHeightWithAspectRatio=cropperWidth/settings.aspectRatio;cropperPosition.y1=(sourceImageElement.offsetHeight-cropperHeightWithAspectRatio)/2,cropperPosition.y2=cropperPosition.y1+cropperHeightWithAspectRatio}else{cropperPosition.y1=0,cropperPosition.y2=cropperHeight;const cropperWidthWithAspectRatio=cropperHeight*settings.aspectRatio;cropperPosition.x1=(sourceImageElement.offsetWidth-cropperWidthWithAspectRatio)/2,cropperPosition.x2=cropperPosition.x1+cropperWidthWithAspectRatio}else cropperPosition.x1=0,cropperPosition.x2=cropperWidth,cropperPosition.y1=0,cropperPosition.y2=cropperHeight}}move(event,moveStart,cropperPosition){const diffX=this.getClientX(event)-moveStart.clientX,diffY=this.getClientY(event)-moveStart.clientY;cropperPosition.x1=moveStart.x1+diffX,cropperPosition.y1=moveStart.y1+diffY,cropperPosition.x2=moveStart.x2+diffX,cropperPosition.y2=moveStart.y2+diffY}resize(event,moveStart,cropperPosition,maxSize,settings){const moveX=this.getClientX(event)-moveStart.clientX,moveY=this.getClientY(event)-moveStart.clientY;switch(moveStart.position){case"left":cropperPosition.x1=Math.min(Math.max(moveStart.x1+moveX,cropperPosition.x2-settings.cropperScaledMaxWidth),cropperPosition.x2-settings.cropperScaledMinWidth);break;case"topleft":cropperPosition.x1=Math.min(Math.max(moveStart.x1+moveX,cropperPosition.x2-settings.cropperScaledMaxWidth),cropperPosition.x2-settings.cropperScaledMinWidth),cropperPosition.y1=Math.min(Math.max(moveStart.y1+moveY,cropperPosition.y2-settings.cropperScaledMaxHeight),cropperPosition.y2-settings.cropperScaledMinHeight);break;case"top":cropperPosition.y1=Math.min(Math.max(moveStart.y1+moveY,cropperPosition.y2-settings.cropperScaledMaxHeight),cropperPosition.y2-settings.cropperScaledMinHeight);break;case"topright":cropperPosition.x2=Math.max(Math.min(moveStart.x2+moveX,cropperPosition.x1+settings.cropperScaledMaxWidth),cropperPosition.x1+settings.cropperScaledMinWidth),cropperPosition.y1=Math.min(Math.max(moveStart.y1+moveY,cropperPosition.y2-settings.cropperScaledMaxHeight),cropperPosition.y2-settings.cropperScaledMinHeight);break;case"right":cropperPosition.x2=Math.max(Math.min(moveStart.x2+moveX,cropperPosition.x1+settings.cropperScaledMaxWidth),cropperPosition.x1+settings.cropperScaledMinWidth);break;case"bottomright":cropperPosition.x2=Math.max(Math.min(moveStart.x2+moveX,cropperPosition.x1+settings.cropperScaledMaxWidth),cropperPosition.x1+settings.cropperScaledMinWidth),cropperPosition.y2=Math.max(Math.min(moveStart.y2+moveY,cropperPosition.y1+settings.cropperScaledMaxHeight),cropperPosition.y1+settings.cropperScaledMinHeight);break;case"bottom":cropperPosition.y2=Math.max(Math.min(moveStart.y2+moveY,cropperPosition.y1+settings.cropperScaledMaxHeight),cropperPosition.y1+settings.cropperScaledMinHeight);break;case"bottomleft":cropperPosition.x1=Math.min(Math.max(moveStart.x1+moveX,cropperPosition.x2-settings.cropperScaledMaxWidth),cropperPosition.x2-settings.cropperScaledMinWidth),cropperPosition.y2=Math.max(Math.min(moveStart.y2+moveY,cropperPosition.y1+settings.cropperScaledMaxHeight),cropperPosition.y1+settings.cropperScaledMinHeight);break;case"center":const scale=event.scale,newWidth=Math.min(Math.max(settings.cropperScaledMinWidth,Math.abs(moveStart.x2-moveStart.x1)*scale),settings.cropperScaledMaxWidth),newHeight=Math.min(Math.max(settings.cropperScaledMinHeight,Math.abs(moveStart.y2-moveStart.y1)*scale),settings.cropperScaledMaxHeight);cropperPosition.x1=moveStart.clientX-newWidth/2,cropperPosition.x2=moveStart.clientX+newWidth/2,cropperPosition.y1=moveStart.clientY-newHeight/2,cropperPosition.y2=moveStart.clientY+newHeight/2,cropperPosition.x1<0?(cropperPosition.x2-=cropperPosition.x1,cropperPosition.x1=0):cropperPosition.x2>maxSize.width&&(cropperPosition.x1-=cropperPosition.x2-maxSize.width,cropperPosition.x2=maxSize.width),cropperPosition.y1<0?(cropperPosition.y2-=cropperPosition.y1,cropperPosition.y1=0):cropperPosition.y2>maxSize.height&&(cropperPosition.y1-=cropperPosition.y2-maxSize.height,cropperPosition.y2=maxSize.height)}settings.maintainAspectRatio&&this.checkAspectRatio(moveStart.position,cropperPosition,maxSize,settings)}checkAspectRatio(position,cropperPosition,maxSize,settings){let overflowX=0,overflowY=0;switch(position){case"top":cropperPosition.x2=cropperPosition.x1+(cropperPosition.y2-cropperPosition.y1)*settings.aspectRatio,overflowX=Math.max(cropperPosition.x2-maxSize.width,0),overflowY=Math.max(0-cropperPosition.y1,0),(overflowX>0||overflowY>0)&&(cropperPosition.x2-=overflowY*settings.aspectRatio>overflowX?overflowY*settings.aspectRatio:overflowX,cropperPosition.y1+=overflowY*settings.aspectRatio>overflowX?overflowY:overflowX/settings.aspectRatio);break;case"bottom":cropperPosition.x2=cropperPosition.x1+(cropperPosition.y2-cropperPosition.y1)*settings.aspectRatio,overflowX=Math.max(cropperPosition.x2-maxSize.width,0),overflowY=Math.max(cropperPosition.y2-maxSize.height,0),(overflowX>0||overflowY>0)&&(cropperPosition.x2-=overflowY*settings.aspectRatio>overflowX?overflowY*settings.aspectRatio:overflowX,cropperPosition.y2-=overflowY*settings.aspectRatio>overflowX?overflowY:overflowX/settings.aspectRatio);break;case"topleft":cropperPosition.y1=cropperPosition.y2-(cropperPosition.x2-cropperPosition.x1)/settings.aspectRatio,overflowX=Math.max(0-cropperPosition.x1,0),overflowY=Math.max(0-cropperPosition.y1,0),(overflowX>0||overflowY>0)&&(cropperPosition.x1+=overflowY*settings.aspectRatio>overflowX?overflowY*settings.aspectRatio:overflowX,cropperPosition.y1+=overflowY*settings.aspectRatio>overflowX?overflowY:overflowX/settings.aspectRatio);break;case"topright":cropperPosition.y1=cropperPosition.y2-(cropperPosition.x2-cropperPosition.x1)/settings.aspectRatio,overflowX=Math.max(cropperPosition.x2-maxSize.width,0),overflowY=Math.max(0-cropperPosition.y1,0),(overflowX>0||overflowY>0)&&(cropperPosition.x2-=overflowY*settings.aspectRatio>overflowX?overflowY*settings.aspectRatio:overflowX,cropperPosition.y1+=overflowY*settings.aspectRatio>overflowX?overflowY:overflowX/settings.aspectRatio);break;case"right":case"bottomright":cropperPosition.y2=cropperPosition.y1+(cropperPosition.x2-cropperPosition.x1)/settings.aspectRatio,overflowX=Math.max(cropperPosition.x2-maxSize.width,0),overflowY=Math.max(cropperPosition.y2-maxSize.height,0),(overflowX>0||overflowY>0)&&(cropperPosition.x2-=overflowY*settings.aspectRatio>overflowX?overflowY*settings.aspectRatio:overflowX,cropperPosition.y2-=overflowY*settings.aspectRatio>overflowX?overflowY:overflowX/settings.aspectRatio);break;case"left":case"bottomleft":cropperPosition.y2=cropperPosition.y1+(cropperPosition.x2-cropperPosition.x1)/settings.aspectRatio,overflowX=Math.max(0-cropperPosition.x1,0),overflowY=Math.max(cropperPosition.y2-maxSize.height,0),(overflowX>0||overflowY>0)&&(cropperPosition.x1+=overflowY*settings.aspectRatio>overflowX?overflowY*settings.aspectRatio:overflowX,cropperPosition.y2-=overflowY*settings.aspectRatio>overflowX?overflowY:overflowX/settings.aspectRatio);break;case"center":cropperPosition.x2=cropperPosition.x1+(cropperPosition.y2-cropperPosition.y1)*settings.aspectRatio,cropperPosition.y2=cropperPosition.y1+(cropperPosition.x2-cropperPosition.x1)/settings.aspectRatio;const overflowX1=Math.max(0-cropperPosition.x1,0),overflowX2=Math.max(cropperPosition.x2-maxSize.width,0),overflowY1=Math.max(cropperPosition.y2-maxSize.height,0),overflowY2=Math.max(0-cropperPosition.y1,0);(overflowX1>0||overflowX2>0||overflowY1>0||overflowY2>0)&&(cropperPosition.x1+=overflowY1*settings.aspectRatio>overflowX1?overflowY1*settings.aspectRatio:overflowX1,cropperPosition.x2-=overflowY2*settings.aspectRatio>overflowX2?overflowY2*settings.aspectRatio:overflowX2,cropperPosition.y1+=overflowY2*settings.aspectRatio>overflowX2?overflowY2:overflowX2/settings.aspectRatio,cropperPosition.y2-=overflowY1*settings.aspectRatio>overflowX1?overflowY1:overflowX1/settings.aspectRatio)}}getClientX(event){var _a;return(null===(_a=event.touches)||void 0===_a?void 0:_a[0].clientX)||event.clientX||0}getClientY(event){var _a;return(null===(_a=event.touches)||void 0===_a?void 0:_a[0].clientY)||event.clientY||0}}__name(CropperPositionService,"CropperPositionService"),CropperPositionService.\u0275fac=__name(function(t){return new(t||CropperPositionService)},"CropperPositionService_Factory"),CropperPositionService.\u0275prov=core.Yz7({token:CropperPositionService,factory:CropperPositionService.\u0275fac,providedIn:"root"});function supportsAutomaticRotation(){return new Promise(resolve=>{const img=new Image;img.onload=()=>{const supported=1===img.width&&2===img.height;resolve(supported)},img.src="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q=="})}function getTransformationsFromExifData(exifRotationOrBase64Image){switch("string"==typeof exifRotationOrBase64Image&&(exifRotationOrBase64Image=getExifRotation(exifRotationOrBase64Image)),exifRotationOrBase64Image){case 2:return{rotate:0,flip:!0};case 3:return{rotate:2,flip:!1};case 4:return{rotate:2,flip:!0};case 5:return{rotate:1,flip:!0};case 6:return{rotate:1,flip:!1};case 7:return{rotate:3,flip:!0};case 8:return{rotate:3,flip:!1};default:return{rotate:0,flip:!1}}}function getExifRotation(imageBase64){const view=new DataView(base64ToArrayBuffer(imageBase64));if(65496!==view.getUint16(0,!1))return-2;const length=view.byteLength;let offset2=2;for(;offset2<length;){if(view.getUint16(offset2+2,!1)<=8)return-1;const marker=view.getUint16(offset2,!1);if(offset2+=2,65505==marker){if(1165519206!==view.getUint32(offset2+=2,!1))return-1;const little=18761==view.getUint16(offset2+=6,!1);offset2+=view.getUint32(offset2+4,little);const tags=view.getUint16(offset2,little);offset2+=2;for(let i=0;i<tags;i++)if(274==view.getUint16(offset2+12*i,little))return view.getUint16(offset2+12*i+8,little)}else{if(65280!=(65280&marker))break;offset2+=view.getUint16(offset2,!1)}}return-1}function base64ToArrayBuffer(imageBase64){imageBase64=imageBase64.replace(/^data\:([^\;]+)\;base64,/gim,"");const binaryString=atob(imageBase64),len=binaryString.length,bytes=new Uint8Array(len);for(let i=0;i<len;i++)bytes[i]=binaryString.charCodeAt(i);return bytes.buffer}__name(supportsAutomaticRotation,"supportsAutomaticRotation"),__name(getTransformationsFromExifData,"getTransformationsFromExifData"),__name(getExifRotation,"getExifRotation"),__name(base64ToArrayBuffer,"base64ToArrayBuffer");class LoadImageService{constructor(){this.autoRotateSupported=supportsAutomaticRotation()}loadImageFile(file,cropperSettings){return new Promise((resolve,reject)=>{const fileReader=new FileReader;fileReader.onload=event=>{this.loadImage(event.target.result,file.type,cropperSettings).then(resolve).catch(reject)},fileReader.readAsDataURL(file)})}loadImage(imageBase64,imageType,cropperSettings){return this.isValidImageType(imageType)?this.loadBase64Image(imageBase64,cropperSettings):Promise.reject(new Error("Invalid image type"))}isValidImageType(type){return/image\/(png|jpg|jpeg|bmp|gif|tiff|webp|x-icon|vnd.microsoft.icon)/.test(type)}loadImageFromURL(url,cropperSettings){return new Promise((resolve,reject)=>{const img=new Image;img.onerror=()=>reject,img.onload=()=>{const canvas=document.createElement("canvas"),context=canvas.getContext("2d");canvas.width=img.width,canvas.height=img.height,null==context||context.drawImage(img,0,0),this.loadBase64Image(canvas.toDataURL(),cropperSettings).then(resolve)},img.crossOrigin="anonymous",img.src=url})}loadBase64Image(imageBase64,cropperSettings){return new Promise((resolve,reject)=>{const originalImage=new Image;originalImage.onload=()=>resolve({originalImage,originalBase64:imageBase64}),originalImage.onerror=reject,originalImage.src=imageBase64}).then(res=>this.transformImageBase64(res,cropperSettings))}transformImageBase64(res,cropperSettings){return(0,tslib_es6.mG)(this,void 0,void 0,function*(){const autoRotate=yield this.autoRotateSupported,exifTransform=yield getTransformationsFromExifData(autoRotate?-1:res.originalBase64);if(!res.originalImage||!res.originalImage.complete)return Promise.reject(new Error("No image loaded"));const loadedImage={original:{base64:res.originalBase64,image:res.originalImage,size:{width:res.originalImage.naturalWidth,height:res.originalImage.naturalHeight}},exifTransform};return this.transformLoadedImage(loadedImage,cropperSettings)})}transformLoadedImage(loadedImage,cropperSettings){return(0,tslib_es6.mG)(this,void 0,void 0,function*(){const canvasRotation=cropperSettings.canvasRotation+loadedImage.exifTransform.rotate,originalSize={width:loadedImage.original.image.naturalWidth,height:loadedImage.original.image.naturalHeight};if(0===canvasRotation&&!loadedImage.exifTransform.flip&&!cropperSettings.containWithinAspectRatio)return{original:{base64:loadedImage.original.base64,image:loadedImage.original.image,size:Object.assign({},originalSize)},transformed:{base64:loadedImage.original.base64,image:loadedImage.original.image,size:Object.assign({},originalSize)},exifTransform:loadedImage.exifTransform};const transformedSize=this.getTransformedSize(originalSize,loadedImage.exifTransform,cropperSettings),canvas=document.createElement("canvas");canvas.width=transformedSize.width,canvas.height=transformedSize.height;const ctx=canvas.getContext("2d");null==ctx||ctx.setTransform(loadedImage.exifTransform.flip?-1:1,0,0,1,canvas.width/2,canvas.height/2),null==ctx||ctx.rotate(Math.PI*(canvasRotation/2)),null==ctx||ctx.drawImage(loadedImage.original.image,-originalSize.width/2,-originalSize.height/2);const transformedBase64=canvas.toDataURL(),transformedImage=yield this.loadImageFromBase64(transformedBase64);return{original:{base64:loadedImage.original.base64,image:loadedImage.original.image,size:Object.assign({},originalSize)},transformed:{base64:transformedBase64,image:transformedImage,size:{width:transformedImage.width,height:transformedImage.height}},exifTransform:loadedImage.exifTransform}})}loadImageFromBase64(imageBase64){return new Promise((resolve,reject)=>{const image=new Image;image.onload=()=>resolve(image),image.onerror=reject,image.src=imageBase64})}getTransformedSize(originalSize,exifTransform,cropperSettings){const canvasRotation=cropperSettings.canvasRotation+exifTransform.rotate;if(cropperSettings.containWithinAspectRatio){if(canvasRotation%2){const minWidthToContain=originalSize.width*cropperSettings.aspectRatio,minHeightToContain=originalSize.height/cropperSettings.aspectRatio;return{width:Math.max(originalSize.height,minWidthToContain),height:Math.max(originalSize.width,minHeightToContain)}}{const minWidthToContain=originalSize.height*cropperSettings.aspectRatio,minHeightToContain=originalSize.width/cropperSettings.aspectRatio;return{width:Math.max(originalSize.width,minWidthToContain),height:Math.max(originalSize.height,minHeightToContain)}}}return canvasRotation%2?{height:originalSize.width,width:originalSize.height}:{width:originalSize.width,height:originalSize.height}}}__name(LoadImageService,"LoadImageService"),LoadImageService.\u0275fac=__name(function(t){return new(t||LoadImageService)},"LoadImageService_Factory"),LoadImageService.\u0275prov=core.Yz7({token:LoadImageService,factory:LoadImageService.\u0275fac,providedIn:"root"});class ImageCropperComponent{constructor(cropService,cropperPositionService,loadImageService,sanitizer,cd){this.cropService=cropService,this.cropperPositionService=cropperPositionService,this.loadImageService=loadImageService,this.sanitizer=sanitizer,this.cd=cd,this.Hammer=(null==window?void 0:window.Hammer)||null,this.settings=new CropperSettings,this.setImageMaxSizeRetries=0,this.marginLeft="0px",this.maxSize={width:0,height:0},this.moveTypes=MoveTypes,this.imageVisible=!1,this.format=this.settings.format,this.transform={},this.maintainAspectRatio=this.settings.maintainAspectRatio,this.aspectRatio=this.settings.aspectRatio,this.resizeToWidth=this.settings.resizeToWidth,this.resizeToHeight=this.settings.resizeToHeight,this.cropperMinWidth=this.settings.cropperMinWidth,this.cropperMinHeight=this.settings.cropperMinHeight,this.cropperMaxHeight=this.settings.cropperMaxHeight,this.cropperMaxWidth=this.settings.cropperMaxWidth,this.cropperStaticWidth=this.settings.cropperStaticWidth,this.cropperStaticHeight=this.settings.cropperStaticHeight,this.canvasRotation=this.settings.canvasRotation,this.initialStepSize=this.settings.initialStepSize,this.roundCropper=this.settings.roundCropper,this.onlyScaleDown=this.settings.onlyScaleDown,this.imageQuality=this.settings.imageQuality,this.autoCrop=this.settings.autoCrop,this.backgroundColor=this.settings.backgroundColor,this.containWithinAspectRatio=this.settings.containWithinAspectRatio,this.hideResizeSquares=this.settings.hideResizeSquares,this.allowMoveImage=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage=this.settings.alignImage,this.disabled=!1,this.imageCropped=new core.vpe,this.startCropImage=new core.vpe,this.imageLoaded=new core.vpe,this.cropperReady=new core.vpe,this.loadImageFailed=new core.vpe,this.transformChange=new core.vpe,this.reset()}ngOnChanges(changes){var _a;this.onChangesUpdateSettings(changes),this.onChangesInputImage(changes),(null===(_a=this.loadedImage)||void 0===_a?void 0:_a.original.image.complete)&&(changes.containWithinAspectRatio||changes.canvasRotation)&&this.loadImageService.transformLoadedImage(this.loadedImage,this.settings).then(res=>this.setLoadedImage(res)).catch(err=>this.loadImageError(err)),(changes.cropper||changes.maintainAspectRatio||changes.aspectRatio)&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.maintainAspectRatio&&(changes.maintainAspectRatio||changes.aspectRatio)?this.resetCropperPosition():changes.cropper&&(this.checkCropperPosition(!1),this.doAutoCrop()),this.cd.markForCheck()),changes.transform&&(this.transform=this.transform||{},this.setCssTransform(),this.doAutoCrop(),this.cd.markForCheck())}onChangesUpdateSettings(changes){this.settings.setOptionsFromChanges(changes),this.settings.cropperStaticHeight&&this.settings.cropperStaticWidth&&this.settings.setOptions({hideResizeSquares:!0,cropperMinWidth:this.settings.cropperStaticWidth,cropperMinHeight:this.settings.cropperStaticHeight,cropperMaxHeight:this.settings.cropperStaticHeight,cropperMaxWidth:this.settings.cropperStaticWidth,maintainAspectRatio:!1})}onChangesInputImage(changes){(changes.imageChangedEvent||changes.imageURL||changes.imageBase64||changes.imageFile)&&this.reset(),changes.imageChangedEvent&&this.isValidImageChangedEvent()&&this.loadImageFile(this.imageChangedEvent.target.files[0]),changes.imageURL&&this.imageURL&&this.loadImageFromURL(this.imageURL),changes.imageBase64&&this.imageBase64&&this.loadBase64Image(this.imageBase64),changes.imageFile&&this.imageFile&&this.loadImageFile(this.imageFile)}isValidImageChangedEvent(){var _a,_b,_c;return(null===(_c=null===(_b=null===(_a=this.imageChangedEvent)||void 0===_a?void 0:_a.target)||void 0===_b?void 0:_b.files)||void 0===_c?void 0:_c.length)>0}setCssTransform(){var _a;const translateUnit=(null===(_a=this.transform)||void 0===_a?void 0:_a.translateUnit)||"%";this.safeTransformStyle=this.sanitizer.bypassSecurityTrustStyle(`translate(${this.transform.translateH||0}${translateUnit}, ${this.transform.translateV||0}${translateUnit}) scaleX(`+(this.transform.scale||1)*(this.transform.flipH?-1:1)+") scaleY("+(this.transform.scale||1)*(this.transform.flipV?-1:1)+") rotate("+(this.transform.rotate||0)+"deg)")}ngOnInit(){this.settings.stepSize=this.initialStepSize,this.activatePinchGesture()}reset(){this.imageVisible=!1,this.loadedImage=void 0,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}loadImageFile(file){this.loadImageService.loadImageFile(file,this.settings).then(res=>this.setLoadedImage(res)).catch(err=>this.loadImageError(err))}loadBase64Image(imageBase64){this.loadImageService.loadBase64Image(imageBase64,this.settings).then(res=>this.setLoadedImage(res)).catch(err=>this.loadImageError(err))}loadImageFromURL(url){this.loadImageService.loadImageFromURL(url,this.settings).then(res=>this.setLoadedImage(res)).catch(err=>this.loadImageError(err))}setLoadedImage(loadedImage){this.loadedImage=loadedImage,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(loadedImage.transformed.base64),this.cd.markForCheck()}loadImageError(error){console.error(error),this.loadImageFailed.emit()}imageLoadedInView(){null!=this.loadedImage&&(this.imageLoaded.emit(this.loadedImage),this.setImageMaxSizeRetries=0,setTimeout(()=>this.checkImageMaxSizeRecursively()))}checkImageMaxSizeRecursively(){this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImageLoaded()?(this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize(),this.resetCropperPosition(),this.cropperReady.emit(Object.assign({},this.maxSize)),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout(()=>this.checkImageMaxSizeRecursively(),50))}sourceImageLoaded(){var _a,_b;return(null===(_b=null===(_a=this.sourceImage)||void 0===_a?void 0:_a.nativeElement)||void 0===_b?void 0:_b.offsetWidth)>0}onResize(){!this.loadedImage||(this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize(),this.setCropperScaledMaxSize())}activatePinchGesture(){if(this.Hammer){const hammer=new this.Hammer(this.wrapper.nativeElement);hammer.get("pinch").set({enable:!0}),hammer.on("pinchmove",this.onPinch.bind(this)),hammer.on("pinchend",this.pinchStop.bind(this)),hammer.on("pinchstart",this.startPinch.bind(this))}else(0,core.X6Q)()&&console.warn("[NgxImageCropper] Could not find HammerJS - Pinch Gesture won't work")}resizeCropperPosition(){const sourceImageElement=this.sourceImage.nativeElement;(this.maxSize.width!==sourceImageElement.offsetWidth||this.maxSize.height!==sourceImageElement.offsetHeight)&&(this.cropper.x1=this.cropper.x1*sourceImageElement.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*sourceImageElement.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*sourceImageElement.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*sourceImageElement.offsetHeight/this.maxSize.height)}resetCropperPosition(){this.cropperPositionService.resetCropperPosition(this.sourceImage,this.cropper,this.settings),this.doAutoCrop(),this.imageVisible=!0}keyboardAccess(event){this.changeKeyboardStepSize(event),this.keyboardMoveCropper(event)}changeKeyboardStepSize(event){const key=+event.key;key>=1&&key<=9&&(this.settings.stepSize=key)}keyboardMoveCropper(event){if(!["ArrowUp","ArrowDown","ArrowRight","ArrowLeft"].includes(event.key))return;const moveType=event.shiftKey?MoveTypes.Resize:MoveTypes.Move,position=event.altKey?getInvertedPositionForKey(event.key):getPositionForKey(event.key),moveEvent=getEventForKey(event.key,this.settings.stepSize);event.preventDefault(),event.stopPropagation(),this.startMove({clientX:0,clientY:0},moveType,position),this.moveImg(moveEvent),this.moveStop()}startMove(event,moveType,position=null){var _a,_b;this.disabled||(null===(_a=this.moveStart)||void 0===_a?void 0:_a.active)&&(null===(_b=this.moveStart)||void 0===_b?void 0:_b.type)===MoveTypes.Pinch||moveType===MoveTypes.Drag&&!this.allowMoveImage||(event.preventDefault&&event.preventDefault(),this.moveStart=Object.assign({active:!0,type:moveType,position,transform:Object.assign({},this.transform),clientX:this.cropperPositionService.getClientX(event),clientY:this.cropperPositionService.getClientY(event)},this.cropper))}startPinch(event){!this.safeImgDataUrl||(event.preventDefault&&event.preventDefault(),this.moveStart=Object.assign({active:!0,type:MoveTypes.Pinch,position:"center",clientX:this.cropper.x1+(this.cropper.x2-this.cropper.x1)/2,clientY:this.cropper.y1+(this.cropper.y2-this.cropper.y1)/2},this.cropper))}moveImg(event){var _a,_b;if(this.moveStart.active){if(event.stopPropagation&&event.stopPropagation(),event.preventDefault&&event.preventDefault(),this.moveStart.type===MoveTypes.Move)this.cropperPositionService.move(event,this.moveStart,this.cropper),this.checkCropperPosition(!0);else if(this.moveStart.type===MoveTypes.Resize)!this.cropperStaticWidth&&!this.cropperStaticHeight&&this.cropperPositionService.resize(event,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1);else if(this.moveStart.type===MoveTypes.Drag){const diffX=this.cropperPositionService.getClientX(event)-this.moveStart.clientX,diffY=this.cropperPositionService.getClientY(event)-this.moveStart.clientY;this.transform=Object.assign(Object.assign({},this.transform),{translateH:((null===(_a=this.moveStart.transform)||void 0===_a?void 0:_a.translateH)||0)+diffX,translateV:((null===(_b=this.moveStart.transform)||void 0===_b?void 0:_b.translateV)||0)+diffY}),this.setCssTransform()}this.cd.detectChanges()}}onPinch(event){this.moveStart.active&&(event.stopPropagation&&event.stopPropagation(),event.preventDefault&&event.preventDefault(),this.moveStart.type===MoveTypes.Pinch&&(this.cropperPositionService.resize(event,this.moveStart,this.cropper,this.maxSize,this.settings),this.checkCropperPosition(!1)),this.cd.detectChanges())}setMaxSize(){if(this.sourceImage){const sourceImageElement=this.sourceImage.nativeElement;this.maxSize.width=sourceImageElement.offsetWidth,this.maxSize.height=sourceImageElement.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}setCropperScaledMinSize(){var _a,_b;null!==(_b=null===(_a=this.loadedImage)||void 0===_a?void 0:_a.transformed)&&void 0!==_b&&_b.image?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.settings.cropperScaledMinWidth=20,this.settings.cropperScaledMinHeight=20)}setCropperScaledMinWidth(){this.settings.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.loadedImage.transformed.image.width*this.maxSize.width):20}setCropperScaledMinHeight(){this.maintainAspectRatio?this.settings.cropperScaledMinHeight=Math.max(20,this.settings.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?this.settings.cropperScaledMinHeight=Math.max(20,this.cropperMinHeight/this.loadedImage.transformed.image.height*this.maxSize.height):this.settings.cropperScaledMinHeight=20}setCropperScaledMaxSize(){var _a,_b;if(null!==(_b=null===(_a=this.loadedImage)||void 0===_a?void 0:_a.transformed)&&void 0!==_b&&_b.image){const ratio=this.loadedImage.transformed.size.width/this.maxSize.width;this.settings.cropperScaledMaxWidth=this.cropperMaxWidth>20?this.cropperMaxWidth/ratio:this.maxSize.width,this.settings.cropperScaledMaxHeight=this.cropperMaxHeight>20?this.cropperMaxHeight/ratio:this.maxSize.height,this.maintainAspectRatio&&(this.settings.cropperScaledMaxWidth>this.settings.cropperScaledMaxHeight*this.aspectRatio?this.settings.cropperScaledMaxWidth=this.settings.cropperScaledMaxHeight*this.aspectRatio:this.settings.cropperScaledMaxWidth<this.settings.cropperScaledMaxHeight*this.aspectRatio&&(this.settings.cropperScaledMaxHeight=this.settings.cropperScaledMaxWidth/this.aspectRatio))}else this.settings.cropperScaledMaxWidth=this.maxSize.width,this.settings.cropperScaledMaxHeight=this.maxSize.height}checkCropperPosition(maintainSize=!1){this.cropper.x1<0&&(this.cropper.x2-=maintainSize?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=maintainSize?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=maintainSize?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=maintainSize?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}moveStop(){var _a;this.moveStart.active&&(this.moveStart.active=!1,(null===(_a=this.moveStart)||void 0===_a?void 0:_a.type)===MoveTypes.Drag?this.transformChange.emit(this.transform):this.doAutoCrop())}pinchStop(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}doAutoCrop(){this.autoCrop&&this.crop()}crop(){var _a,_b;if(null!=(null===(_b=null===(_a=this.loadedImage)||void 0===_a?void 0:_a.transformed)||void 0===_b?void 0:_b.image)){this.startCropImage.emit();const output=this.cropService.crop(this.sourceImage,this.loadedImage,this.cropper,this.settings);return null!=output&&this.imageCropped.emit(output),output}return null}}__name(ImageCropperComponent,"ImageCropperComponent"),ImageCropperComponent.\u0275fac=__name(function(t){return new(t||ImageCropperComponent)(core.Y36(CropService),core.Y36(CropperPositionService),core.Y36(LoadImageService),core.Y36(platform_browser.H7),core.Y36(core.sBO))},"ImageCropperComponent_Factory"),ImageCropperComponent.\u0275cmp=core.Xpm({type:ImageCropperComponent,selectors:[["image-cropper"]],viewQuery:__name(function(rf,ctx){if(1&rf&&(core.Gf(ngx_image_cropper_c0,7),core.Gf(ngx_image_cropper_c1,5)),2&rf){let _t;core.iGM(_t=core.CRH())&&(ctx.wrapper=_t.first),core.iGM(_t=core.CRH())&&(ctx.sourceImage=_t.first)}},"ImageCropperComponent_Query"),hostVars:4,hostBindings:__name(function(rf,ctx){1&rf&&core.NdJ("resize",__name(function(){return ctx.onResize()},"ImageCropperComponent_resize_HostBindingHandler"),!1,core.Jf7)("mousemove",__name(function($event){return ctx.moveImg($event)},"ImageCropperComponent_mousemove_HostBindingHandler"),!1,core.evT)("touchmove",__name(function($event){return ctx.moveImg($event)},"ImageCropperComponent_touchmove_HostBindingHandler"),!1,core.evT)("mouseup",__name(function(){return ctx.moveStop()},"ImageCropperComponent_mouseup_HostBindingHandler"),!1,core.evT)("touchend",__name(function(){return ctx.moveStop()},"ImageCropperComponent_touchend_HostBindingHandler"),!1,core.evT),2&rf&&(core.Udp("text-align",ctx.alignImage),core.ekj("disabled",ctx.disabled))},"ImageCropperComponent_HostBindings"),inputs:{imageChangedEvent:"imageChangedEvent",imageURL:"imageURL",imageBase64:"imageBase64",imageFile:"imageFile",format:"format",transform:"transform",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",cropperMaxHeight:"cropperMaxHeight",cropperMaxWidth:"cropperMaxWidth",cropperStaticWidth:"cropperStaticWidth",cropperStaticHeight:"cropperStaticHeight",canvasRotation:"canvasRotation",initialStepSize:"initialStepSize",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",backgroundColor:"backgroundColor",containWithinAspectRatio:"containWithinAspectRatio",hideResizeSquares:"hideResizeSquares",allowMoveImage:"allowMoveImage",cropper:"cropper",alignImage:"alignImage",disabled:"disabled"},outputs:{imageCropped:"imageCropped",startCropImage:"startCropImage",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed",transformChange:"transformChange"},features:[core.TTD],decls:5,vars:10,consts:[["wrapper",""],["class","ngx-ic-source-image",3,"src","visibility","transform","ngx-ic-draggable","load","mousedown","touchstart",4,"ngIf"],[1,"ngx-ic-overlay"],["class","ngx-ic-cropper","tabindex","0",3,"ngx-ic-round","top","left","width","height","margin-left","visibility","keydown",4,"ngIf"],[1,"ngx-ic-source-image",3,"src","load","mousedown","touchstart"],["sourceImage",""],["tabindex","0",1,"ngx-ic-cropper",3,"keydown"],[1,"ngx-ic-move",3,"mousedown","touchstart"],[4,"ngIf"],[1,"ngx-ic-resize","ngx-ic-topleft",3,"mousedown","touchstart"],[1,"ngx-ic-square"],[1,"ngx-ic-resize","ngx-ic-top"],[1,"ngx-ic-resize","ngx-ic-topright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-right"],[1,"ngx-ic-resize","ngx-ic-bottomright",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-bottom"],[1,"ngx-ic-resize","ngx-ic-bottomleft",3,"mousedown","touchstart"],[1,"ngx-ic-resize","ngx-ic-left"],[1,"ngx-ic-resize-bar","ngx-ic-top",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-right",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-bottom",3,"mousedown","touchstart"],[1,"ngx-ic-resize-bar","ngx-ic-left",3,"mousedown","touchstart"]],template:__name(function(rf,ctx){1&rf&&(core.TgZ(0,"div",null,0),core.YNc(2,ImageCropperComponent_img_2_Template,2,7,"img",1),core._UZ(3,"div",2),core.YNc(4,ImageCropperComponent_div_4_Template,3,15,"div",3),core.qZA()),2&rf&&(core.Udp("background",ctx.imageVisible&&ctx.backgroundColor),core.xp6(2),core.Q6J("ngIf",ctx.safeImgDataUrl),core.xp6(1),core.Udp("width",ctx.maxSize.width,"px")("height",ctx.maxSize.height,"px")("margin-left","center"===ctx.alignImage?ctx.marginLeft:null),core.xp6(1),core.Q6J("ngIf",ctx.imageVisible))},"ImageCropperComponent_Template"),dependencies:[common.O5],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{width:100%;position:relative}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;transform-origin:center}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.ngx-ic-source-image.ngx-ic-draggable[_ngcontent-%COMP%]{user-drag:none;-webkit-user-drag:none;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;cursor:grab}[_nghost-%COMP%]   .ngx-ic-overlay[_ngcontent-%COMP%]{position:absolute;pointer-events:none;touch-action:none;outline:var(--cropper-overlay-color, white) solid 100vw;top:0;left:0}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:transparent;outline:rgba(255,255,255,.3) solid 100vw;outline:var(--cropper-outline-color, rgba(255, 255, 255, .3)) solid 100vw;touch-action:none}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]{outline-width:100vh}}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:dashed 1px;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]:focus   .ngx-ic-move[_ngcontent-%COMP%]{border-color:#1e90ff;border-width:2px}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%]   .ngx-ic-square[_ngcontent-%COMP%]{display:inline-block;background:#53535C;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize.ngx-ic-left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar.ngx-ic-left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw #ffffff4d;box-shadow:0 0 0 100vw var(--cropper-outline-color, rgba(255, 255, 255, .3))}@media (orientation: portrait){[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh #ffffff4d;box-shadow:0 0 0 100vh var(--cropper-outline-color, rgba(255, 255, 255, .3))}}[_nghost-%COMP%]   .ngx-ic-cropper.ngx-ic-round[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{border-radius:100%}.disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-resize-bar[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   .ngx-ic-cropper[_ngcontent-%COMP%]   .ngx-ic-move[_ngcontent-%COMP%]{display:none}'],changeDetection:0});class ImageCropperModule{}__name(ImageCropperModule,"ImageCropperModule"),ImageCropperModule.\u0275fac=__name(function(t){return new(t||ImageCropperModule)},"ImageCropperModule_Factory"),ImageCropperModule.\u0275mod=core.oAB({type:ImageCropperModule}),ImageCropperModule.\u0275inj=core.cJS({imports:[[common.ez]]}),__name(function base64ToFile(base64Image){const split2=base64Image.split(","),type=split2[0].replace("data:","").replace(";base64",""),byteString=atob(split2[1]),ab=new ArrayBuffer(byteString.length),ia=new Uint8Array(ab);for(let i=0;i<byteString.length;i+=1)ia[i]=byteString.charCodeAt(i);return new Blob([ab],{type})},"base64ToFile");var ng_bootstrap=__webpack_require__(16145);class PagesModule{}__name(PagesModule,"PagesModule"),PagesModule.\u0275fac=__name(function(t){return new(t||PagesModule)},"PagesModule_Factory"),PagesModule.\u0275mod=core.oAB({type:PagesModule}),PagesModule.\u0275inj=core.cJS({imports:[common.ez,PagesRoutingModule,coreui_angular.dTQ,coreui_angular.hJ1,coreui_angular.zE6,coreui_icons_angular.QX,coreui_angular.ejP,fesm2015_forms.u5,NgxEditorModule,coreui_angular.TXv,coreui_angular.fxp,coreui_angular.m81,coreui_angular.FxY,[SweetAlert2Module.forRoot()],MaterialModule,coreui_angular.Fme,ImageCropperModule,ng_bootstrap.IJ,ng_bootstrap.bz]})}};
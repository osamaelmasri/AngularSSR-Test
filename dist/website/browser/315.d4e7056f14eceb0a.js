"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[315],{9315:(bd,Yt,x)=>{x.r(Yt),x.d(Yt,{PagesModule:()=>fd});var M=x(6895),jt=x(646),d=x(1571);const sr=[];let lr=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[jt.Bz.forChild(sr),jt.Bz]}),n})();var U=x(6705),cr=x(1334),Y=x(433);function R(n){this.content=n}R.prototype={constructor:R,find:function(n){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===n)return t;return-1},get:function(n){var t=this.find(n);return-1==t?void 0:this.content[t+1]},update:function(n,t,e){var i=e&&e!=n?this.remove(e):this,r=i.find(n),o=i.content.slice();return-1==r?o.push(e||n,t):(o[r+1]=t,e&&(o[r]=e)),new R(o)},remove:function(n){var t=this.find(n);if(-1==t)return this;var e=this.content.slice();return e.splice(t,2),new R(e)},addToStart:function(n,t){return new R([n,t].concat(this.remove(n).content))},addToEnd:function(n,t){var e=this.remove(n).content.slice();return e.push(n,t),new R(e)},addBefore:function(n,t,e){var i=this.remove(t),r=i.content.slice(),o=i.find(n);return r.splice(-1==o?r.length:o,0,t,e),new R(r)},forEach:function(n){for(var t=0;t<this.content.length;t+=2)n(this.content[t],this.content[t+1])},prepend:function(n){return(n=R.from(n)).size?new R(n.content.concat(this.subtract(n).content)):this},append:function(n){return(n=R.from(n)).size?new R(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var t=this;n=R.from(n);for(var e=0;e<n.content.length;e+=2)t=t.remove(n.content[e]);return t},get size(){return this.content.length>>1}},R.from=function(n){if(n instanceof R)return n;var t=[];if(n)for(var e in n)t.push(e,n[e]);return new R(t)};const Wt=R;function Ut(n,t,e){for(let i=0;;i++){if(i==n.childCount||i==t.childCount)return n.childCount==t.childCount?null:e;let r=n.child(i),o=t.child(i);if(r!=o){if(!r.sameMarkup(o))return e;if(r.isText&&r.text!=o.text){for(let a=0;r.text[a]==o.text[a];a++)e++;return e}if(r.content.size||o.content.size){let a=Ut(r.content,o.content,e+1);if(null!=a)return a}e+=r.nodeSize}else e+=r.nodeSize}}function $t(n,t,e,i){for(let r=n.childCount,o=t.childCount;;){if(0==r||0==o)return r==o?null:{a:e,b:i};let a=n.child(--r),s=t.child(--o),l=a.nodeSize;if(a!=s){if(!a.sameMarkup(s))return{a:e,b:i};if(a.isText&&a.text!=s.text){let c=0,h=Math.min(a.text.length,s.text.length);for(;c<h&&a.text[a.text.length-c-1]==s.text[s.text.length-c-1];)c++,e--,i--;return{a:e,b:i}}if(a.content.size||s.content.size){let c=$t(a.content,s.content,e-1,i-1);if(c)return c}e-=l,i-=l}else e-=l,i-=l}}class _{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let i=0;i<t.length;i++)this.size+=t[i].nodeSize}nodesBetween(t,e,i,r=0,o){for(let a=0,s=0;s<e;a++){let l=this.content[a],c=s+l.nodeSize;if(c>t&&!1!==i(l,r+s,o||null,a)&&l.content.size){let h=s+1;l.nodesBetween(Math.max(0,t-h),Math.min(l.content.size,e-h),i,r+h)}s=c}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,i,r){let o="",a=!0;return this.nodesBetween(t,e,(s,l)=>{s.isText?(o+=s.text.slice(Math.max(t,l)-l,e-l),a=!i):s.isLeaf?(r?o+="function"==typeof r?r(s):r:s.type.spec.leafText&&(o+=s.type.spec.leafText(s)),a=!i):!a&&s.isBlock&&(o+=i,a=!0)},0),o}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,i=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(i)&&(r[r.length-1]=e.withText(e.text+i.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new _(r,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let i=[],r=0;if(e>t)for(let o=0,a=0;a<e;o++){let s=this.content[o],l=a+s.nodeSize;l>t&&((a<t||l>e)&&(s=s.isText?s.cut(Math.max(0,t-a),Math.min(s.text.length,e-a)):s.cut(Math.max(0,t-a-1),Math.min(s.content.size,e-a-1))),i.push(s),r+=s.nodeSize),a=l}return new _(i,r)}cutByIndex(t,e){return t==e?_.empty:0==t&&e==this.content.length?this:new _(this.content.slice(t,e))}replaceChild(t,e){let i=this.content[t];if(i==e)return this;let r=this.content.slice(),o=this.size+e.nodeSize-i.nodeSize;return r[t]=e,new _(r,o)}addToStart(t){return new _([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new _(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,i=0;e<this.content.length;e++){let r=this.content[e];t(r,i,e),i+=r.nodeSize}}findDiffStart(t,e=0){return Ut(this,t,e)}findDiffEnd(t,e=this.size,i=t.size){return $t(this,t,e,i)}findIndex(t,e=-1){if(0==t)return Oe(0,t);if(t==this.size)return Oe(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let i=0,r=0;;i++){let a=r+this.child(i).nodeSize;if(a>=t)return a==t||e>0?Oe(i+1,a):Oe(i,r);r=a}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,e){if(!e)return _.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new _(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return _.empty;let e,i=0;for(let r=0;r<t.length;r++){let o=t[r];i+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new _(e||t,i)}static from(t){if(!t)return _.empty;if(t instanceof _)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new _([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}_.empty=new _([],0);const tt={index:0,offset:0};function Oe(n,t){return tt.index=n,tt.offset=t,tt}function Te(n,t){if(n===t)return!0;if(!n||"object"!=typeof n||!t||"object"!=typeof t)return!1;let e=Array.isArray(n);if(Array.isArray(t)!=e)return!1;if(e){if(n.length!=t.length)return!1;for(let i=0;i<n.length;i++)if(!Te(n[i],t[i]))return!1}else{for(let i in n)if(!(i in t)||!Te(n[i],t[i]))return!1;for(let i in t)if(!(i in n))return!1}return!0}let D=(()=>{class n{constructor(e,i){this.type=e,this.attrs=i}addToSet(e){let i,r=!1;for(let o=0;o<e.length;o++){let a=e[o];if(this.eq(a))return e;if(this.type.excludes(a.type))i||(i=e.slice(0,o));else{if(a.type.excludes(this.type))return e;!r&&a.type.rank>this.type.rank&&(i||(i=e.slice(0,o)),i.push(this),r=!0),i&&i.push(a)}}return i||(i=e.slice()),r||i.push(this),i}removeFromSet(e){for(let i=0;i<e.length;i++)if(this.eq(e[i]))return e.slice(0,i).concat(e.slice(i+1));return e}isInSet(e){for(let i=0;i<e.length;i++)if(this.eq(e[i]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Te(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let i in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,i){if(!i)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[i.type];if(!r)throw new RangeError(`There is no mark type ${i.type} in this schema`);return r.create(i.attrs)}static sameSet(e,i){if(e==i)return!0;if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(i[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&0==e.length)return n.none;if(e instanceof n)return[e];let i=e.slice();return i.sort((r,o)=>r.type.rank-o.type.rank),i}}return n.none=[],n})();class me extends Error{}class v{constructor(t,e,i){this.content=t,this.openStart=e,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let i=Xt(this.content,t+this.openStart,e);return i&&new v(i,this.openStart,this.openEnd)}removeBetween(t,e){return new v(Gt(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return v.empty;let i=e.openStart||0,r=e.openEnd||0;if("number"!=typeof i||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new v(_.fromJSON(t,e.content),i,r)}static maxOpen(t,e=!0){let i=0,r=0;for(let o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)i++;for(let o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new v(t,i,r)}}function Gt(n,t,e){let{index:i,offset:r}=n.findIndex(t),o=n.maybeChild(i),{index:a,offset:s}=n.findIndex(e);if(r==t||o.isText){if(s!=e&&!n.child(a).isText)throw new RangeError("Removing non-flat range");return n.cut(0,t).append(n.cut(e))}if(i!=a)throw new RangeError("Removing non-flat range");return n.replaceChild(i,o.copy(Gt(o.content,t-r-1,e-r-1)))}function Xt(n,t,e,i){let{index:r,offset:o}=n.findIndex(t),a=n.maybeChild(r);if(o==t||a.isText)return i&&!i.canReplace(r,r,e)?null:n.cut(0,t).append(e).append(n.cut(t));let s=Xt(a.content,t-o-1,e);return s&&n.replaceChild(r,a.copy(s))}function dr(n,t,e){if(e.openStart>n.depth)throw new me("Inserted content deeper than insertion position");if(n.depth-e.openStart!=t.depth-e.openEnd)throw new me("Inconsistent open depths");return qt(n,t,e,0)}function qt(n,t,e,i){let r=n.index(i),o=n.node(i);if(r==t.index(i)&&i<n.depth-e.openStart){let a=qt(n,t,e,i+1);return o.copy(o.content.replaceChild(r,a))}if(e.content.size){if(e.openStart||e.openEnd||n.depth!=i||t.depth!=i){let{start:a,end:s}=function hr(n,t){let e=t.depth-n.openStart,r=t.node(e).copy(n.content);for(let o=e-1;o>=0;o--)r=t.node(o).copy(_.from(r));return{start:r.resolveNoCache(n.openStart+e),end:r.resolveNoCache(r.content.size-n.openEnd-e)}}(e,n);return Q(o,Qt(n,a,s,t,i))}{let a=n.parent,s=a.content;return Q(a,s.cut(0,n.parentOffset).append(e.content).append(s.cut(t.parentOffset)))}}return Q(o,Pe(n,t,i))}function Kt(n,t){if(!t.type.compatibleContent(n.type))throw new me("Cannot join "+t.type.name+" onto "+n.type.name)}function it(n,t,e){let i=n.node(e);return Kt(i,t.node(e)),i}function K(n,t){let e=t.length-1;e>=0&&n.isText&&n.sameMarkup(t[e])?t[e]=n.withText(t[e].text+n.text):t.push(n)}function ge(n,t,e,i){let r=(t||n).node(e),o=0,a=t?t.index(e):r.childCount;n&&(o=n.index(e),n.depth>e?o++:n.textOffset&&(K(n.nodeAfter,i),o++));for(let s=o;s<a;s++)K(r.child(s),i);t&&t.depth==e&&t.textOffset&&K(t.nodeBefore,i)}function Q(n,t){if(!n.type.validContent(t))throw new me("Invalid content for node "+n.type.name);return n.copy(t)}function Qt(n,t,e,i,r){let o=n.depth>r&&it(n,t,r+1),a=i.depth>r&&it(e,i,r+1),s=[];return ge(null,n,r,s),o&&a&&t.index(r)==e.index(r)?(Kt(o,a),K(Q(o,Qt(n,t,e,i,r+1)),s)):(o&&K(Q(o,Pe(n,t,r+1)),s),ge(t,e,r,s),a&&K(Q(a,Pe(e,i,r+1)),s)),ge(i,null,r,s),new _(s)}function Pe(n,t,e){let i=[];return ge(null,n,e,i),n.depth>e&&K(Q(it(n,t,e+1),Pe(n,t,e+1)),i),ge(t,null,e,i),new _(i)}v.empty=new v(_.empty,0,0);class _e{constructor(t,e,i){this.pos=t,this.path=e,this.parentOffset=i,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let i=this.pos-this.path[this.path.length-1],r=t.child(e);return i?t.child(e).cut(i):r}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let i=this.path[3*e],r=0==e?0:this.path[3*e-1]+1;for(let o=0;o<t;o++)r+=i.child(o).nodeSize;return r}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return D.none;if(this.textOffset)return t.child(e).marks;let i=t.maybeChild(e-1),r=t.maybeChild(e);if(!i){let s=i;i=r,r=s}let o=i.marks;for(var a=0;a<o.length;a++)!1===o[a].type.spec.inclusive&&(!r||!o[a].isInSet(r.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let i=e.marks,r=t.parent.maybeChild(t.index());for(var o=0;o<i.length;o++)!1===i[o].type.spec.inclusive&&(!r||!i[o].isInSet(r.marks))&&(i=i[o--].removeFromSet(i));return i}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);i>=0;i--)if(t.pos<=this.end(i)&&(!e||e(this.node(i))))return new Fe(this,t,i);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let i=[],r=0,o=e;for(let a=t;;){let{index:s,offset:l}=a.content.findIndex(o),c=o-l;if(i.push(a,s,r+l),!c||(a=a.child(s),a.isText))break;o=c-1,r+=l+1}return new _e(e,i,o)}static resolveCached(t,e){for(let r=0;r<nt.length;r++){let o=nt[r];if(o.pos==e&&o.doc==t)return o}let i=nt[rt]=_e.resolve(t,e);return rt=(rt+1)%ur,i}}let nt=[],rt=0,ur=12;class Fe{constructor(t,e,i){this.$from=t,this.$to=e,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const pr=Object.create(null);class ${constructor(t,e,i,r=D.none){this.type=t,this.attrs=e,this.marks=r,this.content=i||_.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,i,r=0){this.content.nodesBetween(t,e,i,r,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,i,r){return this.content.textBetween(t,e,i,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,i){return this.type==t&&Te(this.attrs,e||t.defaultAttrs||pr)&&D.sameSet(this.marks,i||D.none)}copy(t=null){return t==this.content?this:new $(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new $(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,i=!1){if(t==e)return v.empty;let r=this.resolve(t),o=this.resolve(e),a=i?0:r.sharedDepth(e),s=r.start(a),c=r.node(a).content.cut(r.pos-s,o.pos-s);return new v(c,r.depth-a,o.depth-a)}replace(t,e,i){return dr(this.resolve(t),this.resolve(e),i)}nodeAt(t){for(let e=this;;){let{index:i,offset:r}=e.content.findIndex(t);if(e=e.maybeChild(i),!e)return null;if(r==t||e.isText)return e;t-=r+1}}childAfter(t){let{index:e,offset:i}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:i}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:i}=this.content.findIndex(t);if(i<t)return{node:this.content.child(e),index:e,offset:i};let r=this.content.child(e-1);return{node:r,index:e-1,offset:i-r.nodeSize}}resolve(t){return _e.resolveCached(this,t)}resolveNoCache(t){return _e.resolve(this,t)}rangeHasMark(t,e,i){let r=!1;return e>t&&this.nodesBetween(t,e,o=>(i.isInSet(o.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Zt(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,i=_.empty,r=0,o=i.childCount){let a=this.contentMatchAt(t).matchFragment(i,r,o),s=a&&a.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(let l=r;l<o;l++)if(!this.type.allowsMarks(i.child(l).marks))return!1;return!0}canReplaceWith(t,e,i,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(t).matchType(i),a=o&&o.matchFragment(this.content,e);return!!a&&a.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){if(!this.type.validContent(this.content))throw new RangeError(`Invalid content for node ${this.type.name}: ${this.content.toString().slice(0,50)}`);let t=D.none;for(let e=0;e<this.marks.length;e++)t=this.marks[e].addToSet(t);if(!D.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(e=>e.toJSON())),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let i=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,i)}let r=_.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,i)}}$.prototype.text=void 0;class Ne extends ${constructor(t,e,i,r){if(super(t,e,null,r),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Zt(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Ne(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Ne(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function Zt(n,t){for(let e=n.length-1;e>=0;e--)t=n[e].type.name+"("+t+")";return t}class J{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let i=new fr(t,e);if(null==i.next)return J.empty;let r=Jt(i);i.next&&i.err("Unexpected trailing text");let o=function xr(n){let t=Object.create(null);return function e(i){let r=[];i.forEach(a=>{n[a].forEach(({term:s,to:l})=>{if(!s)return;let c;for(let h=0;h<r.length;h++)r[h][0]==s&&(c=r[h][1]);ii(n,l).forEach(h=>{c||r.push([s,c=[]]),-1==c.indexOf(h)&&c.push(h)})})});let o=t[i.join(",")]=new J(i.indexOf(n.length-1)>-1);for(let a=0;a<r.length;a++){let s=r[a][1].sort(ti);o.next.push({type:r[a][0],next:t[s.join(",")]||e(s)})}return o}(ii(n,0))}(function yr(n){let t=[[]];return r(function o(a,s){if("choice"==a.type)return a.exprs.reduce((l,c)=>l.concat(o(c,s)),[]);if("seq"!=a.type){if("star"==a.type){let l=e();return i(s,l),r(o(a.expr,l),l),[i(l)]}if("plus"==a.type){let l=e();return r(o(a.expr,s),l),r(o(a.expr,l),l),[i(l)]}if("opt"==a.type)return[i(s)].concat(o(a.expr,s));if("range"==a.type){let l=s;for(let c=0;c<a.min;c++){let h=e();r(o(a.expr,l),h),l=h}if(-1==a.max)r(o(a.expr,l),l);else for(let c=a.min;c<a.max;c++){let h=e();i(l,h),r(o(a.expr,l),h),l=h}return[i(l)]}if("name"==a.type)return[i(s,void 0,a.value)];throw new Error("Unknown expr type")}for(let l=0;;l++){let c=o(a.exprs[l],s);if(l==a.exprs.length-1)return c;r(c,s=e())}}(n,0),e()),t;function e(){return t.push([])-1}function i(a,s,l){let c={term:l,to:s};return t[a].push(c),c}function r(a,s){a.forEach(l=>l.to=s)}}(r));return function wr(n,t){for(let e=0,i=[n];e<i.length;e++){let r=i[e],o=!r.validEnd,a=[];for(let s=0;s<r.next.length;s++){let{type:l,next:c}=r.next[s];a.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),-1==i.indexOf(c)&&i.push(c)}o&&t.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(o,i),o}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,i=t.childCount){let r=this;for(let o=e;r&&o<i;o++)r=r.matchType(t.child(o).type);return r}get inlineContent(){return this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let i=0;i<t.next.length;i++)if(this.next[e].type==t.next[i].type)return!0;return!1}fillBefore(t,e=!1,i=0){let r=[this];return function o(a,s){let l=a.matchFragment(t,i);if(l&&(!e||l.validEnd))return _.from(s.map(c=>c.createAndFill()));for(let c=0;c<a.next.length;c++){let{type:h,next:u}=a.next[c];if(!h.isText&&!h.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);let p=o(u,s.concat(h));if(p)return p}}return null}(this,[])}findWrapping(t){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==t)return this.wrapCache[i+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let r=i.shift(),o=r.match;if(o.matchType(t)){let a=[];for(let s=r;s.type;s=s.via)a.push(s.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:s,next:l}=o.next[a];!s.isLeaf&&!s.hasRequiredAttrs()&&!(s.name in e)&&(!r.type||l.validEnd)&&(i.push({match:s.contentMatch,type:s,via:r}),e[s.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(i){t.push(i);for(let r=0;r<i.next.length;r++)-1==t.indexOf(i.next[r].next)&&e(i.next[r].next)}(this),t.map((i,r)=>{let o=r+(i.validEnd?"*":" ")+" ";for(let a=0;a<i.next.length;a++)o+=(a?", ":"")+i.next[a].type.name+"->"+t.indexOf(i.next[a].next);return o}).join("\n")}}J.empty=new J(!0);class fr{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function Jt(n){let t=[];do{t.push(mr(n))}while(n.eat("|"));return 1==t.length?t[0]:{type:"choice",exprs:t}}function mr(n){let t=[];do{t.push(gr(n))}while(n.next&&")"!=n.next&&"|"!=n.next);return 1==t.length?t[0]:{type:"seq",exprs:t}}function gr(n){let t=function br(n){if(n.eat("(")){let t=Jt(n);return n.eat(")")||n.err("Missing closing paren"),t}if(!/\W/.test(n.next)){let t=function vr(n,t){let e=n.nodeTypes,i=e[t];if(i)return[i];let r=[];for(let o in e){let a=e[o];a.groups.indexOf(t)>-1&&r.push(a)}return 0==r.length&&n.err("No node type or group '"+t+"' found"),r}(n,n.next).map(e=>(null==n.inline?n.inline=e.isInline:n.inline!=e.isInline&&n.err("Mixing inline and block content"),{type:"name",value:e}));return n.pos++,1==t.length?t[0]:{type:"choice",exprs:t}}n.err("Unexpected token '"+n.next+"'")}(n);for(;;)if(n.eat("+"))t={type:"plus",expr:t};else if(n.eat("*"))t={type:"star",expr:t};else if(n.eat("?"))t={type:"opt",expr:t};else{if(!n.eat("{"))break;t=_r(n,t)}return t}function ei(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let t=Number(n.next);return n.pos++,t}function _r(n,t){let e=ei(n),i=e;return n.eat(",")&&(i="}"!=n.next?ei(n):-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:e,max:i,expr:t}}function ti(n,t){return t-n}function ii(n,t){let e=[];return function i(r){let o=n[r];if(1==o.length&&!o[0].term)return i(o[0].to);e.push(r);for(let a=0;a<o.length;a++){let{term:s,to:l}=o[a];!s&&-1==e.indexOf(l)&&i(l)}}(t),e.sort(ti)}function ni(n){let t=Object.create(null);for(let e in n){let i=n[e];if(!i.hasDefault)return null;t[e]=i.default}return t}function ri(n,t){let e=Object.create(null);for(let i in n){let r=t&&t[i];if(void 0===r){let o=n[i];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+i);r=o.default}e[i]=r}return e}function oi(n){let t=Object.create(null);if(n)for(let e in n)t[e]=new Cr(n[e]);return t}class Le{constructor(t,e,i){this.name=t,this.schema=e,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=oi(i.attrs),this.defaultAttrs=ni(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==J.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:ri(this.attrs,t)}create(t=null,e,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new $(this,this.computeAttrs(t),_.from(e),D.setFrom(i))}createChecked(t=null,e,i){if(e=_.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new $(this,this.computeAttrs(t),e,D.setFrom(i))}createAndFill(t=null,e,i){if(t=this.computeAttrs(t),(e=_.from(e)).size){let a=this.contentMatch.fillBefore(e);if(!a)return null;e=a.append(e)}let r=this.contentMatch.matchFragment(e),o=r&&r.fillBefore(_.empty,!0);return o?new $(this,t,e.append(o),D.setFrom(i)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let i=0;i<t.childCount;i++)if(!this.allowsMarks(t.child(i).marks))return!1;return!0}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let i=0;i<t.length;i++)this.allowsMarkType(t[i].type)?e&&e.push(t[i]):e||(e=t.slice(0,i));return e?e.length?e:D.none:t}static compile(t,e){let i=Object.create(null);t.forEach((o,a)=>i[o]=new Le(o,e,a));let r=e.spec.topNode||"doc";if(!i[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let o in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}}class Cr{constructor(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default}get isRequired(){return!this.hasDefault}}class ot{constructor(t,e,i,r){this.name=t,this.rank=e,this.schema=i,this.spec=r,this.attrs=oi(r.attrs),this.excluded=null;let o=ni(this.attrs);this.instance=o?new D(this,o):null}create(t=null){return!t&&this.instance?this.instance:new D(this,ri(this.attrs,t))}static compile(t,e){let i=Object.create(null),r=0;return t.forEach((o,a)=>i[o]=new ot(o,r++,e,a)),i}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}excludes(t){return this.excluded.indexOf(t)>-1}}function ai(n,t){let e=[];for(let i=0;i<t.length;i++){let r=t[i],o=n.marks[r],a=o;if(o)e.push(o);else for(let s in n.marks){let l=n.marks[s];("_"==r||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&e.push(a=l)}if(!a)throw new SyntaxError("Unknown mark type: '"+t[i]+"'")}return e}const fi=Math.pow(2,16);function Rr(n,t){return n+t*fi}function mi(n){return 65535&n}class lt{constructor(t,e,i){this.pos=t,this.delInfo=e,this.recover=i}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class V{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&V.empty)return V.empty}recover(t){let e=0,i=mi(t);if(!this.inverted)for(let r=0;r<i;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*i]+e+function Or(n){return(n-(65535&n))/fi}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,i){let r=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let l=this.ranges[s]-(this.inverted?r:0);if(l>t)break;let c=this.ranges[s+o],h=this.ranges[s+a],u=l+c;if(t<=u){let f=l+r+((c?t==l?-1:t==u?1:e:e)<0?0:h);if(i)return f;let m=t==(e<0?l:u)?null:Rr(s/3,t-l),g=t==l?2:t==u?1:4;return(e<0?t!=l:t!=u)&&(g|=8),new lt(f,g,m)}r+=h-c}return i?t+r:new lt(t+r,0,null)}touches(t,e){let i=0,r=mi(e),o=this.inverted?2:1,a=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let l=this.ranges[s]-(this.inverted?i:0);if(l>t)break;let c=this.ranges[s+o];if(t<=l+c&&s==3*r)return!0;i+=this.ranges[s+a]-c}return!1}forEach(t){let e=this.inverted?2:1,i=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let a=this.ranges[r],s=a-(this.inverted?o:0),l=a+(this.inverted?0:o),c=this.ranges[r+e],h=this.ranges[r+i];t(s,s+c,l,l+h),o+=h-c}}invert(){return new V(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?V.empty:new V(t<0?[0,-t,0]:[0,0,t])}}V.empty=new V([]);const ct=Object.create(null);class N{getMap(){return V.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=ct[e.stepType];if(!i)throw new RangeError(`No step type ${e.stepType} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in ct)throw new RangeError("Duplicate use of step JSON ID "+t);return ct[t]=e,e.prototype.jsonID=t,e}}class I{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new I(t,null)}static fail(t){return new I(null,t)}static fromReplace(t,e,i,r){try{return I.ok(t.replace(e,i,r))}catch(o){if(o instanceof me)return I.fail(o.message);throw o}}}function dt(n,t,e){let i=[];for(let r=0;r<n.childCount;r++){let o=n.child(r);o.content.size&&(o=o.copy(dt(o.content,t,o))),o.isInline&&(o=t(o,e,r)),i.push(o)}return _.fromArray(i)}class G extends N{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=t.resolve(this.from),r=i.node(i.sharedDepth(this.to)),o=new v(dt(e.content,(a,s)=>a.isAtom&&s.type.allowsMarkType(this.mark.type)?a.mark(this.mark.addToSet(a.marks)):a,r),e.openStart,e.openEnd);return I.fromReplace(t,this.from,this.to,o)}invert(){return new j(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new G(e.pos,i.pos,this.mark)}merge(t){return t instanceof G&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new G(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new G(e.from,e.to,t.markFromJSON(e.mark))}}N.jsonID("addMark",G);class j extends N{constructor(t,e,i){super(),this.from=t,this.to=e,this.mark=i}apply(t){let e=t.slice(this.from,this.to),i=new v(dt(e.content,r=>r.mark(this.mark.removeFromSet(r.marks)),t),e.openStart,e.openEnd);return I.fromReplace(t,this.from,this.to,i)}invert(){return new G(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deleted&&i.deleted||e.pos>=i.pos?null:new j(e.pos,i.pos,this.mark)}merge(t){return t instanceof j&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new j(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new j(e.from,e.to,t.markFromJSON(e.mark))}}N.jsonID("removeMark",j);class X extends N{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return I.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return I.fromReplace(t,this.pos,this.pos+1,new v(_.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let i=this.mark.addToSet(e.marks);if(i.length==e.marks.length){for(let r=0;r<e.marks.length;r++)if(!e.marks[r].isInSet(i))return new X(this.pos,e.marks[r]);return new X(this.pos,this.mark)}}return new ne(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new X(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new X(e.pos,t.markFromJSON(e.mark))}}N.jsonID("addNodeMark",X);class ne extends N{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return I.fail("No node at mark step's position");let i=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return I.fromReplace(t,this.pos,this.pos+1,new v(_.from(i),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new X(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new ne(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new ne(e.pos,t.markFromJSON(e.mark))}}N.jsonID("removeNodeMark",ne);class T extends N{constructor(t,e,i,r=!1){super(),this.from=t,this.to=e,this.slice=i,this.structure=r}apply(t){return this.structure&&ht(t,this.from,this.to)?I.fail("Structure replace would overwrite content"):I.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new V([this.from,this.to-this.from,this.slice.size])}invert(t){return new T(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1);return e.deletedAcross&&i.deletedAcross?null:new T(e.pos,Math.max(e.pos,i.pos),this.slice)}merge(t){if(!(t instanceof T)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?v.empty:new v(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new T(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?v.empty:new v(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new T(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new T(e.from,e.to,v.fromJSON(t,e.slice),!!e.structure)}}N.jsonID("replace",T);class O extends N{constructor(t,e,i,r,o,a,s=!1){super(),this.from=t,this.to=e,this.gapFrom=i,this.gapTo=r,this.slice=o,this.insert=a,this.structure=s}apply(t){if(this.structure&&(ht(t,this.from,this.gapFrom)||ht(t,this.gapTo,this.to)))return I.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return I.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,e.content);return i?I.fromReplace(t,this.from,this.to,i):I.fail("Content does not fit in gap")}getMap(){return new V([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new O(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),i=t.mapResult(this.to,-1),r=t.map(this.gapFrom,-1),o=t.map(this.gapTo,1);return e.deletedAcross&&i.deletedAcross||r<e.pos||o>i.pos?null:new O(e.pos,i.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new O(e.from,e.to,e.gapFrom,e.gapTo,v.fromJSON(t,e.slice),e.insert,!!e.structure)}}function ht(n,t,e){let i=n.resolve(t),r=e-t,o=i.depth;for(;r>0&&o>0&&i.indexAfter(o)==i.node(o).childCount;)o--,r--;if(r>0){let a=i.node(o).maybeChild(i.indexAfter(o));for(;r>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,r--}}return!1}function Nr(n,t,e){return(0==t||n.canReplace(t,n.childCount))&&(e==n.childCount||n.canReplace(0,e))}function xe(n){let e=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let i=n.depth;;--i){let r=n.$from.node(i),o=n.$from.index(i),a=n.$to.indexAfter(i);if(i<n.depth&&r.canReplace(o,a,e))return i;if(0==i||r.type.spec.isolating||!Nr(r,o,a))break}return null}function bi(n,t,e=null,i=n){let r=function Vr(n,t){let{parent:e,startIndex:i,endIndex:r}=n,o=e.contentMatchAt(i).findWrapping(t);return o&&e.canReplaceWith(i,r,o.length?o[0]:t)?o:null}(n,t),o=r&&function Br(n,t){let{parent:e,startIndex:i,endIndex:r}=n,o=e.child(i),a=t.contentMatch.findWrapping(o.type);if(!a)return null;let l=(a.length?a[a.length-1]:t).contentMatch;for(let c=i;l&&c<r;c++)l=l.matchType(e.child(c).type);return l&&l.validEnd?a:null}(i,t);return o?r.map(yi).concat({type:t,attrs:e}).concat(o.map(yi)):null}function yi(n){return{type:n,attrs:null}}function we(n,t,e=1,i){let r=n.resolve(t),o=r.depth-e,a=i&&i[i.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!a.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,h=e-2;c>o;c--,h--){let u=r.node(c),p=r.index(c);if(u.type.spec.isolating)return!1;let f=u.content.cutByIndex(p,u.childCount),m=i&&i[h]||u;if(m!=u&&(f=f.replaceChild(0,m.type.create(m.attrs))),!u.canReplace(p+1,u.childCount)||!m.type.validContent(f))return!1}let s=r.indexAfter(o),l=i&&i[0];return r.node(o).canReplaceWith(s,s,l?l.type:r.node(o+1).type)}function xi(n,t){let e=n.resolve(t),i=e.index();return function wi(n,t){return!(!n||!t||n.isLeaf||!n.canAppend(t))}(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(i,i+1)}function ut(n,t,e=t,i=v.empty){if(t==e&&!i.size)return null;let r=n.resolve(t),o=n.resolve(e);return function Ci(n,t,e){return!e.openStart&&!e.openEnd&&n.start()==t.start()&&n.parent.canReplace(n.index(),t.index(),e.content)}(r,o,i)?new T(t,e,i):new Gr(r,o,i).fit()}N.jsonID("replaceAround",O);class Gr{constructor(t,e,i){this.$from=t,this.$to=e,this.unplaced=i,this.frontier=[],this.placed=_.empty;for(let r=0;r<=t.depth;r++){let o=t.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(r))})}for(let r=t.depth;r>0;r--)this.placed=_.from(t.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,i=this.$from,r=this.close(t<0?this.$to:i.doc.resolve(t));if(!r)return null;let o=this.placed,a=i.depth,s=r.depth;for(;a&&s&&1==o.childCount;)o=o.firstChild.content,a--,s--;let l=new v(o,a,s);return t>-1?new O(i.pos,t,this.$to.pos,this.$to.end(),l,e):l.size||i.pos!=this.$to.pos?new T(i.pos,r.pos,l):null}findFittable(){for(let t=1;t<=2;t++)for(let e=this.unplaced.openStart;e>=0;e--){let i,r=null;e?(r=pt(this.unplaced.content,e-1).firstChild,i=r.content):i=this.unplaced.content;let o=i.firstChild;for(let a=this.depth;a>=0;a--){let c,{type:s,match:l}=this.frontier[a],h=null;if(1==t&&(o?l.matchType(o.type)||(h=l.fillBefore(_.from(o),!1)):r&&s.compatibleContent(r.type)))return{sliceDepth:e,frontierDepth:a,parent:r,inject:h};if(2==t&&o&&(c=l.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:a,parent:r,wrap:c};if(r&&l.matchType(r.type))break}}}openMore(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=pt(t,e);return!(!r.childCount||r.firstChild.isLeaf||(this.unplaced=new v(t,e+1,Math.max(i,r.size+e>=t.size-i?e+1:0)),0))}dropNode(){let{content:t,openStart:e,openEnd:i}=this.unplaced,r=pt(t,e);if(r.childCount<=1&&e>0){let o=t.size-e<=e+r.size;this.unplaced=new v(Ce(t,e-1,1),e-1,o?e-1:i)}else this.unplaced=new v(Ce(t,e,1),e,i)}placeNodes({sliceDepth:t,frontierDepth:e,parent:i,inject:r,wrap:o}){for(;this.depth>e;)this.closeFrontierNode();if(o)for(let g=0;g<o.length;g++)this.openFrontierNode(o[g]);let a=this.unplaced,s=i?i.content:a.content,l=a.openStart-t,c=0,h=[],{match:u,type:p}=this.frontier[e];if(r){for(let g=0;g<r.childCount;g++)h.push(r.child(g));u=u.matchFragment(r)}let f=s.size+t-(a.content.size-a.openEnd);for(;c<s.childCount;){let g=s.child(c),b=u.matchType(g.type);if(!b)break;c++,(c>1||0==l||g.content.size)&&(u=b,h.push(Mi(g.mark(p.allowedMarks(g.marks)),1==c?l:0,c==s.childCount?f:-1)))}let m=c==s.childCount;m||(f=-1),this.placed=Me(this.placed,e,_.from(h)),this.frontier[e].match=u,m&&f<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let g=0,b=s;g<f;g++){let E=b.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),b=E.content}this.unplaced=m?0==t?v.empty:new v(Ce(a.content,t-1,1),t-1,f<0?a.openEnd:t-1):new v(Ce(a.content,t,c),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e,t=this.frontier[this.depth];if(!t.type.isTextblock||!ft(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:i}=this.$to,r=this.$to.after(i);for(;i>1&&r==this.$to.end(--i);)++r;return r}findCloseLevel(t){e:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:i,type:r}=this.frontier[e],o=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),a=ft(t,e,r,i,o);if(a){for(let s=e-1;s>=0;s--){let{match:l,type:c}=this.frontier[s],h=ft(t,s,c,l,!0);if(!h||h.childCount)continue e}return{depth:e,fit:a,move:o?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Me(this.placed,e.depth,e.fit)),t=e.move;for(let i=e.depth+1;i<=t.depth;i++){let r=t.node(i),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(i));this.openFrontierNode(r.type,r.attrs,o)}return t}openFrontierNode(t,e=null,i){let r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=Me(this.placed,this.depth,_.from(t.create(e,i))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(_.empty,!0);e.childCount&&(this.placed=Me(this.placed,this.frontier.length,e))}}function Ce(n,t,e){return 0==t?n.cutByIndex(e,n.childCount):n.replaceChild(0,n.firstChild.copy(Ce(n.firstChild.content,t-1,e)))}function Me(n,t,e){return 0==t?n.append(e):n.replaceChild(n.childCount-1,n.lastChild.copy(Me(n.lastChild.content,t-1,e)))}function pt(n,t){for(let e=0;e<t;e++)n=n.firstChild.content;return n}function Mi(n,t,e){if(t<=0)return n;let i=n.content;return t>1&&(i=i.replaceChild(0,Mi(i.firstChild,t-1,1==i.childCount?e-1:0))),t>0&&(i=n.type.contentMatch.fillBefore(i).append(i),e<=0&&(i=i.append(n.type.contentMatch.matchFragment(i).fillBefore(_.empty,!0)))),n.copy(i)}function ft(n,t,e,i,r){let o=n.node(t),a=r?n.indexAfter(t):n.index(t);if(a==o.childCount&&!e.compatibleContent(o.type))return null;let s=i.fillBefore(o.content,!0,a);return s&&!function Xr(n,t,e){for(let i=e;i<t.childCount;i++)if(!n.allowsMarks(t.child(i).marks))return!0;return!1}(e,o.content,a)?s:null}class re extends N{constructor(t,e,i){super(),this.pos=t,this.attr=e,this.value=i}apply(t){let e=t.nodeAt(this.pos);if(!e)return I.fail("No node at attribute step's position");let i=Object.create(null);for(let o in e.attrs)i[o]=e.attrs[o];i[this.attr]=this.value;let r=e.type.create(i,null,e.marks);return I.fromReplace(t,this.pos,this.pos+1,new v(_.from(r),0,e.isLeaf?0:1))}getMap(){return V.empty}invert(t){return new re(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new re(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new re(e.pos,e.attr,e.value)}}N.jsonID("attr",re);let oe=class extends Error{};oe=function n(t){let e=Error.call(this,t);return e.__proto__=n.prototype,e},(oe.prototype=Object.create(Error.prototype)).constructor=oe,oe.prototype.name="TransformError";const mt=Object.create(null);class k{constructor(t,e,i){this.$anchor=t,this.$head=e,this.ranges=i||[new Jr(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=v.empty){let i=e.content.lastChild,r=null;for(let s=0;s<e.openEnd;s++)r=i,i=i.lastChild;let o=t.steps.length,a=this.ranges;for(let s=0;s<a.length;s++){let{$from:l,$to:c}=a[s],h=t.mapping.slice(o);t.replaceRange(h.map(l.pos),h.map(c.pos),s?v.empty:e),0==s&&Ii(t,o,(i?i.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(t,e){let i=t.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:a,$to:s}=r[o],l=t.mapping.slice(i),c=l.map(a.pos),h=l.map(s.pos);o?t.deleteRange(c,h):(t.replaceRangeWith(c,h,e),Ii(t,i,e.isInline?-1:1))}}static findFrom(t,e,i=!1){let r=t.parent.inlineContent?new P(t):ae(t.node(0),t.parent,t.pos,t.index(),e,i);if(r)return r;for(let o=t.depth-1;o>=0;o--){let a=e<0?ae(t.node(0),t.node(o),t.before(o+1),t.index(o),e,i):ae(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,i);if(a)return a}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new B(t.node(0))}static atStart(t){return ae(t,t,0,0,1)||new B(t)}static atEnd(t){return ae(t,t,t.content.size,t.childCount,-1)||new B(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=mt[e.type];if(!i)throw new RangeError(`No selection type ${e.type} defined`);return i.fromJSON(t,e)}static jsonID(t,e){if(t in mt)throw new RangeError("Duplicate use of selection JSON ID "+t);return mt[t]=e,e.prototype.jsonID=t,e}getBookmark(){return P.between(this.$anchor,this.$head).getBookmark()}}k.prototype.visible=!0;class Jr{constructor(t,e){this.$from=t,this.$to=e}}let Di=!1;function Ei(n){!Di&&!n.parent.inlineContent&&(Di=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class P extends k{constructor(t,e=t){Ei(t),Ei(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let i=t.resolve(e.map(this.head));if(!i.parent.inlineContent)return k.near(i);let r=t.resolve(e.map(this.anchor));return new P(r.parent.inlineContent?r:i,i)}replace(t,e=v.empty){if(super.replace(t,e),e==v.empty){let i=this.$from.marksAcross(this.$to);i&&t.ensureMarks(i)}}eq(t){return t instanceof P&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Ye(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new P(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,i=e){let r=t.resolve(e);return new this(r,i==e?r:t.resolve(i))}static between(t,e,i){let r=t.pos-e.pos;if((!i||r)&&(i=r>=0?1:-1),!e.parent.inlineContent){let o=k.findFrom(e,i,!0)||k.findFrom(e,-i,!0);if(!o)return k.near(e,i);e=o.$head}return t.parent.inlineContent||(0==r||(t=(k.findFrom(t,-i,!0)||k.findFrom(t,i,!0)).$anchor).pos<e.pos!=r<0)&&(t=e),new P(t,e)}}k.jsonID("text",P);class Ye{constructor(t,e){this.anchor=t,this.head=e}map(t){return new Ye(t.map(this.anchor),t.map(this.head))}resolve(t){return P.between(t.resolve(this.anchor),t.resolve(this.head))}}class S extends k{constructor(t){let e=t.nodeAfter,i=t.node(0).resolve(t.pos+e.nodeSize);super(t,i),this.node=e}map(t,e){let{deleted:i,pos:r}=e.mapResult(this.anchor),o=t.resolve(r);return i?k.near(o):new S(o)}content(){return new v(_.from(this.node),0,0)}eq(t){return t instanceof S&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new gt(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new S(t.resolve(e.anchor))}static create(t,e){return new S(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}S.prototype.visible=!1,k.jsonID("node",S);class gt{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:i}=t.mapResult(this.anchor);return e?new Ye(i,i):new gt(i)}resolve(t){let e=t.resolve(this.anchor),i=e.nodeAfter;return i&&S.isSelectable(i)?new S(e):k.near(e)}}class B extends k{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=v.empty){if(e==v.empty){t.delete(0,t.doc.content.size);let i=k.atStart(t.doc);i.eq(t.selection)||t.setSelection(i)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new B(t)}map(t){return new B(t)}eq(t){return t instanceof B}getBookmark(){return eo}}k.jsonID("all",B);const eo={map(){return this},resolve:n=>new B(n)};function ae(n,t,e,i,r,o=!1){if(t.inlineContent)return P.create(n,e);for(let a=i-(r>0?0:1);r>0?a<t.childCount:a>=0;a+=r){let s=t.child(a);if(s.isAtom){if(!o&&S.isSelectable(s))return S.create(n,e-(r<0?s.nodeSize:0))}else{let l=ae(n,s,e+r,r<0?s.childCount:0,r,o);if(l)return l}e+=s.nodeSize*r}return null}function Ii(n,t,e){let i=n.steps.length-1;if(i<t)return;let a,r=n.steps[i];(r instanceof T||r instanceof O)&&(n.mapping.maps[i].forEach((s,l,c,h)=>{null==a&&(a=h)}),n.setSelection(k.near(n.doc.resolve(a),e)))}function Oi(n,t){return t&&n?n.bind(t):n}class ke{constructor(t,e,i){this.name=t,this.init=Oi(e.init,i),this.apply=Oi(e.apply,i)}}new ke("doc",{init:n=>n.doc||n.schema.topNodeType.createAndFill(),apply:n=>n.doc}),new ke("selection",{init:(n,t)=>n.selection||k.atStart(t.doc),apply:n=>n.selection}),new ke("storedMarks",{init:n=>n.storedMarks||null,apply:(n,t,e,i)=>i.selection.$cursor?n.storedMarks:null}),new ke("scrollToSelection",{init:()=>0,apply:(n,t)=>n.scrolledIntoView?t+1:t});const no=["ol",0],ro=["ul",0],oo=["li",0];const Vi=n=>{const t=(n=>{const t={};return Object.keys(n).forEach(e=>{n[e]&&(t[e]=n[e])}),t})(n);return Object.entries(t).map(([e,i])=>`${(n=>n.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`))(e)}:${i}`).join(";")};Error;const fo={link:{attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:n=>({href:n.getAttribute("href"),title:n.getAttribute("title"),target:n.getAttribute("target")})}],toDOM(n){const{href:t,title:e,target:i}=n.attrs;return["a",{href:t,title:e,target:i},0]}},em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:()=>["em",0]},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:n=>"normal"!==n.style.fontWeight&&null},{style:"font-weight",getAttrs:n=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(n)&&null}],toDOM:()=>["strong",0]},code:{parseDOM:[{tag:"code"}],toDOM:()=>["code",0]},u:{parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM:()=>["u",0]},s:{parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM:()=>["s",0]},text_color:{attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:n=>({color:n})}],toDOM(n){const{color:t}=n.attrs;return["span",{style:`color:${t};`},0]}},text_background_color:{attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:n=>({backgroundColor:n})}],toDOM(n){const{backgroundColor:t}=n.attrs;return["span",{style:`background-color:${t};`},0]}}},Do={doc:{content:"block+"},text:{group:"inline"},paragraph:{content:"inline*",group:"block",attrs:{align:{default:null}},parseDOM:[{tag:"p",getAttrs(n){const{textAlign:t}=n.style;return{align:n.getAttribute("align")||t||null}}}],toDOM(n){const{align:t}=n.attrs;return["p",{style:Vi({textAlign:"left"!==t?t:null})||null},0]}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",0]},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr"]},heading:{attrs:{level:{default:1},align:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(n){const{textAlign:t}=n.style;return{level:1,align:n.getAttribute("align")||t||null}}},{tag:"h2",getAttrs(n){const{textAlign:t}=n.style;return{level:2,align:n.getAttribute("align")||t||null}}},{tag:"h3",getAttrs(n){const{textAlign:t}=n.style;return{level:3,align:n.getAttribute("align")||t||null}}},{tag:"h4",getAttrs(n){const{textAlign:t}=n.style;return{level:4,align:n.getAttribute("align")||t||null}}},{tag:"h5",getAttrs(n){const{textAlign:t}=n.style;return{level:5,align:n.getAttribute("align")||t||null}}},{tag:"h6",getAttrs(n){const{textAlign:t}=n.style;return{level:6,align:n.getAttribute("align")||t||null}}}],toDOM(n){const{level:t,align:e}=n.attrs;return[`h${t}`,{style:Vi({textAlign:"left"!==e?e:null})||null},0]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br"]},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:()=>["pre",["code",0]]},image:{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:n=>({src:n.getAttribute("src"),title:n.getAttribute("title"),alt:n.getAttribute("alt"),width:n.getAttribute("width")})}],toDOM(n){const{src:t,alt:e,title:i,width:r}=n.attrs;return["img",{src:t,alt:e,title:i,width:r}]}},list_item:{...{parseDOM:[{tag:"li"}],toDOM:()=>oo,defining:!0},content:"paragraph block*"},ordered_list:{...{attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:n=>({order:n.hasAttribute("start")?+n.getAttribute("start"):1})}],toDOM:n=>1==n.attrs.order?no:["ol",{start:n.attrs.order},0]},content:"list_item+",group:"block"},bullet_list:{...{parseDOM:[{tag:"ul"}],toDOM:()=>ro},content:"list_item+",group:"block"}},Bi=(new class Mr{constructor(t){this.cached=Object.create(null),this.spec={nodes:Wt.from(t.nodes),marks:Wt.from(t.marks||{}),topNode:t.topNode},this.nodes=Le.compile(this.spec.nodes,this),this.marks=ot.compile(this.spec.marks,this);let e=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let r=this.nodes[i],o=r.spec.content||"",a=r.spec.marks;r.contentMatch=e[o]||(e[o]=J.parse(o,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.markSet="_"==a?null:a?ai(this,a.split(" ")):""!=a&&r.inlineContent?null:[]}for(let i in this.marks){let r=this.marks[i],o=r.spec.excludes;r.excluded=null==o?[r]:""==o?[]:ai(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,i,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof Le))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,i,r)}text(t,e){let i=this.nodes.text;return new Ne(i,i.defaultAttrs,t,D.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return $.fromJSON(this,t)}markFromJSON(t){return D.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}({marks:fo,nodes:Do}),(n,t)=>!n.selection.empty&&(t&&t(n.tr.deleteSelection().scrollIntoView()),!0));function se(n,t,e=!1){for(let i=n;i;i="start"==t?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(e&&1!=i.childCount)return!1}return!1}function zi(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){if(n.index(t)>0)return n.doc.resolve(n.before(t+1));if(n.node(t).type.spec.isolating)break}return null}function Hi(n){if(!n.parent.type.spec.isolating)for(let t=n.depth-1;t>=0;t--){let e=n.node(t);if(n.index(t)+1<e.childCount)return n.doc.resolve(n.after(t+1));if(e.type.spec.isolating)break}return null}function yt(n){for(let t=0;t<n.edgeCount;t++){let{type:e}=n.edge(t);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}function ji(n,t,e){let o,a,i=t.nodeBefore,r=t.nodeAfter;if(i.type.spec.isolating||r.type.spec.isolating)return!1;if(function Bo(n,t,e){let i=t.nodeBefore,r=t.nodeAfter,o=t.index();return!(!(i&&r&&i.type.compatibleContent(r.type))||(!i.content.size&&t.parent.canReplace(o-1,o)?(e&&e(n.tr.delete(t.pos-i.nodeSize,t.pos).scrollIntoView()),0):!t.parent.canReplace(o,o+1)||!r.isTextblock&&!xi(n.doc,t.pos)||(e&&e(n.tr.clearIncompatible(t.pos,i.type,i.contentMatchAt(i.childCount)).join(t.pos).scrollIntoView()),0)))}(n,t,e))return!0;let s=t.parent.canReplace(t.index(),t.index()+1);if(s&&(o=(a=i.contentMatchAt(i.childCount)).findWrapping(r.type))&&a.matchType(o[0]||r.type).validEnd){if(e){let u=t.pos+r.nodeSize,p=_.empty;for(let g=o.length-1;g>=0;g--)p=_.from(o[g].create(null,p));p=_.from(i.copy(p));let f=n.tr.step(new O(t.pos-1,u,t.pos,u,new v(p,1,0),o.length,!0)),m=u+2*o.length;xi(f.doc,m)&&f.join(m),e(f.scrollIntoView())}return!0}let l=k.findFrom(t,1),c=l&&l.$from.blockRange(l.$to),h=c&&xe(c);if(null!=h&&h>=t.depth)return e&&e(n.tr.lift(c,h).scrollIntoView()),!0;if(s&&se(r,"start",!0)&&se(i,"end")){let u=i,p=[];for(;p.push(u),!u.isTextblock;)u=u.lastChild;let f=r,m=1;for(;!f.isTextblock;f=f.firstChild)m++;if(u.canReplace(u.childCount,u.childCount,f.content)){if(e){let g=_.empty;for(let E=p.length-1;E>=0;E--)g=_.from(p[E].copy(g));e(n.tr.step(new O(t.pos-p.length,t.pos+r.nodeSize,t.pos+m,t.pos+r.nodeSize-m,new v(g,p.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function Wi(n){return function(t,e){let i=t.selection,r=n<0?i.$from:i.$to,o=r.depth;for(;r.node(o).isInline;){if(!o)return!1;o--}return!!r.node(o).isTextblock&&(e&&e(t.tr.setSelection(P.create(t.doc,n<0?r.start(o):r.end(o)))),!0)}}const zo=Wi(-1),Ho=Wi(1);function xt(n,t=null){return function(e,i){let{from:r,to:o}=e.selection,a=!1;return e.doc.nodesBetween(r,o,(s,l)=>{if(a)return!1;if(s.isTextblock&&!s.hasMarkup(n,t))if(s.type==n)a=!0;else{let c=e.doc.resolve(l),h=c.index();a=c.parent.canReplaceWith(h,h+1,n)}}),!!a&&(i&&i(e.tr.setBlockType(r,o,n,t).scrollIntoView()),!0)}}function Ui(n,t=null){return function(e,i){let{empty:r,$cursor:o,ranges:a}=e.selection;if(r&&!o||!function jo(n,t,e){for(let i=0;i<t.length;i++){let{$from:r,$to:o}=t[i],a=0==r.depth&&n.type.allowsMarkType(e);if(n.nodesBetween(r.pos,o.pos,s=>{if(a)return!1;a=s.inlineContent&&s.type.allowsMarkType(e)}),a)return!0}return!1}(e.doc,a,n))return!1;if(i)if(o)n.isInSet(e.storedMarks||o.marks())?i(e.tr.removeStoredMark(n)):i(e.tr.addStoredMark(n.create(t)));else{let s=!1,l=e.tr;for(let c=0;!s&&c<a.length;c++){let{$from:h,$to:u}=a[c];s=e.doc.rangeHasMark(h.pos,u.pos,n)}for(let c=0;c<a.length;c++){let{$from:h,$to:u}=a[c];if(s)l.removeMark(h.pos,u.pos,n);else{let p=h.pos,f=u.pos,m=h.nodeAfter,g=u.nodeBefore,b=m&&m.isText?/^\s*/.exec(m.text)[0].length:0,E=g&&g.isText?/\s*$/.exec(g.text)[0].length:0;p+b<f&&(p+=b,f-=E),l.addMark(p,f,n.create(t))}}i(l.scrollIntoView())}return!0}}function wt(...n){return function(t,e,i){for(let r=0;r<n.length;r++)if(n[r](t,e,i))return!0;return!1}}let Ct=wt(Bi,(n,t,e)=>{let{$cursor:i}=n.selection;if(!i||(e?!e.endOfTextblock("backward",n):i.parentOffset>0))return!1;let r=zi(i);if(!r){let a=i.blockRange(),s=a&&xe(a);return null!=s&&(t&&t(n.tr.lift(a,s).scrollIntoView()),!0)}let o=r.nodeBefore;if(!o.type.spec.isolating&&ji(n,r,t))return!0;if(0==i.parent.content.size&&(se(o,"end")||S.isSelectable(o))){let a=ut(n.doc,i.before(),i.after(),v.empty);if(a&&a.slice.size<a.to-a.from){if(t){let s=n.tr.step(a);s.setSelection(se(o,"end")?k.findFrom(s.doc.resolve(s.mapping.map(r.pos,-1)),-1):S.create(s.doc,r.pos-o.nodeSize)),t(s.scrollIntoView())}return!0}}return!(!o.isAtom||r.depth!=i.depth-1||(t&&t(n.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),0))},(n,t,e)=>{let{$head:i,empty:r}=n.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("backward",n):i.parentOffset>0)return!1;o=zi(i)}let a=o&&o.nodeBefore;return!(!a||!S.isSelectable(a)||(t&&t(n.tr.setSelection(S.create(n.doc,o.pos-a.nodeSize)).scrollIntoView()),0))}),$i=wt(Bi,(n,t,e)=>{let{$cursor:i}=n.selection;if(!i||(e?!e.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size))return!1;let r=Hi(i);if(!r)return!1;let o=r.nodeAfter;if(ji(n,r,t))return!0;if(0==i.parent.content.size&&(se(o,"start")||S.isSelectable(o))){let a=ut(n.doc,i.before(),i.after(),v.empty);if(a&&a.slice.size<a.to-a.from){if(t){let s=n.tr.step(a);s.setSelection(se(o,"start")?k.findFrom(s.doc.resolve(s.mapping.map(r.pos)),1):S.create(s.doc,s.mapping.map(r.pos))),t(s.scrollIntoView())}return!0}}return!(!o.isAtom||r.depth!=i.depth-1||(t&&t(n.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),0))},(n,t,e)=>{let{$head:i,empty:r}=n.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(e?!e.endOfTextblock("forward",n):i.parentOffset<i.parent.content.size)return!1;o=Hi(i)}let a=o&&o.nodeAfter;return!(!a||!S.isSelectable(a)||(t&&t(n.tr.setSelection(S.create(n.doc,o.pos)).scrollIntoView()),0))});const q={Enter:wt((n,t)=>{let{$head:e,$anchor:i}=n.selection;return!(!e.parent.type.spec.code||!e.sameParent(i)||(t&&t(n.tr.insertText("\n").scrollIntoView()),0))},(n,t)=>{let e=n.selection,{$from:i,$to:r}=e;if(e instanceof B||i.parent.inlineContent||r.parent.inlineContent)return!1;let o=yt(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(t){let a=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,s=n.tr.insert(a,o.createAndFill());s.setSelection(P.create(s.doc,a+1)),t(s.scrollIntoView())}return!0},(n,t)=>{let{$cursor:e}=n.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let o=e.before();if(we(n.doc,o))return t&&t(n.tr.split(o).scrollIntoView()),!0}let i=e.blockRange(),r=i&&xe(i);return null!=r&&(t&&t(n.tr.lift(i,r).scrollIntoView()),!0)},(n,t)=>{let{$from:e,$to:i}=n.selection;if(n.selection instanceof S&&n.selection.node.isBlock)return!(!e.parentOffset||!we(n.doc,e.pos)||(t&&t(n.tr.split(e.pos).scrollIntoView()),0));if(!e.parent.isBlock)return!1;if(t){let r=i.parentOffset==i.parent.content.size,o=n.tr;(n.selection instanceof P||n.selection instanceof B)&&o.deleteSelection();let a=0==e.depth?null:yt(e.node(-1).contentMatchAt(e.indexAfter(-1))),s=r&&a?[{type:a}]:void 0,l=we(o.doc,o.mapping.map(e.pos),1,s);if(!s&&!l&&we(o.doc,o.mapping.map(e.pos),1,a?[{type:a}]:void 0)&&(a&&(s=[{type:a}]),l=!0),l&&(o.split(o.mapping.map(e.pos),1,s),!r&&!e.parentOffset&&e.parent.type!=a)){let c=o.mapping.map(e.before()),h=o.doc.resolve(c);a&&e.node(-1).canReplaceWith(h.index(),h.index()+1,a)&&o.setNodeMarkup(o.mapping.map(e.before()),a)}t(o.scrollIntoView())}return!0}),"Mod-Enter":(n,t)=>{let{$head:e,$anchor:i}=n.selection;if(!e.parent.type.spec.code||!e.sameParent(i))return!1;let r=e.node(-1),o=e.indexAfter(-1),a=yt(r.contentMatchAt(o));if(!a||!r.canReplaceWith(o,o,a))return!1;if(t){let s=e.after(),l=n.tr.replaceWith(s,s,a.createAndFill());l.setSelection(k.near(l.doc.resolve(s),1)),t(l.scrollIntoView())}return!0},Backspace:Ct,"Mod-Backspace":Ct,"Shift-Backspace":Ct,Delete:$i,"Mod-Delete":$i,"Mod-a":(n,t)=>(t&&t(n.tr.setSelection(new B(n.doc))),!0)},Uo={"Ctrl-h":q.Backspace,"Alt-Backspace":q["Mod-Backspace"],"Ctrl-d":q.Delete,"Ctrl-Alt-Backspace":q["Mod-Delete"],"Alt-Delete":q["Mod-Delete"],"Alt-d":q["Mod-Delete"],"Ctrl-a":zo,"Ctrl-e":Ho};for(let n in q)Uo[n]=q[n];typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform();const Mt=(n,t)=>{const{from:e,$from:i,to:r,empty:o}=n.selection;return o?Boolean(t.isInSet(n.storedMarks||i.marks())):n.doc.rangeHasMark(e,r,t)},Gi=(n,t,e={})=>{const{selection:i}=n,{$from:r,to:o}=i,a=((n,t)=>{for(let e=t.depth;e>0;e-=1)if(t.node(e).type===n)return t.node(e).type;return null})(t,r);return Object.entries(e).length&&a?o<=r.end()&&r.parent.hasMarkup(t,e):Boolean(a)},Xi=n=>{const t=[],{selection:{from:e,to:i}}=n;return n.doc.nodesBetween(e,i,r=>{t.push(r)}),t},qi=(n,t,e)=>{for(const i of t){const{$from:r,$to:o}=i;let a=0===r.depth&&n.type.allowsMarkType(e);if(n.nodesBetween(r.pos,o.pos,s=>!a&&(a=s.inlineContent&&s.type.allowsMarkType(e),!0)),a)return!0}return!1},Ki=(n,t={})=>(e,i)=>{const{tr:r,selection:o}=e,{empty:a,ranges:s,$from:l,$to:c}=o;if(a&&o instanceof P){const{$cursor:h}=o;if(!h||!qi(e.doc,s,n)||(r.addStoredMark(n.create(t)),!r.storedMarksSet))return!1;i?.(r)}else{if(r.addMark(l.pos,c.pos,n.create(t)),!r.docChanged)return!1;i?.(r.scrollIntoView())}return!0};var Qo=x(1481);class le{constructor(t){this.name=t}apply(){return(t,e)=>{const{schema:i}=t,r=i.marks[this.name];return!!r&&Ki(r)(t,e)}}toggle(){return(t,e)=>{const{schema:i}=t,r=i.marks[this.name];return!!r&&Ui(r)(t,e)}}isActive(t){const{schema:e}=t,i=e.marks[this.name];return!!i&&Mt(t,i)}canExecute(t){return this.toggle()(t)}}class We{constructor(t=!1){this.isBulletList=!1,this.isBulletList=t}getType(t){return this.isBulletList?t.nodes.bullet_list:t.nodes.ordered_list}toggle(){return(t,e)=>{const{schema:i}=t,r=this.getType(i);return!!r&&(this.isActive(t)?function lo(n){return function(t,e){let{$from:i,$to:r}=t.selection,o=i.blockRange(r,a=>a.childCount>0&&a.firstChild.type==n);return!!o&&(!e||(i.node(o.depth-1).type==n?function co(n,t,e,i){let r=n.tr,o=i.end,a=i.$to.end(i.depth);o<a&&(r.step(new O(o-1,a,o,a,new v(_.from(e.create(null,i.parent.copy())),1,0),1,!0)),i=new Fe(r.doc.resolve(i.$from.pos),r.doc.resolve(a),i.depth));const s=xe(i);return null!=s&&(t(r.lift(i,s).scrollIntoView()),!0)}(t,e,n,o):function ho(n,t,e){let i=n.tr,r=e.parent;for(let f=e.end,m=e.endIndex-1,g=e.startIndex;m>g;m--)f-=r.child(m).nodeSize,i.delete(f-1,f+1);let o=i.doc.resolve(e.start),a=o.nodeAfter;if(i.mapping.map(e.end)!=e.start+o.nodeAfter.nodeSize)return!1;let s=0==e.startIndex,l=e.endIndex==r.childCount,c=o.node(-1),h=o.index(-1);if(!c.canReplace(h+(s?0:1),h+1,a.content.append(l?_.empty:_.from(r))))return!1;let u=o.pos,p=u+a.nodeSize;return i.step(new O(u-(s?1:0),p+(l?1:0),u+1,p-1,new v((s?_.empty:_.from(r.copy(_.empty))).append(l?_.empty:_.from(r.copy(_.empty))),s?0:1,l?0:1),s?0:1)),t(i.scrollIntoView()),!0}(t,e,o)))}}(i.nodes.list_item)(t,e):function ao(n,t=null){return function(e,i){let{$from:r,$to:o}=e.selection,a=r.blockRange(o),s=!1,l=a;if(!a)return!1;if(a.depth>=2&&r.node(a.depth-1).type.compatibleContent(n)&&0==a.startIndex){if(0==r.index(a.depth-1))return!1;let h=e.doc.resolve(a.start-2);l=new Fe(h,h,a.depth),a.endIndex<a.parent.childCount&&(a=new Fe(r,e.doc.resolve(o.end(a.depth)),a.depth)),s=!0}let c=bi(l,n,t,a);return!!c&&(i&&i(function so(n,t,e,i,r){let o=_.empty;for(let h=e.length-1;h>=0;h--)o=_.from(e[h].type.create(e[h].attrs,o));n.step(new O(t.start-(i?2:0),t.end,t.start,t.end,new v(o,0,0),e.length,!0));let a=0;for(let h=0;h<e.length;h++)e[h].type==r&&(a=h+1);let s=e.length-a,l=t.start+e.length-(i?2:0),c=t.parent;for(let h=t.startIndex,u=t.endIndex,p=!0;h<u;h++,p=!1)!p&&we(n.doc,l,s)&&(n.split(l,s),l+=2*s),l+=c.child(h).nodeSize;return n}(e.tr,a,c,s,n).scrollIntoView()),!0)}}(r)(t,e))}}isActive(t){const{schema:e}=t,i=this.getType(e);return!!i&&Gi(t,i)}canExecute(t){return this.toggle()(t)}}class ee{constructor(t){this.level=t}apply(){return(t,e)=>{const{schema:i}=t,r=i.nodes.heading;return!!r&&xt(r)(t,e)}}toggle(){return(t,e)=>{const{schema:i,selection:r,doc:o}=t,a=i.nodes.heading;if(!a)return!1;const s=r.$from.before(1),c=o.nodeAt(s)?.attrs??{};return this.isActive(t)?xt(i.nodes.paragraph,c)(t,e):xt(a,{...c,level:this.level})(t,e)}}isActive(t){const{schema:e}=t,i=Xi(t),r=e.nodes.heading;if(!r)return!1;const o=[r,e.nodes.text,e.nodes.blockquote],s=i.filter(l=>o.includes(l.type)).find(l=>l.attrs.level===this.level);return Boolean(s)}canExecute(t){return this.toggle()(t)}}class Ee{constructor(t){this.align=t}toggle(){return(t,e)=>{const{doc:i,selection:r,tr:o,schema:a}=t,{from:s,to:l}=r;let c=!1;return i.nodesBetween(s,l,(h,u)=>{const p=h.type;return[a.nodes.paragraph,a.nodes.heading].includes(p)&&(c=!0,o.setNodeMarkup(u,p,{...h.attrs,align:this.align})),!0}),!!c&&(o.docChanged&&e?.(o),!0)}}isActive(t){const i=Xi(t).find(r=>r.attrs.align===this.align);return Boolean(i)}canExecute(t){return this.toggle()(t)}}const Za={strict:!0};class ce{constructor(t,e="color"){this.name=t,this.attrName=e}apply(t){return(e,i)=>{const{schema:r,selection:o,doc:a}=e,s=r.marks[this.name];if(!s)return!1;const{from:l,to:c,empty:h}=o;if(!h&&l+1===c){const u=a.nodeAt(l);if(u?.isAtom&&!u.isText&&u.isLeaf)return!1}return Ki(s,t)(e,i)}}isActive(t){const{schema:e}=t,i=e.marks[this.name];return!!i&&Mt(t,i)}getActiveColors(t){if(!this.isActive(t))return[];const{schema:e}=t;return(n=>{let t=[];const{selection:e,storedMarks:i}=n,{from:r,to:o,empty:a,$from:s}=e;return a?t=i||s.marks():n.doc.nodesBetween(r,o,l=>{t=[...t,...l.marks]}),t})(t).filter(o=>o.type===e.marks[this.name]).map(o=>o.attrs[this.attrName]).filter(Boolean)}remove(){return(t,e)=>{const{schema:i}=t,r=i.marks[this.name];return!!r&&(n=r,(t,e)=>{const{tr:i,selection:r,storedMarks:o,doc:a}=t,{empty:s,ranges:l}=r;if(s&&r instanceof P){const{$cursor:c}=r;if(!c||!qi(t.doc,l,n))return!1;if(n.isInSet(o||c.marks()))return i.removeStoredMark(n),e?.(i),!0}else{for(const c of l){const{$from:h,$to:u}=c;a.rangeHasMark(h.pos,u.pos,n)&&i.removeMark(h.pos,u.pos,n)}if(!i.docChanged)return!1;e?.(i.scrollIntoView())}return!1})(t,e);var n}}canExecute(t){return this.apply("text_color"===this.name?{color:""}:{backgroundColor:""})(t)}}const Ja=["link"];new le("strong"),new le("em"),new le("code"),new le("u"),new le("s"),new class Ka{toggle(){return(t,e)=>{const{schema:i}=t,r=i.nodes.blockquote;return!!r&&(this.isActive(t)?((n,t)=>{let{$from:e,$to:i}=n.selection,r=e.blockRange(i),o=r&&xe(r);return null!=o&&(t&&t(n.tr.lift(r,o).scrollIntoView()),!0)})(t,e):function Yo(n,t=null){return function(e,i){let{$from:r,$to:o}=e.selection,a=r.blockRange(o),s=a&&bi(a,n,t);return!!s&&(i&&i(e.tr.wrap(a,s).scrollIntoView()),!0)}}(r)(t,e))}}isActive(t){const{schema:e}=t,i=e.nodes.blockquote;return!!i&&Gi(t,i)}canExecute(t){return this.toggle()(t)}},new class Qa{insert(){return(t,e)=>{const{schema:i,tr:r}=t,o=i.nodes.horizontal_rule;return!!o&&(e(r.replaceSelectionWith(o.create()).scrollIntoView()),!0)}}canExecute(t){return((n,t)=>{const{$from:e}=n.selection;for(let i=e.depth;i>=0;i-=1){const r=e.index(i);if(e.node(i).canReplaceWith(r,r,t))return!0}return!1})(t,t.schema.nodes.horizontal_rule)}},new class es{insert(){return(t,e)=>{const{tr:i}=t,{ranges:r,empty:o}=i.selection;return o||(Object.entries(t.schema.marks).forEach(([a,s])=>{Ja.includes(a)||r.forEach(l=>{i.removeMark(l.$from.pos,l.$to.pos,s)})}),e(i)),!0}}canExecute(){return!0}},new We(!0),new We(!1),new ee(1),new ee(2),new ee(3),new ee(4),new ee(5),new ee(6),new Ee("left"),new Ee("center"),new Ee("right"),new Ee("justify"),new class kt{update(t){return(e,i)=>{const{schema:r,selection:o}=e,a=r.marks.link;return!(!a||o.empty)&&Ui(a,t)(e,i)}}insert(t,e){return(i,r)=>{const{schema:o,tr:a}=i;if(!o.marks.link)return!1;const c=o.text(t,[o.marks.link.create({href:e.href,title:e.title??t,target:e.target??"_blank"})]);return a.replaceSelectionWith(c,!1).scrollIntoView(),!!a.docChanged&&(r?.(a),!0)}}isActive(t,e=Za){if(e.strict)return!0;const{schema:i}=t,r=i.marks.link;return!!r&&Mt(t,r)}remove(t,e){return((n,t)=>{const{doc:e,selection:i,tr:r}=n,{$head:{pos:o},from:a,to:s}=i;if(a===s){const l=e.resolve(o),c=o-l.textOffset,h=c+l.parent.child(l.index()).nodeSize;r.removeMark(c,h)}else r.removeMark(a,s);return!!r.docChanged&&(t?.(r),!0)})(t,e)}canExecute(t){const e={href:""};return this.insert("Exec",e)(t)||this.update(e)(t)}},new class Zi{insert(t,e){return(i,r)=>{const{schema:o,tr:a,selection:s}=i,l=o.nodes.image;if(!l)return!1;const c={width:null,src:t,...e};!c.width&&s instanceof S&&s.node.type===l&&(c.width=s.node.attrs.width),a.replaceSelectionWith(l.createAndFill(c));const h=a.doc.resolve(a.selection.anchor-a.selection.$anchor.nodeBefore.nodeSize);return a.setSelection(new S(h)).scrollIntoView(),!!a.docChanged&&(r?.(a),!0)}}isActive(t){const{selection:e}=t;return e instanceof S&&"image"===e.node.type.name}},new ce("text_color","color"),new ce("text_background_color","backgroundColor");const St={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove"};class ws{constructor(t={}){this.locals=St,this.get=e=>this.locals[e]??"",this.locals={...St,...t}}}let Dt=(()=>{class n{constructor(){this.locals={}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cs=(()=>{class n{constructor(e){this.config=e}get locals(){return new ws(this.config.locals)}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(Dt,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ji=n=>({locals:n.locals??{}});let Ms=(()=>{class n{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustHtml(e)}}return n.\u0275fac=function(e){return new(e||n)(d.Y36(Qo.H7,16))},n.\u0275pipe=d.Yjl({name:"sanitizeHtml",type:n,pure:!0}),n})(),ks=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Ms],imports:[M.ez,Y.UX]}),n})();const Ue=new d.OlP("NgxEditorConfig"),en={locals:St};let Ss=(()=>{class n{static forRoot(e=en){return{ngModule:n,providers:[{provide:Ue,useValue:e},{provide:Dt,useFactory:Ji,deps:[Ue]}]}}static forChild(e=en){return{ngModule:n,providers:[{provide:Ue,useValue:e},{provide:Dt,useFactory:Ji,deps:[Ue]},Cs]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[M.ez,ks]}),n})();typeof navigator<"u"&&/Mac/.test(navigator.platform);const Et=new d.OlP("@sweetalert2/ngx-sweetalert2#swalProvider"),on=new d.OlP("@sweetalert2/ngx-sweetalert2#fireOnInit"),an=new d.OlP("@sweetalert2/ngx-sweetalert2#dismissOnDestroy");let sn=(()=>{class n{constructor(e){this.swalProvider=e}get swal(){return this.swalPromiseCache||this.preloadSweetAlertLibrary(),this.swalPromiseCache}preloadSweetAlertLibrary(){if(this.swalPromiseCache)return;const e=function i(o){return"function"==typeof o&&void 0===o.version}(this.swalProvider)?this.swalProvider():Promise.resolve(this.swalProvider);this.swalPromiseCache=e.then(o=>function r(o){return"function"==typeof o}(o)?o:o.default)}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(Et))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Hs(){return x.e(226).then(x.t.bind(x,5226,19))}let Ys=(()=>{class n{static forRoot(e={}){return{ngModule:n,providers:[sn,{provide:Et,useValue:e.provideSwal||Hs},{provide:on,useValue:e.fireOnInit||!1},{provide:an,useValue:e.dismissOnDestroy||!0}]}}static forChild(e={}){return{ngModule:n,providers:[...e.provideSwal?[sn,{provide:Et,useValue:e.provideSwal}]:[],...void 0!==e.fireOnInit?[{provide:on,useValue:e.fireOnInit}]:[],...void 0!==e.dismissOnDestroy?[{provide:an,useValue:e.dismissOnDestroy}]:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[M.ez]]}),n})();var C=x(3353),F=(x(1135),x(7579)),ln=x(9646);x(5684),x(1884);var cn=x(2722),y=x(1281),dn=x(9751);x(8372);let hn=(()=>{class n{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),It=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[hn]}),n})();var tl=x(2289);const vn="cdk-high-contrast-black-on-white",bn="cdk-high-contrast-white-on-black",At="cdk-high-contrast-active";let yn=(()=>{class n{constructor(e,i){this._platform=e,this._document=i,this._breakpointSubscription=(0,d.f3M)(tl.Yg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(At,vn,bn),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?e.add(At,vn):2===i&&e.add(At,bn)}}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(C.t4),d.LFG(M.K0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ml=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(yn))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[It]}),n})();const gl=new d.OlP("cdk-dir-doc",{providedIn:"root",factory:function _l(){return(0,d.f3M)(M.K0)}}),vl=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let yl=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new d.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function bl(n){const t=n?.toLowerCase()||"";return"auto"===t&&typeof navigator<"u"&&navigator?.language?vl.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(gl,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ie=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const wl=new d.OlP("mat-sanity-checks",{providedIn:"root",factory:function xl(){return!0}});let H=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!(0,C.Oy)()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(yn),d.LFG(wl,8),d.LFG(M.K0))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ie,Ie]}),n})();const Dl=new d.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function El(){return(0,d.f3M)(d.soG)}});class W{constructor(){this._localeChanges=new F.x,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return null==t||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let i=this.isValid(t),r=this.isValid(e);return i&&r?!this.compareDate(t,e):i==r}return t==e}clampDate(t,e,i){return e&&this.compareDate(t,e)<0?e:i&&this.compareDate(t,i)>0?i:t}}const Rt=new d.OlP("mat-date-formats"),Il=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function Ot(n,t){const e=Array(n);for(let i=0;i<n;i++)e[i]=t(i);return e}let Al=(()=>{class n extends W{constructor(e,i){super(),this.useUtcForDisplay=!1,super.setLocale(e)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){const i=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return Ot(12,r=>this._format(i,new Date(2017,r,1)))}getDateNames(){const e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return Ot(31,i=>this._format(e,new Date(2017,0,i+1)))}getDayOfWeekNames(e){const i=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return Ot(7,r=>this._format(i,new Date(2017,0,r+1)))}getYearName(e){const i=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(i,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,i,r){let o=this._createDateWithOverflow(e,i,r);return o.getMonth(),o}today(){return new Date}parse(e,i){return"number"==typeof e?new Date(e):e?new Date(Date.parse(e)):null}format(e,i){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");const r=new Intl.DateTimeFormat(this.locale,{...i,timeZone:"utc"});return this._format(r,e)}addCalendarYears(e,i){return this.addCalendarMonths(e,12*i)}addCalendarMonths(e,i){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+i,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+i)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,i){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+i)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if("string"==typeof e){if(!e)return null;if(Il.test(e)){let i=new Date(e);if(this.isValid(i))return i}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,i,r){const o=new Date;return o.setFullYear(e,i,r),o.setHours(0,0,0,0),o}_2digit(e){return("00"+e).slice(-2)}_format(e,i){const r=new Date;return r.setUTCFullYear(i.getFullYear(),i.getMonth(),i.getDate()),r.setUTCHours(i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds()),e.format(r)}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(Dl,8),d.LFG(C.t4))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Rl={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let Ol=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[{provide:W,useClass:Al}]}),n})(),Cn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[{provide:Rt,useValue:Rl}],imports:[Ol]}),n})(),Tl=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Dn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[H,H]}),n})(),Pt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Dn,H,H]}),n})(),En=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[H,H]}),n})();x(7340);let Ge=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[M.ez,H,It,H]}),n})(),In=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),An=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[In,Dn,H,It,In,H]}),n})();var nc=x(4968),Rn=x(4408),he=x(727);const Re={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=Re;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(o=>{e=void 0,n(o)});return new he.w0(()=>e?.(r))},requestAnimationFrame(...n){const{delegate:t}=Re;return(t?.requestAnimationFrame||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=Re;return(t?.cancelAnimationFrame||cancelAnimationFrame)(...n)},delegate:void 0};var On=x(640);new class oc extends On.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class rc extends Rn.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Re.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(Re.cancelAnimationFrame(e),t._scheduled=void 0)}});let Ft,sc=1;const Xe={};function Tn(n){return n in Xe&&(delete Xe[n],!0)}const lc={setImmediate(n){const t=sc++;return Xe[t]=!0,Ft||(Ft=Promise.resolve()),Ft.then(()=>Tn(t)&&n()),t},clearImmediate(n){Tn(n)}},{setImmediate:cc,clearImmediate:dc}=lc,qe={setImmediate(...n){const{delegate:t}=qe;return(t?.setImmediate||cc)(...n)},clearImmediate(n){const{delegate:t}=qe;return(t?.clearImmediate||dc)(n)},delegate:void 0};new class uc extends On.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class hc extends Rn.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=qe.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(qe.clearImmediate(e),t._scheduled=void 0)}});var Pn=x(3601),fc=x(9300);let gc=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new F.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new dn.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe((0,Pn.e)(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,ln.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe((0,fc.h)(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&i.push(o)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=(0,y.fI)(i),o=e.getElementRef().nativeElement;do{if(r==o)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const e=this._getWindow();return(0,nc.R)(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(d.R0b),d.LFG(C.t4),d.LFG(M.K0,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fn=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new F.x,this._changeListener=o=>{this._change.next(o)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect();return{top:-o.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-o.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe((0,Pn.e)(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(C.t4),d.LFG(d.R0b),d.LFG(M.K0,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Nt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),Nn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Ie,Nt,Ie,Nt]}),n})();class Lt{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class vc extends Lt{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class bc extends Lt{constructor(t,e,i,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class yc extends Lt{constructor(t){super(),this.element=t instanceof d.SBq?t.nativeElement:t}}class wc extends class xc{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof vc?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof bc?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof yc?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(t,e,i,r,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=a=>{const s=a.element,l=this._document.createComment("dom-portal");s.parentNode.insertBefore(l,s),this.outletElement.appendChild(s),this._attachedPortal=a,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(s,l)})},this._document=o}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||d.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let Ln=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();var Cc=x(6451),Mc=x(5698);const Vn=(0,C.Mq)();class kc{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=(0,y.HM)(-this._previousScrollPosition.left),t.style.top=(0,y.HM)(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,o=i.scrollBehavior||"",a=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),Vn&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Vn&&(i.scrollBehavior=o,r.scrollBehavior=a)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class Sc{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class Bn{enable(){}disable(){}attach(){}}function Vt(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function zn(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class Dc{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();Vt(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Ec=(()=>{class n{constructor(e,i,r,o){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new Bn,this.close=a=>new Sc(this._scrollDispatcher,this._ngZone,this._viewportRuler,a),this.block=()=>new kc(this._viewportRuler,this._document),this.reposition=a=>new Dc(this._scrollDispatcher,this._viewportRuler,this._ngZone,a),this._document=o}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(gc),d.LFG(Fn),d.LFG(d.R0b),d.LFG(M.K0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Ic{constructor(t){if(this.scrollStrategy=new Bn,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class Ac{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}let Hn=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(M.K0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rc=(()=>{class n extends Hn{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const o=this._attachedOverlays;for(let a=o.length-1;a>-1;a--)if(o[a]._keydownEvents.observers.length>0){const s=o[a]._keydownEvents;this._ngZone?this._ngZone.run(()=>s.next(r)):s.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(M.K0),d.LFG(d.R0b,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oc=(()=>{class n extends Hn{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=(0,C.sA)(o)},this._clickListener=o=>{const a=(0,C.sA)(o),s="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:a;this._pointerDownEventTarget=null;const l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){const h=l[c];if(h._outsidePointerEvents.observers.length<1||!h.hasAttached())continue;if(h.overlayElement.contains(a)||h.overlayElement.contains(s))break;const u=h._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(o)):u.next(o)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(M.K0),d.LFG(C.t4),d.LFG(d.R0b,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Yn=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||(0,C.Oy)()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}const i=this._document.createElement("div");i.classList.add(e),(0,C.Oy)()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(M.K0),d.LFG(C.t4))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Tc{constructor(t,e,i,r,o,a,s,l,c,h=!1){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=o,this._keyboardDispatcher=a,this._document=s,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=h,this._backdropElement=null,this._backdropClick=new F.x,this._attachments=new F.x,this._detachments=new F.x,this._locationChanges=he.w0.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new F.x,this._outsidePointerEvents=new F.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,Mc.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof e?.onDestroy&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){const t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config={...this._config,...t},this._updateElementSize()}setDirection(t){this._config={...this._config,direction:t},this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=(0,y.HM)(this._config.width),t.height=(0,y.HM)(this._config.height),t.minWidth=(0,y.HM)(this._config.minWidth),t.minHeight=(0,y.HM)(this._config.minHeight),t.maxWidth=(0,y.HM)(this._config.maxWidth),t.maxHeight=(0,y.HM)(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;if(t){if(this._animationsDisabled)return void this._disposeBackdrop(t);t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,i){const r=(0,y.Eq)(e||[]).filter(o=>!!o);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe((0,cn.R)((0,Cc.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const jn="cdk-overlay-connected-position-bounding-box",Pc=/([A-Za-z%]+)$/;class Fc{constructor(t,e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new F.x,this._resizeSubscription=he.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(jn),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,o=[];let a;for(let s of this._preferredPositions){let l=this._getOriginPoint(t,r,s),c=this._getOverlayPoint(l,e,s),h=this._getOverlayFit(c,e,i,s);if(h.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(s,l);this._canFitWithFlexibleDimensions(h,c,i)?o.push({position:s,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,s)}):(!a||a.overlayFit.visibleArea<h.visibleArea)&&(a={overlayFit:h,overlayPoint:c,originPoint:l,position:s,overlayRect:e})}if(o.length){let s=null,l=-1;for(const c of o){const h=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);h>l&&(l=h,s=c)}return this._isPushed=!1,void this._applyPosition(s.position,s.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(a.position,a.originPoint);this._applyPosition(a.position,a.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&te(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(jn),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,o;if("center"==i.originX)r=t.left+t.width/2;else{const a=this._isRtl()?t.right:t.left,s=this._isRtl()?t.left:t.right;r="start"==i.originX?a:s}return e.left<0&&(r-=e.left),o="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,i){let r,o;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,o="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,i,r){const o=Un(e);let{x:a,y:s}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(a+=l),c&&(s+=c);let p=0-s,f=s+o.height-i.height,m=this._subtractOverflows(o.width,0-a,a+o.width-i.width),g=this._subtractOverflows(o.height,p,f),b=m*g;return{visibleArea:b,isCompletelyWithinViewport:o.width*o.height===b,fitsInViewportVertically:g===o.height,fitsInViewportHorizontally:m==o.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,o=i.right-e.x,a=Wn(this._overlayRef.getConfig().minHeight),s=Wn(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportHorizontally||null!=s&&s<=o;return(t.fitsInViewportVertically||null!=a&&a<=r)&&c}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=Un(e),o=this._viewportRect,a=Math.max(t.x+r.width-o.width,0),s=Math.max(t.y+r.height-o.height,0),l=Math.max(o.top-i.top-t.y,0),c=Math.max(o.left-i.left-t.x,0);let h=0,u=0;return h=r.width<=o.width?c||-a:t.x<this._viewportMargin?o.left-i.left-t.x:0,u=r.height<=o.height?l||-s:t.y<this._viewportMargin?o.top-i.top-t.y:0,this._previousPushAmount={x:h,y:u},{x:t.x+h,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Ac(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let o,a,s,h,u,p;if("top"===e.overlayY)a=t.y,o=i.height-a+this._viewportMargin;else if("bottom"===e.overlayY)s=i.height-t.y+2*this._viewportMargin,o=i.height-s+this._viewportMargin;else{const f=Math.min(i.bottom-t.y+i.top,t.y),m=this._lastBoundingBoxSize.height;o=2*f,a=t.y-f,o>m&&!this._isInitialRender&&!this._growAfterOpen&&(a=t.y-m/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)p=i.width-t.x+this._viewportMargin,h=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)u=t.x,h=i.right-t.x;else{const f=Math.min(i.right-t.x+i.left,t.x),m=this._lastBoundingBoxSize.width;h=2*f,u=t.x-f,h>m&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-m/2)}return{top:a,left:u,bottom:s,right:p,width:h,height:o}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const o=this._overlayRef.getConfig().maxHeight,a=this._overlayRef.getConfig().maxWidth;r.height=(0,y.HM)(i.height),r.top=(0,y.HM)(i.top),r.bottom=(0,y.HM)(i.bottom),r.width=(0,y.HM)(i.width),r.left=(0,y.HM)(i.left),r.right=(0,y.HM)(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",o&&(r.maxHeight=(0,y.HM)(o)),a&&(r.maxWidth=(0,y.HM)(a))}this._lastBoundingBoxSize=i,te(this._boundingBox.style,r)}_resetBoundingBoxStyles(){te(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){te(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,a=this._overlayRef.getConfig();if(r){const h=this._viewportRuler.getViewportScrollPosition();te(i,this._getExactOverlayY(e,t,h)),te(i,this._getExactOverlayX(e,t,h))}else i.position="static";let s="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(s+=`translateX(${l}px) `),c&&(s+=`translateY(${c}px)`),i.transform=s.trim(),a.maxHeight&&(r?i.maxHeight=(0,y.HM)(a.maxHeight):o&&(i.maxHeight="")),a.maxWidth&&(r?i.maxWidth=(0,y.HM)(a.maxWidth):o&&(i.maxWidth="")),te(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(o.y+this._overlayRect.height)+"px":r.top=(0,y.HM)(o.y),r}_getExactOverlayX(t,e,i){let a,r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,i)),a=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===a?r.right=this._document.documentElement.clientWidth-(o.x+this._overlayRect.width)+"px":r.left=(0,y.HM)(o.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:zn(t,i),isOriginOutsideView:Vt(t,i),isOverlayClipped:zn(e,i),isOverlayOutsideView:Vt(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?t.offsetX??this._offsetX:t.offsetY??this._offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&(0,y.Eq)(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof d.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function te(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function Wn(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(Pc);return e&&"px"!==e?null:parseFloat(t)}return n||null}function Un(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const $n="cdk-global-overlay-wrapper";class Nc{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add($n),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:a,maxHeight:s}=i,l=!("100%"!==r&&"100vw"!==r||a&&"100%"!==a&&"100vw"!==a),c=!("100%"!==o&&"100vh"!==o||s&&"100%"!==s&&"100vh"!==s),h=this._xPosition,u=this._xOffset,p="rtl"===this._overlayRef.getConfig().direction;let f="",m="",g="";l?g="flex-start":"center"===h?(g="center",p?m=u:f=u):p?"left"===h||"end"===h?(g="flex-end",f=u):("right"===h||"start"===h)&&(g="flex-start",m=u):"left"===h||"start"===h?(g="flex-start",f=u):("right"===h||"end"===h)&&(g="flex-end",m=u),t.position=this._cssPosition,t.marginLeft=l?"0":f,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":m,e.justifyContent=g,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove($n),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Lc=(()=>{class n{constructor(e,i,r,o){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=o}global(){return new Nc}flexibleConnectedTo(e){return new Fc(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(Fn),d.LFG(M.K0),d.LFG(C.t4),d.LFG(Yn))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Vc=0,Bt=(()=>{class n{constructor(e,i,r,o,a,s,l,c,h,u,p,f){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=a,this._injector=s,this._ngZone=l,this._document=c,this._directionality=h,this._location=u,this._outsideClickDispatcher=p,this._animationsModuleType=f}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),o=this._createPortalOutlet(r),a=new Ic(e);return a.direction=a.direction||this._directionality.value,new Tc(o,i,r,a,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Vc++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(d.z2F)),new wc(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(d.LFG(Ec),d.LFG(Yn),d.LFG(d._Vd),d.LFG(Lc),d.LFG(Rc),d.LFG(d.zs3),d.LFG(d.R0b),d.LFG(M.K0),d.LFG(yl),d.LFG(M.Ye),d.LFG(Oc),d.LFG(d.QbO,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Hc={provide:new d.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Bt],useFactory:function zc(n){return()=>n.scrollStrategies.reposition()}};let Yc=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Bt,Hc],imports:[Ie,Ln,Nn,Nn]}),n})(),Gn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})(),Xn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Tl],imports:[Gn,Ge,H,Gn,Ge]}),n})(),$c=(()=>{class n{constructor(){this.changes=new F.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,i){return`${e} \u2013 ${i}`}formatYearRangeLabel(e,i){return`${e} to ${i}`}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const id={provide:new d.OlP("mat-datepicker-scroll-strategy"),deps:[Bt],useFactory:function td(n){return()=>n.scrollStrategies.reposition()}};let Zn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[$c,id],imports:[M.ez,Pt,Yc,ml,Ln,H,Nt]}),n})();const sd=[M.ez,Y.u5,Xn,Pt,En,Ge,An,Cn,Zn];let ld=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[sd,M.ez,Y.u5,Xn,Pt,En,Ge,An,Cn,Zn]}),n})(),pd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[M.ez]]}),n})();var Jn=x(7524);let fd=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[M.ez,lr,U.dTQ,U.hJ1,U.zE6,cr.QX,U.ejP,Y.u5,Ss,U.TXv,U.fxp,U.m81,U.FxY,[Ys.forRoot()],ld,U.Fme,pd,Jn.IJ,Jn.bz]}),n})()}}]);